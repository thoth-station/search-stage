(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],{281:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),r=t(46),o=t.n(r),c=t(216),l=t(33),s=new l.QueryClient({defaultOptions:{queries:{useErrorBoundary:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}}}),d=t(54),u=t(23),v=t(7),j=t(399),p=t(406),h=t(153),b=t(401),m=t(414),O=t(383),f=t(92),x=t(382),g=t(12),y=t(68),k=t(0),_=["children","value","index"],w=function(e){var n=e.children,t=e.value,a=e.index,i=Object(y.a)(e,_);return Object(k.jsx)("div",Object(g.a)(Object(g.a)({role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),className:"".concat(i.className)},i),{},{children:t===a&&n}))},E=t.p+"static/media/thoth-logo.1a28a729.png",S=t(45),C=t(30),A=t.n(C),N=t(408),L=t(407),P=t(40),R=function(e){var n=e.onChange,t=e.onEnter,a=e.label,i=e.helpertext,r=e.boxprops,o=e.error,c=void 0!==o&&o,l=e.lefticon,s=e.righticon;return Object(k.jsxs)(p.a,{children:[Object(k.jsx)(h.a,{variant:"body1",sx:{color:c?"error.main":"text.secondary"},children:a}),Object(k.jsxs)(L.a,Object(g.a)(Object(g.a)({component:"form",variant:"outlined",sx:{p:"8px 4px",display:"flex",alignItems:"center",borderColor:c?"red":void 0,paddingLeft:2,paddingRight:2}},r),{},{children:[l,Object(k.jsx)(P.c,Object(g.a)({sx:{ml:1,flex:1},placeholder:i,error:c,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(t(),e.preventDefault())}},e)),s]}))]})},V=t(103),M=t.n(V),T=t(42),I=t.n(T),B="https://stage.thoth-station.ninja/api/v1",q={manipulation:{enabled:!1,editNode:function(e,n){e.fixed=!e.fixed.x,n(e)}},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},F=function(){var e=Object(S.a)(A.a.mark((function e(n,t,a,i,r,o){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get(B+"/python/package/version/metadata",{params:{name:n,version:t,index:a,os_name:i,os_version:r,python_version:o},headers:{accept:"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t,a,i,r,o){return e.apply(this,arguments)}}(),z=function(e,n){return Object(l.useQueries)(e.map((function(e){return Object(g.a)(Object(g.a)({},n),{},{queryKey:["packageMetadata",e.name,e.version,e.index,e.os_name,e.os_version,e.python_version],queryFn:function(){return F(e.name,e.version,e.index,e.os_name,e.os_version,e.python_version)}})})))};var W=function(){var e=Object(u.g)(),n=Object(a.useState)(""),t=Object(v.a)(n,2),i=t[0],r=t[1],o=Object(a.useState)(""),c=Object(v.a)(o,2),l=c[0],s=c[1],d=function(){var n=Object(S.a)(A.a.mark((function n(){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==i){n.next=2;break}return n.abrupt("return");case 2:(t=i,a=void 0,I.a.get("https://pypi.org/pypi/"+t+(a?"/"+a:"")+"/json").catch((function(){}))).then((function(n){e("/package/"+n.data.info.name)})).catch((function(){s("Package does not exist")}));case 3:case"end":return n.stop()}var t,a}),n)})));return function(){return n.apply(this,arguments)}}();return Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(k.jsx)(h.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==l&&void 0!==l?l:""})}),Object(k.jsxs)(j.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:10,children:Object(k.jsx)(R,{error:""!==l,onChange:function(e){return function(e){r(e.target.value),""!==l&&s("")}(e)},helpertext:"Search for a Python package",type:"search",boxprops:{mr:2},lefticon:Object(k.jsx)(M.a,{})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:2,children:Object(k.jsx)(N.a,{variant:"contained",color:"primary",onClick:function(){return d()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]})},D=t(3),G=t(409),H=t(391),K=t(432),U=function(e,n,t){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:n},runtime_environment:t};return I.a.post(B+"/advise/python",a,{params:{recommendation_type:"stable",limit:500},headers:{accept:"application/json","Content-Type":"application/json"}})},Q=t(392),J=t(376),Y=t(387),Z=Object(J.a)();function X(e){var n,t=e.suggestions,i=e.label,r=e.help,o=e.required,c=e.error,l=e.value,s=e.setValue;return t=Object(a.useMemo)((function(){return t.map((function(e){return{title:e}}))}),[t]),Object(k.jsx)(Y.a,{value:l,onChange:function(e,n){"string"===typeof n?s(n):n&&n.inputValue?s({title:n.inputValue}):s(n)},filterOptions:function(e,n){var t=Z(e,n),a=n.inputValue,i=e.some((function(e){return a===e.title}));return""===a||i||t.push({inputValue:a,title:'Add "'.concat(a,'"')}),t},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==(n=t)&&void 0!==n?n:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,n){return Object(k.jsx)("li",Object(g.a)(Object(g.a)({},e),{},{children:n.title}))},freeSolo:!0,renderInput:function(e){return Object(k.jsx)(Q.a,Object(g.a)(Object(g.a)({fullWidth:!0},e),{},{label:i,required:o,error:void 0!==c,helperText:r}))}})}function $(e,n){var t;switch(n.type){case"loading":return Object(g.a)(Object(g.a)({},e),{},{loading:n.payload});case"error":return Object(g.a)(Object(g.a)({},e),{},{error:Object(g.a)(Object(g.a)({},e.error),{},Object(D.a)({},n.param,n.payload))});case"clear-error":return e.error={},e;case"input":return Object(g.a)(Object(g.a)({},e),{},(t={},Object(D.a)(t,n.param,n.payload),Object(D.a)(t,"error",Object(g.a)(Object(g.a)({},e.error),{},Object(D.a)({},n.param,void 0))),t));default:throw new Error("Advise state dispatch error")}}var ee={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",platform:"",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},ne=function(){var e,n,t,i,r,o,c,l,s,d,p,b,m,O,f,x,g,y,_,w=Object(u.g)(),E=Object(a.useReducer)($,ee),C=Object(v.a)(E,2),P=C[0],V=C[1],T=function(){if("id"!==P.lookupType){var e=!0;return P.pipfile||(e=!1,V({type:"error",param:"pipfile",payload:"Field cant be empty"})),P.pipfileLock||(e=!1,V({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),P.name||(e=!1,V({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!P.id||""===P.id)||(V({type:"error",param:"id",payload:"Field cant be empty"}),!1)},I=function(){var e=Object(S.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.loading&&T()){e.next=2;break}return e.abrupt("return");case 2:"id"===P.lookupType?w("/advise/"+P.id):(V({type:"loading",payload:!0}),n={operating_system:{name:P.operating_system_name,version:P.operating_system_version},platform:P.platform,python_version:P.python_version,base_image:P.base_image,cuda_version:P.cuda_version,cudnn_version:P.cudnn_version,mkl_version:P.mkl_version,name:P.name,openblas_version:P.openblas_version,openmpi_version:P.openmpi_version},Object.keys(n).forEach((function(e){""===n[e]&&delete n[e]})),""!==n.operating_system.name&&""!==n.operating_system.version||delete n.operating_system,U(P.pipfile,P.pipfileLock,n).then((function(e){V({type:"loading",payload:!1}),w("/advise/"+e.data.analysis_id)})).catch((function(e){var n,t,a,i,r,o,c,l,s;if(V({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))if(null!==e&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.includes("Pipfile.lock"))V({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(l=e.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.error});else if(null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&null!==(c=o.error)&&void 0!==c&&c.includes("Pipfile")){var d,u;V({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(d=e.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error})}})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(G.a,{in:"id"===P.lookupType,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:12,children:Object(k.jsx)(h.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=P.error)||void 0===e?void 0:e.id})}),Object(k.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:10,children:Object(k.jsx)(R,{error:null===(n=P.error)||void 0===n?void 0:n.id,onChange:function(e){return V({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{mr:2},lefticon:Object(k.jsx)(M.a,{})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:2,children:Object(k.jsx)(N.a,{variant:"contained",color:"primary",onClick:function(){return I()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]}),Object(k.jsx)(N.a,{onClick:function(){return V({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"})]})}),Object(k.jsx)(G.a,{in:"manual"===P.lookupType,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(h.a,{variant:"h6",mt:3,children:"Advise Parameters"}),Object(k.jsxs)(L.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(k.jsxs)(j.a,{container:!0,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(R,{label:null!==(t=P.error)&&void 0!==t&&t.pipfile?null===(i=P.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return V({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=P.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(R,{label:null!==(o=P.error)&&void 0!==o&&o.pipfileLock?null===(c=P.error)||void 0===c?void 0:c.pipfileLock:"Pipfile.lock contents",onChange:function(e){return V({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(l=P.error)||void 0===l?void 0:l.pipfileLock),multiline:!0,rows:8})})]}),Object(k.jsxs)(j.a,{container:!0,mt:4,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(H.a,{onChange:function(e){return V({type:"input",param:"base_image",payload:e.target.value})},value:P.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:null===(s=P.error)||void 0===s?void 0:s.base_image})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"cuda_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:null===(d=P.error)||void 0===d?void 0:d.cuda_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"cudnn_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:null===(p=P.error)||void 0===p?void 0:p.cudnn_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"mkl_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:null===(b=P.error)||void 0===b?void 0:b.mkl_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"name",payload:null!==(n=e.title)&&void 0!==n?n:""})},value:P.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:null===(m=P.error)||void 0===m?void 0:m.name})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"openblas_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:null===(O=P.error)||void 0===O?void 0:O.openblas_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"openmpi_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:null===(f=P.error)||void 0===f?void 0:f.openmpi_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(H.a,{onChange:function(e){return V({type:"input",param:"operating_system_name",payload:e.target.value})},value:P.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:null===(x=P.error)||void 0===x?void 0:x.operating_system_name})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(H.a,{onChange:function(e){return V({type:"input",param:"operating_system_version",payload:e.target.value})},value:P.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:null===(g=P.error)||void 0===g?void 0:g.operating_system_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"platform",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.platform,suggestions:["linux-x86_64"],label:"Platform",required:!1,help:"Platform used - corresponds to sysconfig.get_platform() call.",error:null===(y=P.error)||void 0===y?void 0:y.platform})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(X,{setValue:function(e){var n;return V({type:"input",param:"python_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:P.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:null===(_=P.error)||void 0===_?void 0:_.python_version})}),Object(k.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:6,md:6,children:Object(k.jsx)(N.a,{variant:"outlined",color:"primary",onClick:function(){return V({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Cancel"})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(K.a,{variant:"contained",color:"primary",onClick:function(){return I()},loading:P.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})},te=function(){var e=Object(a.useState)("multiple"),n=Object(v.a)(e,2),t=n[0],i=n[1],r=Object(f.a)(),o=Object(x.a)(r.breakpoints.up("sm"));return Object(k.jsx)("div",{style:{maxWidth:"1000px",marginLeft:"auto",marginRight:"auto"},children:Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(p.a,{sx:{marginTop:10},children:Object(k.jsx)("img",{alt:"Thoth Logo",src:E,height:o?300:"auto",width:"100%"})})}),Object(k.jsxs)(j.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(k.jsxs)(j.a,{container:!0,item:!0,sm:12,md:6,align:"center",mr:5,children:[Object(k.jsx)(j.a,{item:!0,xs:12,align:"left",mb:3,children:Object(k.jsx)(h.a,{variant:"h4",children:Object(k.jsx)("b",{children:"Thoth Search"})})}),Object(k.jsx)(j.a,{item:!0,xs:12,align:"left",children:Object(k.jsx)(h.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyse and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyse a single Python package to see what Thoth knows about the package."})})]}),Object(k.jsx)(j.a,{item:!0,container:!0,sm:12,md:5,direction:"column",justifyContent:"center",spacing:1,children:[["One","100k"],["Two","20%"],["Three","62"],["Four","N/A"]].map((function(e,n){return Object(k.jsxs)(j.a,{item:!0,container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(h.a,{variant:"h6",children:Object(k.jsxs)("b",{children:["Thoth Statistic ",e[0]]})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(h.a,{variant:"h5",align:"right",children:e[1]})})]},n)}))}),Object(k.jsx)(j.a,{item:!0,xs:12,align:"center",mt:3,mb:4,children:Object(k.jsxs)(b.a,{value:t,exclusive:!0,onChange:function(e,n){n&&i(n)},size:o?"large":"small",children:[Object(k.jsx)(m.a,{value:"single",children:Object(k.jsx)("b",{children:"single package analysis"})}),Object(k.jsx)(m.a,{value:"multiple",children:Object(k.jsx)("b",{children:"Python application analysis"})})]})}),Object(k.jsxs)(j.a,{item:!0,xs:12,children:[Object(k.jsx)(O.a,{sx:{marginBottom:3}}),Object(k.jsx)(w,{value:t,index:"single",children:Object(k.jsx)(W,{})}),Object(k.jsx)(w,{value:t,index:"multiple",children:Object(k.jsx)(ne,{})})]})]})]})})},ae=function(){return Object(k.jsx)("div",{children:"404"})},ie=t(390),re=function(){return Object(k.jsx)(p.a,{pb:3,pt:6,sx:{backgroundColor:"#444f60",textAlign:"center",color:"white"},children:"This is a footer"})},oe=Object(ie.a)((function(e){return{root:{marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4),marginBottom:e.spacing(15),minHeight:"100vh"}}})),ce=function(e){var n=e.children,t=oe();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:t.root,children:n}),Object(k.jsx)(re,{})]})},le=t(393),se=t(415),de=function(e){var n=e.children,t=e.header,a=Object(u.f)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{children:[t,Object(k.jsxs)(le.a,{value:a.pathname.split("/").at(-1),indicatorColor:"primary",textColor:"primary",children:[Object(k.jsx)(se.a,{label:"Summary",value:"summary",component:d.b,to:"summary"}),Object(k.jsx)(se.a,{label:"Advise Results",value:"details",component:d.b,to:"details"})]})]}),Object(k.jsx)("div",{children:n})]})},ue=t(416),ve=t(417),je=t(418),pe=Object(ie.a)({root:{minWidth:275,height:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),he=function(e){var n=e.cardMeta,t=e.cardBody,a=e.cardAction,i=pe();return Object(k.jsxs)(ue.a,{className:i.root,children:[Object(k.jsx)(ve.a,{action:a,title:Object(k.jsx)(h.a,{variant:"h5",children:n.title}),subheader:n.subTitle}),Object(k.jsx)(je.a,{children:t})]})},be=t(402),me=t(203),Oe=t.n(me),fe=t(204),xe=t.n(fe),ge=["text","icon","link","className"],ye=Object(ie.a)((function(){return{root:{display:"flex",alignItems:"center"}}})),ke=function(e){var n=e.text,t=e.icon,a=e.link,i=e.className,r=Object(y.a)(e,ge),o=ye();return Object(k.jsxs)("div",Object(g.a)(Object(g.a)({className:"".concat(o.root," ").concat(i)},r),{},{children:[t,Object(k.jsx)(h.a,{href:a||null,variant:"body2",marginLeft:!0,children:n})]}))};function _e(e){return Object.entries(e.requirements_locked.default).map((function(n){var t=Object(v.a)(n,2);return{name:t[0],version:t[1].version.replace("==",""),index:"https://pypi.org/simple",os_name:e.runtime_environment.operating_system.name,os_version:e.runtime_environment.operating_system.version,python_version:e.runtime_environment.python_version}}))}function we(e){var n=Math.floor((new Date-e)/1e3),t=n/31536e3;if(t>1){var a=Math.floor(t);return a+" year"+(1!==a?"s":"")}if((t=n/2592e3)>1){var i=Math.floor(t);return i+" month"+(1!==i?"s":"")}if((t=n/86400)>1){var r=Math.floor(t);return r+" day"+(1!==r?"s":"")}if((t=n/3600)>1){var o=Math.floor(t);return o+" hour"+(1!==o?"s":"")}if((t=n/60)>1){var c=Math.floor(t);return c+" minute"+(1!==c?"s":"")}var l=Math.floor(n);return l+" second"+(1!==l?"s":"")}var Ee=t(19),Se=function(e,n){if(e&&n){var t=new Map;n.forEach((function(e){e.package_name&&(t.has(e.package_name)?t.set(e.package_name,[].concat(Object(Ee.a)(t.get(e.package_name)),[e])):t.set(e.package_name,[e]))})),e.forEach((function(n){var a={package:n.key};if("removed"===n.value.change?(a.header="".concat(n.value.label," was ").concat(0===n.value.depth?"directly":"indirectly"," removed by Thoth resolver."),a.reasons=function(e,n){var t=new Map,a=[];a.push(e);for(var i=[],r=function(){var r=a.pop();r&&!t.has(r)&&(t.set(r),"version"===r.value.change?i.push(r):r.parents.forEach((function(t){"*App"!==t?a.push(n.get(t)):r.key!==e.key&&i.push(r)})))};0!==a.length;)r();return i.map((function(n){var t="version"===n.value.change?" had its version changed to "+n.value.version+" from "+n.value.oldVersion+". Version "+n.value.oldVersion+" of "+n.key+" included package "+e.value.label+" as a dependency, where version "+n.value.version+" does not. ":" did not have any dependents and was removed by the Thoth resolver.";return{package:n.key,reason:t}}))}(n,e),0===a.reasons.length&&(a.header="".concat(n.value.label," was removed for an unknown reason. The package does not have dependents in the Pipfile.lock."))):"added"===n.value.change?a.header="".concat(n.value.label," was added to the Pipfile.lock by Thoth resolver."):"version"===n.value.change?a.header="".concat(n.key," had its version changed from ").concat(n.value.oldVersion," to ").concat(n.value.version,"."):a.header="Thoth resolver did not remove or change package "+n.value.label+".",t.has(n.key)){var i=t.get(n.key);a=Object(g.a)(Object(g.a)({},a),{},{thoth:i})}n.value.justifications=a}),[])}},Ce=t(394),Ae=["info"],Ne=function(e){var n=e.info,t=Object(y.a)(e,Ae);return Object(k.jsx)(Ce.a,{className:null===t||void 0===t?void 0:t.className,action:Object(k.jsx)(N.a,{color:"inherit",size:"small",href:null===n||void 0===n?void 0:n.link,children:"DETAILS"}),severity:n.type.toLowerCase(),children:null===n||void 0===n?void 0:n.message})},Le=Object(ie.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},marginRight:{marginRight:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3),alignItems:"center"},alert:{width:"100%",marginTop:e.spacing(1)}}})),Pe=function(e){var n,t,r,o,c,l,s,d,u,j,p,b,m,O,f,x=e.adviseDocument,g=e.logs,y=Le(),_=i.a.useState(!1),w=Object(v.a)(_,2),E=w[0],S=w[1],C=i.a.useState(!1),A=Object(v.a)(C,2),L=A[0],P=A[1],R=i.a.useState(),V=Object(v.a)(R,2),M=V[0],T=V[1],I=Object(a.useMemo)((function(){var e,n,t;return null!==x&&void 0!==x&&null!==(e=x.result)&&void 0!==e&&e.report?x.result.report.ERROR?["ERROR","error"]:["COMPLETE","success"]:null!==x&&void 0!==x&&null!==(n=x.result)&&void 0!==n&&n.error?["ERROR","error"]:null!==x&&void 0!==x&&null!==(t=x.status)&&void 0!==t&&t.state?[x.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[x]),B=Object(v.a)(I,2),q=B[0],F=B[1],z=Object(a.useMemo)((function(){var e,n,t,a;if(null!==x&&void 0!==x&&null!==(e=x.result)&&void 0!==e&&e.report)return null!==x&&void 0!==x&&null!==(n=x.result)&&void 0!==n&&null!==(t=n.report)&&void 0!==t&&t.stack_info?null===x||void 0===x||null===(a=x.result)||void 0===a?void 0:a.report.stack_info.filter((function(e){return"ERROR"===e.type})):null}),[x]);return Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{variant:"h4",children:Object(k.jsx)("b",{children:null!==(n=null===x||void 0===x||null===(t=x.metadata)||void 0===t?void 0:t.document_id)&&void 0!==n?n:null===x||void 0===x||null===(r=x.parameters)||void 0===r?void 0:r.analysis_id})}),Object(k.jsxs)("div",{className:y.linksRow,children:[Object(k.jsx)(be.a,{label:q,color:F}),Object(k.jsx)(ke,{className:y.marginLeft,text:(m=null===x||void 0===x||null===(o=x.status)||void 0===o?void 0:o.finished_at,O=null===x||void 0===x||null===(c=x.status)||void 0===c?void 0:c.started_at,f=null===x||void 0===x||null===(l=x.metadata)||void 0===l?void 0:l.datetime,m?"Advise finished "+we(new Date(m))+" ago.":O?"Advise started "+we(new Date(O))+" ago.":f?"Advise finished "+we(new Date(f+"Z"))+" ago.":"Time started/finished not available"),icon:Object(k.jsx)(Oe.a,{})}),Object(k.jsx)(N.a,{sx:{marginLeft:2},onClick:function(){return P(!L)},children:Object(k.jsx)(ke,{text:"Logs",icon:Object(k.jsx)(xe.a,{})})})]}),Object(k.jsx)(h.a,{variant:"subtitle2",children:null!==(s=null!==(d=null===x||void 0===x||null===(u=x.result)||void 0===u||null===(j=u.report)||void 0===j?void 0:j.ERROR)&&void 0!==d?d:null===x||void 0===x?void 0:x.error)&&void 0!==s?s:null===x||void 0===x||null===(p=x.result)||void 0===p?void 0:p.error_msg}),(null===z||void 0===z?void 0:z.length)>0?Object(k.jsxs)("div",{children:[Object(k.jsx)(Ne,{info:z[0]}),Object(k.jsx)(G.a,{in:E,timeout:"auto",unmountOnExit:!0,children:null===z||void 0===z?void 0:z.slice(1).map((function(e,n){return Object(k.jsx)(Ne,{info:e,className:y.alert},n)}))}),Object(k.jsx)(N.a,{color:"inherit",size:"small",onClick:function(){return S(!E)},children:(null===z||void 0===z?void 0:z.length)>1?E?"LESS":"MORE":null})]}):null,Object(k.jsx)(G.a,{in:L,children:null!==(b=null===g||void 0===g?void 0:g.split("\n").map((function(e,n){return Object(k.jsx)(h.a,{noWrap:M!==n,onClick:function(){return T(M===n?void 0:n)},variant:"body2",sx:{backgroundColor:M===n?"lightyellow":n%2===0?"lightgray":"unset"},children:e},n)})))&&void 0!==b?b:"Advisor log is not available."}),"COMPLETE"===q?Object(k.jsxs)(h.a,{variant:"body1",sx:{color:"text.secondary"},children:["Thoth has added and removed packages from the original Pipfile.lock, resulting in a ",Object(k.jsx)("i",{children:"new"})," Pipfile.lock. Switch between the new and old Python environments to see the differences."]}):null]})},Re=t(403),Ve=t(430),Me=t(420),Te=Object(Ve.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}}))(Me.a),Ie=Object(ie.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"repeat(6,1fr)",alignItems:"center",gridGap:e.spacing(1)},label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{textAlign:"end"}}})),Be=function(e){var n=e.value,t=e.total,a=e.label,i=e.action,r=Ie();return Object(k.jsxs)(j.a,{container:!0,spacing:1,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:5,children:Object(k.jsx)(h.a,{variant:"body2",className:r.label,children:a})}),Object(k.jsx)(j.a,{item:!0,xs:1.75,children:Object(k.jsx)(h.a,{className:r.value,variant:"body2",children:n})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Te,{variant:"determinate",value:t>0?n/t*100:0})}),Object(k.jsx)(j.a,{item:!0,xs:1,children:Object(k.jsx)("div",{children:null!==i&&void 0!==i?i:null})})]})},qe=function(e){var n,t,a,i,r,o=e.metric,c=(null===o||void 0===o?void 0:o.added)+(null===o||void 0===o?void 0:o.removed)+(null===o||void 0===o?void 0:o.version)+(null===o||void 0===o?void 0:o.unchanged),l=Object.values(null!==(n=null===o||void 0===o?void 0:o.justification)&&void 0!==n?n:{}).reduce((function(e,n){return e+n}),0);return o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(h.a,{variant:"body2",gutterBottom:!0,children:null===o||void 0===o?void 0:o.build}),Object(k.jsx)(h.a,{variant:"h6",gutterBottom:!0,mt:2,children:"What Thoth Changed"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(Be,{value:null!==(t=null===o||void 0===o?void 0:o.added)&&void 0!==t?t:0,total:c,label:"Added Packages",mb:1}),Object(k.jsx)(Be,{value:null!==(a=null===o||void 0===o?void 0:o.removed)&&void 0!==a?a:0,total:c,label:"Removed Packages",mb:1}),Object(k.jsx)(Be,{value:null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0,total:c,label:"Version Changes"}),Object(k.jsx)(h.a,{variant:"h6",mt:3,gutterBottom:!0,children:"Justification Counts"}),Object(k.jsx)(O.a,{mb:1}),Object.entries(null!==(r=null===o||void 0===o?void 0:o.justification)&&void 0!==r?r:{}).map((function(e){var n=Object(v.a)(e,2),t=n[0],a=n[1];return Object(k.jsx)(Be,{value:a,total:l,label:t,mb:1},t)}))]}):Object(k.jsxs)(p.a,{children:[Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{width:"60%"})]})},Fe=function(e){var n=e.value,t=e.onChange;return Object(k.jsxs)(b.a,{value:n,exclusive:!0,size:"small",onChange:t,children:[Object(k.jsx)(m.a,{value:"oldGraph",children:"Old"}),Object(k.jsx)(m.a,{value:"newGraph",children:"New"})]})},ze=t(428),We=t(412),De=t(397),Ge=t(384),He=function(e){var n,t,a,i,r,o,c,l=e.all,s=e.roots,d=(null!==(n=null===l||void 0===l?void 0:l.direct)&&void 0!==n?n:0)+(null!==(t=null===l||void 0===l?void 0:l.indirect)&&void 0!==t?t:0)+(null!==(a=null===l||void 0===l?void 0:l.roots)&&void 0!==a?a:0);return l&&s?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(h.a,{variant:"h6",gutterBottom:!0,children:"All Packages"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(Be,{value:null!==(i=null===l||void 0===l?void 0:l.roots)&&void 0!==i?i:0,total:d,label:"Root",mb:1}),Object(k.jsx)(Be,{value:null!==(r=null===l||void 0===l?void 0:l.direct)&&void 0!==r?r:0,total:d,label:"Direct",mb:1}),Object(k.jsx)(Be,{value:null!==(o=null===l||void 0===l?void 0:l.indirect)&&void 0!==o?o:0,total:d,label:"Indirect"}),Object(k.jsx)(h.a,{variant:"h6",gutterBottom:!0,mt:2,children:"Root Packages"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(We.a,{component:"nav",children:Object(k.jsx)(ze.a,{children:null===(c=Object.entries(null!==s&&void 0!==s?s:{}))||void 0===c?void 0:c.map((function(e){var n,t,a,i,r,o,c=Object(v.a)(e,1)[0],l=(null!==(n=s[c].direct)&&void 0!==n?n:0)+(null!==(t=s[c].indirect)&&void 0!==t?t:0);return Object(k.jsx)(G.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(De.a,{children:Object(k.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Ge.a,{primary:c})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsxs)(j.a,{container:!0,direction:"column",children:[Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Be,{value:null!==(a=null===s||void 0===s||null===(i=s[c])||void 0===i?void 0:i.direct)&&void 0!==a?a:0,total:l,label:"Direct"})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Be,{value:null!==(r=null===s||void 0===s||null===(o=s[c])||void 0===o?void 0:o.indirect)&&void 0!==r?r:0,total:l,label:"Indirect"})})]})})]})}),Object(k.jsx)(O.a,{variant:"middle",mb:1})]})},c)}))})})]}):Object(k.jsxs)(p.a,{children:[Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{width:"60%"})]})},Ke=t(207),Ue=t.n(Ke),Qe=t(208),Je=t.n(Qe),Ye=t(206),Ze=t.n(Ye),Xe=t(205),$e=t.n(Xe),en=function(e){var n,t=e.name,a=e.metadata,r=e.packages,o=e.totalLicenses,c=i.a.useState(!1),l=Object(v.a)(c,2),s=l[0],d=l[1];return Object(k.jsxs)(j.a,{container:!0,children:[Object(k.jsx)(j.a,{item:!0,xs:1,children:null===(null===a||void 0===a?void 0:a.isOsiApproved)?Object(k.jsx)($e.a,{}):null!==a&&void 0!==a&&a.isOsiApproved?Object(k.jsx)(Ze.a,{}):null}),Object(k.jsxs)(j.a,{item:!0,xs:!0,children:[Object(k.jsx)(p.a,{onClick:function(){return d(!s)},children:Object(k.jsx)(Be,{value:null!==(n=Object.keys(r).length)&&void 0!==n?n:0,total:o,label:t,action:s?Object(k.jsx)(Ue.a,{}):Object(k.jsx)(Je.a,{})},t)}),Object(k.jsxs)(G.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(k.jsx)(p.a,{my:1,children:Object.entries(r).sort((function(e,n){return e[1]-n[1]})).map((function(e){var n=Object(v.a)(e,2),t=n[0],a=n[1];return Object(k.jsx)(be.a,{sx:{margin:.5},color:0===a.depth?"primary":1===a.depth?"secondary":"default",label:t},t)}))}),Object(k.jsx)(O.a,{})]})]})]})},nn=function(e){var n=e.metric,t=i.a.useState(!1),r=Object(v.a)(t,2),o=r[0],c=r[1],l=Object(a.useMemo)((function(){return Object.entries(null!==n&&void 0!==n?n:{}).sort((function(e,n){return Object.keys(n[1]).length-Object.keys(e[1]).length}))}),[n]),s=Object(a.useMemo)((function(){return Object.entries(null!==n&&void 0!==n?n:{}).reduce((function(e,n){var t=Object(v.a)(n,2)[1];return e+Object.keys(t.packages).length}),0)}),[n]);return n?Object(k.jsxs)("div",{children:[Object(k.jsxs)(j.a,{container:!0,children:[Object(k.jsx)(j.a,{item:!0,xs:1,children:Object(k.jsx)(h.a,{variant:"h6",gutterBottom:!0,children:"OSI"})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(h.a,{variant:"h6",gutterBottom:!0,children:"Dependency Licenses"})})]}),Object(k.jsx)(O.a,{}),Object(k.jsx)(ze.a,{children:null===l||void 0===l?void 0:l.slice(0,10).map((function(e){var n=Object(v.a)(e,2),t=n[0],a=n[1];return Object(k.jsx)(G.a,{children:Object(k.jsx)(en,{name:t,metadata:a.metadata,packages:a.packages,totalLicenses:s})},t)}))}),Object(k.jsx)(G.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(k.jsx)(ze.a,{children:l.slice(10).map((function(e){var n=Object(v.a)(e,2),t=n[0],a=n[1];return Object(k.jsx)(G.a,{children:Object(k.jsx)(en,{name:t,metadata:a.metadata,packages:a.packages,totalLicenses:s})},t)}))})}),Object(k.jsx)(p.a,{textAlign:"center",children:Object(k.jsx)(N.a,{onClick:function(){return c(!o)},color:"primary",children:o?"Less":"More"})})]}):Object(k.jsxs)(p.a,{children:[Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{}),Object(k.jsx)(Re.a,{width:"60%"})]})},tn=t(425),an=t(426),rn=t(427),on=t(422),cn=t(423),ln=t(395),sn=t(211),dn=t.n(sn),un=t(210),vn=t.n(un),jn=t(212),pn=t.n(jn);function hn(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function bn(e,n){return"desc"===e?function(e,t){return hn(e,t,n)}:function(e,t){return-hn(e,t,n)}}function mn(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t.map((function(e){return e[0]}))}var On=t(421),fn=t(404),xn=t(385),gn=[{id:"name",numeric:!1,label:"Package"},{id:"depth",numeric:!0,label:"Depth"},{id:"license",numeric:!1,label:"License"},{id:"dependencies",numeric:!0,label:"Direct Dependencies"}];var yn=function(e){var n=e.order,t=e.orderBy,a=e.onRequestSort;return Object(k.jsx)(On.a,{children:Object(k.jsx)(on.a,{children:gn.map((function(e){return Object(k.jsx)(cn.a,{align:e.numeric?"right":"left",padding:"normal",sortDirection:t===e.id&&n,children:Object(k.jsxs)(fn.a,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,t===e.id?Object(k.jsx)(p.a,{component:"span",sx:xn.a,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})},kn=t(424),_n=t(143),wn=t.n(_n),En=t(149),Sn=t(209),Cn=t.n(Sn),An=t(86),Nn=t(60),Ln=function(){function e(n,t){Object(An.a)(this,e),this.adjacents=new Set,this.key=n,this.value=t}return Object(Nn.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}(),Pn=function(e){var n,t,a,i,r,o,c,l,s,d,u=e.node;return Object(k.jsxs)("div",{children:[Object(k.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(h.a,{variant:"h6",children:Object(k.jsx)("b",{children:u.value.id})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsxs)(h.a,{ml:2,variant:"body1",children:["v",null!==(n=u.value.version)&&void 0!==n?n:"NaN"]})})]}),Object(k.jsx)(h.a,{gutterBottom:!0,variant:"body2",children:null!==(t=null===(a=u.value)||void 0===a||null===(i=a.metadata)||void 0===i?void 0:i.Summary)&&void 0!==t?t:"NaN"}),Object(k.jsxs)(j.a,{container:!0,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(ke,{text:null!==(r=null===(o=u.value)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.License)&&void 0!==r?r:"NaN",icon:Object(k.jsx)(wn.a,{})})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(ke,{ml:2,text:null!==(l=u.value)&&void 0!==l&&l.latestVersion?"Latest version is installed":"Installed version is NOT the latest.",icon:Object(k.jsx)(Cn.a,{})})})]}),Object(k.jsx)(h.a,{variant:"body2",mt:2,children:null===(s=u.value)||void 0===s||null===(d=s.justifications)||void 0===d?void 0:d.header})]})},Rn=t(141),Vn=function(){function e(){Object(An.a)(this,e),this.nodes=new Map}return Object(Nn.a)(e,[{key:"addVertex",value:function(e,n){if(this.nodes.has(e))return this.nodes.get(e);var t=new Ln(e,n);return this.nodes.set(e,t),t}},{key:"addEdge",value:function(e,n){var t=this.nodes.get(e),a=this.nodes.get(n);return t.addAdjacent(a),[t,a]}},{key:"areAdjacents",value:function(e,n){var t=this.nodes.get(e),a=this.nodes.get(n);return!(!t||!a)&&t.isAdjacent(a)}},{key:"graphSearch",value:A.a.mark((function e(n){var t,a,i,r,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Map,(i=[]).push(n);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===t?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.set(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=this.nodes.get(e),i=this.nodes.get(n),r=new Map(t);if(!i||!a)return[];if(r.set(a),e===n)return Array.from(r.keys());var o,c=Object(Rn.a)(a.getAdjacents());try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!r.has(l)){var s=this.findPath(l.value,n,r);if(s.length)return s}}}catch(d){c.e(d)}finally{c.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,n){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r.key!==n&&(r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(t.nodes.get(e))}))))}return a}},{key:"findAllPaths",value:function(e,n){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=this.nodes.get(e),r=this.nodes.get(n),o=new Map(a);if(!r||!i)return[];if(o.set(i),e===n)return[Array.from(o.keys())];var c=[];return i.getAdjacents().forEach((function(e){o.has(e)||t.findAllPaths(e.value.id,n,o).forEach((function(e){c.push(e)}))})),c}}]),e}(),Mn=["mergedGraph"],Tn=Object(ie.a)((function(){return{root:{display:"flex",flexFlow:"column nowrap"},canvas:{flex:"1 1 auto",height:"50vh"}}})),In=function(e){var n=e.mergedGraph,t=Object(y.a)(e,Mn),i=Tn(),r=Object(a.useRef)(null),c=Object(a.useContext)(qn).selected;return Object(a.useEffect)((function(){if(c&&n){var e=n.nodes.get(c),t=n.findAllNodesOnAllPaths(e,"*App");t.set("*App",n.nodes.get("*App"));var a=new En.a;t.forEach((function(n){var t,i=document.createElement("div");o.a.render(Object(k.jsx)(Pn,{node:n}),i);var r=null!==(t=n.value.color)&&void 0!==t?t:q.nodes.color,c=void 0;"*App"===n.key?(r="#4fc1ea",c={color:"#4fc1ea",strokeWidth:3,size:20}):n.key===e.key&&(r="#f39200"),a.add(Object(g.a)(Object(g.a)({},n.value),{},{color:r,title:n.key===e.key||"*App"===n.key?void 0:i,font:c}))}));var i={nodes:a,edges:new En.a(n.visEdges)},l=r.current&&new En.b(r.current,i,q),s=document.getElementById("mynetwork").getElementsByTagName("canvas")[0];l.on("hoverNode",(function(){d("grab")})),l.on("blurNode",(function(){d("default")})),l.on("dragStart",(function(){d("grabbing")})),l.on("dragging",(function(){d("grabbing")})),l.on("dragEnd",(function(){d("grab")})),l.on("dragEnd",(function(e){0===e.nodes.length||l.isCluster(e.nodes[0])||l.editNode(e.nodes[0])})),l.on("dragEnd",(function(e){0===e.nodes.length||l.isCluster(e.nodes[0])||l.editNode(e.nodes[0])}))}function d(e){s.style.cursor=e}}),[c,n]),Object(k.jsx)("div",{className:"".concat(i.root," ").concat(t.className),children:Object(k.jsx)("div",{ref:r,id:"mynetwork",className:i.canvas})})},Bn=function(e){var n,t,r,o,c,l,s,d,u,b,m,O,f,x,g,y,_,w,E,S,C,A,P,R,V,M=e.mergedGraph,T=Object(a.useContext)(qn),I=T.selected,B=T.setSelected,q=M.nodes.get(I),F={removed:[],added:[],version:[],unchanged:[]};Object(Ee.a)(null!==(n=null===q||void 0===q?void 0:q.parents)&&void 0!==n?n:[]).filter((function(e){return"*App"!==e})).forEach((function(e){F[M.nodes.get(e).value.change].push(e)}));var z=Object(a.useMemo)((function(){var e,n,t,a={};return null===q||void 0===q||null===(e=q.value)||void 0===e||null===(n=e.justifications)||void 0===n||null===(t=n.thoth)||void 0===t||t.forEach((function(e){var n;a[e.type]=[].concat(Object(Ee.a)(null!==(n=a[e.type])&&void 0!==n?n:[]),[e])})),a}),[q]);return Object(k.jsxs)(p.a,{children:[Object(k.jsxs)(L.a,{sx:{padding:2},children:[Object(k.jsxs)(j.a,{container:!0,alignItems:"center",mb:1,children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(h.a,{variant:"h3",children:Object(k.jsx)("b",{children:null===q||void 0===q||null===(t=q.value)||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.Name})})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsxs)(h.a,{ml:2,variant:"h6",children:["v",null!==(o=null===q||void 0===q||null===(c=q.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.Version)&&void 0!==o?o:"NaN"]})})]}),Object(k.jsx)(h.a,{gutterBottom:!0,variant:"body1",children:null!==(s=null===q||void 0===q||null===(d=q.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.Summary)&&void 0!==s?s:"NaN"}),Object(k.jsx)(j.a,{container:!0,spacing:2,children:Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(ke,{text:null!==(b=null===q||void 0===q||null===(m=q.value)||void 0===m||null===(O=m.metadata)||void 0===O?void 0:O.License)&&void 0!==b?b:"NaN",icon:Object(k.jsx)(wn.a,{})})})})]}),Object(k.jsxs)(L.a,{sx:{padding:2,marginTop:2},children:[Object(k.jsx)(h.a,{variant:"h5",children:"Thoth Justifications"}),Object(k.jsx)(h.a,{variant:"body1",mt:2,children:null===q||void 0===q||null===(f=q.value)||void 0===f||null===(x=f.justifications)||void 0===x?void 0:x.header}),null!==q&&void 0!==q&&null!==(g=q.value)&&void 0!==g&&null!==(y=g.justifications)&&void 0!==y&&null!==(_=y.reasons)&&void 0!==_&&_.length?Object(k.jsx)("ul",{children:null===q||void 0===q||null===(w=q.value)||void 0===w||null===(E=w.justifications)||void 0===E?void 0:E.reasons.map((function(e,n){return Object(k.jsx)("li",{children:Object(k.jsxs)(h.a,{variant:"body1",mt:2,children:[Object(k.jsx)(kn.a,{underline:"hover",onClick:function(){return B(e.package)},children:e.package}),e.reason]})},n+e.reason)}))}):null,Object.entries(z).map((function(e){var n=Object(v.a)(e,2),t=n[0],a=n[1];return Object(k.jsxs)(i.a.Fragment,{children:[Object(k.jsxs)(h.a,{variant:"h6",mt:2,children:[t," Justifications"]}),a.map((function(e,n){return Object(k.jsxs)(j.a,{container:!0,alignItems:"center",ml:3,children:[Object(k.jsxs)(j.a,{item:!0,xs:10,children:[Object(k.jsx)(h.a,{variant:"body1",mt:1,children:e.message}),Object(k.jsx)(h.a,{variant:"body2",ml:3,mt:.5,children:e.advisory})]}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(N.a,{href:e.link,children:"READ MORE"})})]},e.message+n)}))]},t)}))]}),Object(k.jsxs)(L.a,{sx:{padding:2,marginTop:2},children:[Object(k.jsx)(h.a,{variant:"h5",mb:2,children:"Package Origins"}),Object(k.jsxs)(h.a,{variant:"body1",mb:2,children:[0===(null===(S=Object(Ee.a)(null!==(C=null===q||void 0===q?void 0:q.parents)&&void 0!==C?C:[]).filter((function(e){return"*App"!==e})))||void 0===S?void 0:S.length)?(null===q||void 0===q||null===(A=q.value)||void 0===A?void 0:A.label)+" is not a dependent of any package in this Python environment":"There are "+(null===(P=Object(Ee.a)(null!==(R=null===q||void 0===q?void 0:q.parents)&&void 0!==R?R:[]).filter((function(e){return"*App"!==e})))||void 0===P?void 0:P.length)+" package(s) that have "+(null===q||void 0===q||null===(V=q.value)||void 0===V?void 0:V.label)+" as a direct dependency. Of those package(s)",Object.keys(F).map((function(e,n){return 0===F[e].length?null:Object(k.jsxs)(i.a.Fragment,{children:[", "+F[e].length+("version"===e?" had a version change ":(1===F[e].length?" was ":" were ")+e)+" (",F[e].map((function(e,n,t){var a=e;return n!==t.length-1&&(a+=", "),Object(k.jsx)(kn.a,{underline:"hover",onClick:function(){return B(e)},children:a},n+a)})),")"]},e+n)})),"."]}),Object(k.jsx)(In,{mergedGraph:M})]})]})},qn=i.a.createContext(),Fn=function(e){var n=e.mergedGraph,t=Object(a.useState)(""),i=Object(v.a)(t,2),r=i[0],o=i[1],c=Object(a.useState)(),l=Object(v.a)(c,2),s=l[0],d=l[1];return n?Object(k.jsx)(qn.Provider,{value:{selected:s,setSelected:d},children:Object(k.jsxs)(j.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start",mt:2,children:[Object(k.jsx)(j.a,{item:!0,s:12,md:6,children:Object(k.jsxs)(L.a,{sx:{padding:2},children:[Object(k.jsx)(R,{onChange:function(e){o(e.target.value)},lefticon:Object(k.jsx)(M.a,{})}),Object(k.jsx)(zn,{search:r,filteredGraph:n})]})}),Object(k.jsx)(j.a,{item:!0,s:12,md:6,children:s?Object(k.jsx)(Bn,{mergedGraph:n}):Object(k.jsx)(h.a,{variant:"body1",align:"center",children:"No package selected"})})]})}):null};function zn(e){var n,t=e.search,r=void 0===t?"":t,o=e.filteredGraph,c=Object(a.useState)("asc"),l=Object(v.a)(c,2),s=l[0],d=l[1],u=i.a.useState("name"),j=Object(v.a)(u,2),b=j[0],m=j[1],O=i.a.useState(0),f=Object(v.a)(O,2),x=f[0],g=f[1],y=i.a.useState(25),_=Object(v.a)(y,2),w=_[0],E=_[1],S=i.a.useState([]),C=Object(v.a)(S,2),A=C[0],N=C[1],L=null!==(n=Object(a.useContext)(qn))&&void 0!==n?n:{setSelected:function(){return console.log("missing callback")}},P=L.selected,R=L.setSelected;Object(a.useEffect)((function(){if(o){g(0);var e=[];o.nodes.forEach((function(n){var t,a,i,r,o,c,l;-1!==n.value.depth&&e.push({name:n.value.label,key:n.key,warnings:[],depth:null!==(t=null===(a=n.value)||void 0===a?void 0:a.depth)&&void 0!==t?t:-1,license:null===n||void 0===n||null===(i=n.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.License,dependencies:n.adjacents.size,change:null===(o=n.value)||void 0===o?void 0:o.change,summary:null===n||void 0===n||null===(c=n.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.Summary})})),N(e)}}),[o]);var V=x>0?Math.max(0,(1+x)*w-A.length):0;return Object(k.jsxs)(p.a,{sx:{width:"100%"},children:[Object(k.jsx)(tn.a,{children:Object(k.jsxs)(an.a,{sx:{minWidth:750},size:"medium",children:[Object(k.jsx)(yn,{order:s,orderBy:b,onRequestSort:function(e,n){d(b===n&&"asc"===s?"desc":"asc"),m(n)}}),Object(k.jsxs)(rn.a,{children:[mn(A,bn(s,b)).filter((function(e){return e.name.includes(r)})).slice(x*w,x*w+w).map((function(e,n){var t="enhanced-table-checkbox-".concat(n),a="removed"===e.change?"error":"added"===e.change?"success":void 0;return Object(k.jsxs)(i.a.Fragment,{children:[Object(k.jsxs)(on.a,{hover:!0,onClick:function(){return R(e.key)},tabIndex:-1,selected:P===e.key,children:[Object(k.jsx)(cn.a,{component:"th",id:t,scope:"row",children:Object(k.jsxs)(p.a,{display:"flex",children:["removed"===e.change?Object(k.jsx)(vn.a,{color:a}):"added"===e.change?Object(k.jsx)(dn.a,{color:a}):Object(k.jsx)(pn.a,{}),Object(k.jsx)(h.a,{ml:2,children:e.name})]})}),Object(k.jsx)(cn.a,{align:"right",children:e.depth}),Object(k.jsx)(cn.a,{align:"right",children:e.license}),Object(k.jsx)(cn.a,{align:"right",children:e.dependencies})]}),Object(k.jsx)(on.a,{children:Object(k.jsx)(cn.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6})})]},e.name)})),V>0&&Object(k.jsx)(on.a,{style:{height:53*V},children:Object(k.jsx)(cn.a,{colSpan:6})})]})]})}),Object(k.jsx)(ln.a,{rowsPerPageOptions:[5,10,25],component:"div",count:A.length,rowsPerPage:w,page:x,onPageChange:function(e,n){g(n)},onRowsPerPageChange:function(e){E(parseInt(e.target.value,10)),g(0)}})]})}Object(ie.a)((function(e){return{lockfile:{overflow:"scroll",paddingLeft:e.spacing(1)}}}));var Wn=function(e){var n,t,a,r,o,c=e.metrics,l=i.a.useState("newGraph"),s=Object(v.a)(l,2),d=s[0],u=s[1],p=function(e,n){null!==n&&void 0!==n&&n.length&&u(n)};return Object(k.jsxs)(j.a,{container:!0,spacing:3,mb:3,mt:1,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(he,{cardMeta:{title:"Thoth Advise Summary"},cardBody:Object(k.jsx)(qe,{metric:null===c||void 0===c?void 0:c.advise})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(he,{cardMeta:{title:"Dependencies Summary"},cardBody:Object(k.jsx)(He,{all:null===c||void 0===c||null===(n=c[d])||void 0===n||null===(t=n.dependencies)||void 0===t?void 0:t.all,roots:null===c||void 0===c||null===(a=c[d])||void 0===a||null===(r=a.dependencies)||void 0===r?void 0:r.roots}),cardAction:Object(k.jsx)(Fe,{value:d,onChange:p})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(he,{cardMeta:{title:"Licenses Summary"},cardBody:Object(k.jsx)(nn,{metric:null===c||void 0===c||null===(o=c[d])||void 0===o?void 0:o.licenses}),cardAction:Object(k.jsx)(Fe,{value:d,onChange:p})})})]})},Dn=function(){var e=Object(S.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.a.get(B+"/advise/python/"+n,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Gn=function(){var e=Object(S.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.a.get(B+"/advise/python/"+n+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Hn=t(34);function Kn(e,n){var t=z(e),i=Object(a.useMemo)((function(){var e={loading:!1,error:!1,success:!1};return t.length>0?(t.forEach((function(n){switch(n.status){case"error":e.error=!0;break;case"success":e.success=!0;break;default:e.loading=!0}})),e.loading?"loading":e.error?"error":"success"):"loading"}),[t]),r=Object(a.useState)(),o=Object(v.a)(r,2),c=o[0],l=o[1];return Object(a.useEffect)((function(){if("loading"!==i){var e=new Vn,a=[];t.forEach((function(n){if("error"===n.status){var t=n.error.response.data.parameters,a={id:t.name.toLowerCase(),label:t.name,metadata:null};e.addVertex(a.id,a).parents=new Set}else{var i=n.data.data.metadata,r={id:i.package_name.toLowerCase(),label:i.package_name,metadata:i.importlib_metadata.metadata};e.addVertex(r.id,r).parents=new Set}})),t.forEach((function(n){if("error"!==n.status){var t=e.nodes.get(n.data.data.metadata.package_name.toLowerCase());Object.keys(n.data.data.metadata.dependencies).forEach((function(n){var i=e.nodes.get(n);i&&(e.addEdge(t.value.id,i.value.id),i.parents.add(t.value.id),a.push(i.value.id))}))}}));var r=e.addVertex("*App",{id:"*App",label:"App",depth:-1});a.push("*App");var o=new Map,c=[];for(e.nodes.forEach((function(t,i,o){if(!a.includes(i)||Object.keys(n).includes(i)){var l=o.get(i);l.value.depth=0,l.parents.add("*App"),c.push(l),e.addEdge(r.key,l.key)}}));0!==c.length;){var s=c.pop();if(s&&!o.has(s)){o.set(s);for(var d=s.getAdjacents(),u=0;u<d.length;u++){var v;d[u].value.depth=Math.min(s.value.depth+1,null!==(v=d[u].value.depth)&&void 0!==v?v:s.value.depth+2),c.push(d[u])}}}l(e)}}),[i,n]),c}var Un=function(e){var n=Object(a.useState)(),t=Object(v.a)(n,2),i=t[0],r=t[1];return Object(a.useEffect)((function(){if(e){var n={all:{},roots:{}},t=[];e.nodes.forEach((function(e){0===e.value.depth&&t.push(e.key)}));var a=new Set;t.forEach((function(t){var i=e.graphSearch(e.nodes.get(t));Array.from(i).forEach((function(e){var i,r,o,c,l;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var s=0===e.value.depth?"roots":1===e.value.depth?"direct":"indirect";n={all:Object(g.a)(Object(g.a)({},n.all),{},Object(D.a)({},s,(null!==(i=n.all[s])&&void 0!==i?i:0)+1)),roots:Object(g.a)(Object(g.a)({},n.roots),{},Object(D.a)({},t,Object(g.a)(Object(g.a)({},null!==(r=n.roots[t])&&void 0!==r?r:null),{},Object(D.a)({},s,(null!==(o=null===(c=n.roots)||void 0===c||null===(l=c[t])||void 0===l?void 0:l[s])&&void 0!==o?o:0)+1))))}}}))})),r(n)}}),[e]),i},Qn=function(e){var n=Object(a.useState)(),t=Object(v.a)(n,2),i=t[0],r=t[1];return Object(a.useEffect)((function(){if(e){var n={},t=[];e.nodes.forEach((function(e){0===e.value.depth&&t.push(e.key)}));var a=new Set;t.forEach((function(t){var i=e.graphSearch(e.nodes.get(t));Array.from(i).forEach((function(e){var t,i,r;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var o,c,l,s,d,u,v=[];if(null===e||void 0===e||null===(t=e.value)||void 0===t||null===(i=t.metadata)||void 0===i||null===(r=i.Classifier)||void 0===r||r.forEach((function(n){var t,a,i=n.split(" :: ");"License"===i[0]&&("OSI Approved"===i[1]?v.push({generalLicense:null!==(t=null===i||void 0===i?void 0:i[2])&&void 0!==t?t:e.value.metadata.License,specificLicense:e.value.metadata.License,isOsiApproved:!0}):v.push({generalLicense:null!==(a=null===i||void 0===i?void 0:i[1])&&void 0!==a?a:e.value.metadata.License,specificLicense:e.value.metadata.License,isOsiApproved:!1}))})),0===v.length)v.push({generalLicense:null!==(o=null===e||void 0===e||null===(c=e.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.License)&&void 0!==o?o:"N/A",specificLicense:null!==(s=null===e||void 0===e||null===(d=e.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.License)&&void 0!==s?s:"N/A",isOsiApproved:null});v.forEach((function(t){var a;n[t.generalLicense]||(n[t.generalLicense]={packages:{},metadata:{isOsiApproved:t.isOsiApproved}}),n=Object(g.a)(Object(g.a)({},n),{},Object(D.a)({},t.generalLicense,Object(g.a)(Object(g.a)({},n[t.generalLicense]),{},{packages:Object(g.a)(Object(g.a)({},null!==(a=n[t.generalLicense].packages)&&void 0!==a?a:null),{},Object(D.a)({},e.value.label,{depth:e.value.depth,specific:t.specificLicense}))})))}))}}))})),r(n)}}),[e]),i},Jn=function(e,n){var t=Object(a.useState)(),i=Object(v.a)(t,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var t,a,i,r;if(e&&n){var c={added:0,removed:0,version:0,unchanged:0,justification:{},build:null};e.nodes.forEach((function(e){switch(e.value.change){case"added":c.added++;break;case"removed":c.removed++;break;case"version":c.version++;break;default:c.unchanged++}})),c.build="We have analysed an application stack running on ".concat(n.metadata.os_release.name," ").concat(n.metadata.os_release.version,", running Python (").concat(n.metadata.python.implementation_name,") ").concat(n.metadata.python.major,".").concat(n.metadata.python.minor,".").concat(n.metadata.python.micro,". It was Adviser Job ID ").concat(n.metadata.document_id,", by ").concat(n.metadata.analyzer," v").concat(n.metadata.analyzer_version,"."),null===n||void 0===n||null===(t=n.result)||void 0===t||null===(a=t.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r||r.justification.forEach((function(e){c.justification[e.type]=c.justification[e.type]?c.justification[e.type]+1:1})),o(c)}}),[e,n]),r},Yn=t(413),Zn=function(e){var n=e.analysis_id;return Object(k.jsxs)("div",{children:['`"',n,'"` not found']})},Xn=function(e){var n=e.children,t=Object(u.g)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,{onClick:function(){return t("/")},children:"go back"}),Object(k.jsx)("div",{children:n})]})},$n=function(){var e,n,t,i,r,o,c,s,d,j,p,h,b,m,O,f,x,y=Object(u.h)().analysis_id,_=function(e,n){return Object(l.useQuery)(Object(g.a)(Object(g.a)({},n),{},{queryKey:["adviseDocument",e],queryFn:function(){return Dn(e)}}))}(y,{useErrorBoundary:!1,refetchInterval:function(e){var n;return!(null===e||void 0===e||null===(n=e.data)||void 0===n||!n.status)&&1e4}}),w=function(e,n){return Object(l.useQuery)(Object(g.a)(Object(g.a)({},n),{},{queryKey:["adviseLogs",e],queryFn:function(){return Gn(e)}}))}(y,{useErrorBoundary:!1,refetchInterval:function(){var e,n;return!(null===(e=_.data)||void 0===e||null===(n=e.data)||void 0===n||!n.status)&&1e4}}),E=Object(a.useMemo)((function(){var e,n,t;if(_.isSuccess&&null!==(e=_.data.data)&&void 0!==e&&null!==(n=e.result)&&void 0!==n&&null!==(t=n.parameters)&&void 0!==t&&t.project)return _e(_.data.data.result.parameters.project)}),[_]),S=Object(a.useMemo)((function(){var e,n,t,a,i;if(_.isSuccess&&null!==(e=_.data.data)&&void 0!==e&&null!==(n=e.result)&&void 0!==n&&null!==(t=n.report)&&void 0!==t&&null!==(a=t.products)&&void 0!==a&&null!==(i=a[0])&&void 0!==i&&i.project)return _e(_.data.data.result.report.products[0].project)}),[_]),C=Kn(null!==E&&void 0!==E?E:[],null===(e=_.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.result)||void 0===t||null===(i=t.parameters)||void 0===i||null===(r=i.project)||void 0===r||null===(o=r.requirements)||void 0===o?void 0:o.packages),A=Kn(null!==S&&void 0!==S?S:[],null===(c=_.data)||void 0===c||null===(s=c.data)||void 0===s||null===(d=s.result)||void 0===d||null===(j=d.report)||void 0===j||null===(p=j.products)||void 0===p||null===(h=p[0])||void 0===h||null===(b=h.project)||void 0===b?void 0:b.requirements),N=function(e,n,t){var i=Object(a.useState)(),r=Object(v.a)(i,2),o=r[0],c=r[1],l=Object(Hn.a)();return Object(a.useEffect)((function(){var a,i,r;if(e&&n){var o=[],s=new Vn;n.nodes.forEach((function(t,a){var i,r,o,c,d,u,v,j,p,h,b,m,O,f,x,y,k,_,w,E,S,C,A,N,L,P,R,V,M,T,I,B,q=n.nodes.get(a);e.nodes.has(a)?(q.value=Object(g.a)(Object(g.a)({},q.value),{},{label:t.value.label+" "+(null!==(i=null===t||void 0===t||null===(r=t.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.Version)&&void 0!==i?i:""),dependencies:t.adjacents.size,license:null!==(c=null===t||void 0===t||null===(d=t.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.License)&&void 0!==c?c:"",lockfile:["new","old"]}),(null===t||void 0===t||null===(v=t.value)||void 0===v||null===(j=v.metadata)||void 0===j?void 0:j.Version)===(null===(p=e.nodes.get(a))||void 0===p||null===(h=p.value)||void 0===h||null===(b=h.metadata)||void 0===b?void 0:b.Version)?q.value=Object(g.a)(Object(g.a)({},q.value),{},{version:null!==(m=null===t||void 0===t||null===(O=t.value)||void 0===O||null===(f=O.metadata)||void 0===f?void 0:f.Version)&&void 0!==m?m:"",change:"unchanged"}):(q.value=Object(g.a)(Object(g.a)({},q.value),{},{change:"version",version:null!==(x=null===t||void 0===t||null===(y=t.value)||void 0===y||null===(k=y.metadata)||void 0===k?void 0:k.Version)&&void 0!==x?x:"",oldVersion:null!==(_=null===(w=e.nodes.get(a))||void 0===w||null===(E=w.value)||void 0===E||null===(S=E.metadata)||void 0===S?void 0:S.Version)&&void 0!==_?_:"",font:{color:l.palette.success.main}}),q.parents=Object(Ee.a)(new Set([].concat(Object(Ee.a)(q.parents),Object(Ee.a)(null!==(C=null===(A=e.nodes.get(a))||void 0===A?void 0:A.parents)&&void 0!==C?C:[])))),e.nodes.get(a).getAdjacents().forEach((function(e){return q.adjacents.add(e)})),n.nodes.get(a).getAdjacents().forEach((function(e){return q.adjacents.add(e)})))):q.value=Object(g.a)(Object(g.a)({},q.value),{},{change:"added",label:t.value.label+" "+(null!==(N=null===t||void 0===t||null===(L=t.value)||void 0===L||null===(P=L.metadata)||void 0===P?void 0:P.Version)&&void 0!==N?N:""),font:{color:l.palette.success.main},color:l.palette.success.main,version:null!==(R=null===t||void 0===t||null===(V=t.value)||void 0===V||null===(M=V.metadata)||void 0===M?void 0:M.Version)&&void 0!==R?R:"",dependencies:t.adjacents.size,license:null!==(T=null===t||void 0===t||null===(I=t.value)||void 0===I||null===(B=I.metadata)||void 0===B?void 0:B.License)&&void 0!==T?T:"",lockfile:["new"]}),s.nodes.set(a,q)})),e.nodes.forEach((function(t,a){var i,r,o,c,d,u,v,j,p,h=e.nodes.get(a);n.nodes.has(a)||(h.value=Object(g.a)(Object(g.a)({},h.value),{},{change:"removed",label:t.value.label+" "+(null!==(i=null===t||void 0===t||null===(r=t.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.Version)&&void 0!==i?i:""),font:{color:l.palette.error.main},color:l.palette.error.main,version:null!==(c=null===t||void 0===t||null===(d=t.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.Version)&&void 0!==c?c:"",dependencies:t.adjacents.size,license:null!==(v=null===t||void 0===t||null===(j=t.value)||void 0===j||null===(p=j.metadata)||void 0===p?void 0:p.License)&&void 0!==v?v:"",lockfile:["old"]}),s.nodes.set(a,h))})),e.nodes.forEach((function(e){e.adjacents.forEach((function(n){o.push({to:e.value.id,from:n.value.id,lockfile:"old"})}))})),n.nodes.forEach((function(e){e.adjacents.forEach((function(n){o.push({to:e.value.id,from:n.value.id,lockfile:"new"})}))})),Se(s.nodes,null===(a=t.result.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.justification),s.visEdges=o,c(s)}}),[e,n,t,l]),o}(C,A,null===(m=_.data)||void 0===m?void 0:m.data),L=function(e,n,t,i){var r=Jn(t,i),o=Un(e),c=Un(n),l=Qn(e),s=Qn(n);return Object(a.useMemo)((function(){var e={advise:null,oldGraph:{dependencies:null,licenses:null},newGraph:{dependencies:null,licenses:null}};return r&&(e.advise=r),o&&(e.oldGraph.dependencies=o),o&&(e.oldGraph.licenses=l),c&&(e.newGraph.dependencies=c),s&&(e.newGraph.licenses=s),e}),[r,o,l,c,s])}(C,A,N,null===(O=_.data)||void 0===O?void 0:O.data);return _.isLoading?Object(k.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(k.jsx)(Yn.a,{})}):_.data?Object(k.jsx)(Xn,{children:Object(k.jsx)(de,{header:Object(k.jsx)(Pe,{adviseDocument:_.data.data,logs:null===(f=w.data)||void 0===f||null===(x=f.data)||void 0===x?void 0:x.log}),children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"summary",element:Object(k.jsx)(Wn,{metrics:L})}),Object(k.jsx)(u.b,{path:"details",element:Object(k.jsx)(Fn,{mergedGraph:N})}),Object(k.jsx)(u.b,{path:"*",element:Object(k.jsx)(u.a,{to:"summary"})})]})})}):Object(k.jsx)(Xn,{children:Object(k.jsx)(Zn,{analysis_id:y})})},et=t(419),nt=t(213),tt=t.n(nt),at=t(214),it=t.n(at),rt=t(215),ot=t.n(rt),ct=t(388),lt=t(405),st=["options","type","label","disabled"],dt=function(e){var n,t=e.options,i=e.type,r=e.label,o=e.disabled,c=Object(y.a)(e,st),l=Object(u.g)(),s=Object(a.useContext)(ft),d=s.specs,v=s.defaultSpecs;return Object(k.jsxs)(p.a,Object(g.a)(Object(g.a)({},c),{},{children:[Object(k.jsx)(h.a,{variant:"body2",children:r}),Object(k.jsxs)(ct.a,{displayEmpty:!0,fullWidth:!0,value:null!==(n=d[i])&&void 0!==n?n:"",onChange:function(e){var n,t,a,r,o,c,s,u,j,p;switch(i){case"package_version":l("/package/".concat(d.package_name,"/").concat(e.target.value),{replace:!0});break;case"index_url":l("/package/".concat(d.package_name,"/").concat(null!==(n=d.package_version)&&void 0!==n?n:v.package_version,"/").concat(encodeURIComponent(e.target.value)),{replace:!0});break;case"os_name":l("/package/".concat(d.package_name,"/").concat(null!==(t=d.package_version)&&void 0!==t?t:v.package_version,"/").concat(encodeURIComponent(null!==(a=d.index_url)&&void 0!==a?a:v.index_url),"/").concat(e.target.value),{replace:!0});break;case"os_version":l("/package/".concat(d.package_name,"/").concat(null!==(r=d.package_version)&&void 0!==r?r:v.package_version,"/").concat(encodeURIComponent(null!==(o=d.index_url)&&void 0!==o?o:v.index_url),"/").concat(null!==(c=d.os_name)&&void 0!==c?c:v.os_name,"/").concat(e.target.value),{replace:!0});break;case"python_version":l("/package/".concat(d.package_name,"/").concat(null!==(s=d.package_version)&&void 0!==s?s:v.package_version,"/").concat(encodeURIComponent(null!==(u=d.index_url)&&void 0!==u?u:v.index_url),"/").concat(null!==(j=d.os_name)&&void 0!==j?j:v.os_name,"/").concat(null!==(p=d.os_version)&&void 0!==p?p:v.os_version,"/").concat(e.target.value),{replace:!0})}},size:"small",variant:"outlined",disabled:o,renderValue:function(e){return e||Object(k.jsx)("em",{style:{color:"grey"},children:null!==(n=null===v||void 0===v?void 0:v[i])&&void 0!==n?n:r});var n},children:[Object(k.jsx)(lt.a,{disabled:!0,value:"",children:Object(k.jsx)("em",{children:r})}),t.map((function(e){return Object(k.jsx)(lt.a,{value:e.value,children:e.value},e.value)}))]})]}))},ut=Object(ie.a)((function(e){return{titleRow:{display:"flex",alignItems:"center"},marginLeft:{marginLeft:e.spacing(2)},linksRow:{display:"flex"}}})),vt=function(e){var n,t,r=e.metadata,o=e.allVersions,c=e.allEnvironments,l=ut(),s=Object(a.useContext)(ft),d=s.defaultSpecs,u=s.specs,p=Object(a.useState)(!1),b=Object(v.a)(p,2),m=b[0],O=b[1],f=Object(a.useMemo)((function(){var e=new Set;return o.filter((function(n){return!e.has(n.package_version)&&(e.add(n.package_version),!0)})).map((function(e){return{value:e.package_version}}))}),[o]),x=Object(a.useMemo)((function(){var e=new Set;return o.filter((function(e){return u.package_version?u.package_version===e.package_version:d.package_version===e.package_version})).filter((function(n){return!e.has(n.index_url)&&(e.add(n.index_url),!0)})).map((function(e){return{value:e.index_url}}))}),[o]),g=Object(a.useMemo)((function(){return[c.map((function(e){return{value:e.os_name}})),c.filter((function(e){return!u.os_name||u.os_name===e.os_name})).map((function(e){return{value:e.os_version}})),c.filter((function(e){return(!u.os_name||u.os_name===e.os_name)&&(!u.os_version||u.os_version===e.os_version)})).map((function(e){return{value:e.python_version}}))]}),[c,u]),y=Object(v.a)(g,3),_=y[0],w=y[1],E=y[2];return Object(k.jsxs)("div",{children:[Object(k.jsxs)(j.a,{container:!0,alignItems:"flex-end",spacing:1,children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(h.a,{variant:"h4",mr:2,children:Object(k.jsx)("b",{children:null===r||void 0===r?void 0:r.Name})})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(dt,{options:null!==f&&void 0!==f?f:[],type:"package_version",label:"Version"})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(dt,{options:null!==x&&void 0!==x?x:[],type:"index_url",label:"Index URL",disabled:void 0===u.package_version})}),m?Object(k.jsxs)(i.a.Fragment,{children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(dt,{options:null!==_&&void 0!==_?_:[],type:"os_name",label:"OS Name",disabled:void 0===u.index_url})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(dt,{options:null!==w&&void 0!==w?w:[],type:"os_version",label:"OS Version",disabled:void 0===u.os_name})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(dt,{options:null!==E&&void 0!==E?E:[],type:"python_version",label:"Python Version",disabled:void 0===u.os_version})})]}):null,Object(k.jsx)(j.a,{item:!0,xs:1,children:Object(k.jsx)(et.a,{onClick:function(){return O(!m)},children:m?Object(k.jsx)(tt.a,{fontSize:"large"}):Object(k.jsx)(it.a,{fontSize:"large"})})})]}),Object(k.jsx)(h.a,{gutterBottom:!0,variant:"body1",children:null!==(n=null===r||void 0===r?void 0:r.Summary)&&void 0!==n?n:"NaN"}),Object(k.jsx)("div",{className:l.linksRow,children:Object(k.jsx)(ke,{text:null!==(t=null===r||void 0===r?void 0:r.License)&&void 0!==t?t:"NaN",icon:Object(k.jsx)(ot.a,{})})})]})},jt=(Object(ie.a)((function(e){return{bar:{marginBottom:e.spacing(1)}}})),Object(ie.a)((function(e){return{bar:{marginBottom:e.spacing(1)},marginBottom:{marginBottom:e.spacing(2)}}})),function(e){var n=e.package_name,t=e.package_version;return Object(k.jsxs)("div",{children:['`"',n,t?" "+t:"",'"` not found']})}),pt=function(){var e=Object(S.a)(A.a.mark((function e(n){var t,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:0,e.abrupt("return",I.a.get(B+"/python/package/versions",{params:{name:n,page:t},headers:{accept:"application/json"}}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ht=function(){var e=Object(S.a)(A.a.mark((function e(n,t,a){var i,r=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.length>3&&void 0!==r[3]?r[3]:0,e.abrupt("return",I.a.get(B+"/python/package/version/environments",{params:{name:n,version:t,index:a,page:i},headers:{accept:"application/json"}}));case 2:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),bt=function(e){var n,t,i=(n=e,Object(l.useInfiniteQuery)(Object(g.a)(Object(g.a)({},t),{},{queryKey:["packageVersions",n],queryFn:function(e){return pt(n,e.pageParam)},getNextPageParam:function(e){return 0===e.data.versions.length?void 0:e.config.params.page+100}}))),r=Object(a.useState)([]),o=Object(v.a)(r,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){if(i.isSuccess)if(i.hasNextPage&&!i.isFetchingNextPage)i.fetchNextPage().then();else if(!i.hasNextPage&&!i.isFetchingNextPage){var e=[];i.data.pages.forEach((function(n){e=[].concat(Object(Ee.a)(e),Object(Ee.a)(n.data.versions))})),e.length>0?(e=e.reverse(),s(e)):s(void 0)}}),[i.data]),c},mt=function(e,n,t){var i,r,o,c,s=(i=e,r=n,o=t,c={useErrorBoundary:!1},Object(l.useInfiniteQuery)(Object(g.a)(Object(g.a)({},c),{},{queryKey:["packageEnvironments",i,r,o],queryFn:function(e){return ht(i,r,o,e.pageParam)},getNextPageParam:function(e){return 0===e.data.environments.length?void 0:e.config.params.page+100}}))),d=Object(a.useState)([]),u=Object(v.a)(d,2),j=u[0],p=u[1];return Object(a.useEffect)((function(){if(s.isSuccess)if(s.hasNextPage&&!s.isFetchingNextPage)s.fetchNextPage().then();else if(!s.hasNextPage&&!s.isFetchingNextPage){var e=[];s.data.pages.forEach((function(n){e=[].concat(Object(Ee.a)(e),Object(Ee.a)(n.data.environments))})),e=e.reverse(),p(e)}}),[s.data]),j},Ot=Object(ie.a)((function(e){return{root:{flexGrow:1,maxWidth:"95%",marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(1)}}})),ft=i.a.createContext({}),xt=function(){var e,n,t,i,r,o,c,s=Ot(),d=Object(u.h)(),p=Object(a.useState)({package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0}),h=Object(v.a)(p,2),b=h[0],m=h[1],O=Object(a.useMemo)((function(){return{package_name:d.package_name,package_version:null===d||void 0===d?void 0:d.package_version,index_url:null!==d&&void 0!==d&&d.index_url?decodeURIComponent(d.index_url):void 0,os_name:null===d||void 0===d?void 0:d.os_name,os_version:null===d||void 0===d?void 0:d.os_version,python_version:null===d||void 0===d?void 0:d.python_version}}),[d]),f=bt(O.package_name),x=mt(O.package_name,null!==(e=O.package_version)&&void 0!==e?e:b.package_version,null!==(n=O.index_url)&&void 0!==n?n:b.index_url);Object(a.useEffect)((function(){var e={package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0};if(b!==e)if(O.package_name&&f&&f.length>0)if(e.package_version=f.at(0).package_version,e.index_url=f.at(0).index_url,x&&x.length>0){var n=x.filter((function(e){return(!O.os_name||O.os_name===e.os_name)&&(!O.os_version||O.os_version===e.os_version)}));e.os_name=n.at(0).os_name,e.os_version=n.at(0).os_version,e.python_version=n.at(0).python_version,m(e)}else m(e);else m(e)}),[f,x,O]);var y,_,w,E,S,C,A,N,L=(y=O.package_name,_=null!==(t=O.package_version)&&void 0!==t?t:b.package_version,w=null!==(i=O.index_url)&&void 0!==i?i:b.index_url,E=null!==(r=O.os_name)&&void 0!==r?r:b.os_name,S=null!==(o=O.os_version)&&void 0!==o?o:b.os_version,C=null!==(c=O.python_version)&&void 0!==c?c:b.python_version,A={useErrorBoundary:!1},Object(l.useQuery)(Object(g.a)(Object(g.a)({},A),{},{queryKey:["packageMetadata",y,_,w,E,S,C],queryFn:function(){return F(y,_,w,E,S,C)}})));return L.isLoading||0===(null===f||void 0===f?void 0:f.length)?Object(k.jsx)("div",{className:"w-full h-48 flex justify-center items-center","data-testid":"loading",children:Object(k.jsx)(Yn.a,{})}):L.data?Object(k.jsx)(ft.Provider,{value:{specs:O,defaultSpecs:b},children:Object(k.jsx)(j.a,{container:!0,className:s.root,children:Object(k.jsx)(j.a,{item:!0,xs:12,children:Object(k.jsx)(vt,{metadata:L.data.data.metadata.importlib_metadata.metadata,allVersions:f,allEnvironments:x})})})}):Object(k.jsx)(jt,{package_name:d.package_name,package_version:null!==(N=d.package_version)&&void 0!==N?N:""})},gt=function(){return Object(k.jsx)(Xn,{children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"/:package_version/:index_url/:os_name/:os_version/:python_version",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"/:package_version/:index_url/:os_name",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"/:package_version/:index_url/:os_name/:os_version",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"/:package_version/:index_url",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"/:package_version",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"/",element:Object(k.jsx)(xt,{})}),Object(k.jsx)(u.b,{path:"*",status:404,element:Object(k.jsx)(ae,{})})]})})},yt=function(){return Object(k.jsx)(d.a,{basename:"/search-stage",children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{exact:!0,path:"/",element:Object(k.jsx)(te,{})}),Object(k.jsx)(u.b,{exact:!0,path:"advise/:analysis_id/*",element:Object(k.jsx)($n,{})}),Object(k.jsx)(u.b,{path:"package/:package_name/*",element:Object(k.jsx)(gt,{})}),Object(k.jsx)(u.b,{path:"*",status:404,element:Object(k.jsx)(ae,{})})]})})},kt=t(431),_t=t(386),wt=t(217),Et=Object(wt.a)({palette:{background:{default:"#f9f9f9"},primary:{light:"#f5a733",main:"#f39200",dark:"#aa6600"},secondary:{light:"#72cdee",main:"#4fc1ea",dark:"#3787a3"},text:{priamry:"#363636",secondary:"#999"}},typography:{fontFamily:["open sans","sans-serif"],h4:{fontWeight:700,fontSize:"3rem",color:"#363636",lineHeight:1.125},h5:{fontWeight:600,fontSize:"2rem",lineHeight:1.125,color:"#363636"},h6:{fontWeight:600,fontSize:"1.2rem",color:"#444f60",lineHeight:1.5},body1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#000"},body2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#000"},subtitle1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#999"},subtitle2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#999"}}});var St=function(e){var n=e.children;return Object(k.jsxs)(kt.a,{theme:Et,children:[Object(k.jsx)(_t.a,{}),n]})},Ct=a.createContext(void 0),At=a.createContext(void 0);function Nt(e,n){throw n.type,new Error("State dispatch error")}var Lt={};function Pt(e){var n=e.children,t=a.useReducer(Nt,Lt),i=Object(v.a)(t,2),r=i[0],o=i[1];return Object(k.jsx)(Ct.Provider,{value:r,children:Object(k.jsx)(At.Provider,{value:o,children:n})})}var Rt=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(k.jsx)(N.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},Vt=function(){return Object(k.jsx)(St,{children:Object(k.jsx)(Pt,{children:Object(k.jsx)(c.ErrorBoundary,{FallbackComponent:Rt,children:Object(k.jsx)(l.QueryClientProvider,{client:s,children:Object(k.jsx)(ce,{children:Object(k.jsx)(yt,{})})})})})})};var Mt=function(){return Object(k.jsx)(Vt,{})};o.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(Mt,{})}),document.getElementById("root"))}},[[281,1,2]]]);
//# sourceMappingURL=main.af23b30b.chunk.js.map