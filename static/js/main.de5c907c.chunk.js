(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],{290:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(62),o=n.n(r),l=n(201),c=n(28),d=new c.QueryClient({defaultOptions:{queries:{useErrorBoundary:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}}}),s=n(309),u=n(382),v=n(358),j=n(216),b=n(1),p=Object(j.a)({palette:{background:{default:"#f9f9f9"},primary:{light:"#f5a733",main:"#f39200",dark:"#aa6600"},secondary:{light:"#72cdee",main:"#4fc1ea",dark:"#3787a3"},text:{primary:"#363636",secondary:"#999"}},typography:{fontFamily:"open sans, sans-serif",h4:{fontWeight:700,fontSize:"3rem",color:"#363636",lineHeight:1.125},h5:{fontWeight:600,fontSize:"2rem",lineHeight:1.125,color:"#363636"},h6:{fontWeight:600,fontSize:"1.2rem",color:"#444f60",lineHeight:1.5},body1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#000"},body2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#000"},subtitle1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#999"},subtitle2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#999"}}});var m=function(e){var t=e.children;return Object(b.jsxs)(u.a,{theme:p,children:[Object(b.jsx)(v.a,{}),t]})},h=n(6),O=a.createContext(void 0);function x(e,t){return t.type,e}var f=a.createContext(void 0),g={};function y(e){var t=e.children,n=a.useReducer(x,g),i=Object(h.a)(n,2),r=i[0],o=i[1];return Object(b.jsx)(O.Provider,{value:r,children:Object(b.jsx)(f.Provider,{value:o,children:t})})}var _=n(310),k=function(){return Object(b.jsx)(_.a,{pb:3,pt:6,sx:{backgroundColor:"#444f60",textAlign:"center",color:"white"},children:"This is a footer"})},w=n(360),S=function(e){var t=e.children;return Object(b.jsxs)(w.a,{direction:"column",justifyContent:"flex-start",children:[Object(b.jsx)("div",{style:{minHeight:"100vh",padding:"1.5rem 4rem 9rem 4rem"},children:t}),Object(b.jsx)(k,{})]})},C=n(372),E=n(383),A=n(24),P=n(44),L=function(e){var t=e.children,n=e.header,i=Object(A.f)(),r=Object(a.useMemo)((function(){var e=i.pathname.split("/").at(-1);return"summary"===e||"details"===e||"compare"===e?e:"summary"}),[i.pathname]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[n,Object(b.jsxs)(C.a,{value:r,indicatorColor:"primary",textColor:"primary",children:[Object(b.jsx)(E.a,{label:"Summary",value:"summary",component:P.b,to:"summary"}),Object(b.jsx)(E.a,{label:"Details",value:"details",component:P.b,to:"details"}),Object(b.jsx)(E.a,{label:"Compare",value:"compare",component:P.b,to:"compare"})]})]}),Object(b.jsx)("div",{children:t})]})},M=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(b.jsx)(s.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},I=function(e){var t=e.children;return Object(b.jsx)(m,{children:Object(b.jsx)(y,{children:Object(b.jsx)(l.ErrorBoundary,{FallbackComponent:M,children:Object(b.jsx)(c.QueryClientProvider,{client:d,children:Object(b.jsx)(S,{children:t})})})})})},q=n(377),N=n(122),D=n(380),T=n(393),R=n(368),B=n(37),F=n(367),V=n(12),z=n(52),W=["children","value","index"],H=function(e){var t=e.children,n=e.value,a=e.index,i=Object(z.a)(e,W);return Object(b.jsx)("div",Object(V.a)(Object(V.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),{},{children:n===a&&t}))},K=n.p+"static/media/thoth-logo.1a28a729.png",U=n(32),Q=n(18),J=n.n(Q),Y=n(226),G=n(36),X=["onEnter","label","helpertext","boxprops","error","lefticon","righticon"],Z=function(e){var t=e.onEnter,n=e.label,a=e.helpertext,i=e.boxprops,r=e.error,o=void 0!==r&&r,l=e.lefticon,c=e.righticon,d=Object(z.a)(e,X);return Object(b.jsxs)(_.a,{children:[Object(b.jsx)(N.a,{variant:"body1",sx:{color:o?"error.main":"text.secondary"},children:n}),Object(b.jsxs)(Y.a,{component:"form",variant:"outlined",sx:Object(V.a)({p:"8px 4px",display:"flex",alignItems:"center",borderColor:o?"red":void 0,paddingLeft:2,paddingRight:2},i),children:[l,Object(b.jsx)(G.c,Object(V.a)({sx:{ml:1,flex:1},placeholder:a,error:o,onChange:d.onChange,onKeyPress:function(e){t&&"Enter"===e.key&&(t(),e.preventDefault())}},d)),c]})]})},$=n(88),ee=n.n($),te=n(30),ne=n.n(te),ae="THOTH_SEARCH_ADVISE_HISTORY",ie="https://khemenu.thoth-station.ninja/api/v1",re={manipulation:{enabled:!1},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},oe=function(e,t,n){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:t},runtime_environment:n};return ne.a.post(ie+"/advise/python",a,{params:{recommendation_type:"stable",limit:500},headers:{accept:"application/json","Content-Type":"application/json"}})},le=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ie+"/python/package/versions",{params:{name:t,per_page:1},headers:{accept:"application/json"}}).then((function(e){return e.data.versions.length>0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){return ne.a.post(ie+"/analyze",{},{params:{image:e},headers:{accept:"application/json","Content-Type":"application/json"}})},de=function(){var e=Object(U.a)(J.a.mark((function e(){var t,n,a=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=a.length>1&&void 0!==a[1]?a[1]:100,e.abrupt("return",ne.a.get(ie+"/container-images",{params:{page:t,per_page:n},headers:{accept:"application/json"}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(A.g)(),t=Object(a.useState)(""),n=Object(h.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),l=Object(h.a)(o,2),c=l[0],d=l[1],u=function(){var t=Object(U.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==i){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,le(i);case 4:t.sent?e("/package/"+i):d("Thoth does not know about that package");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.jsxs)(q.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(q.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(b.jsx)(N.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==c&&void 0!==c?c:""})}),Object(b.jsxs)(q.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(Z,{error:""!==c,onChange:function(e){return function(e){r(e.target.value),""!==c&&d("")}(e)},helpertext:"Search for a Python package",type:"search",boxprops:{mr:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:u})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(){return u()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]})},ue=n(3),ve=n(392),je=n(170),be=n(403),pe=n(300),me=n(224),he=Object(pe.a)();function Oe(e){var t=e.suggestions,n=e.label,i=e.help,r=e.required,o=e.error,l=e.value,c=e.setValue,d=Object(a.useMemo)((function(){return t.map((function(e){return{title:e}}))}),[t]);return Object(b.jsx)(me.a,{value:l,onChange:function(e,t){"string"===typeof t?c({title:t}):t&&t.inputValue?c({title:t.inputValue}):c(t)},filterOptions:function(e,t){var n=he(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,title:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==d&&void 0!==d?d:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,t){return Object(b.jsx)("li",Object(V.a)(Object(V.a)({},e),{},{children:t.title}))},freeSolo:!0,renderInput:function(e){return Object(b.jsx)(je.a,Object(V.a)(Object(V.a)({},e),{},{fullWidth:!0,label:n,required:r,error:o,helperText:i}))}})}var xe=n(390),fe=n(391),ge=n(388),ye=n(389),_e=n(386),ke=n(305),we=n(387),Se=n(379),Ce=n(202),Ee=n.n(Ce),Ae=n(82),Pe=n(312);function Le(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Me(e,t){return"desc"===e?function(e,n){return Le(e,n,t)}:function(e,n){return-Le(e,n,t)}}function Ie(e){var t=e.order,n=e.orderBy,a=e.onRequestSort,i=e.headers;return Object(b.jsx)(_e.a,{children:Object(b.jsxs)(we.a,{children:[i.map((function(e){return Object(b.jsx)(ge.a,{sortDirection:n===e.id&&t,children:Object(b.jsx)(Se.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:function(){return t=e.id,void a(t);var t},children:Object(b.jsx)("b",{children:e.label})})},e.id)})),Object(b.jsx)(ge.a,{})]})})}function qe(e){var t=e.headers,n=e.rows,i=e.action,r=a.useState("asc"),o=Object(h.a)(r,2),l=o[0],c=o[1],d=a.useState(t[0].id),s=Object(h.a)(d,2),u=s[0],v=s[1],j=a.useState(0),p=Object(h.a)(j,2),m=p[0],O=p[1],x=a.useState(10),f=Object(h.a)(x,2),g=f[0],y=f[1],k=m>0?Math.max(0,(1+m)*g-n.length):0;return n?Object(b.jsx)(_.a,{sx:{width:"100%"},children:Object(b.jsxs)(Y.a,{sx:{width:"100%",mb:2},children:[Object(b.jsx)(ye.a,{children:Object(b.jsxs)(xe.a,{sx:{minWidth:750},size:"medium",children:[Object(b.jsx)(Ie,{order:l,orderBy:u,onRequestSort:function(e){c(u===e&&"asc"===l?"desc":"asc"),v(e)},rowCount:n.length,headers:t}),Object(b.jsxs)(fe.a,{children:[n.slice().sort(Me(l,u)).slice(m*g,m*g+g).map((function(e,n){var a="enhanced-table-checkbox-".concat(n);return Object(b.jsxs)(we.a,{hover:!0,tabIndex:-1,children:[t.map((function(t,n){return 0===n?Object(b.jsx)(ge.a,{component:"th",id:a,scope:"row",children:e[t.id]}):Object(b.jsx)(ge.a,{align:"left",children:e[t.id]})})),i?Object(b.jsx)(ge.a,{align:"right",children:Object(b.jsx)(Ae.a,{onClick:function(){return i(e)},children:Object(b.jsx)(Ee.a,{})})}):void 0]},n)})),k>0&&Object(b.jsx)(we.a,{style:{height:53*k},children:Object(b.jsx)(ge.a,{colSpan:6})})]})]})}),Object(b.jsx)(ke.a,{rowsPerPageOptions:[10,25,50],component:"div",count:n.length,rowsPerPage:g,page:m,onPageChange:function(e,t){O(t)},onRowsPerPageChange:function(e){y(parseInt(e.target.value,10)),O(0)}})]})}):Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Pe.a,{})})}var Ne=function(e){return ne.a.get(ie+"/advise/python/"+e,{headers:{accept:"application/json"}})},De=function(e,t){return Object(c.useQuery)(Object(V.a)(Object(V.a)({},t),{},{enabled:!!e&&e.startsWith("adviser"),queryKey:["adviseDocument",e],queryFn:function(){return Ne(e)}}))},Te=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ie+"/advise/python/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Re(e){var t=new Date,n=Math.floor((t.valueOf()-e.valueOf())/1e3),a=n/3154e4;if(a>1){var i=Math.floor(a);return i+" year"+(1!==i?"s":"")}if((a=n/2628e3)>1){var r=Math.floor(a);return r+" month"+(1!==r?"s":"")}if((a=n/86400)>1){var o=Math.floor(a);return o+" day"+(1!==o?"s":"")}if((a=n/3600)>1){var l=Math.floor(a);return l+" hour"+(1!==l?"s":"")}if((a=n/60)>1){var c=Math.floor(a);return c+" minute"+(1!==c?"s":"")}var d=Math.floor(n);return d+" second"+(1!==d?"s":"")}var Be=function(e,t,n){return e?"Advise finished "+Re(new Date(e))+" ago.":t?"Advise started "+Re(new Date(t))+" ago.":n?"Advise finished "+Re(new Date(n+"Z"))+" ago.":"Time started/finished not available"};function Fe(e,t){var n;switch(t.type){case"loading":return Object(V.a)(Object(V.a)({},e),{},{loading:t.payload});case"error":return Object(V.a)(Object(V.a)({},e),{},{error:Object(V.a)(Object(V.a)({},e.error),{},Object(ue.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(V.a)(Object(V.a)({},e),{},(n={},Object(ue.a)(n,t.param,t.payload),Object(ue.a)(n,"error",Object(V.a)(Object(V.a)({},e.error),{},Object(ue.a)({},t.param,void 0))),n));default:throw new Error("Advise state dispatch error")}}var Ve=[{id:"document_id",label:"Document ID"},{id:"status",label:"Status"},{id:"name",label:"Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Run"}],ze={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},We=function(){var e,t,n,i,r,o,l,d,u,v,j,p,m,O,x,f,g,y,_,k,w=Object(A.g)(),S=Object(a.useReducer)(Fe,ze),C=Object(h.a)(S,2),E=C[0],P=C[1],L=Object(a.useMemo)((function(){var e=localStorage.getItem(ae);return e?e.split(",").filter((function(e){return""!==e})):[]}),[]),M=(_=L,Object(c.useQueries)(_.map((function(e){return Object(V.a)(Object(V.a)({},k),{},{queryKey:["adviseDocument",e],queryFn:function(){return Ne(e)}})})))),I=Object(a.useMemo)((function(){return M?M.map((function(e){var t,n,a,i,r,o,l,c,d,s,u,v,j,b,p,m,h,O,x,f,g,y,_,k,w,S,C,E;return{document_id:null===(t=e.data)||void 0===t?void 0:t.data.metadata.document_id,name:null===(n=e.data)||void 0===n||null===(a=n.data.result.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0].project.runtime_environment)||void 0===r?void 0:r.name,os_name:null===(o=e.data)||void 0===o||null===(l=o.data.result.report)||void 0===l||null===(c=l.products)||void 0===c||null===(d=c[0].project.runtime_environment)||void 0===d||null===(s=d.operating_system)||void 0===s?void 0:s.name,os_version:null===(u=e.data)||void 0===u||null===(v=u.data.result.report)||void 0===v||null===(j=v.products)||void 0===j||null===(b=j[0].project.runtime_environment)||void 0===b||null===(p=b.operating_system)||void 0===p?void 0:p.version,python_version:null===(m=e.data)||void 0===m||null===(h=m.data.result.report)||void 0===h||null===(O=h.products)||void 0===O||null===(x=O[0].project.runtime_environment)||void 0===x?void 0:x.python_version,status:function(){var t,n,a,i,r,o;return null!==(t=e.data)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.status?null===(r=e.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.status.state:null!==(a=e.data)&&void 0!==a&&null!==(i=a.data.result.report)&&void 0!==i&&i.products?"success":"error"}(),date:Be(null===(f=e.data)||void 0===f||null===(g=f.data)||void 0===g||null===(y=g.status)||void 0===y?void 0:y.finished_at,null===(_=e.data)||void 0===_||null===(k=_.data)||void 0===k||null===(w=k.status)||void 0===w?void 0:w.started_at,null===(S=e.data)||void 0===S||null===(C=S.data)||void 0===C||null===(E=C.metadata)||void 0===E?void 0:E.datetime)}})):[]}),[M]),D=function(){if("id"!==E.lookupType){var e=!0;return E.pipfile||(e=!1,P({type:"error",param:"pipfile",payload:"Field cant be empty"})),E.pipfileLock||(e=!1,P({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),E.name||(e=!1,P({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!E.id||""===E.id)||(P({type:"error",param:"id",payload:"Field cant be empty"}),!1)},T=function(){var e=Object(U.a)(J.a.mark((function e(){var t,n,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.loading&&D()){e.next=2;break}return e.abrupt("return");case 2:"id"===E.lookupType?w("/advise/"+E.id):(P({type:"loading",payload:!0}),a={operating_system:{name:E.operating_system_name,version:E.operating_system_version},python_version:E.python_version,base_image:E.base_image,cuda_version:E.cuda_version,cudnn_version:E.cudnn_version,mkl_version:E.mkl_version,name:E.name,openblas_version:E.openblas_version,openmpi_version:E.openmpi_version},Object.keys(a).forEach((function(e){""===a[e]&&delete a[e]})),""!==(null===a||void 0===a||null===(t=a.operating_system)||void 0===t?void 0:t.name)&&""!==(null===a||void 0===a||null===(n=a.operating_system)||void 0===n?void 0:n.version)||delete a.operating_system,E.pipfile?E.pipfileLock?oe(E.pipfile,E.pipfileLock,a).then((function(e){P({type:"loading",payload:!1}),w("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var t,n,a,i,r,o,l,c,d;if(P({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))if(null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.includes("Pipfile.lock"))P({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(c=e.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.error});else if(null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&null!==(l=o.error)&&void 0!==l&&l.includes("Pipfile")){var s,u;P({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(s=e.response)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.error})}})):P({type:"error",param:"pipfileLock",payload:"Pipfile.lock is required"}):P({type:"error",param:"pipfile",payload:"Pipfile is required"}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ve.a,{in:"id"===E.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(q.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(q.a,{item:!0,xs:12,children:Object(b.jsx)(N.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=E.error)||void 0===e?void 0:e.id})}),Object(b.jsxs)(q.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(Z,{error:void 0!==(null===(t=E.error)||void 0===t?void 0:t.id),onChange:function(e){return P({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{marginRight:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:T})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(){return T()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]}),Object(b.jsx)(s.a,{onClick:function(){return P({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"}),Object(b.jsx)(s.a,{onClick:function(){return P({type:"input",param:"lookupType",payload:"history"})},children:"History"})]})}),Object(b.jsx)(ve.a,{in:"history"===E.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Local Thoth Advise History"}),Object(b.jsx)(qe,{headers:Ve,rows:I,action:function(e){w("/advise/"+e.document_id)}})]})}),Object(b.jsx)(ve.a,{in:"manual"===E.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Advise Parameters"}),Object(b.jsxs)(Y.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(b.jsxs)(q.a,{container:!0,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(Z,{label:null!==(n=E.error)&&void 0!==n&&n.pipfile?null===(i=E.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return P({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=E.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(Z,{label:null!==(o=E.error)&&void 0!==o&&o.pipfileLock?null===(l=E.error)||void 0===l?void 0:l.pipfileLock:"Pipfile.lock contents",onChange:function(e){return P({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(d=E.error)||void 0===d?void 0:d.pipfileLock),multiline:!0,rows:8})})]}),Object(b.jsxs)(q.a,{container:!0,mt:4,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(je.a,{onChange:function(e){return P({type:"input",param:"base_image",payload:e.target.value})},value:E.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:void 0!==(null===(u=E.error)||void 0===u?void 0:u.base_image)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"cuda_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:void 0!==(null===(v=E.error)||void 0===v?void 0:v.cuda_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"cudnn_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:void 0!==(null===(j=E.error)||void 0===j?void 0:j.cudnn_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"mkl_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:void 0!==(null===(p=E.error)||void 0===p?void 0:p.mkl_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"name",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:void 0!==(null===(m=E.error)||void 0===m?void 0:m.name)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"openblas_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:void 0!==(null===(O=E.error)||void 0===O?void 0:O.openblas_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"openmpi_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:void 0!==(null===(x=E.error)||void 0===x?void 0:x.openmpi_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(je.a,{onChange:function(e){return P({type:"input",param:"operating_system_name",payload:e.target.value})},value:E.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:void 0!==(null===(f=E.error)||void 0===f?void 0:f.operating_system_name)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(je.a,{onChange:function(e){return P({type:"input",param:"operating_system_version",payload:e.target.value})},value:E.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:void 0!==(null===(g=E.error)||void 0===g?void 0:g.operating_system_version)})}),Object(b.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(Oe,{setValue:function(e){var t;return P({type:"input",param:"python_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:E.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:void 0!==(null===(y=E.error)||void 0===y?void 0:y.python_version)})}),Object(b.jsxs)(q.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:6,md:6,children:Object(b.jsx)(s.a,{variant:"outlined",color:"primary",onClick:function(){return P({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Cancel"})})}),Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsx)(be.a,{variant:"contained",color:"primary",onClick:function(){return T()},loading:E.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})};function He(e,t){var n;switch(t.type){case"loading":return Object(V.a)(Object(V.a)({},e),{},{loading:t.payload});case"error":return Object(V.a)(Object(V.a)({},e),{},{error:Object(V.a)(Object(V.a)({},e.error),{},Object(ue.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(V.a)(Object(V.a)({},e),{},(n={},Object(ue.a)(n,t.param,t.payload),Object(ue.a)(n,"error",Object(V.a)(Object(V.a)({},e.error),{},Object(ue.a)({},t.param,void 0))),n));default:throw new Error("Image state dispatch error")}}var Ke=[{id:"environment_name",label:"Image Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Updated"}],Ue={error:{},loading:!1,lookupType:"id",id:""},Qe=function(){var e,t,n,i=Object(A.g)(),r=Object(a.useReducer)(He,Ue),o=Object(h.a)(r,2),l=o[0],d=o[1],u=(n={useErrorBoundary:!1},Object(c.useQuery)(Object(V.a)(Object(V.a)({},n),{},{queryKey:["container-images"],queryFn:function(){return de()}}))),v=Object(a.useMemo)((function(){var e,t,n,a;return null!==u&&void 0!==u&&null!==(e=u.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.container_images?null===u||void 0===u||null===(n=u.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.container_images.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{date:Re(new Date(e.datetime))+" ago"})})):[]}),[null===u||void 0===u?void 0:u.data]),j=function(){var e=Object(U.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.loading){e.next=2;break}return e.abrupt("return");case 2:if(!l.id.includes("package-extract")){e.next=5;break}return i("/image/"+l.id),e.abrupt("return");case 5:d({type:"loading",payload:!0}),ce(l.id).then((function(e){d({type:"loading",payload:!1}),i("/image/"+e.data.analysis_id,{state:{image_name:l.id}})})).catch((function(e){var t,n,a,i;(d({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))&&d({type:"error",param:"id",payload:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)&&void 0!==n?n:"An unknown error occurred"})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ve.a,{in:"id"===l.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(q.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(q.a,{item:!0,xs:12,children:Object(b.jsx)(N.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=l.error)||void 0===e?void 0:e.id})}),Object(b.jsxs)(q.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(Z,{error:void 0!=(null===(t=l.error)||void 0===t?void 0:t.id),onChange:function(e){return d({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID or image name",type:"search",boxprops:{mr:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:j})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(s.a,{variant:"contained",color:"primary",onClick:j,sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]}),Object(b.jsx)(s.a,{onClick:function(){return d({type:"input",param:"lookupType",payload:"lookup"})},children:"Lookup Thoth Images"})]})}),Object(b.jsx)(ve.a,{in:"lookup"===l.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Available Thoth Container Images"}),Object(b.jsx)(qe,{headers:Ke,rows:v,action:function(e){i("/image/"+e.package_extract_document_id,{state:{image_name:e.environment_name}})}})]})})]})},Je=function(){var e=Object(a.useState)("package"),t=Object(h.a)(e,2),n=t[0],i=t[1],r=Object(B.a)(),o=Object(F.a)(r.breakpoints.up("sm"));return Object(b.jsx)("div",{style:{maxWidth:"1000px",marginLeft:"auto",marginRight:"auto"},children:Object(b.jsxs)(q.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(_.a,{sx:{marginTop:10},children:Object(b.jsx)("img",{alt:"Thoth Logo",src:K,height:o?300:"auto",width:"100%"})})}),Object(b.jsxs)(q.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(b.jsx)(q.a,{item:!0,xs:12,alignItems:"left",mb:3,children:Object(b.jsx)(N.a,{variant:"h4",children:Object(b.jsx)("b",{children:"Thoth Search"})})}),Object(b.jsx)(q.a,{item:!0,xs:12,alignItems:"left",children:Object(b.jsx)(N.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyse and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyse a single Python package to see what Thoth knows about the package."})}),Object(b.jsx)(q.a,{item:!0,textAlign:"center",xs:12,mt:3,mb:4,children:Object(b.jsxs)(D.a,{value:n,exclusive:!0,onChange:function(e,t){t&&i(t)},size:o?"large":"small",children:[Object(b.jsx)(T.a,{value:"package",children:Object(b.jsx)("b",{children:"package"})}),Object(b.jsx)(T.a,{value:"environment",children:Object(b.jsx)("b",{children:"environment"})}),Object(b.jsx)(T.a,{value:"image",children:Object(b.jsx)("b",{children:"image"})})]})}),Object(b.jsxs)(q.a,{item:!0,xs:12,sx:{marginBottom:3},children:[Object(b.jsx)(R.a,{}),Object(b.jsx)(H,{value:n,index:"package",children:Object(b.jsx)(se,{})}),Object(b.jsx)(H,{value:n,index:"environment",children:Object(b.jsx)(We,{})}),Object(b.jsx)(H,{value:n,index:"image",children:Object(b.jsx)(Qe,{})})]})]})]})})},Ye=function(){return Object(b.jsx)("div",{children:"404"})},Ge=n(394),Xe=n(395),Ze=n(396),$e=function(e){var t=e.cardMeta,n=e.cardBody,a=e.cardAction;return Object(b.jsxs)(Ge.a,{children:[Object(b.jsx)(Xe.a,{action:a,title:Object(b.jsx)(N.a,{variant:"h5",children:t.title}),subheader:t.subTitle}),Object(b.jsx)(Ze.a,{children:n})]})},et=n(402),tt=n(381),nt=n(385),at=n(375),it=n(369),rt=n(397),ot=["value","total","label","action"],lt=function(e){var t=e.value,n=e.total,a=e.label,i=e.action,r=Object(z.a)(e,ot);return Object(b.jsxs)(q.a,Object(V.a)(Object(V.a)({container:!0,spacing:1,alignItems:"center"},r),{},{children:[Object(b.jsx)(q.a,{item:!0,xs:5,children:Object(b.jsx)(N.a,{variant:"body2",children:a})}),Object(b.jsx)(q.a,{item:!0,xs:2,children:Object(b.jsx)(N.a,{variant:"body2",children:t})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(rt.a,{variant:"determinate",value:n>0?t/n*100:0,sx:{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"theme.palette.grey[200]"},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}})}),Object(b.jsx)(q.a,{item:!0,xs:1,children:Object(b.jsx)("div",{children:null!==i&&void 0!==i?i:null})})]}))},ct=function(e){var t,n,a,i,r,o,l,c,d,s,u,v,j,p,m=e.metric,O=(null!==(t=null===m||void 0===m||null===(n=m.all)||void 0===n?void 0:n.direct)&&void 0!==t?t:0)+(null!==(a=null===m||void 0===m||null===(i=m.all)||void 0===i?void 0:i.indirect)&&void 0!==a?a:0)+(null!==(r=null===m||void 0===m||null===(o=m.all)||void 0===o?void 0:o.roots)&&void 0!==r?r:0);return null!==m&&void 0!==m&&m.all&&null!==m&&void 0!==m&&m.roots?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"All Packages"}),Object(b.jsx)(R.a,{sx:{mb:1}}),Object(b.jsx)(lt,{value:null!==(l=null===m||void 0===m||null===(c=m.all)||void 0===c?void 0:c.roots)&&void 0!==l?l:0,total:O,label:"Root",mb:1}),Object(b.jsx)(lt,{value:null!==(d=null===m||void 0===m||null===(s=m.all)||void 0===s?void 0:s.direct)&&void 0!==d?d:0,total:O,label:"Direct",mb:1}),Object(b.jsx)(lt,{value:null!==(u=null===m||void 0===m||null===(v=m.all)||void 0===v?void 0:v.indirect)&&void 0!==u?u:0,total:O,label:"Indirect"}),Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,mt:2,children:"Root Packages"}),Object(b.jsx)(R.a,{sx:{mb:1}}),Object(b.jsx)(nt.a,{component:"nav",children:Object(b.jsx)(et.a,{children:null===(j=Object.entries(null!==(p=null===m||void 0===m?void 0:m.roots)&&void 0!==p?p:{}))||void 0===j?void 0:j.map((function(e){var t,n,a,i,r,o,l,c,d=Object(h.a)(e,1)[0],s=(null!==(t=null===m||void 0===m?void 0:m.roots[d].direct)&&void 0!==t?t:0)+(null!==(n=null===m||void 0===m?void 0:m.roots[d].indirect)&&void 0!==n?n:0);return Object(b.jsx)(ve.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)(at.a,{children:Object(b.jsxs)(q.a,{container:!0,alignItems:"center",children:[Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(it.a,{primary:d})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsxs)(q.a,{container:!0,direction:"column",children:[Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(lt,{value:null!==(a=null===m||void 0===m||null===(i=m.roots)||void 0===i||null===(r=i[d])||void 0===r?void 0:r.direct)&&void 0!==a?a:0,total:s,label:"Direct"})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(lt,{value:null!==(o=null===m||void 0===m||null===(l=m.roots)||void 0===l||null===(c=l[d])||void 0===c?void 0:c.indirect)&&void 0!==o?o:0,total:s,label:"Indirect"})})]})})]})}),Object(b.jsx)(R.a,{variant:"middle",sx:{mb:1}})]})},d)}))})})]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},dt=n(225),st=n(207),ut=n.n(st),vt=n(208),jt=n.n(vt),bt=n(206),pt=n.n(bt),mt=n(205),ht=n.n(mt),Ot=function(e){var t,n=e.name,a=e.metadata,r=e.packages,o=e.totalLicenses,l=i.a.useState(!1),c=Object(h.a)(l,2),d=c[0],s=c[1];return Object(b.jsxs)(q.a,{container:!0,children:[Object(b.jsx)(q.a,{item:!0,xs:1,children:null===(null===a||void 0===a?void 0:a.isOsiApproved)?Object(b.jsx)(ht.a,{}):null!==a&&void 0!==a&&a.isOsiApproved?Object(b.jsx)(pt.a,{}):null}),Object(b.jsxs)(q.a,{item:!0,xs:!0,children:[Object(b.jsx)(_.a,{onClick:function(){return s(!d)},children:Object(b.jsx)(lt,{value:null!==(t=Object.keys(r).length)&&void 0!==t?t:0,total:o,label:n,action:d?Object(b.jsx)(ut.a,{}):Object(b.jsx)(jt.a,{})},n)}),Object(b.jsxs)(ve.a,{in:d,timeout:"auto",unmountOnExit:!0,children:[Object(b.jsx)(_.a,{my:1,children:Object.entries(r).sort((function(e,t){return e[1].depth-t[1].depth})).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(dt.a,{sx:{margin:.5},color:0===a.depth?"primary":1===a.depth?"secondary":"default",label:n},n)}))}),Object(b.jsx)(R.a,{})]})]})]})},xt=function(e){var t=e.metric,n=i.a.useState(!1),r=Object(h.a)(n,2),o=r[0],l=r[1],c=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).sort((function(e,t){return Object.keys(t[1]).length-Object.keys(e[1]).length}))}),[t]),d=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).reduce((function(e,t){var n=Object(h.a)(t,2)[1];return e+Object.keys(n.packages).length}),0)}),[t]);return t?Object(b.jsxs)("div",{children:[Object(b.jsxs)(q.a,{container:!0,children:[Object(b.jsx)(q.a,{item:!0,xs:1,children:Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"OSI"})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"Dependency Licenses"})})]}),Object(b.jsx)(R.a,{}),Object(b.jsx)(et.a,{children:null===c||void 0===c?void 0:c.slice(0,10).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(ve.a,{children:Object(b.jsx)(Ot,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:d})},n)}))}),Object(b.jsx)(ve.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(b.jsx)(et.a,{children:c.slice(10).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(ve.a,{children:Object(b.jsx)(Ot,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:d})},n)}))})}),Object(b.jsx)(_.a,{textAlign:"center",children:Object(b.jsx)(s.a,{onClick:function(){return l(!o)},color:"primary",children:o?"Less":"More"})})]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},ft=function(e){var t,n,a=e.metric,i=Object.values(null!==(t=null===a||void 0===a?void 0:a.justification)&&void 0!==t?t:{}).reduce((function(e,t){return e+t}),0);return a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(N.a,{variant:"body2",gutterBottom:!0,children:null===a||void 0===a?void 0:a.build}),Object(b.jsx)(R.a,{sx:{mb:1}}),Object(b.jsx)(N.a,{variant:"h6",mt:3,gutterBottom:!0,children:"Justification Counts"}),Object(b.jsx)(R.a,{sx:{mb:1}}),Object.entries(null!==(n=null===a||void 0===a?void 0:a.justification)&&void 0!==n?n:{}).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(lt,{value:a,total:i,label:n,mb:1},n)}))]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},gt=n(404),yt=function(e){var t=e.metrics;return Object(b.jsxs)(gt.a,{columns:{xs:1,md:2},spacing:3,sx:{mb:3,mt:1},children:[Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Thoth Advise Summary"},cardBody:Object(b.jsx)(ft,{metric:null===t||void 0===t?void 0:t.advise})})}),Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Dependencies Summary"},cardBody:Object(b.jsx)(ct,{metric:null===t||void 0===t?void 0:t.dependencies})})}),Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Licenses Summary"},cardBody:Object(b.jsx)(xt,{metric:null===t||void 0===t?void 0:t.licenses})})})]})},_t=n(138),kt=n.n(_t),wt=n(139),St=n.n(wt),Ct=n(398),Et=["text","icon","link"],At=function(e){var t=e.text,n=e.icon,a=e.link,i=Object(z.a)(e,Et);return Object(b.jsxs)(w.a,Object(V.a)(Object(V.a)({},i),{},{direction:"row",spacing:1,alignItems:"center",children:[n,Object(b.jsx)(Ct.a,{underline:"none",href:a||void 0,variant:"body2",align:"center",children:t})]}))},Pt=n(373),Lt=["info"],Mt=function(e){var t=e.info,n=Object(z.a)(e,Lt);return Object(b.jsx)(Pt.a,Object(V.a)(Object(V.a)({action:Object(b.jsx)(s.a,{color:"inherit",size:"small",href:null===t||void 0===t?void 0:t.link,children:"DETAILS"}),severity:t.type},n),{},{children:null===t||void 0===t?void 0:t.message}))},It=function(e){var t,n,r,o,l,c,d,u,v,j,p,m=e.adviseDocument,O=e.logs,x=i.a.useState(!1),f=Object(h.a)(x,2),g=f[0],y=f[1],_=i.a.useState(!1),k=Object(h.a)(_,2),S=k[0],C=k[1],E=i.a.useState(),A=Object(h.a)(E,2),P=A[0],L=A[1],M=Object(a.useMemo)((function(){var e,t,n;return null!==m&&void 0!==m&&null!==(e=m.result)&&void 0!==e&&e.report?m.result.report.ERROR?["ERROR","error"]:["COMPLETE","success"]:null!==m&&void 0!==m&&null!==(t=m.result)&&void 0!==t&&t.error?["ERROR","error"]:null!==m&&void 0!==m&&null!==(n=m.status)&&void 0!==n&&n.state?[m.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[m]),I=Object(h.a)(M,2),q=I[0],D=I[1],T=Object(a.useMemo)((function(){var e,t,n;return null!==m&&void 0!==m&&null!==(e=m.result)&&void 0!==e&&null!==(t=e.report)&&void 0!==t&&t.stack_info?null===m||void 0===m||null===(n=m.result)||void 0===n?void 0:n.report.stack_info.filter((function(e){return"ERROR"===e.type})).map((function(e){return Object(V.a)(Object(V.a)({},e),{},{type:e.type.toLowerCase()})})):[]}),[m]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(N.a,{variant:"h4",mb:1,children:Object(b.jsx)("b",{children:null!==(t=null===m||void 0===m||null===(n=m.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:null===m||void 0===m||null===(r=m.parameters)||void 0===r?void 0:r.analysis_id})}),Object(b.jsxs)(w.a,{direction:"row",spacing:2,alignItems:"center",mb:3,children:[Object(b.jsx)(dt.a,{label:q,color:D}),Object(b.jsx)(At,{text:Be(null===m||void 0===m||null===(o=m.status)||void 0===o?void 0:o.finished_at,null===m||void 0===m||null===(l=m.status)||void 0===l?void 0:l.started_at,null===m||void 0===m||null===(c=m.metadata)||void 0===c?void 0:c.datetime),icon:Object(b.jsx)(kt.a,{})}),Object(b.jsx)(s.a,{sx:{marginLeft:2},onClick:function(){return C(!S)},children:Object(b.jsx)(At,{text:"Logs",icon:Object(b.jsx)(St.a,{})})})]}),Object(b.jsx)(ve.a,{in:S,children:null!==(d=null===O||void 0===O?void 0:O.split("\n").map((function(e,t){return Object(b.jsx)(N.a,{noWrap:P!==t,onClick:function(){return L(P===t?void 0:t)},variant:"body2",sx:{backgroundColor:P===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==d?d:"Advisor log is not available."}),Object(b.jsx)(N.a,{variant:"subtitle2",mb:2,children:null!==(u=null===m||void 0===m||null===(v=m.result)||void 0===v||null===(j=v.report)||void 0===j?void 0:j.ERROR)&&void 0!==u?u:null===m||void 0===m||null===(p=m.result)||void 0===p?void 0:p.error_msg}),(null===T||void 0===T?void 0:T.length)>0?Object(b.jsxs)(w.a,{direction:"column",spacing:1,children:[Object(b.jsx)(Mt,{info:T[0]}),Object(b.jsx)(ve.a,{in:g,timeout:"auto",unmountOnExit:!0,children:Object(b.jsx)(w.a,{direction:"column",spacing:1,children:null===T||void 0===T?void 0:T.slice(1).map((function(e,t){return Object(b.jsx)(Mt,{info:e},t)}))})}),Object(b.jsx)(s.a,{color:"inherit",size:"small",sx:{alignSelf:"flex-start"},onClick:function(){return y(!g)},children:(null===T||void 0===T?void 0:T.length)>1?g?"LESS":"MORE":null})]}):null,"COMPLETE"===q?Object(b.jsxs)(N.a,{variant:"body1",sx:{color:"text.secondary"},children:["Thoth has added and removed packages from the original Pipfile.lock, resulting in a ",Object(b.jsx)("i",{children:"new"})," Pipfile.lock. Switch between the new and old Python environments to see the differences."]}):null]})};function qt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Nt(e,t){return"desc"===e?function(e,n){return qt(e,n,t)}:function(e,n){return-qt(e,n,t)}}function Dt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Tt=n(370),Rt=[{id:"name",numeric:!1,label:"Package"},{id:"depth",numeric:!0,label:"Depth"},{id:"license",numeric:!1,label:"License"},{id:"dependencies",numeric:!0,label:"Direct Dependencies"}];var Bt=function(e){var t=e.order,n=e.orderBy,a=e.onRequestSort;return Object(b.jsx)(_e.a,{children:Object(b.jsx)(we.a,{children:Rt.map((function(e){return Object(b.jsx)(ge.a,{align:e.numeric?"right":"left",padding:"normal",sortDirection:n===e.id&&t,children:Object(b.jsxs)(Se.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:function(){return t=e.id,void a(t);var t},children:[e.label,n===e.id?Object(b.jsx)(_.a,{component:"span",sx:Tt.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id)}))})})};function Ft(e){var t,n=e.search,r=void 0===n?"":n,o=e.graph,l=Object(a.useState)("asc"),c=Object(h.a)(l,2),d=c[0],s=c[1],u=i.a.useState("name"),v=Object(h.a)(u,2),j=v[0],p=v[1],m=i.a.useState(0),O=Object(h.a)(m,2),x=O[0],f=O[1],g=i.a.useState(25),y=Object(h.a)(g,2),k=y[0],w=y[1],S=i.a.useState([]),C=Object(h.a)(S,2),E=C[0],A=C[1],P=null!==(t=Object(a.useContext)($t))&&void 0!==t?t:{setSelected:function(){return console.log("missing callback")}},L=P.selected,M=P.setSelected;Object(a.useEffect)((function(){if(o){f(0);var e=[];o.nodes.forEach((function(t){var n,a,i,r,o,l,c,d,s;-1!==t.value.depth&&e.push({name:null!==(n=t.value.label)&&void 0!==n?n:t.key,key:t.key,warnings:[],depth:null!==(a=null===(i=t.value)||void 0===i?void 0:i.depth)&&void 0!==a?a:-1,license:null!==(r=null===t||void 0===t||null===(o=t.value)||void 0===o||null===(l=o.metadata)||void 0===l?void 0:l.License)&&void 0!==r?r:"",dependencies:t.adjacents.size,summary:null!==(c=null===t||void 0===t||null===(d=t.value)||void 0===d||null===(s=d.metadata)||void 0===s?void 0:s.Summary)&&void 0!==c?c:""})})),A(e)}}),[o]);var I=x>0?Math.max(0,(1+x)*k-E.length):0;return Object(b.jsxs)(_.a,{sx:{width:"100%"},children:[Object(b.jsx)(ye.a,{children:Object(b.jsxs)(xe.a,{sx:{minWidth:750},size:"medium",children:[Object(b.jsx)(Bt,{order:d,orderBy:j,onRequestSort:function(e){s(j===e&&"asc"===d?"desc":"asc"),p(e)}}),Object(b.jsxs)(fe.a,{children:[Dt(E,Nt(d,j)).filter((function(e){return e.name.includes(r)})).slice(x*k,x*k+k).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)(we.a,{hover:!0,onClick:function(){return M(e.key)},tabIndex:-1,selected:L===e.key,children:[Object(b.jsx)(ge.a,{component:"th",id:n,scope:"row",children:e.name}),Object(b.jsx)(ge.a,{align:"right",children:e.depth}),Object(b.jsx)(ge.a,{align:"right",children:e.license}),Object(b.jsx)(ge.a,{align:"right",children:e.dependencies})]}),Object(b.jsx)(we.a,{children:Object(b.jsx)(ge.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6})})]},e.name)})),I>0&&Object(b.jsx)(we.a,{style:{height:53*I},children:Object(b.jsx)(ge.a,{colSpan:6})})]})]})}),Object(b.jsx)(ke.a,{rowsPerPageOptions:[5,10,25],component:"div",count:E.length,rowsPerPage:k,page:x,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){w(parseInt(e.target.value,10)),f(0)}})]})}var Vt=n(105),zt=n.n(Vt),Wt=n(209),Ht=n.n(Wt),Kt=function(e){var t,n,a,i,r,o,l,c,d=e.node;return Object(b.jsxs)("div",{children:[Object(b.jsxs)(q.a,{container:!0,alignItems:"center",children:[Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsx)(N.a,{variant:"h6",children:Object(b.jsx)("b",{children:d.value.id})})}),Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsxs)(N.a,{ml:2,variant:"body1",children:["v",null!==(t=d.value.version)&&void 0!==t?t:"NaN"]})})]}),Object(b.jsx)(N.a,{gutterBottom:!0,variant:"body2",children:null!==(n=null===(a=d.value)||void 0===a||null===(i=a.metadata)||void 0===i?void 0:i.Summary)&&void 0!==n?n:"NaN"}),Object(b.jsxs)(q.a,{container:!0,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(At,{text:null!==(r=null===(o=d.value)||void 0===o||null===(l=o.metadata)||void 0===l?void 0:l.License)&&void 0!==r?r:"NaN",icon:Object(b.jsx)(zt.a,{})})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(At,{ml:2,text:null!==(c=d.value)&&void 0!==c&&c.latestVersion?"Latest version is installed":"Installed version is NOT the latest.",icon:Object(b.jsx)(Ht.a,{})})})]})]})},Ut=n(147),Qt=["graph"],Jt=function(e){var t=e.graph,n=Object(z.a)(e,Qt),i=Object(a.useRef)(null),r=Object(a.useContext)($t).selected;return Object(a.useEffect)((function(){if(r&&t){var e=t.nodes.get(r);if(e){var n,a,l=t.findAllNodesOnAllPaths(e,"*App"),c=t.nodes.get("*App");c&&l.set("*App",c);var d=new Ut.a;l.forEach((function(t){var n,a=document.createElement("div");o.a.render(Object(b.jsx)(Kt,{node:t}),a);var i=null!==(n=t.value.color)&&void 0!==n?n:re.nodes.color.background,r=void 0;"*App"===t.key?(i="#4fc1ea",r={color:"#4fc1ea",strokeWidth:3,size:20}):t.key===e.key&&(i="#f39200"),d.add(Object(V.a)(Object(V.a)({},t.value),{},{color:i,title:t.key===e.key||"*App"===t.key?void 0:a,font:r}))}));var s={nodes:d,edges:new Ut.a(t.visEdges)},u=i.current&&new Ut.b(i.current,s,re),v=null===(n=document)||void 0===n||null===(a=n.getElementById("mynetwork"))||void 0===a?void 0:a.getElementsByTagName("canvas")[0],j=function(e){v&&(v.style.cursor=e)};u&&(u.on("hoverNode",(function(){j("grab")})),u.on("blurNode",(function(){j("default")})),u.on("dragStart",(function(){j("grabbing")})),u.on("dragging",(function(){j("grabbing")})),u.on("dragEnd",(function(){j("grab")})))}}}),[r,t,i]),Object(b.jsx)("div",Object(V.a)(Object(V.a)({},n),{},{style:{display:"flex",flexFlow:"column nowrap"},children:Object(b.jsx)("div",{ref:i,id:"mynetwork",style:{flex:"1 1 auto",height:"50vh"}})}))},Yt=n(15),Gt=n(210),Xt=n.n(Gt),Zt=function(e){var t,n,r,o,l,c,d,u,v,j,p,m,O,x,f=e.graph,g=Object(a.useContext)($t),y=g.selected,k=g.setSelected,S=Object(a.useMemo)((function(){return f.nodes.get(y)}),[y]),C=Object(a.useMemo)((function(){var e=[];return S&&Object(Yt.a)(S.parents).filter((function(e){return"*App"!==e})).forEach((function(t){f.nodes.get(t)&&e.push(t)})),e}),[S]),E=Object(a.useMemo)((function(){var e,t,n={};S&&(console.log(S),null===S||void 0===S||null===(e=S.value)||void 0===e||null===(t=e.justifications)||void 0===t||t.forEach((function(e){var t;n[e.type]=[].concat(Object(Yt.a)(null!==(t=n[e.type])&&void 0!==t?t:[]),[e])})));return n}),[S]),A=Object(a.useMemo)((function(){return Object(b.jsxs)(w.a,{direction:"row",alignItems:"center",children:[Object(b.jsx)(Xt.a,{color:"error",sx:{marginRight:".5rem"}}),Object(b.jsx)(N.a,{mb:0,color:"error",gutterBottom:!0,variant:"body2",children:"The package metadata could not be fetched. Package data will be limited."})]})}),[]);return Object(b.jsxs)(_.a,{children:[Object(b.jsxs)(Y.a,{sx:{padding:2},children:[Object(b.jsxs)(q.a,{container:!0,alignItems:"center",mb:1,children:[Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(N.a,{variant:"h3",children:Object(b.jsx)("b",{children:null===S||void 0===S||null===(t=S.value)||void 0===t?void 0:t.name})})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(N.a,{ml:2,variant:"h6",children:null===S||void 0===S||null===(n=S.value)||void 0===n?void 0:n.version})})]}),!(null!==S&&void 0!==S&&null!==(r=S.value)&&void 0!==r&&r.metadata)&&A,Object(b.jsx)(N.a,{gutterBottom:!0,variant:"body1",children:null===S||void 0===S||null===(o=S.value)||void 0===o||null===(l=o.metadata)||void 0===l?void 0:l.Summary}),Object(b.jsx)(q.a,{container:!0,spacing:2,children:Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(At,{text:null!==(c=null===S||void 0===S||null===(d=S.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.License)&&void 0!==c?c:"NaN",icon:Object(b.jsx)(zt.a,{})})})})]}),Object(b.jsxs)(Y.a,{sx:{padding:2,marginTop:2},children:[Object(b.jsx)(N.a,{variant:"h5",children:"Thoth Justifications"}),Object.entries(E).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)(N.a,{variant:"h6",mt:2,children:[n," Justifications"]}),a.map((function(e,t){return Object(b.jsxs)(q.a,{container:!0,alignItems:"center",ml:3,children:[Object(b.jsx)(q.a,{item:!0,xs:10,children:Object(b.jsx)(N.a,{variant:"body1",mt:1,children:e.message})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(s.a,{href:e.link,children:"READ MORE"})})]},e.message+t)}))]},n)}))]}),Object(b.jsxs)(Y.a,{sx:{padding:2,marginTop:2},children:[Object(b.jsx)(N.a,{variant:"h5",mb:2,children:"Package Origins"}),Object(b.jsxs)(N.a,{variant:"body1",mb:2,children:[0===(null===(v=Object(Yt.a)(null!==(j=null===S||void 0===S?void 0:S.parents)&&void 0!==j?j:[]).filter((function(e){return"*App"!==e})))||void 0===v?void 0:v.length)?(null===S||void 0===S||null===(p=S.value)||void 0===p?void 0:p.label)+" is not a dependent of any package in this Python environment":"There are "+(null===(m=Object(Yt.a)(null!==(O=null===S||void 0===S?void 0:S.parents)&&void 0!==O?O:[]).filter((function(e){return"*App"!==e})))||void 0===m?void 0:m.length)+" package(s) that have "+(null===S||void 0===S||null===(x=S.value)||void 0===x?void 0:x.label)+" as a direct dependency: ",C.map((function(e,t){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Ct.a,{underline:"hover",onClick:function(){return k(e)},children:e},e+t)," "]})}))]}),Object(b.jsx)(Jt,{graph:f})]})]})},$t=i.a.createContext({}),en=function(e){var t=e.graph,n=Object(a.useState)(""),i=Object(h.a)(n,2),r=i[0],o=i[1],l=Object(a.useState)(""),c=Object(h.a)(l,2),d=c[0],s=c[1];return t?Object(b.jsx)($t.Provider,{value:{selected:d,setSelected:s},children:Object(b.jsxs)(q.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start",mt:2,children:[Object(b.jsx)(q.a,{item:!0,sm:12,md:6,children:Object(b.jsxs)(Y.a,{sx:{padding:2},children:[Object(b.jsx)(Z,{onChange:function(e){o(e.target.value)},lefticon:Object(b.jsx)(ee.a,{})}),Object(b.jsx)(Ft,{search:r,graph:t})]})}),Object(b.jsx)(q.a,{item:!0,sm:12,md:6,children:d?Object(b.jsx)(Zt,{graph:t}):Object(b.jsx)(N.a,{variant:"body1",align:"center",children:"No package selected"})})]})}):null},tn=n(399),nn=n(371),an=n(400),rn=n(401),on=n(311),ln=n(306),cn=n(51),dn=n(211),sn=n.n(dn),un=function(e){var t,n,r,o=e.adviseDocument,l=i.a.useState(null!==(t=null===o||void 0===o||null===(n=o.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:""),c=Object(h.a)(l,2),d=c[0],u=c[1],v=De(d),j=i.a.useState(!1),p=Object(h.a)(j,2),m=p[0],O=p[1],x=i.a.useState(""),f=Object(h.a)(x,2),g=f[0],y=f[1],k=function(e,t){"backdropClick"!==t&&O(!1)},S=Object(a.useMemo)((function(){var e,t,n,a=[];null!==o&&void 0!==o&&null!==(e=o.result)&&void 0!==e&&null!==(t=e.parameters)&&void 0!==t&&null!==(n=t.project)&&void 0!==n&&n.requirements_locked&&a.push("Original Lockfile");var i=localStorage.getItem(ae);return i&&a.push.apply(a,Object(Yt.a)(i.split(",").filter((function(e){return""!==e})))),a}),[""===g]),C={old:{text:"#b31412",background:"#fad2cf"},new:{text:"#217f70",background:"#e3fbf7"},change:{text:"#7f6921",background:"#fbf3e3"},equal:{text:void 0,background:"#FFF"}},E=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},i=e?a(e):null,r=t?a(t):null;return i&&r?i===r?Object(b.jsxs)(b.Fragment,{children:[A(i,"equal",n),A(r,"equal",n)]}):Object(b.jsxs)(b.Fragment,{children:[A(i,"change",n),A(r,"change",n)]}):i?Object(b.jsxs)(b.Fragment,{children:[A(i,"old",n),A(r,"",n)]}):r?Object(b.jsxs)(b.Fragment,{children:[A(i,"",n),A(r,"new",n)]}):void 0},A=function(e,t,n){var a={height:"100%",paddingBottom:.25,paddingTop:.25,borderLeft:"1px solid #e3e5e8",borderRight:"1px solid #e3e5e8",overflow:"hidden"};return t?Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsxs)(w.a,{direction:"row",sx:Object(V.a)({backgroundColor:C[t].background},a),children:["equal"!==t?Object(b.jsx)(N.a,{sx:{textAlign:"center",minWidth:"2rem",color:C[t].text},variant:"body2",children:Object(b.jsx)("b",{children:"old"===t?"-":"new"===t?"+":"~"})}):Object(b.jsx)(_.a,{sx:{minWidth:"2rem"}}),n?Object(b.jsx)(N.a,{sx:{marginRight:1,color:C[t].text},variant:"body2",children:Object(b.jsx)("b",{children:n+":"})}):void 0,Object(b.jsx)(N.a,{sx:{color:C[t].text},display:"inline",variant:"body2",children:e})]})}):Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsx)(_.a,{sx:Object(V.a)({backgroundColor:C.equal.background},a)})})},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(V.a)({paddingLeft:4,backgroundColor:"white",paddingBottom:1,paddingTop:4,borderLeft:"1px solid #e3e5e8",borderRight:"1px solid #e3e5e8"},n);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsx)(N.a,{variant:e,sx:a,children:t})}),Object(b.jsx)(q.a,{item:!0,xs:6,children:Object(b.jsx)(N.a,{variant:e,sx:a,children:t})})]})},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=e.map((function(e){return JSON.stringify(e)})),i=t.map((function(e){return JSON.stringify(e)})),r=new Set(a),o=new Set(i),l=Object(Yt.a)(new Set([].concat(Object(Yt.a)(a),Object(Yt.a)(i))));return l.sort().map((function(e){var t=JSON.parse(e);return E(r.has(e)?t:void 0,o.has(e)?t:void 0,void 0,n)}))},M=function(e,t){var n,a,i,r,o,l,c,d,s,u,v,j,p,m,h,O,x,f,g,y,_=Object(Yt.a)(new Set([].concat(Object(Yt.a)(Object.keys(null!==(n=null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"])&&void 0!==n?n:{})),Object(Yt.a)(Object.keys(null!==(i=null===t||void 0===t||null===(r=t.requirements)||void 0===r?void 0:r["dev-packages"])&&void 0!==i?i:{}))))),k=Object(Yt.a)(new Set([].concat(Object(Yt.a)(Object.keys(null!==(o=null===e||void 0===e||null===(l=e.requirements)||void 0===l?void 0:l.packages)&&void 0!==o?o:{})),Object(Yt.a)(Object.keys(null!==(c=null===t||void 0===t||null===(d=t.requirements)||void 0===d?void 0:d.packages)&&void 0!==c?c:{}))))),w=Object(Yt.a)(new Set([].concat(Object(Yt.a)(Object.keys(null!==(s=null===e||void 0===e||null===(u=e.requirements_locked)||void 0===u?void 0:u.default)&&void 0!==s?s:{})),Object(Yt.a)(Object.keys(null!==(v=null===t||void 0===t||null===(j=t.requirements_locked)||void 0===j?void 0:j.default)&&void 0!==v?v:{})))));return Object(b.jsxs)(b.Fragment,{children:[_.length>0?P("h6","Pipfile Dev Packages",{paddingTop:.5,paddingBottom:.5}):void 0,_.map((function(n){var a,i;return E(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"][n],null===t||void 0===t||null===(i=t.requirements)||void 0===i?void 0:i["dev-packages"][n],n)})),k.length>0?P("h6","Pipfile Packages",{paddingTop:.5,paddingBottom:.5}):void 0,k.map((function(n){var a,i;return E(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a.packages[n],null===t||void 0===t||null===(i=t.requirements)||void 0===i?void 0:i.packages[n],n)})),P("h6","Pipfile.lock Sources"),L(null===e||void 0===e||null===(p=e.requirements_locked)||void 0===p||null===(m=p._meta)||void 0===m?void 0:m.sources,null===t||void 0===t||null===(h=t.requirements_locked)||void 0===h||null===(O=h._meta)||void 0===O?void 0:O.sources,(function(e){return"".concat(e.name," (").concat(e.url,")")})),P("h6","Pipfile.lock Packages"),w.map((function(n){var a,i;return E(null===e||void 0===e||null===(a=e.requirements_locked)||void 0===a?void 0:a.default[n],null===t||void 0===t||null===(i=t.requirements_locked)||void 0===i?void 0:i.default[n],n,(function(e){return null===e||void 0===e?void 0:e.version}))})),P("h6","Runtime Environment"),["name","python_version","cuda_version","openblas_version","openmpi_version","cudnn_version","mkl_version","platform","base_image"].map((function(n){var a,i;return E(null===e||void 0===e||null===(a=e.runtime_environment)||void 0===a?void 0:a[n],null===t||void 0===t||null===(i=t.runtime_environment)||void 0===i?void 0:i[n],n)})),E(null===e||void 0===e||null===(x=e.runtime_environment)||void 0===x?void 0:x.operating_system,null===e||void 0===e||null===(f=e.runtime_environment)||void 0===f?void 0:f.operating_system,"operating_system",(function(e){return e.name+" "+e.version})),E(null===e||void 0===e||null===(g=e.runtime_environment)||void 0===g?void 0:g.hardware,null===e||void 0===e||null===(y=e.runtime_environment)||void 0===y?void 0:y.hardware,"hardware",(function(e){var t,n,a,i="";if(i+=null!==(t=e.cpu_model)&&void 0!==t?t:" ",i+=null!==(n=e.cpu_family)&&void 0!==n?n:" ",(i+=null!==(a=e.gpu_model)&&void 0!==a?a:" ").trim())return i}))]})},I=function(e,t){var n,a,i,r,o,l,c,d,s,u,v,j,p,m,h,O,x,f,g,y,_,k,w,S,C,A,I,q,N,D,T,R,B,F,V,z,W,H,K,U,Q,J,Y,G,X,Z,$,ee,te,ne,ae,ie,re,oe;return Object(b.jsxs)(b.Fragment,{children:[P("h5","Metadata",{paddingTop:0}),["document_id","analyzer","analyzer_version","datetime","thoth_deployment_name"].map((function(n){var a,i;return E(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a[n],null===(i=t.metadata)||void 0===i?void 0:i[n],n)})),E(null===e||void 0===e||null===(n=e.result)||void 0===n?void 0:n.error_msg,null===t||void 0===t||null===(a=t.result)||void 0===a?void 0:a.error_msg,"error_msg"),P("h6","Arguments"),["beam_width","constraints","count","dev","labels","library_usage","limit","limit_latest_versions","no_pretty","output","pipeline","plot","predictor","recommendation_type","requirements","requirements_format","requirements_locked","runtime_environment","seed","user_stack_scoring"].map((function(n){var a,i,r,o,l,c;return E(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.arguments)||void 0===i||null===(r=i.advise)||void 0===r?void 0:r[n],null===t||void 0===t||null===(o=t.metadata)||void 0===o||null===(l=o.arguments)||void 0===l||null===(c=l.advise)||void 0===c?void 0:c[n],n)})),P("h6","Distribution"),["codename","id","like","version"].map((function(n){var a,i,r,o;return E(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.distribution)||void 0===i?void 0:i[n],null===t||void 0===t||null===(r=t.metadata)||void 0===r||null===(o=r.distribution)||void 0===o?void 0:o[n],n)})),P("h6","OS Release"),["id","name","platform_id","version"].map((function(n){var a,i,r,o;return E(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.os_release)||void 0===i?void 0:i[n],null===t||void 0===t||null===(r=t.metadata)||void 0===r||null===(o=r.os_release)||void 0===o?void 0:o[n],n)})),P("h6","Python"),E(null===e||void 0===e||null===(i=e.metadata)||void 0===i?void 0:i.python,null===t||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.python,"version",(function(e){return"".concat(e.major,".").concat(e.minor,".").concat(e.micro)})),E(null===e||void 0===e||null===(o=e.metadata)||void 0===o||null===(l=o.python)||void 0===l?void 0:l.api_version,null===t||void 0===t||null===(c=t.metadata)||void 0===c||null===(d=c.python)||void 0===d?void 0:d.api_version,"api_version"),E(null===e||void 0===e||null===(s=e.metadata)||void 0===s||null===(u=s.python)||void 0===u?void 0:u.implementation_name,null===t||void 0===t||null===(v=t.metadata)||void 0===v||null===(j=v.python)||void 0===j?void 0:j.implementation_name,"implementation_name"),E(null===e||void 0===e||null===(p=e.metadata)||void 0===p||null===(m=p.python)||void 0===m?void 0:m.releaselevel,null===t||void 0===t||null===(h=t.metadata)||void 0===h||null===(O=h.python)||void 0===O?void 0:O.releaselevel,"release level"),P("h5","Result"),E(null===e||void 0===e||null===(x=e.result)||void 0===x||null===(f=x.report)||void 0===f?void 0:f.accepted_final_states_count,null===t||void 0===t||null===(g=t.result)||void 0===g||null===(y=g.report)||void 0===y?void 0:y.accepted_final_states_count,"accepted_final_states_count"),E(null===e||void 0===e||null===(_=e.result)||void 0===_||null===(k=_.report)||void 0===k?void 0:k.discarded_final_states_count,null===t||void 0===t||null===(w=t.result)||void 0===w||null===(S=w.report)||void 0===S?void 0:S.discarded_final_states_count,"discarded_final_states_count"),E(null===e||void 0===e||null===(C=e.result)||void 0===C||null===(A=C.report)||void 0===A?void 0:A.resolver_iterations,null===t||void 0===t||null===(I=t.result)||void 0===I||null===(q=I.report)||void 0===q?void 0:q.resolver_iterations,"resolver_iterations"),E(null===e||void 0===e||null===(N=e.result)||void 0===N||null===(D=N.report)||void 0===D?void 0:D.pipeline,null===t||void 0===t||null===(T=t.result)||void 0===T||null===(R=T.report)||void 0===R?void 0:R.pipeline,"pipeline"),M(null===e||void 0===e||null===(B=e.result)||void 0===B||null===(F=B.report)||void 0===F||null===(V=F.products)||void 0===V||null===(z=V[0])||void 0===z?void 0:z.project,null===t||void 0===t||null===(W=t.result)||void 0===W||null===(H=W.report)||void 0===H||null===(K=H.products)||void 0===K||null===(U=K[0])||void 0===U?void 0:U.project),P("h6","Advised Manifest Changes"),L(null!==(Q=null===e||void 0===e||null===(J=e.result)||void 0===J||null===(Y=J.report)||void 0===Y||null===(G=Y.products)||void 0===G||null===(X=G[0])||void 0===X?void 0:X.advised_manifest_changes)&&void 0!==Q?Q:[],null!==(Z=null===t||void 0===t||null===($=t.result)||void 0===$||null===(ee=$.report)||void 0===ee||null===(te=ee.products)||void 0===te||null===(ne=te[0])||void 0===ne?void 0:ne.advised_manifest_changes)&&void 0!==Z?Z:[],(function(e){var t="";return e.forEach((function(e){var n,a,i,r,o,l;t+="[ ".concat(null===e||void 0===e||null===(n=e.patch)||void 0===n?void 0:n.path,"; ").concat(null===e||void 0===e||null===(a=e.patch)||void 0===a?void 0:a.op,"; ").concat(null===e||void 0===e||null===(i=e.patch)||void 0===i||null===(r=i.value)||void 0===r?void 0:r.name,": ").concat(null===e||void 0===e||null===(o=e.patch)||void 0===o||null===(l=o.value)||void 0===l?void 0:l.value," ]")})),t})),P("h6","Stack Info"),L(null===e||void 0===e||null===(ae=e.result)||void 0===ae||null===(ie=ae.report)||void 0===ie?void 0:ie.stack_info,null===t||void 0===t||null===(re=t.result)||void 0===re||null===(oe=re.report)||void 0===oe?void 0:oe.stack_info,(function(e){return e.message}))]})},D=Object(a.useMemo)((function(){var e,t,n,a,i,r,l,c;return o&&null!==(e=v.data)&&void 0!==e&&e.data?Object(b.jsxs)(b.Fragment,{children:[P("body2"," ",{borderTop:"1px solid #e3e5e8",marginTop:4}),I(o,null===(t=v.data)||void 0===t?void 0:t.data),P("body1"," ",{borderBottom:"1px solid #e3e5e8"})]}):"Original Lockfile"===d?Object(b.jsxs)(b.Fragment,{children:[P("body2"," ",{borderTop:"1px solid #e3e5e8",marginTop:4}),M(null===o||void 0===o||null===(n=o.result)||void 0===n||null===(a=n.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.project,null===o||void 0===o||null===(l=o.result)||void 0===l||null===(c=l.parameters)||void 0===c?void 0:c.project),P("body1"," ",{borderBottom:"1px solid #e3e5e8"})]}):void 0}),[o,null===(r=v.data)||void 0===r?void 0:r.data]);return Object(b.jsxs)(_.a,{children:[Object(b.jsxs)(tn.a,{disableEscapeKeyDown:!0,open:m,onClose:k,children:[Object(b.jsx)(nn.a,{children:"Import another Advise document"}),Object(b.jsx)(an.a,{children:Object(b.jsx)(_.a,{component:"form",sx:{display:"flex",flexWrap:"wrap"},children:Object(b.jsx)(je.a,{onChange:function(e){return y(e.target.value)},label:"Document ID",variant:"outlined",size:"small"})})}),Object(b.jsxs)(rn.a,{children:[Object(b.jsx)(s.a,{onClick:function(){return k()},children:"Cancel"}),Object(b.jsx)(s.a,{onClick:function(){return function(){var e,t=(null!==(e=localStorage.getItem(ae))&&void 0!==e?e:"").split(",");t.includes(g)||(t.push(g),localStorage.setItem(ae,t.join(","))),y(""),O(!1)}()},children:"Import"})]})]}),Object(b.jsxs)(q.a,{container:!0,mb:1,columnSpacing:10,sx:{marginTop:4},children:[Object(b.jsx)(q.a,{item:!0,xs:6,alignSelf:"center",children:Object(b.jsx)(N.a,{sx:{textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},variant:"h5",children:"Current Advise Document"})}),Object(b.jsx)(q.a,{item:!0,xs:6,alignSelf:"center",children:Object(b.jsxs)(w.a,{direction:"row",spacing:1,sx:{marginX:"10%"},children:[Object(b.jsx)(on.a,{fullWidth:!0,children:Object(b.jsxs)(ln.a,{value:d,displayEmpty:!0,onChange:function(e){u(e.target.value)},size:"small",children:[Object(b.jsx)(cn.a,{disabled:!0,value:"",children:Object(b.jsx)("em",{children:"Select a comparison"})}),S.map((function(e){return Object(b.jsx)(cn.a,{value:e,children:e},e)}))]})}),Object(b.jsx)(Ae.a,{onClick:function(){O(!0)},children:Object(b.jsx)(sn.a,{})})]})}),D]})]})};var vn=function(e){var t=Object(a.useState)(),n=Object(h.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={all:{},roots:{}},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.nodes.get(n);if(i){var r=e.graphSearch(i);Array.from(r).forEach((function(e){var i;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var r,o,l,c=0===e.value.depth?"roots":1===e.value.depth?"direct":"indirect";if(t.all[c]=(null!==(i=t.all[c])&&void 0!==i?i:0)+1,"roots"!==c)t.roots[n]||(t.roots[n]={}),t.roots[n][c]=(null!==(r=null===(o=t.roots)||void 0===o||null===(l=o[n])||void 0===l?void 0:l[c])&&void 0!==r?r:0)+1}}))}})),r(t)}}),[e]),i},jn=function(e){var t=Object(a.useState)(),n=Object(h.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.nodes.get(n);if(i){var r=e.graphSearch(i);Array.from(r).forEach((function(e){var n,i,r;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var o,l,c,d,s,u,v=[];if(null===e||void 0===e||null===(n=e.value)||void 0===n||null===(i=n.metadata)||void 0===i||null===(r=i.Classifier)||void 0===r||r.forEach((function(t){var n,a,i,r,o,l,c=t.split(" :: ");"License"===c[0]&&("OSI Approved"===c[1]?v.push({generalLicense:null!==(n=null===c||void 0===c?void 0:c[2])&&void 0!==n?n:null===(a=e.value.metadata)||void 0===a?void 0:a.License,specificLicense:null===(i=e.value.metadata)||void 0===i?void 0:i.License,isOsiApproved:!0}):v.push({generalLicense:null!==(r=null===c||void 0===c?void 0:c[1])&&void 0!==r?r:null===(o=e.value.metadata)||void 0===o?void 0:o.License,specificLicense:null===(l=e.value.metadata)||void 0===l?void 0:l.License,isOsiApproved:!1}))})),0===v.length)v.push({generalLicense:null!==(o=null===e||void 0===e||null===(l=e.value)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.License)&&void 0!==o?o:"N/A",specificLicense:null!==(d=null===e||void 0===e||null===(s=e.value)||void 0===s||null===(u=s.metadata)||void 0===u?void 0:u.License)&&void 0!==d?d:"N/A",isOsiApproved:null});v.forEach((function(n){var a,i,r;t[n.generalLicense]||(t[n.generalLicense]={packages:{},metadata:{isOsiApproved:n.isOsiApproved}}),t=Object(V.a)(Object(V.a)({},t),{},Object(ue.a)({},n.generalLicense,Object(V.a)(Object(V.a)({},t[n.generalLicense]),{},{packages:Object(V.a)(Object(V.a)({},null!==(a=t[n.generalLicense].packages)&&void 0!==a?a:null),{},Object(ue.a)({},e.value.id,{depth:null!==(i=null===(r=e.value)||void 0===r?void 0:r.depth)&&void 0!==i?i:0,specific:n.specificLicense}))})))}))}}))}})),r(t)}}),[e]),i};function bn(e,t){var n=function(e,t){var n=Object(a.useState)(),i=Object(h.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var n,a,i,r;if(e&&null!==t&&void 0!==t&&t.metadata){var l={justification:{},build:""};l.build="We have analysed an application stack running on ".concat(t.metadata.os_release.name," ").concat(t.metadata.os_release.version,", running Python (").concat(t.metadata.python.implementation_name,") ").concat(t.metadata.python.major,".").concat(t.metadata.python.minor,".").concat(t.metadata.python.micro,". It was Adviser Job ID ").concat(t.metadata.document_id,", by ").concat(t.metadata.analyzer," v").concat(t.metadata.analyzer_version,"."),null===t||void 0===t||null===(n=t.result)||void 0===n||null===(a=n.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r||r.justification.forEach((function(e){l.justification[e.type]?l.justification[e.type]=l.justification[e.type]+1:l.justification[e.type]=1})),o(l)}}),[e,t]),r}(e,t),i=vn(e),r=jn(e);return Object(a.useMemo)((function(){var e={advise:null,dependencies:null,licenses:null};return n&&(e.advise=n),i&&(e.dependencies=i),r&&(e.licenses=r),e}),[n,i,r])}var pn=function(e,t,n,a,i,r){return ne.a.get(ie+"/python/package/version/metadata",{params:{name:e,version:t,index:n,os_name:a,os_version:i,python_version:r},headers:{accept:"application/json"}})},mn=function(e,t){return Object(c.useQueries)(e.map((function(e){return Object(V.a)(Object(V.a)({},t),{},{enabled:!!e.name&&!!e.version&&!!e.index&&!!e.os_name&&!!e.os_version&&!!e.python_version,queryKey:["packageMetadata",e.name,e.version,e.index,e.os_name,e.os_version,e.python_version],queryFn:function(){return pn(e.name,e.version,e.index,e.os_name,e.os_version,e.python_version)}})})))};var hn=n(133),On=n(63),xn=n(64),fn=function(){function e(){Object(On.a)(this,e),this.nodes=void 0,this.visEdges=void 0,this.nodes=new Map,this.visEdges=[]}return Object(xn.a)(e,[{key:"addVertex",value:function(e,t,n){var a=this.nodes.get(e);return a||(a=new n(e,t),this.nodes.set(e,a),a)}},{key:"addEdge",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return n&&a&&n.addAdjacent(a),[n,a]}},{key:"graphSearch",value:J.a.mark((function e(t){var n,a,i,r,o=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Set,(i=[]).push(t);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===n?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.add(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=this.nodes.get(e),i=this.nodes.get(t),r=new Set(n);if(!i||!a)return[];if(r.add(a),e===t)return Array.from(r);var o,l=Object(hn.a)(a.getAdjacents());try{for(l.s();!(o=l.n()).done;){var c=o.value;if(!r.has(c)){var d=this.findPath(c.key,t,r);if(d.length)return d}}}catch(s){l.e(s)}finally{l.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r&&r.key===t||r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(n.nodes.get(e))})))}return a}},{key:"findAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=this.nodes.get(e),r=this.nodes.get(t),o=new Set(a);if(!r||!i)return[];if(o.add(i),e===t)return[Array.from(o)];var l=[];return i.getAdjacents().forEach((function(e){o.has(e)||n.findAllPaths(e.key,t,o).forEach((function(e){l.push(e)}))})),l}}]),e}(),gn=function(){function e(t,n){Object(On.a)(this,e),this.adjacents=void 0,this.key=void 0,this.value=void 0,this.parents=void 0,this.adjacents=new Set,this.key=t,this.value=n,this.parents=new Set}return Object(xn.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}();function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=mn(e),r=Object(a.useMemo)((function(){return i.some((function(e){return e.isLoading}))}),[i]);return Object(a.useMemo)((function(){if(!r){var e=new fn,a=[];i.forEach((function(t){if(t.error){var n,a,i,r,o,l=t.error,c=null!==(n=null===(a=l.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.parameters)&&void 0!==n?n:null===(r=l.response)||void 0===r||null===(o=r.config)||void 0===o?void 0:o.params,d={id:c.name.toLowerCase(),label:c.name+" "+c.version,name:c.name,version:c.version,metadata:null,depth:0};e.addVertex(d.id,d,gn)}else if(t.isSuccess){var s=t.data.data.metadata,u={id:s.package_name.toLowerCase(),label:s.package_name+" "+s.package_version,name:s.package_name,version:s.package_version,metadata:s.importlib_metadata.metadata};e.addVertex(u.id,u,gn)}})),i.forEach((function(t){var n;if("error"!==t.status&&null!==(n=t.data)&&void 0!==n&&n.data){var i=e.nodes.get(t.data.data.metadata.package_name.toLowerCase());i&&Object.keys(t.data.data.metadata.dependencies).forEach((function(t){var n=e.nodes.get(t);n&&(e.addEdge(i.value.id,n.value.id),n.parents.add(i.value.id),a.push(n.value.id))}))}}));var o=e.addVertex("*App",{id:"*App",label:"App",depth:-1},gn);a.push("*App");var l=new Set,c=[];e.nodes.forEach((function(n,i){a.includes(i)&&!Object.keys(null!==t&&void 0!==t?t:{}).includes(i)||(n.value.depth=0,n.parents.add("*App"),c.push(n),e.addEdge(o.key,n.key))}));var d=new Map;for(n&&n.forEach((function(e){var t,n=null!==(t=e.package_name)&&void 0!==t?t:"*App";d.has(n)?d.set(n,[].concat(Object(Yt.a)(d.get(n)),[e])):d.set(n,[e])}));0!==c.length;){var s=c.pop();if(s&&!l.has(s)){l.add(s),d.has(s.key)&&(s.value.justifications=d.get(s.key));for(var u=s.getAdjacents(),v=0;v<u.length;v++){var j,b,p,m,h;u[v].value.depth=Math.min((null!==(j=null===(b=s.value)||void 0===b?void 0:b.depth)&&void 0!==j?j:0)+1,null!==(p=u[v].value.depth)&&void 0!==p?p:(null!==(m=null===(h=s.value)||void 0===h?void 0:h.depth)&&void 0!==m?m:0)+2),c.push(u[v])}}}var O=new Map;return e.nodes.forEach((function(e){e.adjacents.forEach((function(t){O.set(e.value.id+t.value.id,{id:e.value.id+t.value.id,to:e.value.id,from:t.value.id})}))})),e.visEdges=Array.from(O.values()),e}}),[r,t])}var _n=function(e){var t=e.analysis_id;return Object(b.jsxs)("div",{children:['`"',t,'"` not found']})},kn=function(e){var t=e.children,n=e.goHome,a=void 0!==n&&n,i=Object(A.g)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(s.a,{onClick:function(){i(a?"/":-1)},children:a?"go home":"go back"}),Object(b.jsx)("div",{children:t})]})},wn=function(){var e,t,n,i,r,o,l,d,s,u,v,j,p,m,O,x,f,g=Object(A.h)().analysis_id,y=De(g,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}});Object(a.useEffect)((function(){if(y.isSuccess&&g){var e,t=(null!==(e=localStorage.getItem(ae))&&void 0!==e?e:"").split(",");t.includes(g)||(t.push(g),localStorage.setItem(ae,t.join(",")))}}),[y.status]);var _=function(e,t){return Object(c.useQuery)(Object(V.a)(Object(V.a)({},t),{},{queryKey:["adviseLogs",e],queryFn:function(){return Te(e)}}))}(g,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),k=yn(Object(a.useMemo)((function(){var e,t,n,a,i,r,o,l,c,d;if(y.isSuccess&&null!==(e=y.data.data)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&null!==(n=t.report)&&void 0!==n&&null!==(a=n.products)&&void 0!==a&&null!==(i=a[0])&&void 0!==i&&i.project)return function(e){return Object.entries(e.requirements_locked.default).map((function(t){var n,a,i,r,o,l,c,d,s=Object(h.a)(t,2);return{name:s[0],version:s[1].version.replace("==",""),index:"https://pypi.org/simple",os_name:null!==(n=null===e||void 0===e||null===(a=e.runtime_environment)||void 0===a||null===(i=a.operating_system)||void 0===i?void 0:i.name)&&void 0!==n?n:"",os_version:null!==(r=null===e||void 0===e||null===(o=e.runtime_environment)||void 0===o||null===(l=o.operating_system)||void 0===l?void 0:l.version)&&void 0!==r?r:"",python_version:null!==(c=null===e||void 0===e||null===(d=e.runtime_environment)||void 0===d?void 0:d.python_version)&&void 0!==c?c:""}}))}(null===(r=y.data.data)||void 0===r||null===(o=r.result)||void 0===o||null===(l=o.report)||void 0===l||null===(c=l.products)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.project)}),[y]),null===y||void 0===y||null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.result)||void 0===n||null===(i=n.report)||void 0===i||null===(r=i.products)||void 0===r||null===(o=r[0])||void 0===o||null===(l=o.project)||void 0===l||null===(d=l.requirements)||void 0===d?void 0:d.packages,null===y||void 0===y||null===(s=y.data)||void 0===s||null===(u=s.data)||void 0===u||null===(v=u.result)||void 0===v||null===(j=v.report)||void 0===j||null===(p=j.products)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.justification),w=bn(k,null===(O=y.data)||void 0===O?void 0:O.data);return y.isLoading?Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Pe.a,{})}):y.data?Object(b.jsx)(kn,{goHome:!0,children:Object(b.jsx)(L,{header:Object(b.jsx)(It,{adviseDocument:y.data.data,logs:null===(x=_.data)||void 0===x||null===(f=x.data)||void 0===f?void 0:f.log}),children:Object(b.jsxs)(A.d,{children:[Object(b.jsx)(A.b,{path:"summary",element:Object(b.jsx)(yt,{metrics:w})}),Object(b.jsx)(A.b,{path:"details",element:Object(b.jsx)(en,{graph:k})}),Object(b.jsx)(A.b,{path:"compare",element:Object(b.jsx)(un,{adviseDocument:y.data.data})}),Object(b.jsx)(A.b,{path:"*",element:Object(b.jsx)(A.a,{to:"summary"})})]})})}):Object(b.jsx)(kn,{children:Object(b.jsx)(_n,{analysis_id:null!==g&&void 0!==g?g:"no id"})})},Sn=n(212),Cn=n.n(Sn),En=n(213),An=n.n(En),Pn=["options","type","label","disabled"],Ln=function(e){var t,n=e.options,i=e.type,r=e.label,o=e.disabled,l=Object(z.a)(e,Pn),c=Object(A.g)(),d=Object(a.useContext)(Wn),s=d.specs,u=d.defaultSpecs;return Object(b.jsxs)(_.a,Object(V.a)(Object(V.a)({},l),{},{children:[Object(b.jsx)(N.a,{variant:"body2",children:r}),Object(b.jsxs)(ln.a,{displayEmpty:!0,fullWidth:!0,value:null!==(t=s[i])&&void 0!==t?t:"",onChange:function(e){var t,n,a,r,o,l,d,v,j,b,p,m,h;switch(i){case"package_version":c("/package/".concat(s.package_name,"/").concat(e.target.value));break;case"index_url":c("/package/".concat(s.package_name,"/").concat(null!==(t=s.package_version)&&void 0!==t?t:u.package_version,"/").concat(encodeURIComponent(e.target.value)));break;case"os_name":c("/package/".concat(s.package_name,"/").concat(null!==(n=s.package_version)&&void 0!==n?n:u.package_version,"/").concat(encodeURIComponent(null!==(a=null!==(r=s.index_url)&&void 0!==r?r:u.index_url)&&void 0!==a?a:""),"/").concat(e.target.value));break;case"os_version":c("/package/".concat(s.package_name,"/").concat(null!==(o=s.package_version)&&void 0!==o?o:u.package_version,"/").concat(encodeURIComponent(null!==(l=null!==(d=s.index_url)&&void 0!==d?d:u.index_url)&&void 0!==l?l:""),"/").concat(null!==(v=s.os_name)&&void 0!==v?v:u.os_name,"/").concat(e.target.value));break;case"python_version":c("/package/".concat(s.package_name,"/").concat(null!==(j=s.package_version)&&void 0!==j?j:u.package_version,"/").concat(encodeURIComponent(null!==(b=null!==(p=s.index_url)&&void 0!==p?p:u.index_url)&&void 0!==b?b:""),"/").concat(null!==(m=s.os_name)&&void 0!==m?m:u.os_name,"/").concat(null!==(h=s.os_version)&&void 0!==h?h:u.os_version,"/").concat(e.target.value))}},size:"small",variant:"outlined",disabled:o,renderValue:function(e){return e||Object(b.jsx)("em",{style:{color:"grey"},children:null!==(t=null===u||void 0===u?void 0:u[i])&&void 0!==t?t:r});var t},children:[Object(b.jsx)(cn.a,{disabled:!0,value:"",children:Object(b.jsx)("em",{children:r})}),n.map((function(e){return Object(b.jsx)(cn.a,{value:e.value,children:e.value},e.value)}))]})]}))},Mn=function(e){var t,n,r=e.metadata,o=e.allVersions,l=void 0===o?[]:o,c=e.allEnvironments,d=void 0===c?[]:c,s=Object(a.useContext)(Wn),u=s.defaultSpecs,v=s.specs,j=Object(a.useState)(!1),p=Object(h.a)(j,2),m=p[0],O=p[1],x=Object(a.useMemo)((function(){var e=new Set;return l.filter((function(t){return!e.has(t.package_version)&&(e.add(t.package_version),!0)})).map((function(e){return{value:e.package_version}})).sort((function(e,t){return e.value.split(".")>t.value.split(".")?1:-1}))}),[l]),f=Object(a.useMemo)((function(){var e=new Set;return l.filter((function(e){return v.package_version?v.package_version===e.package_version:u.package_version===e.package_version})).filter((function(t){return!e.has(t.index_url)&&(e.add(t.index_url),!0)})).map((function(e){return{value:e.index_url}}))}),[l]),g=Object(a.useMemo)((function(){return[d.map((function(e){return{value:e.os_name}})),d.filter((function(e){return!v.os_name||v.os_name===e.os_name})).map((function(e){return{value:e.os_version}})),d.filter((function(e){return(!v.os_name||v.os_name===e.os_name)&&(!v.os_version||v.os_version===e.os_version)})).map((function(e){return{value:e.python_version}}))]}),[d,v]),y=Object(h.a)(g,3),k=y[0],w=y[1],S=y[2];return r?Object(b.jsxs)("div",{children:[Object(b.jsxs)(q.a,{container:!0,alignItems:"flex-end",spacing:1,children:[Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(N.a,{variant:"h4",mr:2,children:Object(b.jsx)("b",{children:null===r||void 0===r?void 0:r.Name})})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(Ln,{options:null!==x&&void 0!==x?x:[],type:"package_version",label:"Version"})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(Ln,{options:null!==f&&void 0!==f?f:[],type:"index_url",label:"Index URL",disabled:void 0===v.package_version})}),m?Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(Ln,{options:null!==k&&void 0!==k?k:[],type:"os_name",label:"OS Name",disabled:void 0===v.index_url})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(Ln,{options:null!==w&&void 0!==w?w:[],type:"os_version",label:"OS Version",disabled:void 0===v.os_name})}),Object(b.jsx)(q.a,{item:!0,children:Object(b.jsx)(Ln,{options:null!==S&&void 0!==S?S:[],type:"python_version",label:"Python Version",disabled:void 0===v.os_version})})]}):null,Object(b.jsx)(q.a,{item:!0,xs:1,children:Object(b.jsx)(Ae.a,{onClick:function(){return O(!m)},"data-testid":"package-header-expand-button",children:m?Object(b.jsx)(Cn.a,{fontSize:"large"}):Object(b.jsx)(An.a,{fontSize:"large"})})})]}),Object(b.jsx)(N.a,{gutterBottom:!0,variant:"body1",mt:2,children:null!==(t=null===r||void 0===r?void 0:r.Summary)&&void 0!==t?t:"NaN"}),Object(b.jsx)("div",{children:Object(b.jsx)(At,{text:null!==(n=null===r||void 0===r?void 0:r.License)&&void 0!==n?n:"NaN",icon:Object(b.jsx)(zt.a,{})})})]}):Object(b.jsxs)(_.a,{"data-testid":"package-header-not-loaded",children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},In=n(218),qn=n(214),Nn=n.n(qn),Dn=function(e){var t,n=e.node,r=i.a.useState(null),o=Object(h.a)(r,2),l=o[0],c=o[1],d=i.a.useState(null),u=Object(h.a)(d,2),v=u[0],j=u[1],p=Object(A.g)(),m=Object(a.useMemo)((function(){var e={},t=[0,0],a=new Set;if(n.versions.forEach((function(n){var i,r=n.split("."),o=r[0]+"."+(null!==(i=r[1])&&void 0!==i?i:"");void 0===e[o]&&(e[o]=[],t[0]+=1),a.has(n)||(e[o].push(n),t[1]+=1,a.add(n))})),t[0]/t[1]>.25){var i,r=Math.ceil(.25*t[0]),o={};return Object.keys(e).forEach((function(t,n,a){var l,c;n%r===0&&(i="".concat(t," - ").concat(null!==(c=a[n+r-1])&&void 0!==c?c:a.at(-1)),o[i]=[]);(l=o[i]).push.apply(l,Object(Yt.a)(e[a[n]]))})),o}return e}),[n]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(s.a,{onClick:function(e){c(n.name),j(e.currentTarget)},variant:"outlined",endIcon:Object(b.jsx)(Nn.a,{}),children:null!==(t=n.specifier)&&void 0!==t?t:"ANY"}),Object(b.jsxs)(In.a,{open:l===n.name,anchorEl:v,onClose:function(){c(void 0),j(null)},PaperProps:{style:{maxHeight:"40%",maxWidth:"50%"}},children:[Object(b.jsx)(cn.a,{disabled:!0,children:"Select a version to navigate to:"}),Object(b.jsx)(q.a,{container:!0,alignContent:"flex-start",children:Object.entries(m).map((function(e){var t=Object(h.a)(e,2),a=t[0],i=t[1];return Object(b.jsxs)(q.a,{item:!0,xs:!0,children:[Object(b.jsx)(cn.a,{sx:{mt:2},disabled:!0,divider:!0,children:a}),i.map((function(e){return Object(b.jsx)(cn.a,{onClick:function(){return p("/package/".concat(n.name,"/").concat(e))},children:Object(b.jsx)(N.a,{variant:"body2",children:e})},e)}))]},a)}))})]})]})},Tn=function(e){var t=e.graph,n=Object(a.useMemo)((function(){if(null!==t&&void 0!==t&&t.nodes){var e=t.nodes.get("*App");if(e){var n=t.graphSearch(e),a=Array.from(n),i=[];return a.forEach((function(e){var t,n,a,r;"*App"===e.key||e.value.metadata||i.push({name:null!==(t=e.value.label)&&void 0!==t?t:e.key,versions:null!==(n=e.value.versions)&&void 0!==n?n:[],specifier:null!==(a=e.value.specifier)&&void 0!==a?a:"*",extra:null!==(r=e.value.extra)&&void 0!==r?r:[]})})),i}}}),[t]);return n?Object(b.jsx)($e,{cardMeta:{title:"Dependencies"},cardBody:Object(b.jsxs)("div",{"data-testid":"package-dependencies-loaded",children:[Object(b.jsxs)(q.a,{container:!0,children:[Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"Package"})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"Versions"})}),Object(b.jsx)(q.a,{item:!0,xs:2,children:Object(b.jsx)(N.a,{variant:"h6",gutterBottom:!0,children:"Extra"})})]}),Object(b.jsx)(R.a,{}),Object(b.jsx)(q.a,{container:!0,rowSpacing:2,mt:1,children:n.map((function(e){var t;return Object(b.jsxs)(q.a,{container:!0,item:!0,xs:12,children:[Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(N.a,{variant:"body1",gutterBottom:!0,children:e.name})}),Object(b.jsx)(q.a,{item:!0,xs:!0,children:Object(b.jsx)(Dn,{node:e})}),Object(b.jsx)(q.a,{item:!0,xs:2,children:Object(b.jsx)(N.a,{variant:"body1",gutterBottom:!0,children:null===(t=e.extra)||void 0===t?void 0:t.join(", ")})})]},e.name)}))})]})}):Object(b.jsxs)(_.a,{"data-testid":"package-dependencies-not-loaded",children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},Rn=function(e){var t=e.package_name,n=e.package_version;return Object(b.jsxs)("div",{children:['`"',t,n?" "+n:"",'"` not found']})},Bn=function(){var e=Object(U.a)(J.a.mark((function e(t){var n,a,i=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,a=i.length>2&&void 0!==i[2]?i[2]:100,e.abrupt("return",ne.a.get(ie+"/python/package/versions",{params:{name:t,page:n,per_page:a},headers:{accept:"application/json"}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fn=function(){var e=Object(U.a)(J.a.mark((function e(t,n,a){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ie+"/python/package/version/environments",{params:{name:t,version:n,index:a},headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Vn=function(e){var t,n,i=(t=e,Object(c.useInfiniteQuery)(Object(V.a)(Object(V.a)({},n),{},{enabled:!!t,queryKey:["packageVersions",t],queryFn:function(e){return Bn(t,e.pageParam)},getNextPageParam:function(e){var t,n=e.data.parameters;return 0===e.data.versions.length?void 0:(null!==(t=n.page)&&void 0!==t?t:0)+1}}))),r=Object(a.useState)([]),o=Object(h.a)(r,2),l=o[0],d=o[1];return Object(a.useEffect)((function(){if(i.isSuccess)if(i.hasNextPage&&!i.isFetchingNextPage)i.fetchNextPage().then();else if(!i.hasNextPage&&!i.isFetchingNextPage){var e=[];i.data.pages.forEach((function(t){e=[].concat(Object(Yt.a)(e),Object(Yt.a)(t.data.versions))})),e.length>0?(e=e.reverse(),d(e)):d(void 0)}}),[i.data]),l};var zn=function(e){var t=e.message,n=e.type,a=e.reason;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[n,": ",t]}),Object(b.jsx)("p",{children:a})]})},Wn=i.a.createContext({specs:{package_name:""},defaultSpecs:{package_name:""}}),Hn=function(){var e,t,n,i,r,o,l,d,s,u,v,j,p,m,O=Object(A.h)(),x=Object(a.useState)({package_name:null!==(e=O.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0}),f=Object(h.a)(x,2),g=f[0],y=f[1],_=Object(a.useMemo)((function(){var e;return{package_name:null!==(e=O.package_name)&&void 0!==e?e:"",package_version:null===O||void 0===O?void 0:O.package_version,index_url:null!==O&&void 0!==O&&O.index_url?decodeURIComponent(O.index_url):void 0,os_name:null===O||void 0===O?void 0:O.os_name,os_version:null===O||void 0===O?void 0:O.os_version,python_version:null===O||void 0===O?void 0:O.python_version}}),[O]),k=Vn(_.package_name),w=(v=_.package_name,j=null!==(t=_.package_version)&&void 0!==t?t:g.package_version,p=null!==(n=_.index_url)&&void 0!==n?n:g.index_url,m={useErrorBoundary:!1},Object(c.useQuery)(Object(V.a)(Object(V.a)({},m),{},{enabled:!!v&&!!j&&!!p,queryKey:["packageEnvironments",v,j,p],queryFn:function(){return Fn(v,j,p)}})));Object(a.useEffect)((function(){var e,t,n,a={package_name:null!==(e=O.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0};_.package_name&&(k&&k.length>0&&(a.package_version=null===(t=k.at(0))||void 0===t?void 0:t.package_version,a.index_url=null===(n=k.at(0))||void 0===n?void 0:n.index_url));if(w.data&&w.data.data.environments.length>0){var i,r,o,l=w.data.data.environments.filter((function(e){return(!_.os_name||_.os_name===e.os_name)&&(!_.os_version||_.os_version===e.os_version)}));if(l.length>0)a.os_name=null===(i=l.at(0))||void 0===i?void 0:i.os_name,a.os_version=null===(r=l.at(0))||void 0===r?void 0:r.os_version,a.python_version=null===(o=l.at(0))||void 0===o?void 0:o.python_version}Object.entries(g).some((function(e){var t=Object(h.a)(e,2),n=t[0],i=t[1];return a[n]!==i}))&&y(a)}),[k,w,_]);var S,C,E,P,L,M,I,N,D,T=function(e,t,n,a,i,r,o){return Object(c.useQuery)(Object(V.a)(Object(V.a)({},o),{},{enabled:!!e&&!!t&&!!n&&!!a&&!!i&&!!r,queryKey:["packageMetadata",e,t,n,a,i,r],queryFn:function(){return pn(e,t,n,a,i,r)}}))}(_.package_name,null!==(i=_.package_version)&&void 0!==i?i:g.package_version,null!==(r=_.index_url)&&void 0!==r?r:g.index_url,null!==(o=_.os_name)&&void 0!==o?o:g.os_name,null!==(l=_.os_version)&&void 0!==l?l:g.os_version,null!==(d=_.python_version)&&void 0!==d?d:g.python_version,{useErrorBoundary:!1}),R=function(e){var t=Object(a.useState)(),n=Object(h.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if("success"===e.status){var t=new fn,n=t.addVertex("*App",{id:"*App",label:"App",depth:-1},gn),a=t.addVertex(e.data.data.metadata.package_name.toLowerCase(),{id:e.data.data.metadata.package_name.toLowerCase(),label:e.data.data.metadata.package_name,metadata:e.data.data.metadata.importlib_metadata.metadata,depth:0},gn);a.parents=new Set,a.parents.add("*App"),t.addEdge(n.key,a.key),Object.entries(e.data.data.metadata.dependencies).forEach((function(e){var n=Object(h.a)(e,2),i=n[0],r=n[1],o=t.addVertex(i.toLowerCase(),{id:i.toLowerCase(),label:i,metadata:null,versions:r.versions,specifier:r.specifier,extra:r.extra,depth:1},gn);o.parents=new Set,t.addEdge(a.key,o.key),o.parents.add(a.key)})),r(t)}}),[e.data]),i}(T);return T.isLoading||0===(null===k||void 0===k?void 0:k.length)?Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center","data-testid":"loading",children:Object(b.jsx)(Pe.a,{})}):T.data?Object(b.jsx)(Wn.Provider,{value:{specs:_,defaultSpecs:g},children:Object(b.jsxs)(q.a,{container:!0,children:[Object(b.jsx)(q.a,{item:!0,xs:12,mb:3,children:Object(b.jsx)(Mn,{metadata:T.data.data.metadata.importlib_metadata.metadata,allVersions:k,allEnvironments:null===w||void 0===w||null===(s=w.data)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.environments})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(Tn,{graph:R})})]})}):null!==T&&void 0!==T&&null!==(S=T.error)&&void 0!==S&&null!==(C=S.response)&&void 0!==C&&null!==(E=C.data)&&void 0!==E&&E.error?Object(b.jsx)(zn,{message:T.error.response.data.error,type:T.error.response.status,reason:"".concat(null===T||void 0===T||null===(M=T.error)||void 0===M||null===(I=M.config)||void 0===I?void 0:I.url," failed with params ").concat(JSON.stringify(null===T||void 0===T||null===(N=T.error)||void 0===N||null===(D=N.config)||void 0===D?void 0:D.params))}):Object(b.jsx)(Rn,{package_name:null!==(P=O.package_name)&&void 0!==P?P:"",package_version:null!==(L=O.package_version)&&void 0!==L?L:""})},Kn=function(){return Object(b.jsx)(kn,{children:Object(b.jsxs)(A.d,{children:[Object(b.jsx)(A.b,{path:"/:package_version/:index_url/:os_name/:os_version/:python_version",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"/:package_version/:index_url/:os_name",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"/:package_version/:index_url/:os_name/:os_version",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"/:package_version/:index_url",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"/:package_version",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"/",element:Object(b.jsx)(Hn,{})}),Object(b.jsx)(A.b,{path:"*",element:Object(b.jsx)(Ye,{})})]})})},Un=function(e){var t,n,r,o,l,c,d=e.imageDocument,u=e.logs,v=i.a.useState(!1),j=Object(h.a)(v,2),p=j[0],m=j[1],O=i.a.useState(),x=Object(h.a)(O,2),f=x[0],g=x[1],y=Object(a.useMemo)((function(){var e;return null!==d&&void 0!==d&&d.result?["COMPLETE","success"]:null!==d&&void 0!==d&&null!==(e=d.status)&&void 0!==e&&e.state?[d.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[d]),_=Object(h.a)(y,2),k=_[0],S=_[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(N.a,{variant:"h4",mb:2,children:Object(b.jsx)("b",{children:null!==(t=null===d||void 0===d||null===(n=d.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:d.parameters.analysis_id})}),Object(b.jsxs)(w.a,{direction:"row",spacing:2,children:[Object(b.jsx)(dt.a,{label:k,color:S}),Object(b.jsx)(At,{text:Be(null===d||void 0===d||null===(r=d.status)||void 0===r?void 0:r.finished_at,null===d||void 0===d||null===(o=d.status)||void 0===o?void 0:o.started_at,null===d||void 0===d||null===(l=d.metadata)||void 0===l?void 0:l.datetime),icon:Object(b.jsx)(kt.a,{})}),Object(b.jsx)(s.a,{sx:{marginLeft:2},onClick:function(){return m(!p)},children:Object(b.jsx)(At,{text:"Logs",icon:Object(b.jsx)(St.a,{})})})]}),Object(b.jsx)(ve.a,{in:p,children:null!==(c=null===u||void 0===u?void 0:u.split("\n").map((function(e,t){return Object(b.jsx)(N.a,{noWrap:f!==t,onClick:function(){return g(f===t?void 0:t)},variant:"body2",sx:{backgroundColor:f===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==c?c:"Image log is not available."})]})},Qn=n(142),Jn=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],Yn=function(e){var t,n=e.imageDocument;return n?Object(b.jsx)("div",{style:{height:400,width:"100%"},children:Object(b.jsx)(Qn.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.deb,columns:Jn,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},Gn=function(e){var t=e.imageDocument;if(!t)return Object(b.jsxs)(_.a,{"data-testid":"python-info-not-loaded",children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]});var n=Object(a.useMemo)((function(){var e;if(null===t||void 0===t||null===(e=t.result)||void 0===e||!e["python-files"])return[];var n=new Map;return t.result["python-files"].forEach((function(e){var t=e.filepath.split("/",4),a=t[1]+"/"+t[2]+"/"+t[3];n.has(a)?n.set(a,n.get(a)+1):n.set(a,1)})),Array.from(n.entries()).map((function(e){var t=Object(h.a)(e,2);return{path:t[0],count:t[1]}}))}),[t]),i=Object(a.useMemo)((function(){return t.result["python-interpreters"].filter((function(e){return!!e.version}))}),[t]);return Object(b.jsxs)(w.a,{direction:"column",spacing:3,children:[(null===i||void 0===i?void 0:i.length)>0?Object(b.jsxs)(w.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(b.jsxs)(N.a,{variant:"h6",children:["Python interpreters:"," "]}),i.map((function(e,t){var n;return Object(b.jsx)(dt.a,{"data-testid":"python-info-chip",label:e.version},(null!==(n=null===e||void 0===e?void 0:e.version)&&void 0!==n?n:"")+t)}))]}):void 0,Object(b.jsxs)("div",{"data-testid":"python-info-loaded",children:[Object(b.jsxs)(w.a,{direction:"row",spacing:1,mb:1,alignItems:"center",children:[Object(b.jsxs)(N.a,{variant:"h6",children:["Total number of Python files:"," "]}),Object(b.jsx)(N.a,{variant:"body1",children:n.reduce((function(e,t){return e+t.count}),0)})]}),Object(b.jsx)(q.a,{container:!0,children:n.sort((function(e,t){return t.count-e.count})).map((function(e){return Object(b.jsx)(q.a,{item:!0,xs:12,lg:6,xl:4,children:Object(b.jsxs)(w.a,{ml:3,direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[Object(b.jsxs)(N.a,{variant:"body2",children:[e.path,":"]}),Object(b.jsx)(N.a,{variant:"body2",children:Object(b.jsx)("b",{children:e.count})})]})},e.path)}))})]})]})},Xn=function(e){var t,n,i,r,o,l,c,d,s,u,v,j=e.imageDocument,p=e.imageMetadata,m=Object(a.useMemo)((function(){var e;return p||(null!==j&&void 0!==j&&null!==(e=j.result)&&void 0!==e&&e["skopeo-inspect"]?{architecture:j.result["skopeo-inspect"].Architecture,created:j.result["skopeo-inspect"].Created,digest:j.result["skopeo-inspect"].Digest,docker_version:j.result["skopeo-inspect"].DockerVersion,labels:j.result["skopeo-inspect"].Labels,layers:j.result["skopeo-inspect"].Layers,os:j.result["skopeo-inspect"].Os,repo_tags:j.result["skopeo-inspect"].RepoTags}:void 0)}),[j,p]);return m?Object(b.jsxs)(q.a,{container:!0,spacing:2,children:[Object(b.jsx)(q.a,{item:!0,xs:12,children:Object(b.jsxs)(w.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(b.jsx)(N.a,{variant:"body1",children:Object(b.jsx)("b",{children:null===(t=m.labels)||void 0===t?void 0:t["io.k8s.display-name"]})}),Object(b.jsx)(dt.a,{label:null===(n=m.labels)||void 0===n?void 0:n.name.split(":").at(-1)})]})}),Object(b.jsx)(q.a,{item:!0,xs:12,children:Object(b.jsx)(N.a,{variant:"h6",mb:1,children:"General information"})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Summary"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(i=m.labels)||void 0===i?void 0:i.summary})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Description"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(r=m.labels)||void 0===r?void 0:r.description})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Provider"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(o=m.labels)||void 0===o?void 0:o.vendor})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Maintainer"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(l=m.labels)||void 0===l?void 0:l.maintainer})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Build date"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:new Date(null===(c=m.labels)||void 0===c?void 0:c["build-date"]).toLocaleDateString()})}),Object(b.jsx)(q.a,{item:!0,xs:12,children:Object(b.jsx)(N.a,{variant:"h6",mb:1,children:"Technical information"})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image name"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(d=m.labels)||void 0===d?void 0:d.name})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image version"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(s=m.labels)||void 0===s?void 0:s.version})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Architecture"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:m.architecture})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Usage"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:Object(b.jsx)("code",{children:null===(u=m.labels)||void 0===u?void 0:u.usage})})}),Object(b.jsx)(q.a,{item:!0,xs:3,children:Object(b.jsx)(N.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Exposed Ports"})}),Object(b.jsx)(q.a,{item:!0,xs:9,children:Object(b.jsx)(N.a,{variant:"body2",children:null===(v=m.labels)||void 0===v?void 0:v["io.openshift.expose-services"]})})]}):Object(b.jsxs)(_.a,{"data-testid":"image-info-not-loaded",children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},Zn=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"release",headerName:"Release",flex:.25},{field:"dependencies",headerName:"Dependencies",flex:.5,valueGetter:function(e){var t,n,a;return null!==(t=null===(n=e.row)||void 0===n||null===(a=n.dependencies)||void 0===a?void 0:a.length)&&void 0!==t?t:0},sortable:!1},{field:"epoch",headerName:"Epoch",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],$n=function(e){var t,n=e.imageDocument;return n?Object(b.jsx)("div",{style:{height:400,width:"100%"},"data-testid":"rpm-info-loaded",children:Object(b.jsx)(Qn.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t["rpm-dependencies"],columns:Zn,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(b.jsxs)(_.a,{"data-testid":"rpm-info-not-loaded",children:[Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{}),Object(b.jsx)(tt.a,{width:"60%"})]})},ea=function(e){var t,n,a,i,r,o,l,c,d,s=e.metrics,u=e.imageDocument,v=e.imageMetadata;return Object(b.jsxs)(gt.a,{columns:{xs:1,md:2},spacing:3,sx:{mb:3,mt:1},children:[u||v?Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Image Details"},cardBody:Object(b.jsx)(Xn,{imageDocument:u,imageMetadata:v})})}):void 0,(null===u||void 0===u||null===(t=u.result)||void 0===t||null===(n=t["python-interpreters"])||void 0===n?void 0:n.length)>0?Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Python Details"},cardBody:Object(b.jsx)(Gn,{imageDocument:u})})}):void 0,(null===u||void 0===u||null===(a=u.result)||void 0===a||null===(i=a["rpm-dependencies"])||void 0===i?void 0:i.length)>0?Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"RPM Details"},cardBody:Object(b.jsx)($n,{imageDocument:u})})}):void 0,(null===(r=u.result)||void 0===r||null===(o=r.deb)||void 0===o?void 0:o.length)>0?Object(b.jsxs)("div",{children:[Object(b.jsx)($e,{cardMeta:{title:"Debian Details"},cardBody:Object(b.jsx)(Yn,{imageDocument:u})})," "]}):void 0,0!==Object.keys(null!==(l=null===s||void 0===s||null===(c=s.dependencies)||void 0===c?void 0:c.all)&&void 0!==l?l:{}).length?Object(b.jsx)("div",{children:Object(b.jsx)($e,{cardMeta:{title:"Python Packages Dependencies"},cardBody:Object(b.jsx)(ct,{metric:null===s||void 0===s?void 0:s.dependencies})})}):void 0,0!==Object.keys(null!==(d=null===s||void 0===s?void 0:s.licenses)&&void 0!==d?d:{}).length?Object(b.jsxs)("div",{children:[Object(b.jsx)($e,{cardMeta:{title:"Python Packages Licenses"},cardBody:Object(b.jsx)(xt,{metric:null===s||void 0===s?void 0:s.licenses})})," "]}):void 0]})},ta=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ie+"/analyze/"+t,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),na=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ie+"/analyze/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aa=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.post(ie+"/image/metadata",{},{params:{image:t},headers:{accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ia=function(e){var t=e.analysis_id;return Object(b.jsxs)("div",{children:[' "',t,'" not found']})};var ra=function(){var e,t,n,i,r,o,l,d,s,u,v,j,p,m=Object(A.h)().analysis_id,h=Object(A.f)().state,O=Object(A.g)(),x=function(e,t){return Object(c.useQuery)(Object(V.a)(Object(V.a)({},t),{},{enabled:!!e,queryKey:["ImageDocument",e],queryFn:function(){return ta(e)}}))}(m,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),f=(j=null!==(e=null===h||void 0===h?void 0:h.image_name)&&void 0!==e?e:null===(t=x.data)||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.metadata)||void 0===i||null===(r=i.arguments)||void 0===r||null===(o=r["extract-image"])||void 0===o?void 0:o.image,Object(c.useQuery)(Object(V.a)(Object(V.a)({},p),{},{enabled:!!j,queryKey:["ImageMetadata",j],queryFn:function(){return aa(j)}}))),g=function(e,t){return Object(c.useQuery)(Object(V.a)(Object(V.a)({},t),{},{enabled:!!e,queryKey:["ImageLogs",e],queryFn:function(){return na(e)}}))}(m,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=x.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),y=function(e){var t=vn(e),n=jn(e);return Object(a.useMemo)((function(){var e={dependencies:null,licenses:null};return t&&(e.dependencies=t),n&&(e.licenses=n),e}),[t,n])}(yn(Object(a.useMemo)((function(){var e,t;if(null!==(e=x.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.metadata){var n,a,i,r,o,l,c,d={name:null!==(n=null===(a=x.data.data.result)||void 0===a||null===(i=a["operating-system"])||void 0===i?void 0:i.id)&&void 0!==n?n:"rhel",version:null!==(r=null===(o=x.data.data.result)||void 0===o||null===(l=o["operating-system"])||void 0===l||null===(c=l.version_id)||void 0===c?void 0:c.split(".")[0])&&void 0!==r?r:"8",python_version:x.data.data.metadata.python.major+"."+x.data.data.metadata.python.minor};return function(e,t){return e.map((function(e){return{name:e.package_name,version:e.package_version,index:"https://pypi.org/simple",os_name:t.name,os_version:t.version,python_version:t.python_version}}))}(x.data.data.result["python-packages"],d)}}),[x.data])));if(null!==x&&void 0!==x&&x.isLoading)return Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Pe.a,{})});if(null===x||void 0===x||!x.data){var _=null===h||void 0===h?void 0:h.image_name;return _?(ce(_).then((function(e){O("/image/"+e.data.analysis_id,{state:{image_name:_}})})),Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Pe.a,{})})):Object(b.jsx)("div",{"data-testid":"image-not-loaded",children:Object(b.jsx)(kn,{children:Object(b.jsx)(ia,{analysis_id:m})})})}return Object(b.jsx)("div",{"data-testid":"image-loaded",children:Object(b.jsxs)(kn,{goHome:!0,children:[Object(b.jsx)(Un,{imageDocument:null===(l=x.data)||void 0===l?void 0:l.data,logs:null===(d=g.data)||void 0===d||null===(s=d.data)||void 0===s?void 0:s.log}),Object(b.jsx)(ea,{imageMetadata:null===(u=f.data)||void 0===u?void 0:u.data,metrics:y,imageDocument:null===(v=x.data)||void 0===v?void 0:v.data})]})})},oa=function(){return Object(b.jsx)(P.a,{basename:"/search-stage",children:Object(b.jsxs)(A.d,{children:[Object(b.jsx)(A.b,{path:"/",element:Object(b.jsx)(Je,{})}),Object(b.jsx)(A.b,{path:"advise/:analysis_id/*",element:Object(b.jsx)(wn,{})}),Object(b.jsx)(A.b,{path:"package/:package_name/*",element:Object(b.jsx)(Kn,{})}),Object(b.jsx)(A.b,{path:"image/:analysis_id/*",element:Object(b.jsx)(ra,{})}),Object(b.jsx)(A.b,{path:"*",element:Object(b.jsx)(Ye,{})})]})})};var la=function(){return Object(b.jsx)(I,{children:Object(b.jsx)(oa,{})})};o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(la,{})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.de5c907c.chunk.js.map