(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],{357:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(65),o=n.n(r),c=n(254),l=n(37),s=new l.QueryClient({defaultOptions:{queries:{useErrorBoundary:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}}}),d=n(515),u=n(535),j=n(479),v=n(274),b=n(1),p=Object(v.a)({palette:{background:{default:"#f9f9f9"},primary:{light:"#f5a733",main:"#f39200",dark:"#aa6600"},secondary:{light:"#72cdee",main:"#4fc1ea",dark:"#3787a3"},text:{priamry:"#363636",secondary:"#999"}},typography:{fontFamily:["open sans","sans-serif"],h4:{fontWeight:700,fontSize:"3rem",color:"#363636",lineHeight:1.125},h5:{fontWeight:600,fontSize:"2rem",lineHeight:1.125,color:"#363636"},h6:{fontWeight:600,fontSize:"1.2rem",color:"#444f60",lineHeight:1.5},body1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#000"},body2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#000"},subtitle1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#999"},subtitle2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#999"}}});var h=function(e){var t=e.children;return Object(b.jsxs)(u.a,{theme:p,children:[Object(b.jsx)(j.a,{}),t]})},m=n(6),O=a.createContext(void 0),x=a.createContext(void 0);function f(e,t){throw t.type,new Error("State dispatch error")}var g={};function y(e){var t=e.children,n=a.useReducer(f,g),i=Object(m.a)(n,2),r=i[0],o=i[1];return Object(b.jsx)(O.Provider,{value:r,children:Object(b.jsx)(x.Provider,{value:o,children:t})})}var k=n(494),_=n(513),w=function(){return Object(b.jsx)(_.a,{pb:3,pt:6,sx:{backgroundColor:"#444f60",textAlign:"center",color:"white"},children:"This is a footer"})},C=Object(k.a)((function(e){return{root:{marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4),marginBottom:e.spacing(15),minHeight:"100vh"}}})),S=function(e){var t=e.children,n=C();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:n.root,children:t}),Object(b.jsx)(w,{})]})},E=n(496),A=n(514),L=n(30),P=n(58),N=function(e){var t=e.children,n=e.header,a=Object(L.f)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[n,Object(b.jsxs)(E.a,{value:a.pathname.split("/").at(-1),indicatorColor:"primary",textColor:"primary",children:[Object(b.jsx)(A.a,{label:"Summary",value:"summary",component:P.b,to:"summary"}),Object(b.jsx)(A.a,{label:"Advise Results",value:"details",component:P.b,to:"details"})]})]}),Object(b.jsx)("div",{children:t})]})},M=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(b.jsx)(d.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},R=function(e){var t=e.children;return Object(b.jsx)(h,{children:Object(b.jsx)(y,{children:Object(b.jsx)(c.ErrorBoundary,{FallbackComponent:M,children:Object(b.jsx)(l.QueryClientProvider,{client:s,children:Object(b.jsx)(S,{children:t})})})})})},I=n(505),T=n(189),B=n(507),V=n(522),D=n(490),q=n(79),F=n(489),z=n(14),W=n(89),G=["children","value","index"],H=function(e){var t=e.children,n=e.value,a=e.index,i=Object(W.a)(e,G);return Object(b.jsx)("div",Object(z.a)(Object(z.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),className:"".concat(i.className)},i),{},{children:n===a&&t}))},K=n.p+"static/media/thoth-logo.1a28a729.png",U=n(41),Q=n(26),J=n.n(Q),Y=n(516),Z=n(60),X=function(e){var t=e.onChange,n=e.onEnter,a=e.label,i=e.helpertext,r=e.boxprops,o=e.error,c=void 0!==o&&o,l=e.lefticon,s=e.righticon;return Object(b.jsxs)(_.a,{children:[Object(b.jsx)(T.a,{variant:"body1",sx:{color:c?"error.main":"text.secondary"},children:a}),Object(b.jsxs)(Y.a,Object(z.a)(Object(z.a)({component:"form",variant:"outlined",sx:{p:"8px 4px",display:"flex",alignItems:"center",borderColor:c?"red":void 0,paddingLeft:2,paddingRight:2}},r),{},{children:[l,Object(b.jsx)(Z.c,Object(z.a)({sx:{ml:1,flex:1},placeholder:i,error:c,onChange:function(e){return t(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(n(),e.preventDefault())}},e)),s]}))]})},$=n(110),ee=n.n($),te=n(38),ne=n.n(te),ae="https://khemenu.thoth-station.ninja/api/v1",ie={manipulation:{enabled:!1,editNode:function(e,t){e.fixed=!e.fixed.x,t(e)}},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},re=function(e,t,n){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:t},runtime_environment:n};return ne.a.post(ae+"/advise/python",a,{params:{recommendation_type:"stable",limit:500},headers:{accept:"application/json","Content-Type":"application/json"}})},oe=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ae+"/python/package/versions",{params:{name:t,per_page:1},headers:{accept:"application/json"}}).then((function(e){return e.data.versions.length>0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(U.a)(J.a.mark((function e(t){var n,a,i=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,a=i.length>2&&void 0!==i[2]?i[2]:100,e.abrupt("return",ne.a.get(ae+"/container-images",{params:{page:n,per_page:a},headers:{accept:"application/json"}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(L.g)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),c=Object(m.a)(o,2),l=c[0],s=c[1],u=function(){var t=Object(U.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==i){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,oe(i);case 4:t.sent?e("/package/"+i):s("Thoth does not know about that package");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(I.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(b.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==l&&void 0!==l?l:""})}),Object(b.jsxs)(I.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(b.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(X,{error:""!==l,onChange:function(e){return function(e){r(e.target.value),""!==l&&s("")}(e)},helpertext:"Search for a Python package",type:"search",boxprops:{mr:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:u})}),Object(b.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return u()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]})},se=n(2),de=n(517),ue=n(495),je=n(538),ve=n(217),be=n(369),pe=n(285),he=Object(be.a)();function me(e){var t,n=e.suggestions,i=e.label,r=e.help,o=e.required,c=e.error,l=e.value,s=e.setValue;return n=Object(a.useMemo)((function(){return n.map((function(e){return{title:e}}))}),[n]),Object(b.jsx)(pe.a,{value:l,onChange:function(e,t){"string"===typeof t?s(t):t&&t.inputValue?s({title:t.inputValue}):s(t)},filterOptions:function(e,t){var n=he(e,t),a=t.inputValue,i=e.some((function(e){return a===e.title}));return""===a||i||n.push({inputValue:a,title:'Add "'.concat(a,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==(t=n)&&void 0!==t?t:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,t){return Object(b.jsx)("li",Object(z.a)(Object(z.a)({},e),{},{children:t.title}))},freeSolo:!0,renderInput:function(e){return Object(b.jsx)(ve.a,Object(z.a)(Object(z.a)({fullWidth:!0},e),{},{label:i,required:o,error:void 0!==c,helperText:r}))}})}function Oe(e,t){var n;switch(t.type){case"loading":return Object(z.a)(Object(z.a)({},e),{},{loading:t.payload});case"error":return Object(z.a)(Object(z.a)({},e),{},{error:Object(z.a)(Object(z.a)({},e.error),{},Object(se.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(z.a)(Object(z.a)({},e),{},(n={},Object(se.a)(n,t.param,t.payload),Object(se.a)(n,"error",Object(z.a)(Object(z.a)({},e.error),{},Object(se.a)({},t.param,void 0))),n));default:throw new Error("Advise state dispatch error")}}var xe={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",platform:"",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},fe=function(){var e,t,n,i,r,o,c,l,s,u,j,v,p,h,O,x,f,g,y,k=Object(L.g)(),_=Object(a.useReducer)(Oe,xe),w=Object(m.a)(_,2),C=w[0],S=w[1],E=function(){if("id"!==C.lookupType){var e=!0;return C.pipfile||(e=!1,S({type:"error",param:"pipfile",payload:"Field cant be empty"})),C.pipfileLock||(e=!1,S({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),C.name||(e=!1,S({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!C.id||""===C.id)||(S({type:"error",param:"id",payload:"Field cant be empty"}),!1)},A=function(){var e=Object(U.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C.loading&&E()){e.next=2;break}return e.abrupt("return");case 2:"id"===C.lookupType?k("/advise/"+C.id):(S({type:"loading",payload:!0}),t={operating_system:{name:C.operating_system_name,version:C.operating_system_version},platform:C.platform,python_version:C.python_version,base_image:C.base_image,cuda_version:C.cuda_version,cudnn_version:C.cudnn_version,mkl_version:C.mkl_version,name:C.name,openblas_version:C.openblas_version,openmpi_version:C.openmpi_version},Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),""!==t.operating_system.name&&""!==t.operating_system.version||delete t.operating_system,re(C.pipfile,C.pipfileLock,t).then((function(e){S({type:"loading",payload:!1}),k("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var t,n,a,i,r,o,c,l,s;if(S({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))if(null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.includes("Pipfile.lock"))S({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(l=e.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.error});else if(null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&null!==(c=o.error)&&void 0!==c&&c.includes("Pipfile")){var d,u;S({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(d=e.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error})}})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(de.a,{in:"id"===C.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:12,children:Object(b.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=C.error)||void 0===e?void 0:e.id})}),Object(b.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(X,{error:null===(t=C.error)||void 0===t?void 0:t.id,onChange:function(e){return S({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{mr:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:A})}),Object(b.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return A()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]}),Object(b.jsx)(d.a,{onClick:function(){return S({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"})]})}),Object(b.jsx)(de.a,{in:"manual"===C.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Advise Parameters"}),Object(b.jsxs)(Y.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(b.jsxs)(I.a,{container:!0,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(X,{label:null!==(n=C.error)&&void 0!==n&&n.pipfile?null===(i=C.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return S({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=C.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(b.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(X,{label:null!==(o=C.error)&&void 0!==o&&o.pipfileLock?null===(c=C.error)||void 0===c?void 0:c.pipfileLock:"Pipfile.lock contents",onChange:function(e){return S({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(l=C.error)||void 0===l?void 0:l.pipfileLock),multiline:!0,rows:8})})]}),Object(b.jsxs)(I.a,{container:!0,mt:4,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(ue.a,{onChange:function(e){return S({type:"input",param:"base_image",payload:e.target.value})},value:C.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:null===(s=C.error)||void 0===s?void 0:s.base_image})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"cuda_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:null===(u=C.error)||void 0===u?void 0:u.cuda_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"cudnn_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:null===(j=C.error)||void 0===j?void 0:j.cudnn_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"mkl_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:null===(v=C.error)||void 0===v?void 0:v.mkl_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"name",payload:null!==(t=e.title)&&void 0!==t?t:""})},value:C.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:null===(p=C.error)||void 0===p?void 0:p.name})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"openblas_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:null===(h=C.error)||void 0===h?void 0:h.openblas_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"openmpi_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:null===(O=C.error)||void 0===O?void 0:O.openmpi_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(ue.a,{onChange:function(e){return S({type:"input",param:"operating_system_name",payload:e.target.value})},value:C.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:null===(x=C.error)||void 0===x?void 0:x.operating_system_name})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(ue.a,{onChange:function(e){return S({type:"input",param:"operating_system_version",payload:e.target.value})},value:C.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:null===(f=C.error)||void 0===f?void 0:f.operating_system_version})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"platform",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.platform,suggestions:["linux-x86_64"],label:"Platform",required:!1,help:"Platform used - corresponds to sysconfig.get_platform() call.",error:null===(g=C.error)||void 0===g?void 0:g.platform})}),Object(b.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(b.jsx)(me,{setValue:function(e){var t;return S({type:"input",param:"python_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:C.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:null===(y=C.error)||void 0===y?void 0:y.python_version})}),Object(b.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:6,md:6,children:Object(b.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){return S({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Cancel"})})}),Object(b.jsx)(I.a,{item:!0,xs:6,children:Object(b.jsx)(je.a,{variant:"contained",color:"primary",onClick:function(){return A()},loading:C.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})},ge=n(381),ye=n(543),ke=n(544),_e=n(541),we=n(542),Ce=n(539),Se=n(375),Ee=n(540),Ae=n(512),Le=n(287);function Pe(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var a=Math.floor(n);return a+" year"+(1!==a?"s":"")}if((n=t/2592e3)>1){var i=Math.floor(n);return i+" month"+(1!==i?"s":"")}if((n=t/86400)>1){var r=Math.floor(n);return r+" day"+(1!==r?"s":"")}if((n=t/3600)>1){var o=Math.floor(n);return o+" hour"+(1!==o?"s":"")}if((n=t/60)>1){var c=Math.floor(n);return c+" minute"+(1!==c?"s":"")}var l=Math.floor(t);return l+" second"+(1!==l?"s":"")}var Ne=n(256),Me=n.n(Ne),Re=n(102),Ie=n(521),Te=function(){return Object(b.jsx)("div",{children:"404"})};function Be(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ve(e,t){return"desc"===e?function(e,n){return Be(e,n,t)}:function(e,n){return-Be(e,n,t)}}var De=[{id:"environment_name",label:"Image Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"datetime",label:"Last Updated"}];function qe(e){var t=e.order,n=e.orderBy,a=e.onRequestSort;return Object(b.jsx)(Ce.a,{children:Object(b.jsxs)(Ee.a,{children:[De.map((function(e){return Object(b.jsx)(_e.a,{sortDirection:n===e.id&&t,children:Object(b.jsx)(Ae.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:Object(b.jsx)("b",{children:e.label})})},e.id);var i})),Object(b.jsx)(_e.a,{})]})})}function Fe(){var e,t=a.useState("asc"),n=Object(m.a)(t,2),i=n[0],r=n[1],o=a.useState("calories"),c=Object(m.a)(o,2),s=c[0],d=c[1],u=a.useState(0),j=Object(m.a)(u,2),v=j[0],p=j[1],h=a.useState(10),O=Object(m.a)(h,2),x=O[0],f=O[1],g=Object(L.g)(),y=(e={useErrorBoundary:!1},Object(l.useQuery)(Object(z.a)(Object(z.a)({},e),{},{queryKey:["container-images"],queryFn:function(){return ce()}}))),k=Object(a.useMemo)((function(){var e,t,n,a;if(null!==y&&void 0!==y&&null!==(e=y.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.container_images)return null===y||void 0===y||null===(n=y.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.container_images.map((function(e){return e.date=Pe(new Date(e.datetime))+" ago",e}))}),[null===y||void 0===y?void 0:y.data]),_=v>0?Math.max(0,(1+v)*x-k.length):0;return y.isError?Object(b.jsx)(Te,{}):k?Object(b.jsx)(ge.a,{sx:{width:"100%"},children:Object(b.jsxs)(Le.a,{sx:{width:"100%",mb:2},children:[Object(b.jsx)(we.a,{children:Object(b.jsxs)(ye.a,{sx:{minWidth:750},size:"medium",children:[Object(b.jsx)(qe,{order:i,orderBy:s,onRequestSort:function(e,t){r(s===t&&"asc"===i?"desc":"asc"),d(t)},rowCount:k.length}),Object(b.jsxs)(ke.a,{children:[k.slice().sort(Ve(i,s)).slice(v*x,v*x+x).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(b.jsxs)(Ee.a,{hover:!0,tabIndex:-1,children:[Object(b.jsx)(_e.a,{component:"th",id:n,scope:"row",children:e.environment_name}),Object(b.jsx)(_e.a,{align:"left",children:e.os_name}),Object(b.jsx)(_e.a,{align:"left",children:e.os_version}),Object(b.jsx)(_e.a,{align:"left",children:e.python_version}),Object(b.jsx)(_e.a,{align:"left",children:e.date}),Object(b.jsx)(_e.a,{align:"right",children:Object(b.jsx)(Re.a,{onClick:function(){return t=e.package_extract_document_id,n=e.environment_name,void g("/image/"+t,{state:{image_name:n}});var t,n},children:Object(b.jsx)(Me.a,{})})})]},e.environment_name+t)})),_>0&&Object(b.jsx)(Ee.a,{style:{height:53*_},children:Object(b.jsx)(_e.a,{colSpan:6})})]})]})}),Object(b.jsx)(Se.a,{rowsPerPageOptions:[10,25,50],component:"div",count:k.length,rowsPerPage:x,page:v,onPageChange:function(e,t){p(t)},onRowsPerPageChange:function(e){f(parseInt(e.target.value,10)),p(0)}})]})}):Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Ie.a,{})})}function ze(e,t){var n;switch(t.type){case"loading":return Object(z.a)(Object(z.a)({},e),{},{loading:t.payload});case"error":return Object(z.a)(Object(z.a)({},e),{},{error:Object(z.a)(Object(z.a)({},e.error),{},Object(se.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(z.a)(Object(z.a)({},e),{},(n={},Object(se.a)(n,t.param,t.payload),Object(se.a)(n,"error",Object(z.a)(Object(z.a)({},e.error),{},Object(se.a)({},t.param,void 0))),n));default:throw new Error("Image state dispatch error")}}var We={error:{},loading:!1,lookupType:"id",id:""},Ge=function(){var e,t,n=Object(L.g)(),i=Object(a.useReducer)(ze,We),r=Object(m.a)(i,2),o=r[0],c=r[1],l=function(){var e=Object(U.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.loading){e.next=2;break}return e.abrupt("return");case 2:if(!o.id.includes("package-extract")){e.next=5;break}return n("/image/"+o.id),e.abrupt("return");case 5:c({type:"loading",payload:!0}),(t=o.id,ne.a.post(ae+"/analyze",{},{params:{image:t},headers:{accept:"application/json","Content-Type":"application/json"}})).then((function(e){c({type:"loading",payload:!1}),n("/image/"+e.data.analysis_id,{state:{image_name:o.id}})})).catch((function(e){var t,n,a,i;(c({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))&&c({type:"error",param:"id",payload:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)&&void 0!==n?n:"An unknown error occurred"})}));case 7:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(de.a,{in:"id"===o.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:12,children:Object(b.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=o.error)||void 0===e?void 0:e.id})}),Object(b.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(b.jsx)(X,{error:null===(t=o.error)||void 0===t?void 0:t.id,onChange:function(e){return c({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID or image name",type:"search",boxprops:{mr:2},lefticon:Object(b.jsx)(ee.a,{}),onEnter:l})}),Object(b.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(b.jsx)(d.a,{variant:"contained",color:"primary",onClick:l,sx:{minHeight:"100%",minWidth:"100%"},children:Object(b.jsx)("b",{children:"Analyze"})})})]})]}),Object(b.jsx)(d.a,{onClick:function(){return c({type:"input",param:"lookupType",payload:"lookup"})},children:"Lookup Thoth Images"})]})}),Object(b.jsx)(de.a,{in:"lookup"===o.lookupType,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Available Thoth Container Images"}),Object(b.jsx)(Fe,{handleAnalyze:l})]})})]})},He=function(){var e=Object(a.useState)("package"),t=Object(m.a)(e,2),n=t[0],i=t[1],r=Object(q.a)(),o=Object(F.a)(r.breakpoints.up("sm"));return Object(b.jsx)("div",{style:{maxWidth:"1000px",marginLeft:"auto",marginRight:"auto"},children:Object(b.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(_.a,{sx:{marginTop:10},children:Object(b.jsx)("img",{alt:"Thoth Logo",src:K,height:o?300:"auto",width:"100%"})})}),Object(b.jsxs)(I.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(b.jsxs)(I.a,{container:!0,item:!0,sm:12,md:6,align:"center",mr:5,children:[Object(b.jsx)(I.a,{item:!0,xs:12,align:"left",mb:3,children:Object(b.jsx)(T.a,{variant:"h4",children:Object(b.jsx)("b",{children:"Thoth Search"})})}),Object(b.jsx)(I.a,{item:!0,xs:12,align:"left",children:Object(b.jsx)(T.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyse and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyse a single Python package to see what Thoth knows about the package."})})]}),Object(b.jsx)(I.a,{item:!0,container:!0,sm:12,md:5,direction:"column",justifyContent:"center",spacing:1,children:[["One","100k"],["Two","20%"],["Three","62"],["Four","N/A"]].map((function(e,t){return Object(b.jsxs)(I.a,{item:!0,container:!0,alignItems:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:6,children:Object(b.jsx)(T.a,{variant:"h6",children:Object(b.jsxs)("b",{children:["Thoth Statistic ",e[0]]})})}),Object(b.jsx)(I.a,{item:!0,xs:6,children:Object(b.jsx)(T.a,{variant:"h5",align:"right",children:e[1]})})]},t)}))}),Object(b.jsx)(I.a,{item:!0,xs:12,align:"center",mt:3,mb:4,children:Object(b.jsxs)(B.a,{value:n,exclusive:!0,onChange:function(e,t){t&&i(t)},size:o?"large":"small",children:[Object(b.jsx)(V.a,{value:"package",children:Object(b.jsx)("b",{children:"package"})}),Object(b.jsx)(V.a,{value:"environment",children:Object(b.jsx)("b",{children:"environment"})}),Object(b.jsx)(V.a,{value:"image",children:Object(b.jsx)("b",{children:"image"})})]})}),Object(b.jsxs)(I.a,{item:!0,xs:12,children:[Object(b.jsx)(D.a,{sx:{marginBottom:3}}),Object(b.jsx)(H,{value:n,index:"package",children:Object(b.jsx)(le,{})}),Object(b.jsx)(H,{value:n,index:"environment",children:Object(b.jsx)(fe,{})}),Object(b.jsx)(H,{value:n,index:"image",children:Object(b.jsx)(Ge,{})})]})]})]})})},Ke=n(523),Ue=n(524),Qe=n(525),Je=Object(k.a)({root:{minWidth:275,height:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Ye=function(e){var t=e.cardMeta,n=e.cardBody,a=e.cardAction,i=Je();return Object(b.jsxs)(Ke.a,{className:i.root,children:[Object(b.jsx)(Ue.a,{action:a,title:Object(b.jsx)(T.a,{variant:"h5",children:t.title}),subheader:t.subTitle}),Object(b.jsx)(Qe.a,{children:n})]})},Ze=n(508),Xe=n(173),$e=n.n(Xe),et=n(174),tt=n.n(et),nt=["text","icon","link","className"],at=Object(k.a)((function(){return{root:{display:"flex",alignItems:"center"}}})),it=function(e){var t=e.text,n=e.icon,a=e.link,i=e.className,r=Object(W.a)(e,nt),o=at();return Object(b.jsxs)("div",Object(z.a)(Object(z.a)({className:"".concat(o.root," ").concat(i)},r),{},{children:[n,Object(b.jsx)(T.a,{href:a||null,variant:"body2",marginLeft:!0,children:t})]}))},rt=function(e,t,n){return e?"Advise finished "+Pe(new Date(e))+" ago.":t?"Advise started "+Pe(new Date(t))+" ago.":n?"Advise finished "+Pe(new Date(n+"Z"))+" ago.":"Time started/finished not available"},ot=n(497),ct=["info"],lt=function(e){var t=e.info,n=Object(W.a)(e,ct);return Object(b.jsx)(ot.a,{className:null===n||void 0===n?void 0:n.className,action:Object(b.jsx)(d.a,{color:"inherit",size:"small",href:null===t||void 0===t?void 0:t.link,children:"DETAILS"}),severity:t.type.toLowerCase(),children:null===t||void 0===t?void 0:t.message})},st=Object(k.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},marginRight:{marginRight:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3),alignItems:"center"},alert:{width:"100%",marginTop:e.spacing(1)}}})),dt=function(e){var t,n,r,o,c,l,s,u,j,v,p,h,O=e.adviseDocument,x=e.logs,f=st(),g=i.a.useState(!1),y=Object(m.a)(g,2),k=y[0],_=y[1],w=i.a.useState(!1),C=Object(m.a)(w,2),S=C[0],E=C[1],A=i.a.useState(),L=Object(m.a)(A,2),P=L[0],N=L[1],M=Object(a.useMemo)((function(){var e,t,n;return null!==O&&void 0!==O&&null!==(e=O.result)&&void 0!==e&&e.report?O.result.report.ERROR?["ERROR","error"]:["COMPLETE","success"]:null!==O&&void 0!==O&&null!==(t=O.result)&&void 0!==t&&t.error?["ERROR","error"]:null!==O&&void 0!==O&&null!==(n=O.status)&&void 0!==n&&n.state?[O.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[O]),R=Object(m.a)(M,2),I=R[0],B=R[1],V=Object(a.useMemo)((function(){var e,t,n,a;if(null!==O&&void 0!==O&&null!==(e=O.result)&&void 0!==e&&e.report)return null!==O&&void 0!==O&&null!==(t=O.result)&&void 0!==t&&null!==(n=t.report)&&void 0!==n&&n.stack_info?null===O||void 0===O||null===(a=O.result)||void 0===a?void 0:a.report.stack_info.filter((function(e){return"ERROR"===e.type})):null}),[O]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(T.a,{variant:"h4",children:Object(b.jsx)("b",{children:null!==(t=null===O||void 0===O||null===(n=O.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:null===O||void 0===O||null===(r=O.parameters)||void 0===r?void 0:r.analysis_id})}),Object(b.jsxs)("div",{className:f.linksRow,children:[Object(b.jsx)(Ze.a,{label:I,color:B}),Object(b.jsx)(it,{className:f.marginLeft,text:rt(null===O||void 0===O||null===(o=O.status)||void 0===o?void 0:o.finished_at,null===O||void 0===O||null===(c=O.status)||void 0===c?void 0:c.started_at,null===O||void 0===O||null===(l=O.metadata)||void 0===l?void 0:l.datetime),icon:Object(b.jsx)($e.a,{})}),Object(b.jsx)(d.a,{sx:{marginLeft:2},onClick:function(){return E(!S)},children:Object(b.jsx)(it,{text:"Logs",icon:Object(b.jsx)(tt.a,{})})})]}),Object(b.jsx)(T.a,{variant:"subtitle2",children:null!==(s=null!==(u=null===O||void 0===O||null===(j=O.result)||void 0===j||null===(v=j.report)||void 0===v?void 0:v.ERROR)&&void 0!==u?u:null===O||void 0===O?void 0:O.error)&&void 0!==s?s:null===O||void 0===O||null===(p=O.result)||void 0===p?void 0:p.error_msg}),(null===V||void 0===V?void 0:V.length)>0?Object(b.jsxs)("div",{children:[Object(b.jsx)(lt,{info:V[0]}),Object(b.jsx)(de.a,{in:k,timeout:"auto",unmountOnExit:!0,children:null===V||void 0===V?void 0:V.slice(1).map((function(e,t){return Object(b.jsx)(lt,{info:e,className:f.alert},t)}))}),Object(b.jsx)(d.a,{color:"inherit",size:"small",onClick:function(){return _(!k)},children:(null===V||void 0===V?void 0:V.length)>1?k?"LESS":"MORE":null})]}):null,Object(b.jsx)(de.a,{in:S,children:null!==(h=null===x||void 0===x?void 0:x.split("\n").map((function(e,t){return Object(b.jsx)(T.a,{noWrap:P!==t,onClick:function(){return N(P===t?void 0:t)},variant:"body2",sx:{backgroundColor:P===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==h?h:"Advisor log is not available."}),"COMPLETE"===I?Object(b.jsxs)(T.a,{variant:"body1",sx:{color:"text.secondary"},children:["Thoth has added and removed packages from the original Pipfile.lock, resulting in a ",Object(b.jsx)("i",{children:"new"})," Pipfile.lock. Switch between the new and old Python environments to see the differences."]}):null]})},ut=function(e){var t=e.value,n=e.onChange;return Object(b.jsxs)(B.a,{value:t,exclusive:!0,size:"small",onChange:n,children:[Object(b.jsx)(V.a,{value:"oldGraph",children:"Old"}),Object(b.jsx)(V.a,{value:"newGraph",children:"New"})]})},jt=n(530),vt=n(531),bt=n(532),pt=n(528),ht=n(529),mt=n(498),Ot=n(260),xt=n.n(Ot),ft=n(259),gt=n.n(ft),yt=n(261),kt=n.n(yt);function _t(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function wt(e,t){return"desc"===e?function(e,n){return _t(e,n,t)}:function(e,n){return-_t(e,n,t)}}function Ct(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var St=n(527),Et=n(509),At=n(491),Lt=[{id:"name",numeric:!1,label:"Package"},{id:"depth",numeric:!0,label:"Depth"},{id:"license",numeric:!1,label:"License"},{id:"dependencies",numeric:!0,label:"Direct Dependencies"}];var Pt=function(e){var t=e.order,n=e.orderBy,a=e.onRequestSort;return Object(b.jsx)(St.a,{children:Object(b.jsx)(pt.a,{children:Lt.map((function(e){return Object(b.jsx)(ht.a,{align:e.numeric?"right":"left",padding:"normal",sortDirection:n===e.id&&t,children:Object(b.jsxs)(Et.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,n===e.id?Object(b.jsx)(_.a,{component:"span",sx:At.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})},Nt=i.a.createContext(),Mt=function(e){var t=e.mergedGraph,n=Object(a.useState)(""),i=Object(m.a)(n,2),r=i[0],o=i[1],c=Object(a.useState)(),l=Object(m.a)(c,2),s=l[0],d=l[1];return t?Object(b.jsx)(Nt.Provider,{value:{selected:s,setSelected:d},children:Object(b.jsxs)(I.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start",mt:2,children:[Object(b.jsx)(I.a,{item:!0,s:12,md:6,children:Object(b.jsxs)(Y.a,{sx:{padding:2},children:[Object(b.jsx)(X,{onChange:function(e){o(e.target.value)},lefticon:Object(b.jsx)(ee.a,{})}),Object(b.jsx)(Dt,{search:r,filteredGraph:t})]})}),Object(b.jsx)(I.a,{item:!0,s:12,md:6,children:s?Object(b.jsx)(en,{mergedGraph:t}):Object(b.jsx)(T.a,{variant:"body1",align:"center",children:"No package selected"})})]})}):null},Rt=n(168),It=n(68),Tt=n(51),Bt=function(){function e(t,n){Object(It.a)(this,e),this.adjacents=new Set,this.key=t,this.value=n}return Object(Tt.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}(),Vt=function(){function e(){Object(It.a)(this,e),this.nodes=new Map}return Object(Tt.a)(e,[{key:"addVertex",value:function(e,t){if(this.nodes.has(e))return this.nodes.get(e);var n=new Bt(e,t);return this.nodes.set(e,n),n}},{key:"addEdge",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return n.addAdjacent(a),[n,a]}},{key:"areAdjacents",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return!(!n||!a)&&n.isAdjacent(a)}},{key:"graphSearch",value:J.a.mark((function e(t){var n,a,i,r,o=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Map,(i=[]).push(t);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===n?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.set(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=this.nodes.get(e),i=this.nodes.get(t),r=new Map(n);if(!i||!a)return[];if(r.set(a),e===t)return Array.from(r.keys());var o,c=Object(Rt.a)(a.getAdjacents());try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!r.has(l)){var s=this.findPath(l.value,t,r);if(s.length)return s}}}catch(d){c.e(d)}finally{c.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r.key!==t&&(r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(n.nodes.get(e))}))))}return a}},{key:"findAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=this.nodes.get(e),r=this.nodes.get(t),o=new Map(a);if(!r||!i)return[];if(o.set(i),e===t)return[Array.from(o.keys())];var c=[];return i.getAdjacents().forEach((function(e){o.has(e)||n.findAllPaths(e.value.id,t,o).forEach((function(e){c.push(e)}))})),c}}]),e}();function Dt(e){var t,n=e.search,r=void 0===n?"":n,o=e.filteredGraph,c=Object(a.useState)("asc"),l=Object(m.a)(c,2),s=l[0],d=l[1],u=i.a.useState("name"),j=Object(m.a)(u,2),v=j[0],p=j[1],h=i.a.useState(0),O=Object(m.a)(h,2),x=O[0],f=O[1],g=i.a.useState(25),y=Object(m.a)(g,2),k=y[0],w=y[1],C=i.a.useState([]),S=Object(m.a)(C,2),E=S[0],A=S[1],L=null!==(t=Object(a.useContext)(Nt))&&void 0!==t?t:{setSelected:function(){return console.log("missing callback")}},P=L.selected,N=L.setSelected;Object(a.useEffect)((function(){if(o){f(0);var e=[];o.nodes.forEach((function(t){var n,a,i,r,o,c,l;-1!==t.value.depth&&e.push({name:t.value.label,key:t.key,warnings:[],depth:null!==(n=null===(a=t.value)||void 0===a?void 0:a.depth)&&void 0!==n?n:-1,license:null===t||void 0===t||null===(i=t.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.License,dependencies:t.adjacents.size,change:null===(o=t.value)||void 0===o?void 0:o.change,summary:null===t||void 0===t||null===(c=t.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.Summary})})),A(e)}}),[o]);var M=x>0?Math.max(0,(1+x)*k-E.length):0;return Object(b.jsxs)(_.a,{sx:{width:"100%"},children:[Object(b.jsx)(jt.a,{children:Object(b.jsxs)(vt.a,{sx:{minWidth:750},size:"medium",children:[Object(b.jsx)(Pt,{order:s,orderBy:v,onRequestSort:function(e,t){d(v===t&&"asc"===s?"desc":"asc"),p(t)}}),Object(b.jsxs)(bt.a,{children:[Ct(E,wt(s,v)).filter((function(e){return e.name.includes(r)})).slice(x*k,x*k+k).map((function(e,t){var n="enhanced-table-checkbox-".concat(t),a="removed"===e.change?"error":"added"===e.change?"success":void 0;return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)(pt.a,{hover:!0,onClick:function(){return N(e.key)},tabIndex:-1,selected:P===e.key,children:[Object(b.jsx)(ht.a,{component:"th",id:n,scope:"row",children:Object(b.jsxs)(_.a,{display:"flex",children:["removed"===e.change?Object(b.jsx)(gt.a,{color:a}):"added"===e.change?Object(b.jsx)(xt.a,{color:a}):Object(b.jsx)(kt.a,{}),Object(b.jsx)(T.a,{ml:2,children:e.name})]})}),Object(b.jsx)(ht.a,{align:"right",children:e.depth}),Object(b.jsx)(ht.a,{align:"right",children:e.license}),Object(b.jsx)(ht.a,{align:"right",children:e.dependencies})]}),Object(b.jsx)(pt.a,{children:Object(b.jsx)(ht.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6})})]},e.name)})),M>0&&Object(b.jsx)(pt.a,{style:{height:53*M},children:Object(b.jsx)(ht.a,{colSpan:6})})]})]})}),Object(b.jsx)(mt.a,{rowsPerPageOptions:[5,10,25],component:"div",count:E.length,rowsPerPage:k,page:x,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){w(parseInt(e.target.value,10)),f(0)}})]})}Object(k.a)((function(e){return{lockfile:{overflow:"scroll",paddingLeft:e.spacing(1)}}}));var qt=n(176),Ft=n.n(qt),zt=n(262),Wt=n.n(zt),Gt=function(e){var t,n,a,i,r,o,c,l,s,d,u=e.node;return Object(b.jsxs)("div",{children:[Object(b.jsxs)(I.a,{container:!0,alignItems:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:6,children:Object(b.jsx)(T.a,{variant:"h6",children:Object(b.jsx)("b",{children:u.value.id})})}),Object(b.jsx)(I.a,{item:!0,xs:6,children:Object(b.jsxs)(T.a,{ml:2,variant:"body1",children:["v",null!==(t=u.value.version)&&void 0!==t?t:"NaN"]})})]}),Object(b.jsx)(T.a,{gutterBottom:!0,variant:"body2",children:null!==(n=null===(a=u.value)||void 0===a||null===(i=a.metadata)||void 0===i?void 0:i.Summary)&&void 0!==n?n:"NaN"}),Object(b.jsxs)(I.a,{container:!0,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(it,{text:null!==(r=null===(o=u.value)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.License)&&void 0!==r?r:"NaN",icon:Object(b.jsx)(Ft.a,{})})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(it,{ml:2,text:null!==(l=u.value)&&void 0!==l&&l.latestVersion?"Latest version is installed":"Installed version is NOT the latest.",icon:Object(b.jsx)(Wt.a,{})})})]}),Object(b.jsx)(T.a,{variant:"body2",mt:2,children:null===(s=u.value)||void 0===s||null===(d=s.justifications)||void 0===d?void 0:d.header})]})},Ht=n(184),Kt=["mergedGraph"],Ut=Object(k.a)((function(){return{root:{display:"flex",flexFlow:"column nowrap"},canvas:{flex:"1 1 auto",height:"50vh"}}})),Qt=function(e){var t=e.mergedGraph,n=Object(W.a)(e,Kt),i=Ut(),r=Object(a.useRef)(null),c=Object(a.useContext)(Nt).selected;return Object(a.useEffect)((function(){if(c&&t){var e=t.nodes.get(c),n=t.findAllNodesOnAllPaths(e,"*App");n.set("*App",t.nodes.get("*App"));var a=new Ht.a;n.forEach((function(t){var n,i=document.createElement("div");o.a.render(Object(b.jsx)(Gt,{node:t}),i);var r=null!==(n=t.value.color)&&void 0!==n?n:ie.nodes.color,c=void 0;"*App"===t.key?(r="#4fc1ea",c={color:"#4fc1ea",strokeWidth:3,size:20}):t.key===e.key&&(r="#f39200"),a.add(Object(z.a)(Object(z.a)({},t.value),{},{color:r,title:t.key===e.key||"*App"===t.key?void 0:i,font:c}))}));var i={nodes:a,edges:new Ht.a(t.visEdges)},l=r.current&&new Ht.b(r.current,i,ie),s=document.getElementById("mynetwork").getElementsByTagName("canvas")[0];l.on("hoverNode",(function(){d("grab")})),l.on("blurNode",(function(){d("default")})),l.on("dragStart",(function(){d("grabbing")})),l.on("dragging",(function(){d("grabbing")})),l.on("dragEnd",(function(){d("grab")})),l.on("dragEnd",(function(e){0===e.nodes.length||l.isCluster(e.nodes[0])||l.editNode(e.nodes[0])})),l.on("dragEnd",(function(e){0===e.nodes.length||l.isCluster(e.nodes[0])||l.editNode(e.nodes[0])}))}function d(e){s.style.cursor=e}}),[c,t]),Object(b.jsx)("div",{className:"".concat(i.root," ").concat(n.className),children:Object(b.jsx)("div",{ref:r,id:"mynetwork",className:i.canvas})})},Jt=n(18),Yt=n(492),Zt=n(533),Xt=n(263),$t=n.n(Xt),en=function(e){var t,n,r,o,c,l,s,u,j,v,p,h,O,x,f,g,y,k,w,C,S,E=e.mergedGraph,A=Object(a.useContext)(Nt),L=A.selected,P=A.setSelected,N=E.nodes.get(L),M={removed:[],added:[],version:[],unchanged:[]};Object(Jt.a)(null!==(t=null===N||void 0===N?void 0:N.parents)&&void 0!==t?t:[]).filter((function(e){return"*App"!==e})).forEach((function(e){M[E.nodes.get(e).value.change].push(e)}));var R=Object(a.useMemo)((function(){var e,t,n,a={};return null===N||void 0===N||null===(e=N.value)||void 0===e||null===(t=e.justifications)||void 0===t||null===(n=t.thoth)||void 0===n||n.forEach((function(e){var t;a[e.type]=[].concat(Object(Jt.a)(null!==(t=a[e.type])&&void 0!==t?t:[]),[e])})),a}),[N]);return Object(b.jsxs)(_.a,{children:[Object(b.jsxs)(Y.a,{sx:{padding:2},children:[Object(b.jsxs)(I.a,{container:!0,alignItems:"center",mb:1,children:[Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(T.a,{variant:"h3",children:Object(b.jsx)("b",{children:null===N||void 0===N||null===(n=N.value)||void 0===n?void 0:n.name})})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(T.a,{ml:2,variant:"h6",children:null===N||void 0===N||null===(r=N.value)||void 0===r?void 0:r.version})})]}),N.value.metadata?void 0:Object(b.jsxs)(Yt.a,{direction:"row",alignItems:"center",children:[Object(b.jsx)($t.a,{color:"error",sx:{marginRight:".5rem"}}),Object(b.jsx)(T.a,{mb:0,color:"error",gutterBottom:!0,variant:"body2",children:"The package metadata could not be fetched. Package data will be limited."})]}),Object(b.jsx)(T.a,{gutterBottom:!0,variant:"body1",children:null===N||void 0===N||null===(o=N.value)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.Summary}),Object(b.jsx)(I.a,{container:!0,spacing:2,children:Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(it,{text:null!==(l=null===N||void 0===N||null===(s=N.value)||void 0===s||null===(u=s.metadata)||void 0===u?void 0:u.License)&&void 0!==l?l:"NaN",icon:Object(b.jsx)(Ft.a,{})})})})]}),Object(b.jsxs)(Y.a,{sx:{padding:2,marginTop:2},children:[Object(b.jsx)(T.a,{variant:"h5",children:"Thoth Justifications"}),Object(b.jsx)(T.a,{variant:"body1",mt:2,children:null===N||void 0===N||null===(j=N.value)||void 0===j||null===(v=j.justifications)||void 0===v?void 0:v.header}),null!==N&&void 0!==N&&null!==(p=N.value)&&void 0!==p&&null!==(h=p.justifications)&&void 0!==h&&null!==(O=h.reasons)&&void 0!==O&&O.length?Object(b.jsx)("ul",{children:null===N||void 0===N||null===(x=N.value)||void 0===x||null===(f=x.justifications)||void 0===f?void 0:f.reasons.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsxs)(T.a,{variant:"body1",mt:2,children:[Object(b.jsx)(Zt.a,{underline:"hover",onClick:function(){return P(e.package)},children:e.package}),e.reason]})},t+e.reason)}))}):null,Object.entries(R).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)(T.a,{variant:"h6",mt:2,children:[n," Justifications"]}),a.map((function(e,t){return Object(b.jsxs)(I.a,{container:!0,alignItems:"center",ml:3,children:[Object(b.jsxs)(I.a,{item:!0,xs:10,children:[Object(b.jsx)(T.a,{variant:"body1",mt:1,children:e.message}),Object(b.jsx)(T.a,{variant:"body2",ml:3,mt:.5,children:e.advisory})]}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(d.a,{href:e.link,children:"READ MORE"})})]},e.message+t)}))]},n)}))]}),Object(b.jsxs)(Y.a,{sx:{padding:2,marginTop:2},children:[Object(b.jsx)(T.a,{variant:"h5",mb:2,children:"Package Origins"}),Object(b.jsxs)(T.a,{variant:"body1",mb:2,children:[0===(null===(g=Object(Jt.a)(null!==(y=null===N||void 0===N?void 0:N.parents)&&void 0!==y?y:[]).filter((function(e){return"*App"!==e})))||void 0===g?void 0:g.length)?(null===N||void 0===N||null===(k=N.value)||void 0===k?void 0:k.label)+" is not a dependent of any package in this Python environment":"There are "+(null===(w=Object(Jt.a)(null!==(C=null===N||void 0===N?void 0:N.parents)&&void 0!==C?C:[]).filter((function(e){return"*App"!==e})))||void 0===w?void 0:w.length)+" package(s) that have "+(null===N||void 0===N||null===(S=N.value)||void 0===S?void 0:S.label)+" as a direct dependency. Of those package(s)",Object.keys(M).map((function(e,t){return 0===M[e].length?null:Object(b.jsxs)(i.a.Fragment,{children:[", "+M[e].length+("version"===e?" had a version change ":(1===M[e].length?" was ":" were ")+e)+" (",M[e].map((function(e,t,n){var a=e;return t!==n.length-1&&(a+=", "),Object(b.jsx)(Zt.a,{underline:"hover",onClick:function(){return P(e)},children:a},t+a)})),")"]},e+t)})),"."]}),Object(b.jsx)(Qt,{mergedGraph:E})]})]})},tn=n(537),nn=n(534),an=Object(tn.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}}))(nn.a),rn=Object(k.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"repeat(6,1fr)",alignItems:"center",gridGap:e.spacing(1)},label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{textAlign:"end"}}})),on=function(e){var t=e.value,n=e.total,a=e.label,i=e.action,r=rn();return Object(b.jsxs)(I.a,{container:!0,spacing:1,alignItems:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:5,children:Object(b.jsx)(T.a,{variant:"body2",className:r.label,children:a})}),Object(b.jsx)(I.a,{item:!0,xs:2,children:Object(b.jsx)(T.a,{className:r.value,variant:"body2",children:t})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(an,{variant:"determinate",value:n>0?t/n*100:0})}),Object(b.jsx)(I.a,{item:!0,xs:1,children:Object(b.jsx)("div",{children:null!==i&&void 0!==i?i:null})})]})},cn=n(536),ln=n(511),sn=n(520),dn=n(501),un=n(493),jn=function(e){var t,n,a,i,r,o,c,l=e.all,s=e.roots,d=(null!==(t=null===l||void 0===l?void 0:l.direct)&&void 0!==t?t:0)+(null!==(n=null===l||void 0===l?void 0:l.indirect)&&void 0!==n?n:0)+(null!==(a=null===l||void 0===l?void 0:l.roots)&&void 0!==a?a:0);return l&&s?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"All Packages"}),Object(b.jsx)(D.a,{mb:1}),Object(b.jsx)(on,{value:null!==(i=null===l||void 0===l?void 0:l.roots)&&void 0!==i?i:0,total:d,label:"Root",mb:1}),Object(b.jsx)(on,{value:null!==(r=null===l||void 0===l?void 0:l.direct)&&void 0!==r?r:0,total:d,label:"Direct",mb:1}),Object(b.jsx)(on,{value:null!==(o=null===l||void 0===l?void 0:l.indirect)&&void 0!==o?o:0,total:d,label:"Indirect"}),Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,mt:2,children:"Root Packages"}),Object(b.jsx)(D.a,{mb:1}),Object(b.jsx)(sn.a,{component:"nav",children:Object(b.jsx)(cn.a,{children:null===(c=Object.entries(null!==s&&void 0!==s?s:{}))||void 0===c?void 0:c.map((function(e){var t,n,a,i,r,o,c=Object(m.a)(e,1)[0],l=(null!==(t=s[c].direct)&&void 0!==t?t:0)+(null!==(n=s[c].indirect)&&void 0!==n?n:0);return Object(b.jsx)(de.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)(dn.a,{children:Object(b.jsxs)(I.a,{container:!0,alignItems:"center",children:[Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(un.a,{primary:c})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsxs)(I.a,{container:!0,direction:"column",children:[Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(on,{value:null!==(a=null===s||void 0===s||null===(i=s[c])||void 0===i?void 0:i.direct)&&void 0!==a?a:0,total:l,label:"Direct"})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(on,{value:null!==(r=null===s||void 0===s||null===(o=s[c])||void 0===o?void 0:o.indirect)&&void 0!==r?r:0,total:l,label:"Indirect"})})]})})]})}),Object(b.jsx)(D.a,{variant:"middle",mb:1})]})},c)}))})})]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},vn=n(266),bn=n.n(vn),pn=n(267),hn=n.n(pn),mn=n(265),On=n.n(mn),xn=n(264),fn=n.n(xn),gn=function(e){var t,n=e.name,a=e.metadata,r=e.packages,o=e.totalLicenses,c=i.a.useState(!1),l=Object(m.a)(c,2),s=l[0],d=l[1];return Object(b.jsxs)(I.a,{container:!0,children:[Object(b.jsx)(I.a,{item:!0,xs:1,children:null===(null===a||void 0===a?void 0:a.isOsiApproved)?Object(b.jsx)(fn.a,{}):null!==a&&void 0!==a&&a.isOsiApproved?Object(b.jsx)(On.a,{}):null}),Object(b.jsxs)(I.a,{item:!0,xs:!0,children:[Object(b.jsx)(_.a,{onClick:function(){return d(!s)},children:Object(b.jsx)(on,{value:null!==(t=Object.keys(r).length)&&void 0!==t?t:0,total:o,label:n,action:s?Object(b.jsx)(bn.a,{}):Object(b.jsx)(hn.a,{})},n)}),Object(b.jsxs)(de.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(b.jsx)(_.a,{my:1,children:Object.entries(r).sort((function(e,t){return e[1]-t[1]})).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(Ze.a,{sx:{margin:.5},color:0===a.depth?"primary":1===a.depth?"secondary":"default",label:n},n)}))}),Object(b.jsx)(D.a,{})]})]})]})},yn=function(e){var t=e.metric,n=i.a.useState(!1),r=Object(m.a)(n,2),o=r[0],c=r[1],l=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).sort((function(e,t){return Object.keys(t[1]).length-Object.keys(e[1]).length}))}),[t]),s=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).reduce((function(e,t){var n=Object(m.a)(t,2)[1];return e+Object.keys(n.packages).length}),0)}),[t]);return t?Object(b.jsxs)("div",{children:[Object(b.jsxs)(I.a,{container:!0,children:[Object(b.jsx)(I.a,{item:!0,xs:1,children:Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"OSI"})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Dependency Licenses"})})]}),Object(b.jsx)(D.a,{}),Object(b.jsx)(cn.a,{children:null===l||void 0===l?void 0:l.slice(0,10).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(de.a,{children:Object(b.jsx)(gn,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))}),Object(b.jsx)(de.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(b.jsx)(cn.a,{children:l.slice(10).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(de.a,{children:Object(b.jsx)(gn,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))})}),Object(b.jsx)(_.a,{textAlign:"center",children:Object(b.jsx)(d.a,{onClick:function(){return c(!o)},color:"primary",children:o?"Less":"More"})})]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},kn=function(e){var t,n,a,i,r,o=e.metric,c=(null===o||void 0===o?void 0:o.added)+(null===o||void 0===o?void 0:o.removed)+(null===o||void 0===o?void 0:o.version)+(null===o||void 0===o?void 0:o.unchanged),l=Object.values(null!==(t=null===o||void 0===o?void 0:o.justification)&&void 0!==t?t:{}).reduce((function(e,t){return e+t}),0);return o?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T.a,{variant:"body2",gutterBottom:!0,children:null===o||void 0===o?void 0:o.build}),Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,mt:2,children:"What Thoth Changed"}),Object(b.jsx)(D.a,{mb:1}),Object(b.jsx)(on,{value:null!==(n=null===o||void 0===o?void 0:o.added)&&void 0!==n?n:0,total:c,label:"Added Packages",mb:1}),Object(b.jsx)(on,{value:null!==(a=null===o||void 0===o?void 0:o.removed)&&void 0!==a?a:0,total:c,label:"Removed Packages",mb:1}),Object(b.jsx)(on,{value:null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0,total:c,label:"Version Changes"}),Object(b.jsx)(T.a,{variant:"h6",mt:3,gutterBottom:!0,children:"Justification Counts"}),Object(b.jsx)(D.a,{mb:1}),Object.entries(null!==(r=null===o||void 0===o?void 0:o.justification)&&void 0!==r?r:{}).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)(on,{value:a,total:l,label:n,mb:1},n)}))]}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},_n=n(504),wn=function(e){var t,n,a,r,o,c=e.metrics,l=i.a.useState("newGraph"),s=Object(m.a)(l,2),d=s[0],u=s[1],j=function(e,t){null!==t&&void 0!==t&&t.length&&u(t)};return Object(b.jsxs)(_n.a,{columns:{xs:1,md:2},spacing:3,mb:3,mt:1,children:[Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Thoth Advise Summary"},cardBody:Object(b.jsx)(kn,{metric:null===c||void 0===c?void 0:c.advise})})}),Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Dependencies Summary"},cardBody:Object(b.jsx)(jn,{all:null===c||void 0===c||null===(t=c[d])||void 0===t||null===(n=t.dependencies)||void 0===n?void 0:n.all,roots:null===c||void 0===c||null===(a=c[d])||void 0===a||null===(r=a.dependencies)||void 0===r?void 0:r.roots}),cardAction:Object(b.jsx)(ut,{value:d,onChange:j})})}),Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Licenses Summary"},cardBody:Object(b.jsx)(yn,{metric:null===c||void 0===c||null===(o=c[d])||void 0===o?void 0:o.licenses}),cardAction:Object(b.jsx)(ut,{value:d,onChange:j})})})]})},Cn=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ae+"/advise/python/"+t,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ae+"/advise/python/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function En(e){return Object.entries(e.requirements_locked.default).map((function(t){var n=Object(m.a)(t,2);return{name:n[0],version:n[1].version.replace("==",""),index:"https://pypi.org/simple",os_name:e.runtime_environment.operating_system.name,os_version:e.runtime_environment.operating_system.version,python_version:e.runtime_environment.python_version}}))}var An=n(47),Ln=function(e,t){if(e&&t){var n=new Map;t.forEach((function(e){e.package_name&&(n.has(e.package_name)?n.set(e.package_name,[].concat(Object(Jt.a)(n.get(e.package_name)),[e])):n.set(e.package_name,[e]))})),e.forEach((function(t){var a={package:t.key};if("removed"===t.value.change?(a.header="".concat(t.value.label," was ").concat(0===t.value.depth?"directly":"indirectly"," removed by Thoth resolver."),a.reasons=function(e,t){var n=new Map,a=[];a.push(e);for(var i=[],r=function(){var r=a.pop();r&&!n.has(r)&&(n.set(r),"version"===r.value.change?i.push(r):r.parents.forEach((function(n){"*App"!==n?a.push(t.get(n)):r.key!==e.key&&i.push(r)})))};0!==a.length;)r();return i.map((function(t){var n="version"===t.value.change?" had its version changed to "+t.value.version+" from "+t.value.oldVersion+". Version "+t.value.oldVersion+" of "+t.key+" included package "+e.value.label+" as a dependency, where version "+t.value.version+" does not. ":" did not have any dependents and was removed by the Thoth resolver.";return{package:t.key,reason:n}}))}(t,e),0===a.reasons.length&&(a.header="".concat(t.value.label," was removed for an unknown reason. The package does not have dependents in the Pipfile.lock."))):"added"===t.value.change?a.header="".concat(t.value.label," was added to the Pipfile.lock by Thoth resolver."):"version"===t.value.change?a.header="".concat(t.key," had its version changed from ").concat(t.value.oldVersion," to ").concat(t.value.version,"."):a.header="Thoth resolver did not remove or change package "+t.value.label+".",n.has(t.key)){var i=n.get(t.key);a=Object(z.a)(Object(z.a)({},a),{},{thoth:i})}t.value.justifications=a}),[])}},Pn=function(){var e=Object(U.a)(J.a.mark((function e(t,n,a,i,r,o){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&a&&i&&r&&o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ne.a.get(ae+"/python/package/version/metadata",{params:{name:t,version:n,index:a,os_name:i,os_version:r,python_version:o},headers:{accept:"application/json"}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,i,r,o){return e.apply(this,arguments)}}(),Nn=function(e,t){return Object(l.useQueries)(e.map((function(e){return Object(z.a)(Object(z.a)({},t),{},{enabled:!!e.name&&!!e.version&&!!e.index&&!!e.os_name&&!!e.os_version&&!!e.python_version,queryKey:["packageMetadata",e.name,e.version,e.index,e.os_name,e.os_version,e.python_version],queryFn:function(){return Pn(e.name,e.version,e.index,e.os_name,e.os_version,e.python_version)}})})))};var Mn=function(e){var t=Object(a.useState)(),n=Object(m.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={all:{},roots:{}},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.graphSearch(e.nodes.get(n));Array.from(i).forEach((function(e){var i,r,o,c,l;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var s=0===e.value.depth?"roots":1===e.value.depth?"direct":"indirect";t={all:Object(z.a)(Object(z.a)({},t.all),{},Object(se.a)({},s,(null!==(i=t.all[s])&&void 0!==i?i:0)+1)),roots:Object(z.a)(Object(z.a)({},t.roots),{},Object(se.a)({},n,Object(z.a)(Object(z.a)({},null!==(r=t.roots[n])&&void 0!==r?r:null),{},Object(se.a)({},s,(null!==(o=null===(c=t.roots)||void 0===c||null===(l=c[n])||void 0===l?void 0:l[s])&&void 0!==o?o:0)+1))))}}}))})),r(t)}}),[e]),i},Rn=function(e){var t=Object(a.useState)(),n=Object(m.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.graphSearch(e.nodes.get(n));Array.from(i).forEach((function(e){var n,i,r;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var o,c,l,s,d,u,j=[];if(null===e||void 0===e||null===(n=e.value)||void 0===n||null===(i=n.metadata)||void 0===i||null===(r=i.Classifier)||void 0===r||r.forEach((function(t){var n,a,i=t.split(" :: ");"License"===i[0]&&("OSI Approved"===i[1]?j.push({generalLicense:null!==(n=null===i||void 0===i?void 0:i[2])&&void 0!==n?n:e.value.metadata.License,specificLicense:e.value.metadata.License,isOsiApproved:!0}):j.push({generalLicense:null!==(a=null===i||void 0===i?void 0:i[1])&&void 0!==a?a:e.value.metadata.License,specificLicense:e.value.metadata.License,isOsiApproved:!1}))})),0===j.length)j.push({generalLicense:null!==(o=null===e||void 0===e||null===(c=e.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.License)&&void 0!==o?o:"N/A",specificLicense:null!==(s=null===e||void 0===e||null===(d=e.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.License)&&void 0!==s?s:"N/A",isOsiApproved:null});j.forEach((function(n){var a;t[n.generalLicense]||(t[n.generalLicense]={packages:{},metadata:{isOsiApproved:n.isOsiApproved}}),t=Object(z.a)(Object(z.a)({},t),{},Object(se.a)({},n.generalLicense,Object(z.a)(Object(z.a)({},t[n.generalLicense]),{},{packages:Object(z.a)(Object(z.a)({},null!==(a=t[n.generalLicense].packages)&&void 0!==a?a:null),{},Object(se.a)({},e.value.label,{depth:e.value.depth,specific:n.specificLicense}))})))}))}}))})),r(t)}}),[e]),i};function In(e,t,n,i){var r=function(e,t){var n=Object(a.useState)(),i=Object(m.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var n,a,i,r;if(e&&null!==t&&void 0!==t&&t.metadata){var c={added:0,removed:0,version:0,unchanged:0,justification:{},build:null};e.nodes.forEach((function(e){switch(e.value.change){case"added":c.added++;break;case"removed":c.removed++;break;case"version":c.version++;break;default:c.unchanged++}})),c.build="We have analysed an application stack running on ".concat(t.metadata.os_release.name," ").concat(t.metadata.os_release.version,", running Python (").concat(t.metadata.python.implementation_name,") ").concat(t.metadata.python.major,".").concat(t.metadata.python.minor,".").concat(t.metadata.python.micro,". It was Adviser Job ID ").concat(t.metadata.document_id,", by ").concat(t.metadata.analyzer," v").concat(t.metadata.analyzer_version,"."),null===t||void 0===t||null===(n=t.result)||void 0===n||null===(a=n.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r||r.justification.forEach((function(e){c.justification[e.type]=c.justification[e.type]?c.justification[e.type]+1:1})),o(c)}}),[e,t]),r}(n,i),o=Mn(e),c=Mn(t),l=Rn(e),s=Rn(t);return Object(a.useMemo)((function(){var e={advise:null,oldGraph:{dependencies:null,licenses:null},newGraph:{dependencies:null,licenses:null}};return r&&(e.advise=r),o&&(e.oldGraph.dependencies=o),o&&(e.oldGraph.licenses=l),c&&(e.newGraph.dependencies=c),s&&(e.newGraph.licenses=s),e}),[r,o,l,c,s])}function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Nn(e),i=Object(a.useMemo)((function(){return n.some((function(e){return e.isLoading}))}),[n]);return Object(a.useMemo)((function(){if(!i){var e=new Vt,a=[];n.forEach((function(t){if("error"===t.status){var n,a,i,r,o,c,l,s=null!==(n=null===t||void 0===t||null===(a=t.error)||void 0===a||null===(i=a.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.parameters)&&void 0!==n?n:null===t||void 0===t||null===(o=t.error)||void 0===o||null===(c=o.response)||void 0===c||null===(l=c.config)||void 0===l?void 0:l.params,d={id:s.name.toLowerCase(),label:s.name+" "+s.version,name:s.name,version:s.version,metadata:null};e.addVertex(d.id,d).parents=new Set}else{var u=t.data.data.metadata,j={id:u.package_name.toLowerCase(),label:u.package_name+" "+u.package_version,name:u.package_name,version:u.package_version,metadata:u.importlib_metadata.metadata};e.addVertex(j.id,j).parents=new Set}})),n.forEach((function(t){if("error"!==t.status){var n=e.nodes.get(t.data.data.metadata.package_name.toLowerCase());Object.keys(t.data.data.metadata.dependencies).forEach((function(t){var i=e.nodes.get(t);i&&(e.addEdge(n.value.id,i.value.id),i.parents.add(n.value.id),a.push(i.value.id))}))}}));var r=e.addVertex("*App",{id:"*App",label:"App",depth:-1});a.push("*App");var o=new Map,c=[];for(e.nodes.forEach((function(n,i,o){if(!a.includes(i)||Object.keys(null!==t&&void 0!==t?t:{}).includes(i)){var l=o.get(i);l.value.depth=0,l.parents.add("*App"),c.push(l),e.addEdge(r.key,l.key)}}));0!==c.length;){var l=c.pop();if(l&&!o.has(l)){o.set(l);for(var s=l.getAdjacents(),d=0;d<s.length;d++){var u;s[d].value.depth=Math.min(l.value.depth+1,null!==(u=s[d].value.depth)&&void 0!==u?u:l.value.depth+2),c.push(s[d])}}}return e}}),[i,t])}var Bn=function(e){var t=e.analysis_id;return Object(b.jsxs)("div",{children:['`"',t,'"` not found']})},Vn=function(e){var t=e.children,n=e.goHome,a=Object(L.g)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{onClick:function(){a(n?"/":-1)},children:"go back"}),Object(b.jsx)("div",{children:t})]})},Dn=function(){var e,t,n,i,r,o,c,s,d,u,j,v,p,h,O,x,f,g=Object(L.h)().analysis_id,y=function(e,t){return Object(l.useQuery)(Object(z.a)(Object(z.a)({},t),{},{queryKey:["adviseDocument",e],queryFn:function(){return Cn(e)}}))}(g,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),k=function(e,t){return Object(l.useQuery)(Object(z.a)(Object(z.a)({},t),{},{queryKey:["adviseLogs",e],queryFn:function(){return Sn(e)}}))}(g,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),_=Object(a.useMemo)((function(){var e,t,n;if(y.isSuccess&&null!==(e=y.data.data)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&null!==(n=t.parameters)&&void 0!==n&&n.project)return En(y.data.data.result.parameters.project)}),[y]),w=Object(a.useMemo)((function(){var e,t,n,a,i;if(y.isSuccess&&null!==(e=y.data.data)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&null!==(n=t.report)&&void 0!==n&&null!==(a=n.products)&&void 0!==a&&null!==(i=a[0])&&void 0!==i&&i.project)return En(y.data.data.result.report.products[0].project)}),[y]),C=Tn(null!==_&&void 0!==_?_:[],null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.result)||void 0===n||null===(i=n.parameters)||void 0===i||null===(r=i.project)||void 0===r||null===(o=r.requirements)||void 0===o?void 0:o.packages),S=Tn(null!==w&&void 0!==w?w:[],null===(c=y.data)||void 0===c||null===(s=c.data)||void 0===s||null===(d=s.result)||void 0===d||null===(u=d.report)||void 0===u||null===(j=u.products)||void 0===j||null===(v=j[0])||void 0===v||null===(p=v.project)||void 0===p?void 0:p.requirements),E=function(e,t,n){var i=Object(a.useState)(),r=Object(m.a)(i,2),o=r[0],c=r[1],l=Object(An.a)();return Object(a.useEffect)((function(){var a,i,r,o;if(e&&t){var s=[],d=new Vt;t.nodes.forEach((function(n,a){var i,r,o,c,s,u,j,v,b,p,h,m,O,x=t.nodes.get(a);e.nodes.has(a)?(x.value=Object(z.a)(Object(z.a)({},x.value),{},{dependencies:n.adjacents.size,lockfile:["new","old"]}),(null===n||void 0===n||null===(i=n.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.Version)===(null===(o=e.nodes.get(a))||void 0===o||null===(c=o.value)||void 0===c||null===(s=c.metadata)||void 0===s?void 0:s.Version)?x.value=Object(z.a)(Object(z.a)({},x.value),{},{change:"unchanged"}):(x.value=Object(z.a)(Object(z.a)({},x.value),{},{change:"version",oldVersion:null!==(u=null===(j=e.nodes.get(a))||void 0===j||null===(v=j.value)||void 0===v||null===(b=v.metadata)||void 0===b?void 0:b.Version)&&void 0!==u?u:null===(p=e.nodes.get(a))||void 0===p||null===(h=p.value)||void 0===h?void 0:h.version,font:{color:l.palette.success.main}}),x.parents=Object(Jt.a)(new Set([].concat(Object(Jt.a)(x.parents),Object(Jt.a)(null!==(m=null===(O=e.nodes.get(a))||void 0===O?void 0:O.parents)&&void 0!==m?m:[])))),e.nodes.get(a).getAdjacents().forEach((function(e){return x.adjacents.add(e)})),t.nodes.get(a).getAdjacents().forEach((function(e){return x.adjacents.add(e)})))):x.value=Object(z.a)(Object(z.a)({},x.value),{},{change:"added",font:{color:l.palette.success.main},color:l.palette.success.main,dependencies:n.adjacents.size,lockfile:["new"]}),d.nodes.set(a,x)})),e.nodes.forEach((function(n,a){var i,r,o,c,s,u,j,v,b,p,h,m=e.nodes.get(a);t.nodes.has(a)||(m.value=Object(z.a)(Object(z.a)({},m.value),{},{change:"removed",label:n.value.label+" "+(null!==(i=null===n||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.Version)&&void 0!==i?i:null===n||void 0===n||null===(c=n.value)||void 0===c?void 0:c.version),font:{color:l.palette.error.main},color:l.palette.error.main,version:null!==(s=null===n||void 0===n||null===(u=n.value)||void 0===u||null===(j=u.metadata)||void 0===j?void 0:j.Version)&&void 0!==s?s:null===n||void 0===n||null===(v=n.value)||void 0===v?void 0:v.version,dependencies:n.adjacents.size,license:null!==(b=null===n||void 0===n||null===(p=n.value)||void 0===p||null===(h=p.metadata)||void 0===h?void 0:h.License)&&void 0!==b?b:"",lockfile:["old"]}),d.nodes.set(a,m))})),e.nodes.forEach((function(e){e.adjacents.forEach((function(t){s.push({to:e.value.id,from:t.value.id,lockfile:"old"})}))})),t.nodes.forEach((function(e){e.adjacents.forEach((function(t){s.push({to:e.value.id,from:t.value.id,lockfile:"new"})}))})),Ln(d.nodes,null===n||void 0===n||null===(a=n.result)||void 0===a||null===(i=a.report)||void 0===i||null===(r=i.products)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.justification),d.visEdges=s,c(d)}}),[e,t,n,l]),o}(C,S,null===(h=y.data)||void 0===h?void 0:h.data),A=In(C,S,E,null===(O=y.data)||void 0===O?void 0:O.data);return y.isLoading?Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Ie.a,{})}):y.data?Object(b.jsx)(Vn,{goHome:!0,children:Object(b.jsx)(N,{header:Object(b.jsx)(dt,{adviseDocument:y.data.data,logs:null===(x=k.data)||void 0===x||null===(f=x.data)||void 0===f?void 0:f.log}),children:Object(b.jsxs)(L.d,{children:[Object(b.jsx)(L.b,{path:"summary",element:Object(b.jsx)(wn,{metrics:A})}),Object(b.jsx)(L.b,{path:"details",element:Object(b.jsx)(Mt,{mergedGraph:E})}),Object(b.jsx)(L.b,{path:"*",element:Object(b.jsx)(L.a,{to:"summary"})})]})})}):Object(b.jsx)(Vn,{children:Object(b.jsx)(Bn,{analysis_id:g})})},qn=n(526),Fn=n(268),zn=n.n(Fn),Wn=n(269),Gn=n.n(Wn),Hn=n(270),Kn=n.n(Hn),Un=n(374),Qn=n(510),Jn=["options","type","label","disabled"],Yn=function(e){var t,n=e.options,i=e.type,r=e.label,o=e.disabled,c=Object(W.a)(e,Jn),l=Object(L.g)(),s=Object(a.useContext)(da),d=s.specs,u=s.defaultSpecs;return Object(b.jsxs)(_.a,Object(z.a)(Object(z.a)({},c),{},{children:[Object(b.jsx)(T.a,{variant:"body2",children:r}),Object(b.jsxs)(Un.a,{displayEmpty:!0,fullWidth:!0,value:null!==(t=d[i])&&void 0!==t?t:"",onChange:function(e){var t,n,a,r,o,c,s,j,v,b;switch(i){case"package_version":l("/package/".concat(d.package_name,"/").concat(e.target.value));break;case"index_url":l("/package/".concat(d.package_name,"/").concat(null!==(t=d.package_version)&&void 0!==t?t:u.package_version,"/").concat(encodeURIComponent(e.target.value)));break;case"os_name":l("/package/".concat(d.package_name,"/").concat(null!==(n=d.package_version)&&void 0!==n?n:u.package_version,"/").concat(encodeURIComponent(null!==(a=d.index_url)&&void 0!==a?a:u.index_url),"/").concat(e.target.value));break;case"os_version":l("/package/".concat(d.package_name,"/").concat(null!==(r=d.package_version)&&void 0!==r?r:u.package_version,"/").concat(encodeURIComponent(null!==(o=d.index_url)&&void 0!==o?o:u.index_url),"/").concat(null!==(c=d.os_name)&&void 0!==c?c:u.os_name,"/").concat(e.target.value));break;case"python_version":l("/package/".concat(d.package_name,"/").concat(null!==(s=d.package_version)&&void 0!==s?s:u.package_version,"/").concat(encodeURIComponent(null!==(j=d.index_url)&&void 0!==j?j:u.index_url),"/").concat(null!==(v=d.os_name)&&void 0!==v?v:u.os_name,"/").concat(null!==(b=d.os_version)&&void 0!==b?b:u.os_version,"/").concat(e.target.value))}},size:"small",variant:"outlined",disabled:o,renderValue:function(e){return e||Object(b.jsx)("em",{style:{color:"grey"},children:null!==(t=null===u||void 0===u?void 0:u[i])&&void 0!==t?t:r});var t},children:[Object(b.jsx)(Qn.a,{disabled:!0,value:"",children:Object(b.jsx)("em",{children:r})}),n.map((function(e){return Object(b.jsx)(Qn.a,{value:e.value,children:e.value},e.value)}))]})]}))},Zn=Object(k.a)((function(e){return{titleRow:{display:"flex",alignItems:"center"},marginLeft:{marginLeft:e.spacing(2)},linksRow:{display:"flex"}}})),Xn=function(e){var t,n,r=e.metadata,o=e.allVersions,c=void 0===o?[]:o,l=e.allEnvironments,s=void 0===l?[]:l,d=Zn(),u=Object(a.useContext)(da),j=u.defaultSpecs,v=u.specs,p=Object(a.useState)(!1),h=Object(m.a)(p,2),O=h[0],x=h[1],f=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(t){return!e.has(t.package_version)&&(e.add(t.package_version),!0)})).map((function(e){return{value:e.package_version}})).sort((function(e,t){return e.value.split(".")>t.value.split(".")?1:-1}))}),[c]),g=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(e){return v.package_version?v.package_version===e.package_version:j.package_version===e.package_version})).filter((function(t){return!e.has(t.index_url)&&(e.add(t.index_url),!0)})).map((function(e){return{value:e.index_url}}))}),[c]),y=Object(a.useMemo)((function(){return[s.map((function(e){return{value:e.os_name}})),s.filter((function(e){return!v.os_name||v.os_name===e.os_name})).map((function(e){return{value:e.os_version}})),s.filter((function(e){return(!v.os_name||v.os_name===e.os_name)&&(!v.os_version||v.os_version===e.os_version)})).map((function(e){return{value:e.python_version}}))]}),[s,v]),k=Object(m.a)(y,3),w=k[0],C=k[1],S=k[2];return r?Object(b.jsxs)("div",{children:[Object(b.jsxs)(I.a,{container:!0,alignItems:"flex-end",spacing:1,children:[Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(T.a,{variant:"h4",mr:2,children:Object(b.jsx)("b",{children:null===r||void 0===r?void 0:r.Name})})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(Yn,{options:null!==f&&void 0!==f?f:[],type:"package_version",label:"Version"})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(Yn,{options:null!==g&&void 0!==g?g:[],type:"index_url",label:"Index URL",disabled:void 0===v.package_version})}),O?Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(Yn,{options:null!==w&&void 0!==w?w:[],type:"os_name",label:"OS Name",disabled:void 0===v.index_url})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(Yn,{options:null!==C&&void 0!==C?C:[],type:"os_version",label:"OS Version",disabled:void 0===v.os_name})}),Object(b.jsx)(I.a,{item:!0,children:Object(b.jsx)(Yn,{options:null!==S&&void 0!==S?S:[],type:"python_version",label:"Python Version",disabled:void 0===v.os_version})})]}):null,Object(b.jsx)(I.a,{item:!0,xs:1,children:Object(b.jsx)(qn.a,{onClick:function(){return x(!O)},"data-testid":"package-header-expand-button",children:O?Object(b.jsx)(zn.a,{fontSize:"large"}):Object(b.jsx)(Gn.a,{fontSize:"large"})})})]}),Object(b.jsx)(T.a,{gutterBottom:!0,variant:"body1",mt:2,children:null!==(t=null===r||void 0===r?void 0:r.Summary)&&void 0!==t?t:"NaN"}),Object(b.jsx)("div",{className:d.linksRow,children:Object(b.jsx)(it,{text:null!==(n=null===r||void 0===r?void 0:r.License)&&void 0!==n?n:"NaN",icon:Object(b.jsx)(Kn.a,{})})})]}):Object(b.jsxs)(_.a,{"data-testid":"package-header-not-loaded",children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},$n=n(273),ea=n(271),ta=n.n(ea),na=function(e){var t,n=e.node,r=i.a.useState(null),o=Object(m.a)(r,2),c=o[0],l=o[1],s=i.a.useState(null),u=Object(m.a)(s,2),j=u[0],v=u[1],p=Object(L.g)(),h=Object(a.useMemo)((function(){var e={},t=[0,0],a=new Set;if(n.versions.forEach((function(n){var i,r=n.split("."),o=r[0]+"."+(null!==(i=r[1])&&void 0!==i?i:"");void 0===e[o]&&(e[o]=[],t[0]+=1),a.has(n)||(e[o].push(n),t[1]+=1,a.add(n))})),t[0]/t[1]>.25){var i,r=Math.ceil(.25*t[0]),o={};return Object.keys(e).forEach((function(t,n,a){var c,l;n%r===0&&(i="".concat(t," - ").concat(null!==(l=a[n+r-1])&&void 0!==l?l:a.at(-1)),o[i]=[]);(c=o[i]).push.apply(c,Object(Jt.a)(e[a[n]]))})),o}return e}),[n]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(d.a,{onClick:function(e){l(n.name),v(e.currentTarget)},variant:"outlined",endIcon:Object(b.jsx)(ta.a,{}),children:null!==(t=n.specifier)&&void 0!==t?t:"ANY"}),Object(b.jsxs)($n.a,{open:c===n.name,anchorEl:j,onClose:function(){l(void 0),v(null)},PaperProps:{style:{maxHeight:"40%",maxWidth:"50%"}},children:[Object(b.jsx)(Qn.a,{disabled:!0,children:"Select a version to navigate to:"}),Object(b.jsx)(I.a,{container:!0,alignContent:"flex-start",children:Object.entries(h).map((function(e){var t=Object(m.a)(e,2),a=t[0],i=t[1];return Object(b.jsxs)(I.a,{item:!0,xs:!0,children:[Object(b.jsx)(Qn.a,{mt:2,disabled:!0,divider:!0,children:a}),i.map((function(e){return Object(b.jsx)(Qn.a,{onClick:function(){return p("/package/".concat(n.name,"/").concat(e))},children:Object(b.jsx)(T.a,{variant:"body2",children:e})},e)}))]},a)}))})]})]})},aa=function(e){var t=e.graph,n=Object(a.useMemo)((function(){if(t){var e=t.graphSearch(t.nodes.get("*App")),n=Array.from(e),a=[];return n.forEach((function(e){"*App"===e.key||e.value.metadata||a.push({name:e.value.label,versions:e.value.versions,specifier:e.value.specifier,extra:e.value.extra})})),a}}),[t]);return n?Object(b.jsx)(Ye,{cardMeta:{title:"Dependencies"},cardBody:Object(b.jsxs)("div",{"data-testid":"package-dependencies-loaded",children:[Object(b.jsxs)(I.a,{container:!0,children:[Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Package"})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Versions"})}),Object(b.jsx)(I.a,{item:!0,xs:2,children:Object(b.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Extra"})})]}),Object(b.jsx)(D.a,{}),Object(b.jsx)(I.a,{container:!0,rowSpacing:2,mt:1,children:n.map((function(e){var t;return Object(b.jsxs)(I.a,{container:!0,item:!0,xs:12,children:[Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:e.name})}),Object(b.jsx)(I.a,{item:!0,xs:!0,children:Object(b.jsx)(na,{node:e})}),Object(b.jsx)(I.a,{item:!0,xs:2,children:Object(b.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:null===(t=e.extra)||void 0===t?void 0:t.join(", ")})})]},e.name)}))})]})}):Object(b.jsxs)(_.a,{"data-testid":"package-dependencies-not-loaded",children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},ia=(Object(k.a)((function(e){return{bar:{marginBottom:e.spacing(1)},marginBottom:{marginBottom:e.spacing(2)}}})),function(e){var t=e.package_name,n=e.package_version;return Object(b.jsxs)("div",{children:['`"',t,n?" "+n:"",'"` not found']})}),ra=function(){var e=Object(U.a)(J.a.mark((function e(t){var n,a,i=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:0,a=i.length>2&&void 0!==i[2]?i[2]:100,t){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",ne.a.get(ae+"/python/package/versions",{params:{name:t,page:n,per_page:a},headers:{accept:"application/json"}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oa=function(){var e=Object(U.a)(J.a.mark((function e(t,n,a){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&a){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",ne.a.get(ae+"/python/package/version/environments",{params:{name:t,version:n,index:a},headers:{accept:"application/json"}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ca=function(e){var t,n,i=(t=e,Object(l.useInfiniteQuery)(Object(z.a)(Object(z.a)({},n),{},{queryKey:["packageVersions",t],queryFn:function(e){return ra(t,e.pageParam)},getNextPageParam:function(e){return 0===e.data.versions.length?void 0:e.data.parameters.page+1}}))),r=Object(a.useState)([]),o=Object(m.a)(r,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){if(i.isSuccess)if(i.hasNextPage&&!i.isFetchingNextPage)i.fetchNextPage().then();else if(!i.hasNextPage&&!i.isFetchingNextPage){var e=[];i.data.pages.forEach((function(t){e=[].concat(Object(Jt.a)(e),Object(Jt.a)(t.data.versions))})),e.length>0?(e=e.reverse(),s(e)):s(void 0)}}),[i.data]),c};var la=function(e){var t=e.message,n=e.type,a=e.reason;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[n,": ",t]}),Object(b.jsx)("p",{children:a})]})},sa=Object(k.a)((function(e){return{root:{flexGrow:1,maxWidth:"95%",marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(1)}}})),da=i.a.createContext({}),ua=function(){var e,t,n,i,r,o,c,s,d,u,j,v=sa(),p=Object(L.h)(),h=Object(a.useState)({package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0}),O=Object(m.a)(h,2),x=O[0],f=O[1],g=Object(a.useMemo)((function(){return{package_name:p.package_name,package_version:null===p||void 0===p?void 0:p.package_version,index_url:null!==p&&void 0!==p&&p.index_url?decodeURIComponent(p.index_url):void 0,os_name:null===p||void 0===p?void 0:p.os_name,os_version:null===p||void 0===p?void 0:p.os_version,python_version:null===p||void 0===p?void 0:p.python_version}}),[p]),y=ca(g.package_name),k=(s=g.package_name,d=null!==(e=g.package_version)&&void 0!==e?e:x.package_version,u=null!==(t=g.index_url)&&void 0!==t?t:x.index_url,j={useErrorBoundary:!1},Object(l.useQuery)(Object(z.a)(Object(z.a)({},j),{},{enabled:!!s&&!!d&&!!u,queryKey:["packageEnvironments",s,d,u],queryFn:function(){return oa(s,d,u)}})));Object(a.useEffect)((function(){var e={package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0};if(g.package_name&&y&&y.length>0&&(e.package_version=y.at(0).package_version,e.index_url=y.at(0).index_url),k.data&&k.data.data.environments.length>0){var t=k.data.data.environments.filter((function(e){return(!g.os_name||g.os_name===e.os_name)&&(!g.os_version||g.os_version===e.os_version)}));t.length>0&&(e.os_name=t.at(0).os_name,e.os_version=t.at(0).os_version,e.python_version=t.at(0).python_version)}Object.entries(x).some((function(t){var n=Object(m.a)(t,2),a=n[0],i=n[1];return e[a]!==i}))&&f(e)}),[y,k,g]);var _,w,C,S,E,A,P,N,M=function(e,t,n,a,i,r,o){return Object(l.useQuery)(Object(z.a)(Object(z.a)({},o),{},{enabled:!!e&&!!t&&!!n&&!!a&&!!i&&!!r,queryKey:["packageMetadata",e,t,n,a,i,r],queryFn:function(){return Pn(e,t,n,a,i,r)}}))}(g.package_name,null!==(n=g.package_version)&&void 0!==n?n:x.package_version,null!==(i=g.index_url)&&void 0!==i?i:x.index_url,null!==(r=g.os_name)&&void 0!==r?r:x.os_name,null!==(o=g.os_version)&&void 0!==o?o:x.os_version,null!==(c=g.python_version)&&void 0!==c?c:x.python_version,{useErrorBoundary:!1}),R=function(e){var t=Object(a.useState)(),n=Object(m.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if("success"===e.status){var t=new Vt,n=t.addVertex("*App",{id:"*App",label:"App",depth:-1}),a=t.addVertex(e.data.data.metadata.package_name.toLowerCase(),{id:e.data.data.metadata.package_name.toLowerCase(),label:e.data.data.metadata.package_name,metadata:e.data.data.metadata.importlib_metadata.metadata,depth:0});a.parents=new Set,a.parents.add("*App"),t.addEdge(n.key,a.key),Object.entries(e.data.data.metadata.dependencies).forEach((function(e){var n=Object(m.a)(e,2),i=n[0],r=n[1],o=t.addVertex(i.toLowerCase(),{id:i.toLowerCase(),label:i,metadata:null,versions:r.versions,specifier:r.specifier,extra:r.extra,depth:1});o.parents=new Set,t.addEdge(a.key,o.key),o.parents.add(a.key)})),r(t)}}),[e.data]),i}(M);return M.isLoading||0===(null===y||void 0===y?void 0:y.length)?Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center","data-testid":"loading",children:Object(b.jsx)(Ie.a,{})}):M.data?Object(b.jsx)(da.Provider,{value:{specs:g,defaultSpecs:x},children:Object(b.jsxs)(I.a,{container:!0,className:v.root,children:[Object(b.jsx)(I.a,{item:!0,xs:12,mb:3,children:Object(b.jsx)(Xn,{metadata:M.data.data.metadata.importlib_metadata.metadata,allVersions:y,allEnvironments:k.data.data.environments})}),Object(b.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(b.jsx)(aa,{graph:R})})]})}):null!==M&&void 0!==M&&null!==(_=M.error)&&void 0!==_&&null!==(w=_.response)&&void 0!==w&&null!==(C=w.data)&&void 0!==C&&C.error?Object(b.jsx)(la,{message:M.error.response.data.error,type:M.error.response.status,reason:"".concat(null===M||void 0===M||null===(E=M.error)||void 0===E||null===(A=E.config)||void 0===A?void 0:A.url," failed with params ").concat(JSON.stringify(null===M||void 0===M||null===(P=M.error)||void 0===P||null===(N=P.config)||void 0===N?void 0:N.params))}):Object(b.jsx)(ia,{package_name:p.package_name,package_version:null!==(S=p.package_version)&&void 0!==S?S:""})},ja=function(){return Object(b.jsx)(Vn,{children:Object(b.jsxs)(L.d,{children:[Object(b.jsx)(L.b,{path:"/:package_version/:index_url/:os_name/:os_version/:python_version",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"/:package_version/:index_url/:os_name",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"/:package_version/:index_url/:os_name/:os_version",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"/:package_version/:index_url",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"/:package_version",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"/",element:Object(b.jsx)(ua,{})}),Object(b.jsx)(L.b,{path:"*",status:404,element:Object(b.jsx)(Te,{})})]})})},va=Object(k.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},marginRight:{marginRight:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3),alignItems:"center"},alert:{width:"100%",marginTop:e.spacing(1)}}})),ba=function(e){var t,n,r,o,c,l,s,u,j=e.imageDocument,v=e.logs,p=va(),h=i.a.useState(!1),O=Object(m.a)(h,2),x=O[0],f=O[1],g=i.a.useState(),y=Object(m.a)(g,2),k=y[0],_=y[1],w=Object(a.useMemo)((function(){var e;return null!==j&&void 0!==j&&j.result?j.result.error?["ERROR","error"]:["COMPLETE","success"]:null!==j&&void 0!==j&&null!==(e=j.status)&&void 0!==e&&e.state?[j.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[j]),C=Object(m.a)(w,2),S=C[0],E=C[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(T.a,{variant:"h4",mb:2,children:Object(b.jsx)("b",{children:null!==(t=null===j||void 0===j||null===(n=j.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:j.parameters.analysis_id})}),Object(b.jsxs)("div",{className:p.linksRow,children:[Object(b.jsx)(Ze.a,{label:S,color:E}),Object(b.jsx)(it,{className:p.marginLeft,text:rt(null===j||void 0===j||null===(r=j.status)||void 0===r?void 0:r.finished_at,null===j||void 0===j||null===(o=j.status)||void 0===o?void 0:o.started_at,null===j||void 0===j||null===(c=j.metadata)||void 0===c?void 0:c.datetime),icon:Object(b.jsx)($e.a,{})}),Object(b.jsx)(d.a,{sx:{marginLeft:2},onClick:function(){return f(!x)},children:Object(b.jsx)(it,{text:"Logs",icon:Object(b.jsx)(tt.a,{})})})]}),Object(b.jsx)(T.a,{variant:"subtitle2",mb:2,children:null!==(l=null===j||void 0===j?void 0:j.error)&&void 0!==l?l:null===j||void 0===j||null===(s=j.result)||void 0===s?void 0:s.error_msg}),Object(b.jsx)(de.a,{in:x,children:null!==(u=null===v||void 0===v?void 0:v.split("\n").map((function(e,t){return Object(b.jsx)(T.a,{noWrap:k!==t,onClick:function(){return _(k===t?void 0:t)},variant:"body2",sx:{backgroundColor:k===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==u?u:"Image log is not available."})]})},pa=n(177),ha=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],ma=function(e){var t,n=e.imageDocument;return n?Object(b.jsx)("div",{style:{height:400,width:"100%"},children:Object(b.jsx)(pa.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.deb,columns:ha,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(b.jsxs)(_.a,{children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},Oa=n(286),xa=function(e){var t=e.imageDocument;if(!t)return Object(b.jsxs)(_.a,{"data-testid":"python-info-not-loaded",children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]});var n=Object(a.useMemo)((function(){var e;if(null!==t&&void 0!==t&&null!==(e=t.result)&&void 0!==e&&e["python-files"]){var n=new Map;return t.result["python-files"].forEach((function(e){var t=e.filepath.split("/",4),a=t[1]+"/"+t[2]+"/"+t[3];n.has(a)?n.set(a,n.get(a)+1):n.set(a,1)})),Array.from(n.entries()).map((function(e){var t=Object(m.a)(e,2);return{path:t[0],count:t[1]}}))}}),[t]),i=Object(a.useMemo)((function(){return t.result["python-interpreters"].filter((function(e){return!!e.version}))}),[t]);return Object(b.jsxs)(Yt.a,{direction:"column",spacing:3,children:[(null===i||void 0===i?void 0:i.length)>0?Object(b.jsxs)(Yt.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(b.jsxs)(T.a,{variant:"h6",children:["Python interpreters:"," "]}),i.map((function(e,t){return Object(b.jsx)(Oa.a,{"data-testid":"python-info-chip",label:e.version},e.version+t)}))]}):void 0,Object(b.jsxs)("div",{"data-testid":"python-info-loaded",children:[Object(b.jsxs)(Yt.a,{direction:"row",spacing:1,mb:1,alignItems:"center",children:[Object(b.jsxs)(T.a,{variant:"h6",children:["Total number of Python files:"," "]}),Object(b.jsx)(T.a,{variant:"body1",children:n.reduce((function(e,t){return e+t.count}),0)})]}),Object(b.jsx)(I.a,{container:!0,children:n.sort((function(e,t){return t.count-e.count})).map((function(e){return Object(b.jsx)(I.a,{item:!0,xs:12,lg:6,xl:4,children:Object(b.jsxs)(Yt.a,{ml:3,direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[Object(b.jsxs)(T.a,{variant:"body2",children:[e.path,":"]}),Object(b.jsx)(T.a,{variant:"body2",children:Object(b.jsx)("b",{children:e.count})})]})},e.path)}))})]})]})},fa=function(e){var t=e.imageDocument,n=e.imageMetadata,i=Object(a.useMemo)((function(){var e;return n||(null!==t&&void 0!==t&&null!==(e=t.result)&&void 0!==e&&e["skopeo-inspect"]?{architecture:t.result["skopeo-inspect"].Architecture,created:t.result["skopeo-inspect"].Created,digest:t.result["skopeo-inspect"].Digest,docker_version:t.result["skopeo-inspect"].DockerVersion,labels:t.result["skopeo-inspect"].Labels,layers:t.result["skopeo-inspect"].Layers,os:t.result["skopeo-inspect"].Os,repo_tags:t.result["skopeo-inspect"].RepoTags}:void 0)}),[t,n]);return i?Object(b.jsxs)(I.a,{container:!0,spacing:2,children:[Object(b.jsx)(I.a,{item:!0,xs:12,children:Object(b.jsxs)(Yt.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(b.jsx)(T.a,{variant:"body1",children:Object(b.jsx)("b",{children:i.labels["io.k8s.display-name"]})}),Object(b.jsx)(Oa.a,{label:i.labels.name.split(":").at(-1)})]})}),Object(b.jsx)(I.a,{item:!0,xs:12,children:Object(b.jsx)(T.a,{variant:"h6",mb:1,children:"General information"})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Summary"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.summary})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Description"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.description})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Provider"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.vendor})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Maintainer"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.maintainer})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Build date"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:new Date(i.labels["build-date"]).toLocaleDateString()})}),Object(b.jsx)(I.a,{item:!0,xs:12,children:Object(b.jsx)(T.a,{variant:"h6",mb:1,children:"Technical information"})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image name"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.name})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image version"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels.version})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Architecture"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.architecture})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Usage"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:Object(b.jsx)("code",{children:i.labels.usage})})}),Object(b.jsx)(I.a,{item:!0,xs:3,children:Object(b.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Exposed Ports"})}),Object(b.jsx)(I.a,{item:!0,xs:9,children:Object(b.jsx)(T.a,{variant:"body2",children:i.labels["io.openshift.expose-services"]})})]}):Object(b.jsxs)(_.a,{"data-testid":"image-info-not-loaded",children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},ga=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"release",headerName:"Release",flex:.25},{field:"dependencies",headerName:"Dependencies",flex:.5,valueGetter:function(e){var t,n,a;return null!==(t=null===(n=e.row)||void 0===n||null===(a=n.dependencies)||void 0===a?void 0:a.length)&&void 0!==t?t:0},sortable:!1},{field:"epoch",headerName:"Epoch",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],ya=function(e){var t,n=e.imageDocument;return n?Object(b.jsx)("div",{style:{height:400,width:"100%"},"data-testid":"rpm-info-loaded",children:Object(b.jsx)(pa.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t["rpm-dependencies"],columns:ga,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(b.jsxs)(_.a,{"data-testid":"rpm-info-not-loaded",children:[Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{}),Object(b.jsx)(ln.a,{width:"60%"})]})},ka=function(e){var t,n,a,i,r,o,c,l,s,d,u,j=e.metrics,v=e.imageDocument,p=e.imageMetadata;return Object(b.jsxs)(_n.a,{columns:{xs:1,md:2},spacing:3,mb:3,mt:1,children:[v||p?Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Image Details"},cardBody:Object(b.jsx)(fa,{imageDocument:v,imageMetadata:p})})}):void 0,(null===v||void 0===v||null===(t=v.result)||void 0===t||null===(n=t["python-interpreters"])||void 0===n?void 0:n.length)>0?Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Python Details"},cardBody:Object(b.jsx)(xa,{imageDocument:v})})}):void 0,(null===v||void 0===v||null===(a=v.result)||void 0===a||null===(i=a["rpm-dependencies"])||void 0===i?void 0:i.length)>0?Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"RPM Details"},cardBody:Object(b.jsx)(ya,{imageDocument:v})})}):void 0,(null===(r=v.result)||void 0===r||null===(o=r.deb)||void 0===o?void 0:o.length)>0?Object(b.jsxs)("div",{children:[Object(b.jsx)(Ye,{cardMeta:{title:"Debian Details"},cardBody:Object(b.jsx)(ma,{imageDocument:v})})," "]}):void 0,0!==Object.keys(null!==(c=null===j||void 0===j||null===(l=j.dependencies)||void 0===l?void 0:l.all)&&void 0!==c?c:{}).length?Object(b.jsx)("div",{children:Object(b.jsx)(Ye,{cardMeta:{title:"Python Packages Dependencies"},cardBody:Object(b.jsx)(jn,{all:null===j||void 0===j||null===(s=j.dependencies)||void 0===s?void 0:s.all,roots:null===j||void 0===j||null===(d=j.dependencies)||void 0===d?void 0:d.roots})})}):void 0,0!==Object.keys(null!==(u=null===j||void 0===j?void 0:j.licenses)&&void 0!==u?u:{}).length?Object(b.jsxs)("div",{children:[Object(b.jsx)(Ye,{cardMeta:{title:"Python Packages Licenses"},cardBody:Object(b.jsx)(yn,{metric:null===j||void 0===j?void 0:j.licenses})})," "]}):void 0]})},_a=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ae+"/analyze/"+t,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wa=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.get(ae+"/analyze/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ca=function(){var e=Object(U.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.a.post(ae+"/image/metadata",{},{params:{image:t},headers:{accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sa=function(e){var t=e.analysis_id;return Object(b.jsxs)("div",{children:[' "',t,'" not found']})};var Ea=function(){var e,t,n,i,r,o,c,s,d,u,j,v,p,h,m=Object(L.h)().analysis_id,O=Object(L.f)().state,x=function(e,t){return Object(l.useQuery)(Object(z.a)(Object(z.a)({},t),{},{queryKey:["ImageDocument",e],queryFn:function(){return _a(e)}}))}(m,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),f=(p=null!==(e=null===O||void 0===O?void 0:O.image_name)&&void 0!==e?e:null===(t=x.data)||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.metadata)||void 0===i||null===(r=i.arguments)||void 0===r||null===(o=r["extract-image"])||void 0===o?void 0:o.image,Object(l.useQuery)(Object(z.a)(Object(z.a)({},h),{},{enabled:!!p,queryKey:["ImageMetadata",p],queryFn:function(){return Ca(p)}}))),g=function(e,t){return Object(l.useQuery)(Object(z.a)(Object(z.a)({},t),{},{queryKey:["ImageLogs",e],queryFn:function(){return wa(e)}}))}(m,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=x.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),y=function(e){var t=Mn(e),n=Rn(e);return Object(a.useMemo)((function(){var e={dependencies:null,licenses:null};return t&&(e.dependencies=t),n&&(e.licenses=n),e}),[t,n])}(Tn(Object(a.useMemo)((function(){var e,t;if(null!==(e=x.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.metadata){var n,a,i,r,o,c,l,s={name:null!==(n=null===(a=x.data.data.result)||void 0===a||null===(i=a["operating-system"])||void 0===i?void 0:i.id)&&void 0!==n?n:"rhel",version:null!==(r=null===(o=x.data.data.result)||void 0===o||null===(c=o["operating-system"])||void 0===c||null===(l=c.version_id)||void 0===l?void 0:l.split(".")[0])&&void 0!==r?r:"8",python_version:x.data.data.metadata.python.major+"."+x.data.data.metadata.python.minor};return function(e,t){return e.map((function(e){return{name:e.package_name,version:e.package_version,index:"https://pypi.org/simple",os_name:t.name,os_version:t.version,python_version:t.python_version}}))}(x.data.data.result["python-packages"],s)}}),[x.data])),null===(c=x.data)||void 0===c||c.data);return null!==x&&void 0!==x&&x.isLoading?Object(b.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(b.jsx)(Ie.a,{})}):null!==x&&void 0!==x&&x.data?Object(b.jsx)("div",{"data-testid":"image-loaded",children:Object(b.jsxs)(Vn,{children:[Object(b.jsx)(ba,{imageDocument:null===(s=x.data)||void 0===s?void 0:s.data,logs:null===(d=g.data)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.log}),Object(b.jsx)(ka,{imageMetadata:null===(j=f.data)||void 0===j?void 0:j.data,metrics:y,imageDocument:null===(v=x.data)||void 0===v?void 0:v.data})]})}):Object(b.jsx)("div",{"data-testid":"image-not-loaded",children:Object(b.jsx)(Vn,{children:Object(b.jsx)(Sa,{analysis_id:m})})})},Aa=function(){return Object(b.jsx)(P.a,{basename:"/search-stage",children:Object(b.jsxs)(L.d,{children:[Object(b.jsx)(L.b,{exact:!0,path:"/",element:Object(b.jsx)(He,{})}),Object(b.jsx)(L.b,{exact:!0,path:"advise/:analysis_id/*",element:Object(b.jsx)(Dn,{})}),Object(b.jsx)(L.b,{path:"package/:package_name/*",element:Object(b.jsx)(ja,{})}),Object(b.jsx)(L.b,{path:"image/:analysis_id/*",element:Object(b.jsx)(Ea,{})}),Object(b.jsx)(L.b,{path:"*",status:404,element:Object(b.jsx)(Te,{})})]})})};var La=function(){return Object(b.jsx)(R,{children:Object(b.jsx)(Aa,{})})};o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(La,{})}),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.d4d36e41.chunk.js.map