(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],{343:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),r=t(56),o=t.n(r),c=t(219),l=t(138),s=new(t(429).a)({defaultOptions:{queries:{useErrorBoundary:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}}}),d=t(435),u=t(441),j=t(402),v=t(247),b=t(401),h=t(94),p=t(0),m=Object(v.a)();m=Object(v.a)(m,{palette:{primary:{main:"#f39200"},secondary:{main:"#4fc1ea"},background:{default:"rgb(249, 249, 249)",paper:"#fff"},text:{primary:"#363636",secondary:"#999999"}},shape:{borderRadius:12}});var O=Object(h.b)(0,{value:Object(h.a)(m.palette.primary.main),name:"active",blend:!1});m=Object(b.a)(m),m=Object(v.a)(m,{components:{MuiPopover:{defaultProps:{elevation:2},styleOverrides:{paper:{paddingLeft:0,paddingRight:0,borderRadius:"4px"}}},MuiDialog:{defaultProps:{PaperProps:{elevation:3}}},MuiDrawer:{styleOverrides:{paper:{borderStyle:"hidden",backgroundColor:m.palette.background.default}}},MuiLink:{styleOverrides:{root:{color:m.palette.text.primary,"&:hover":{color:m.palette.primary.main}}}}}});var x=function(e){var n=e.children;return Object(p.jsxs)(u.a,{theme:m,children:[Object(p.jsx)(j.a,{}),n]})},g=t(7),f=t(5),y=t(6);function k(e,n){if("loading"===n.type){var t=n.payload;return Object(y.a)(Object(y.a)({},e),{},{loading:Object(y.a)(Object(y.a)({},e.loading),{},Object(f.a)({},t.key,Object(y.a)({},t)))})}return e}var _=a.createContext({loading:{}}),w=a.createContext({setLoading:function(){}});function S(e){var n=e.children,t=e.defaultState,i=a.useReducer(k,null!==t&&void 0!==t?t:{loading:{}}),r=Object(g.a)(i,2),o=r[0],c=r[1],l={setLoading:function(e,n,t,a,i){c({type:"loading",payload:{key:e,isLoading:n,isError:t,percent:a,text:i}})}};return Object(p.jsx)(_.Provider,{value:o,children:Object(p.jsx)(w.Provider,{value:l,children:n})})}var C=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(p.jsx)(d.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},A=function(e){var n=e.children,t=e.defaultState;return Object(p.jsx)(x,{children:Object(p.jsx)(S,{defaultState:t,children:Object(p.jsx)(c.ErrorBoundary,{FallbackComponent:C,children:Object(p.jsx)(l.a,{client:s,children:n})})})})},P=t(31),E=t(25),I=t(436),L=t(444),T=t(126),R=t(440),M=t(460),W=t(414),B=t(33),q=t(413),D=t(37),F=["children","value","index"],N=function(e){var n=e.children,t=e.value,a=e.index,i=Object(D.a)(e,F);return Object(p.jsx)("div",Object(y.a)(Object(y.a)({role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),{},{children:t===a&&n}))},z=t.p+"static/media/thoth-logo.1a28a729.png",V=t(15),H=t(22),K=t(445),U=t(42),G=["onEnter","label","helpertext","boxprops","error","lefticon","righticon"],Y=function(e){var n=e.onEnter,t=e.label,a=e.helpertext,i=e.boxprops,r=e.error,o=void 0!==r&&r,c=e.lefticon,l=e.righticon,s=Object(D.a)(e,G);return Object(p.jsxs)(L.a,{children:[Object(p.jsx)(T.a,{variant:"body1",sx:{color:o?"error.main":"text.secondary"},children:t}),Object(p.jsxs)(K.a,{variant:"outlined",sx:Object(y.a)({p:"8px 4px",display:"flex",alignItems:"center",borderColor:o?"red":void 0,paddingLeft:2,paddingRight:2},i),children:[c,Object(p.jsx)(U.c,Object(y.a)({sx:{ml:1,flex:1},placeholder:a,error:o,onChange:s.onChange,onKeyPress:function(e){n&&"Enter"===e.key&&(n(),e.preventDefault())}},s)),l]})]})},J=t(80),X=t.n(J),Q=t(35),Z=t.n(Q),$="THOTH_SEARCH_ADVISE_HISTORY",ee="https://khemenu.thoth-station.ninja/api/v1",ne=function(e,n,t){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:n},runtime_environment:t};return Z.a.post(ee+"/advise/python",a,{params:{recommendation_type:"stable"},headers:{accept:"application/json","Content-Type":"application/json"}})},te=function(){var e=Object(H.a)(Object(V.a)().mark((function e(n){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={params:{name:n},headers:{accept:"application/json"}},e.abrupt("return",Z.a.get(ee+"/python/package/versions",t).then((function(e){return e.data.versions.length>0})).catch((function(){return!1})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(e){var n={params:{image:e},headers:{accept:"application/json","Content-Type":"application/json"}};return Z.a.post(ee+"/analyze",{},n)},ie=t(404),re=(t(442),function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var n,t,a,i=arguments;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,t=i.length>1&&void 0!==i[1]?i[1]:100,a={params:{page:n,per_page:t},headers:{accept:"application/json"}},e.abrupt("return",Z.a.get(ee+"/container-images",a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),oe=function(){var e=Object(E.g)(),n=Object(a.useState)(""),t=Object(g.a)(n,2),i=t[0],r=t[1],o=Object(a.useState)(""),c=Object(g.a)(o,2),l=c[0],s=c[1],u=function(){var n=Object(H.a)(Object(V.a)().mark((function n(){return Object(V.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==i){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,te(i);case 4:n.sent?e("/package/"+i):s("Thoth does not know about that package");case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(I.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==l&&void 0!==l?l:""})}),Object(p.jsxs)(I.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(p.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(Y,{error:""!==l,onChange:function(e){return function(e){r(e.target.value),""!==l&&s("")}(e)},helpertext:"Search for a Python package",type:"search",lefticon:Object(p.jsx)(X.a,{}),onEnter:u})}),Object(p.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return u()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]})},ce=t(459),le=t(428),se=t(474),de=t(406),ue=t(426),je=Object(de.a)();function ve(e){var n=e.suggestions,t=e.label,i=e.help,r=e.required,o=e.error,c=e.value,l=e.setValue,s=Object(a.useMemo)((function(){return n.map((function(e){return{title:e}}))}),[n]);return Object(p.jsx)(ue.a,{value:c,onChange:function(e,n){"string"===typeof n?l({title:n}):n&&n.inputValue?l({title:n.inputValue}):l(n)},filterOptions:function(e,n){var t=je(e,n);return""!==n.inputValue&&t.push({inputValue:n.inputValue,title:'Add "'.concat(n.inputValue,'"')}),t},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==s&&void 0!==s?s:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,n){return Object(p.jsx)("li",Object(y.a)(Object(y.a)({},e),{},{children:n.title}))},freeSolo:!0,renderInput:function(e){return Object(p.jsx)(le.a,Object(y.a)(Object(y.a)({},e),{},{fullWidth:!0,label:t,required:r,error:o,helperText:i}))}})}var be=t(223),he=t.n(be),pe=t(455),me=t(456),Oe=t(457),xe=t(452),ge=t(453),fe=t(446),ye=t(427),ke=t(451),_e=t(438);function we(e){var n=e.order,t=e.orderBy,a=e.onRequestSort,i=e.headers;return Object(p.jsx)(ke.a,{children:Object(p.jsxs)(xe.a,{children:[i.map((function(e){return Object(p.jsx)(ge.a,{sortDirection:t===e.id&&n,children:Object(p.jsx)(_e.a,{"data-testid":"column-header-label",active:t===e.id,direction:t===e.id?n:"asc",onClick:function(){return n=e.id,void a(n);var n},children:Object(p.jsx)("b",{children:e.label})})},e.id)})),Object(p.jsx)(ge.a,{})]})})}function Se(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function Ce(e,n){return"desc"===e?function(e,t){return Se(e,t,n)}:function(e,t){return-Se(e,t,n)}}var Ae=t(454),Pe=function(e){var n=e.isLoading,t=void 0!==n&&n,a=e.isError,i=void 0!==a&&a,r=e.loadingLabel,o=e.progress,c=e.errorTitle,l=e.errorSubtitle;return i?Object(p.jsxs)(L.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:null!==c&&void 0!==c?c:"An error occurred"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:l})]}):t?Object(p.jsxs)(L.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(Ae.a,{variant:o?"determinate":void 0,value:o}),Object(p.jsx)(T.a,{variant:"body2",children:r})]}):null},Ee=function(e){var n=e.headers,t=e.rows,i=e.onAction,r=a.useState("asc"),o=Object(g.a)(r,2),c=o[0],l=o[1],s=a.useState(n[0].id),d=Object(g.a)(s,2),u=d[0],j=d[1],v=a.useState(0),b=Object(g.a)(v,2),h=b[0],m=b[1],O=a.useState(10),x=Object(g.a)(O,2),f=x[0],y=x[1],k=h>0?Math.max(0,(1+h)*f-t.length):0;return t?Object(p.jsx)(L.a,{sx:{width:"100%"},children:Object(p.jsxs)(K.a,{sx:{width:"100%",mb:2},variant:"outlined",children:[Object(p.jsx)(pe.a,{children:Object(p.jsxs)(me.a,{sx:{minWidth:750},size:"medium",children:[Object(p.jsx)(we,{order:c,orderBy:u,onRequestSort:function(e){l(u===e&&"asc"===c?"desc":"asc"),j(e)},rowCount:t.length,headers:n}),Object(p.jsxs)(Oe.a,{children:[t.slice().sort(Ce(c,u)).slice(h*f,h*f+f).map((function(e,t){var a="enhanced-table-checkbox-".concat(t);return Object(p.jsxs)(xe.a,{hover:!0,tabIndex:-1,children:[n.map((function(n,t){return 0===t?Object(p.jsx)(ge.a,{"data-testid":"table-cell",component:"th",id:a,scope:"row",children:e[n.id]},n.id+t):Object(p.jsx)(ge.a,{"data-testid":"table-cell",align:"left",children:e[n.id]},n.id+t)})),i?Object(p.jsx)(ge.a,{align:"right",children:Object(p.jsx)(fe.a,{"data-testid":"action-button",onClick:function(){return i(e)},children:Object(p.jsx)(he.a,{})})}):void 0]},a)})),k>0&&Object(p.jsx)(xe.a,{style:{height:53*k},children:Object(p.jsx)(ge.a,{colSpan:6})})]})]})}),Object(p.jsx)(ye.a,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:f,page:h,onPageChange:function(e,n){m(n)},onRowsPerPageChange:function(e){y(parseInt(e.target.value,10)),m(0)}})]})}):Object(p.jsx)("div",{"data-testid":"loading-spinner",className:"w-full h-48 flex justify-center items-center",children:Object(p.jsx)(Pe,{isLoading:!0})})};function Ie(e){var n=new Date,t=Math.floor((n.valueOf()-e.valueOf())/1e3),a=t/3154e4;if(a>1){var i=Math.floor(a);return i+" year"+(1!==i?"s":"")}if((a=t/2628e3)>1){var r=Math.floor(a);return r+" month"+(1!==r?"s":"")}if((a=t/86400)>1){var o=Math.floor(a);return o+" day"+(1!==o?"s":"")}if((a=t/3600)>1){var c=Math.floor(a);return c+" hour"+(1!==c?"s":"")}if((a=t/60)>1){var l=Math.floor(a);return l+" minute"+(1!==l?"s":"")}var s=Math.floor(t);return s+" second"+(1!==s?"s":"")}var Le=function(e,n,t){return e?"Advise finished "+Ie(new Date(e))+" ago.":n?"Advise started "+Ie(new Date(n))+" ago.":t?"Advise finished "+Ie(new Date(t))+" ago.":"Time started/finished not available"},Te=t(443),Re=function(e,n,t,a,i,r){var o={params:{name:e,version:n,index:t,os_name:a,os_version:i,python_version:r},headers:{accept:"application/json"}};return Z.a.get(ee+"/python/package/version/metadata",o)},Me=function(e,n,t,a,i,r,o){return Object(ie.a)(Object(y.a)(Object(y.a)({},o),{},{enabled:!!e&&!!n&&!!t&&!!a&&!!i&&!!r,queryKey:["packageMetadata",e,n,t,a,i,r],queryFn:function(){return Re(null!==e&&void 0!==e?e:"",null!==n&&void 0!==n?n:"",null!==t&&void 0!==t?t:"",null!==a&&void 0!==a?a:"",null!==i&&void 0!==i?i:"",null!==r&&void 0!==r?r:"")}}))},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return Object(Te.a)({queries:e.map((function(e){return Object(y.a)(Object(y.a)({},n),{},{enabled:!!e.name&&!!e.version&&!!e.index&&!!e.os_name&&!!e.os_version&&!!e.python_version,queryKey:["packageMetadata",e.name,e.version,e.index,e.os_name,e.os_version,e.python_version],queryFn:function(){return Re(e.name,e.version,e.index,e.os_name,e.os_version,e.python_version)}})}))})},Be=t(226),qe=t.n(Be);function De(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(H.a)(Object(V.a)().mark((function e(n){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(H.a)(Object(V.a)().mark((function e(n){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(n);case 2:return t=e.sent,e.abrupt("return",qe.a.parse(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve=t(18),He=function(e){return Z.a.get(ee+"/advise/python/"+e,{headers:{accept:"application/json"}})},Ke=function(e){var n,t,a,i,r,o,c,l,s,d,u,j,v,b,h,p,m,O,x,f,y,k,_,w,S,C;return null!==(n=e.data)&&void 0!==n&&n.data?{parameters:null===(t=e.data)||void 0===t?void 0:t.data.parameters,data:null===(a=e.data)||void 0===a?void 0:a.data,query:e,status:null===(i=e.data)||void 0===i?void 0:i.data.status,error:null===(r=e.data)||void 0===r?void 0:r.data.error,metadata:null===(o=e.data)||void 0===o?void 0:o.data.metadata,result:null===(c=e.data)||void 0===c?void 0:c.data.result,justifications:null===(l=e.data)||void 0===l||null===(s=l.data)||void 0===s||null===(d=s.result)||void 0===d||null===(u=d.report)||void 0===u||null===(j=u.products)||void 0===j?void 0:j[0].justification,stack_info:null===(v=e.data)||void 0===v||null===(b=v.data)||void 0===b||null===(h=b.result)||void 0===h||null===(p=h.report)||void 0===p?void 0:p.stack_info,project:null===(m=e.data)||void 0===m||null===(O=m.data)||void 0===O||null===(x=O.result)||void 0===x||null===(f=x.report)||void 0===f||null===(y=f.products)||void 0===y?void 0:y[0].project,product:null===(k=e.data)||void 0===k||null===(_=k.data)||void 0===_||null===(w=_.result)||void 0===w||null===(S=w.report)||void 0===S||null===(C=S.products)||void 0===C?void 0:C[0],package_list:function(){var n,t,a,i,r,o,c=null===(n=e.data.data)||void 0===n||null===(t=n.result)||void 0===t||null===(a=t.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.project,l=null===c||void 0===c?void 0:c.requirements_locked;return Object.entries(null!==(o=null===l||void 0===l?void 0:l.default)&&void 0!==o?o:{}).map((function(e){var n,t,a,i,r,o,s,d,u,j,v=Object(g.a)(e,2),b=v[0],h=v[1];return{name:b,version:h.version.replace("==",""),index:null!==(n=null===(t=l._meta.sources.find((function(e){return e.name===h.index})))||void 0===t?void 0:t.url)&&void 0!==n?n:"https://pypi.org/simple",os_name:null!==(a=null===c||void 0===c||null===(i=c.runtime_environment)||void 0===i||null===(r=i.operating_system)||void 0===r?void 0:r.name)&&void 0!==a?a:"",os_version:null!==(o=null===c||void 0===c||null===(s=c.runtime_environment)||void 0===s||null===(d=s.operating_system)||void 0===d?void 0:d.version)&&void 0!==o?o:"",python_version:null!==(u=null===c||void 0===c||null===(j=c.runtime_environment)||void 0===j?void 0:j.python_version)&&void 0!==u?u:""}}))}()}:{query:e}},Ue=function(e,n){var t=Object(ie.a)(Object(y.a)(Object(y.a)({},n),{},{enabled:!!e&&e.startsWith("adviser"),queryKey:["adviseDocument",e],queryFn:function(){return He(e)}}));return Object(a.useMemo)((function(){return Ke(t)}),[t.status])},Ge=function(){var e=Object(H.a)(Object(V.a)().mark((function e(n){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z.a.get(ee+"/advise/python/"+n+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ye=function(e,n){return function(e){var n,t,a,i,r;return null!==(n=e.data)&&void 0!==n&&n.data?{parameters:null===(t=e.data)||void 0===t?void 0:t.data.parameters,data:null===(a=e.data)||void 0===a?void 0:a.data,error:null===(i=e.data)||void 0===i?void 0:i.data.error,log:null===(r=e.data)||void 0===r?void 0:r.data.log,lastLog:function(){try{var n,t,a,i;return JSON.parse(null!==(n=null===(t=e.data)||void 0===t||null===(a=t.data.log)||void 0===a||null===(i=a.split("\n"))||void 0===i?void 0:i.at(-2))&&void 0!==n?n:"{}")}catch(r){return{}}}()}:{query:e}}(Object(ie.a)(Object(y.a)(Object(y.a)({},n),{},{queryKey:["adviseLogs",e],queryFn:function(){return Ge(e)}})))};function Je(e,n){var t;switch(n.type){case"loading":return Object(y.a)(Object(y.a)({},e),{},{loading:n.payload});case"error":return Object(y.a)(Object(y.a)({},e),{},{error:Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},n.param,n.payload))});case"clear-error":return e.error={},e;case"input":return Object(y.a)(Object(y.a)({},e),{},(t={},Object(f.a)(t,n.param,n.payload),Object(f.a)(t,"error",Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},n.param,void 0))),t));default:throw new Error("Advise state dispatch error")}}var Xe=[{id:"document_id",label:"Document ID"},{id:"status",label:"Status"},{id:"name",label:"Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Run"}],Qe={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},Ze=function(){var e,n,t,i,r,o,c,l,s,u,j,v,b,h,m,O,x,f,k=Object(E.g)(),_=Object(a.useReducer)(Je,Qe),w=Object(g.a)(_,2),S=w[0],C=w[1],A=function(e,n){var t=Object(Te.a)({queries:e.map((function(e){return Object(y.a)(Object(y.a)({},n),{},{queryKey:["adviseDocument",e],queryFn:function(){return He(e)}})}))});return Object(Ve.a)(t.map((function(e){return Ke(e)})))}(Object(a.useMemo)((function(){var e=localStorage.getItem($);return e?e.split(",").filter((function(e){return""!==e})):[]}),[])),P=Object(a.useMemo)((function(){return null!==A&&void 0!==A&&A.every((function(e){return!e.query.isLoading}))?A.map((function(e){var n,t,a,i,r,o,c,l,s,d,u,j,v,b,h,p,m,O,x,g,f,y,k,_,w,S,C,A,P,E;return{document_id:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.document_id,name:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.result)||void 0===i||null===(r=i.report)||void 0===r||null===(o=r.products)||void 0===o||null===(c=o[0].project.runtime_environment)||void 0===c?void 0:c.name,os_name:null===e||void 0===e||null===(l=e.data)||void 0===l||null===(s=l.result)||void 0===s||null===(d=s.report)||void 0===d||null===(u=d.products)||void 0===u||null===(j=u[0].project.runtime_environment)||void 0===j||null===(v=j.operating_system)||void 0===v?void 0:v.name,os_version:null===e||void 0===e||null===(b=e.data)||void 0===b||null===(h=b.result)||void 0===h||null===(p=h.report)||void 0===p||null===(m=p.products)||void 0===m||null===(O=m[0].project.runtime_environment)||void 0===O||null===(x=O.operating_system)||void 0===x?void 0:x.version,python_version:null===e||void 0===e||null===(g=e.data)||void 0===g||null===(f=g.result)||void 0===f||null===(y=f.report)||void 0===y||null===(k=y.products)||void 0===k||null===(_=k[0].project.runtime_environment)||void 0===_?void 0:_.python_version,status:function(){var n,t,a,i;return null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.status?null===(i=e.data)||void 0===i?void 0:i.status.state:null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(a=t.result.report)&&void 0!==a&&a.products?"success":"error"}(),date:Le(null===e||void 0===e||null===(w=e.data)||void 0===w||null===(S=w.status)||void 0===S?void 0:S.finished_at,null===e||void 0===e||null===(C=e.data)||void 0===C||null===(A=C.status)||void 0===A?void 0:A.started_at,null===e||void 0===e||null===(P=e.data)||void 0===P||null===(E=P.metadata)||void 0===E?void 0:E.datetime)}})):[]}),[A]),L=function(){if("id"!==S.lookupType){var e=!0;return S.pipfile||(e=!1,C({type:"error",param:"pipfile",payload:"Field cant be empty"})),S.pipfileLock||(e=!1,C({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),S.name||(e=!1,C({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!S.id||""===S.id)||(C({type:"error",param:"id",payload:"Field cant be empty"}),!1)},R=function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var n,t,a;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.loading&&L()){e.next=2;break}return e.abrupt("return");case 2:"id"===S.lookupType?k("/advise/"+S.id):(C({type:"loading",payload:!0}),a={operating_system:{name:S.operating_system_name,version:S.operating_system_version},python_version:S.python_version,base_image:S.base_image,cuda_version:S.cuda_version,cudnn_version:S.cudnn_version,mkl_version:S.mkl_version,name:S.name,openblas_version:S.openblas_version,openmpi_version:S.openmpi_version},Object.keys(a).forEach((function(e){""===a[e]&&delete a[e]})),""!==(null===a||void 0===a||null===(n=a.operating_system)||void 0===n?void 0:n.name)&&""!==(null===a||void 0===a||null===(t=a.operating_system)||void 0===t?void 0:t.version)||delete a.operating_system,S.pipfile?S.pipfileLock?ne(S.pipfile,S.pipfileLock,a).then((function(e){C({type:"loading",payload:!1}),k("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var n,t,a,i,r,o,c,l,s;if(C({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))if(null!==e&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.includes("Pipfile.lock"))C({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(l=e.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.error});else if(null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&null!==(c=o.error)&&void 0!==c&&c.includes("Pipfile")){var d,u;C({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(d=e.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error})}})):C({type:"error",param:"pipfileLock",payload:"Pipfile.lock is required"}):C({type:"error",param:"pipfile",payload:"Pipfile is required"}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ce.a,{in:"id"===S.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=S.error)||void 0===e?void 0:e.id})}),Object(p.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(Y,{error:void 0!==(null===(n=S.error)||void 0===n?void 0:n.id),onChange:function(e){return C({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{marginRight:2},lefticon:Object(p.jsx)(X.a,{}),onEnter:R})}),Object(p.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return R()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]}),Object(p.jsx)(d.a,{onClick:function(){return C({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"}),Object(p.jsx)(d.a,{onClick:function(){return C({type:"input",param:"lookupType",payload:"history"})},children:"History"})]})}),Object(p.jsx)(ce.a,{in:"history"===S.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Local Thoth Advise History"}),Object(p.jsx)(Ee,{headers:Xe,rows:P,onAction:function(e){k("/advise/"+e.document_id)}})]})}),Object(p.jsx)(ce.a,{in:"manual"===S.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Advise Parameters"}),Object(p.jsxs)(K.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(p.jsxs)(I.a,{container:!0,spacing:2,children:[Object(p.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Y,{label:null!==(t=S.error)&&void 0!==t&&t.pipfile?null===(i=S.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return C({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=S.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(p.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Y,{label:null!==(o=S.error)&&void 0!==o&&o.pipfileLock?null===(c=S.error)||void 0===c?void 0:c.pipfileLock:"Pipfile.lock contents",onChange:function(e){return C({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(l=S.error)||void 0===l?void 0:l.pipfileLock),multiline:!0,rows:8})})]}),Object(p.jsxs)(I.a,{container:!0,mt:4,spacing:2,children:[Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(le.a,{onChange:function(e){return C({type:"input",param:"base_image",payload:e.target.value})},value:S.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:void 0!==(null===(s=S.error)||void 0===s?void 0:s.base_image)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"cuda_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:void 0!==(null===(u=S.error)||void 0===u?void 0:u.cuda_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"cudnn_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:void 0!==(null===(j=S.error)||void 0===j?void 0:j.cudnn_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"mkl_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:void 0!==(null===(v=S.error)||void 0===v?void 0:v.mkl_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"name",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:void 0!==(null===(b=S.error)||void 0===b?void 0:b.name)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"openblas_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:void 0!==(null===(h=S.error)||void 0===h?void 0:h.openblas_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"openmpi_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:void 0!==(null===(m=S.error)||void 0===m?void 0:m.openmpi_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(le.a,{onChange:function(e){return C({type:"input",param:"operating_system_name",payload:e.target.value})},value:S.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:void 0!==(null===(O=S.error)||void 0===O?void 0:O.operating_system_name)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(le.a,{onChange:function(e){return C({type:"input",param:"operating_system_version",payload:e.target.value})},value:S.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:void 0!==(null===(x=S.error)||void 0===x?void 0:x.operating_system_version)})}),Object(p.jsx)(I.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(ve,{setValue:function(e){var n;return C({type:"input",param:"python_version",payload:null!==(n=null===e||void 0===e?void 0:e.title)&&void 0!==n?n:""})},value:S.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:void 0!==(null===(f=S.error)||void 0===f?void 0:f.python_version)})}),Object(p.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(I.a,{item:!0,xs:6,md:6,children:Object(p.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){return C({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Cancel"})})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(se.a,{variant:"contained",color:"primary",onClick:function(){return R()},loading:S.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})};function $e(e,n){var t;switch(n.type){case"loading":return Object(y.a)(Object(y.a)({},e),{},{loading:n.payload});case"error":return Object(y.a)(Object(y.a)({},e),{},{error:Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},n.param,n.payload))});case"clear-error":return e.error={},e;case"input":return Object(y.a)(Object(y.a)({},e),{},(t={},Object(f.a)(t,n.param,n.payload),Object(f.a)(t,"error",Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},n.param,void 0))),t));default:throw new Error("Image state dispatch error")}}var en=[{id:"environment_name",label:"Image Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Updated"}],nn={error:{},loading:!1,lookupType:"id",id:""},tn=function(){var e,n,t,i=Object(E.g)(),r=Object(a.useReducer)($e,nn),o=Object(g.a)(r,2),c=o[0],l=o[1],s=(t={useErrorBoundary:!1},Object(ie.a)(Object(y.a)(Object(y.a)({},t),{},{queryKey:["container-images"],queryFn:function(){return re()}}))),u=Object(a.useMemo)((function(){var e,n,t,a;return null!==s&&void 0!==s&&null!==(e=s.data)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.container_images?null===s||void 0===s||null===(t=s.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.container_images.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{date:Ie(new Date(e.datetime))+" ago"})})):[]}),[null===s||void 0===s?void 0:s.data]),j=function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.loading){e.next=2;break}return e.abrupt("return");case 2:if(!c.id.includes("package-extract")){e.next=5;break}return i("/image/"+c.id),e.abrupt("return");case 5:l({type:"loading",payload:!0}),ae(c.id).then((function(e){l({type:"loading",payload:!1}),i("/image/"+e.data.analysis_id,{state:{image_name:c.id}})})).catch((function(e){var n,t,a,i;(l({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))&&l({type:"error",param:"id",payload:null!==(t=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)&&void 0!==t?t:"An unknown error occurred"})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ce.a,{in:"id"===c.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=c.error)||void 0===e?void 0:e.id})}),Object(p.jsxs)(I.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(I.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(Y,{error:void 0!=(null===(n=c.error)||void 0===n?void 0:n.id),onChange:function(e){return l({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID or image name",type:"search",boxprops:{mr:2},lefticon:Object(p.jsx)(X.a,{}),onEnter:j})}),Object(p.jsx)(I.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:j,sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]}),Object(p.jsx)(d.a,{onClick:function(){return l({type:"input",param:"lookupType",payload:"lookup"})},children:"Lookup Thoth Images"})]})}),Object(p.jsx)(ce.a,{in:"lookup"===c.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Available Thoth Container Images"}),Object(p.jsx)(Ee,{headers:en,rows:u,onAction:function(e){i("/image/"+e.package_extract_document_id,{state:{image_name:e.environment_name}})}})]})})]})},an=t(412),rn=t(439),on=t.p+"static/media/footer-logo.7d0f9037.png",cn=function(){return Object(p.jsx)(K.a,{variant:"outlined",sx:{padding:4,marginTop:10,marginBottom:5},children:Object(p.jsxs)(L.a,{display:"flex",justifyContent:"center",alignItems:"flex-start",children:[Object(p.jsx)("img",{style:{paddingLeft:2,paddingRight:2,height:"40px"},alt:"Red Hat Sponsor Logo",src:on}),Object(p.jsxs)(an.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Useful links"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/orgs/thoth-station/projects/",children:"GitHub project board"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"http://bit.ly/thoth-on-youtube",children:"YouTube channel"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://twitter.com/ThothStation",children:"Twitter"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/thoth-station",children:"GitHub organization"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://www.kaggle.com/thothstation",children:"Kaggle datasets"})]}),Object(p.jsxs)(an.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Info"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://thoth-station.ninja/docs/developers/adviser/landing_page.html#landing-page",children:"Thoth's landing page"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://thoth-station.ninja/docs/developers/adviser/",children:"Main documentation page"})]}),Object(p.jsxs)(an.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Friends"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/AICoE/aicoe-ci",children:"AICoE-CI"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"https://www.operate-first.cloud/",children:"Operate First"}),Object(p.jsx)(rn.a,{underline:"hover",sx:{paddingBottom:1},href:"http://opendatahub.io/",children:"Open Data Hub"})]})]})})},ln=function(){var e=Object(a.useState)("package"),n=Object(g.a)(e,2),t=n[0],i=n[1],r=Object(B.a)(),o=Object(q.a)(r.breakpoints.up("sm"));return Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",sx:{paddingX:2,maxWidth:"1000px",margin:"auto"},children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(L.a,{sx:{marginTop:10},children:Object(p.jsx)("img",{alt:"Thoth Logo",src:z,height:o?300:"auto",width:"100%"})})}),Object(p.jsxs)(I.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(p.jsx)(I.a,{item:!0,xs:12,alignItems:"left",mb:3,children:Object(p.jsx)(T.a,{variant:"h4",children:Object(p.jsx)("b",{children:"Thoth Search"})})}),Object(p.jsx)(I.a,{item:!0,xs:12,alignItems:"left",children:Object(p.jsx)(T.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyze and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyze a single Python package to see what Thoth knows about the package."})}),Object(p.jsx)(I.a,{item:!0,textAlign:"center",xs:12,mt:3,mb:4,children:Object(p.jsxs)(R.a,{value:t,exclusive:!0,onChange:function(e,n){n&&i(n)},size:o?"large":"small",children:[Object(p.jsx)(M.a,{value:"package",children:Object(p.jsx)("b",{children:"package"})}),Object(p.jsx)(M.a,{value:"environment",children:Object(p.jsx)("b",{children:"environment"})})]})}),Object(p.jsxs)(I.a,{item:!0,xs:12,sx:{marginBottom:3},children:[Object(p.jsx)(W.a,{}),Object(p.jsx)(N,{value:t,index:"package",children:Object(p.jsx)(oe,{})}),Object(p.jsx)(N,{value:t,index:"environment",children:Object(p.jsx)(Ze,{})}),Object(p.jsx)(N,{value:t,index:"image",children:Object(p.jsx)(tn,{})})]})]}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(cn,{})})]})},sn=function(){return Object(p.jsx)("div",{children:"404"})},dn=function(e){var n=e.children;return Object(p.jsx)(L.a,{sx:{marginY:2,marginRight:2,height:"calc(100vh - 32px)"},children:n})},un=t(8),jn=t(437),vn=t(461),bn=t(450),hn=t(462),pn=t(416),mn=t(417),On=t(229),xn=t.n(On),gn=t(146),fn=t.n(gn),yn=t(230),kn=t.n(yn),_n=t(231),wn=t.n(_n),Sn=t(122),Cn=t.n(Sn),An=t(76),Pn=t.n(An),En=t(45),In=t.n(En),Ln=t(55),Tn=t.n(Ln),Rn=t(228),Mn=t.n(Rn),Wn=t(227),Bn=t.n(Wn),qn=function(e){var n,t=Ue(e).package_list,i=We(t),r=null!==(n=Object(a.useMemo)((function(){return null===i||void 0===i?void 0:i.every((function(e){return e.isFetched}))}),[i]))&&void 0!==n&&n,o=function(){if(!r)throw"not all metadata has been loaded";var e={};return i.forEach((function(n){var t,a=null===(t=n.data)||void 0===t?void 0:t.data.metadata.importlib_metadata.metadata;if(a){var i,r,o,c=[];if(null===a||void 0===a||null===(i=a.Classifier)||void 0===i||i.forEach((function(e){var n,t,i=e.split(" :: ");"License"===i[0]&&("OSI Approved"===i[1]?c.push({generalLicense:null!==(n=null===i||void 0===i?void 0:i[2])&&void 0!==n?n:null===a||void 0===a?void 0:a.License,specificLicense:null===a||void 0===a?void 0:a.License,isOsiApproved:!0}):c.push({generalLicense:null!==(t=null===i||void 0===i?void 0:i[1])&&void 0!==t?t:null===a||void 0===a?void 0:a.License,specificLicense:null===a||void 0===a?void 0:a.License,isOsiApproved:!1}))})),0===c.length)c.push({generalLicense:null!==(r=null===a||void 0===a?void 0:a.License)&&void 0!==r?r:"N/A",specificLicense:null!==(o=null===a||void 0===a?void 0:a.License)&&void 0!==o?o:"N/A",isOsiApproved:null});c.forEach((function(t){var a,i=null===(a=n.data)||void 0===a?void 0:a.data.metadata.package_name.toLowerCase();e[t.generalLicense]||(e[t.generalLicense]={packages:{},metadata:{isOsiApproved:t.isOsiApproved}}),i&&(e[t.generalLicense].packages=Object(y.a)(Object(y.a)({},e[t.generalLicense].packages),{},Object(f.a)({},i,{specific:t.specificLicense})))}))}})),e},c=Object(ie.a)({queryKey:["license_metric",e],enabled:r,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:c.data,isLoading:c.isLoading,isError:c.isError,loadingProgress:null,loadingText:"Creating license metric"}},Dn=function(e){return{width:360,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Fn=function(e){return{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"80px"}},Nn=Object(un.a)(vn.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,t=e.open;return Object(y.a)(Object(y.a)({width:360,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},t&&Object(y.a)(Object(y.a)({},Dn(n)),{},{"& .MuiDrawer-paper":Dn(n)})),!t&&Object(y.a)(Object(y.a)({},Fn(n)),{},{"& .MuiDrawer-paper":Fn(n)}))})),zn=function(e){var n=e.label,t=e.to,a=e.selected,i=void 0!==a&&a,r=e.icon,o=e.chipData,c=e.disabled,l=e.open,s=e.hideOnClosed;return!l&&s?null:Object(p.jsxs)(hn.a,{sx:{borderRadius:100,height:48,paddingLeft:3,paddingRight:3,marginRight:1.5,marginY:.5,justifyContent:l?void 0:"center",backgroundColor:i?Object(h.c)(O.light.colorContainer):void 0,color:i?Object(h.c)(O.light.onColorContainer):void 0},button:!0,disabled:c,component:P.b,to:t,secondaryAction:o&&l?Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[o.info?Object(p.jsx)(jn.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(Pn.a,{}),label:o.info,color:"info"}):void 0,o.warning?Object(p.jsx)(jn.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(In.a,{}),label:o.warning,color:"warning"}):void 0,o.error?Object(p.jsx)(jn.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(Tn.a,{}),label:o.error,color:"error"}):void 0]}):void 0,children:[r?Object(p.jsx)(pn.a,{sx:{minWidth:3,marginRight:l?1.5:0,color:i?Object(h.c)(O.light.onColorContainer):void 0},children:r}):void 0,l?Object(p.jsx)(mn.a,{disableTypography:!0,sx:{marginLeft:r?void 0:4.5},children:Object(p.jsx)(T.a,{fontWeight:"600",variant:"body2",children:n})}):void 0]})},Vn=function(e){var n=e.children,t=e.analysis_id,i=Object(E.f)(),r=Object(E.g)(),o=function(e){var n=Ue(e).stack_info,t=qn(e).data,a=function(){var e={info:0,warning:0,error:0};return t?(Object.values(t).forEach((function(n){switch(n.metadata.isOsiApproved){case null:e.warning+=Object.keys(n.packages).length;break;case!1:e.error+=Object.keys(n.packages).length}})),e):e},i=function(){var e,t,a;return n?{info:null!==(e=n.filter((function(e){return"INFO"===e.type})).length)&&void 0!==e?e:0,warning:null!==(t=n.filter((function(e){return"WARNING"===e.type})).length)&&void 0!==t?t:0,error:null!==(a=n.filter((function(e){return"ERROR"===e.type})).length)&&void 0!==a?a:0}:{info:0,warning:0,error:0}},r=Object(ie.a)({queryKey:["sidebar_totals",e],enabled:!!n&&!!t,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{"stack-info":i(),licenses:a()});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:r.data,isLoading:r.isLoading,isError:r.isError,loadingProgress:null,loadingText:"totaling warnings and errors"}}(t),c=o.data,l=a.useState(!1),s=Object(g.a)(l,2),u=s[0],j=s[1],v=Object(a.useMemo)((function(){return i.pathname.split("/").at(3)}),[i.pathname]);return Object(p.jsxs)(L.a,{sx:{display:"flex"},children:[Object(p.jsxs)(Nn,{open:u,variant:"permanent",children:[u?Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{marginBottom:1,marginTop:3,paddingRight:1.5},children:[Object(p.jsx)(T.a,{component:d.a,onClick:function(){return r("/")},variant:"h5",sx:{textAlign:"center",color:"primary.main",marginLeft:3,width:"fit-content"},children:"SEARCH UI"}),Object(p.jsx)(fe.a,{onClick:function(){return j(!1)},children:Object(p.jsx)(Bn.a,{})})]}):Object(p.jsx)(L.a,{sx:{marginBottom:1,marginTop:3,textAlign:"center"},children:Object(p.jsx)(fe.a,{onClick:function(){return j(!0)},children:Object(p.jsx)(Mn.a,{})})}),Object(p.jsxs)(bn.a,{sx:{paddingLeft:1.5,paddingRight:1.5},children:[Object(p.jsx)(zn,{selected:"summary"===v,label:"Summary",to:"summary",icon:Object(p.jsx)(xn.a,{}),open:u}),Object(p.jsx)(zn,{label:"Packages",to:"packages",selected:"packages"===v,icon:Object(p.jsx)(fn.a,{}),open:u}),Object(p.jsx)(zn,{label:"Compare",to:"compare",selected:"compare"===v,icon:Object(p.jsx)(kn.a,{}),open:u}),Object(p.jsx)(zn,{label:"Logs",to:"logs",selected:"logs"===v,icon:Object(p.jsx)(wn.a,{}),open:u})]}),u?Object(p.jsx)(W.a,{}):void 0,Object(p.jsxs)(bn.a,{sx:{paddingLeft:1,paddingRight:1.5},children:[Object(p.jsx)(zn,{label:"Environment",to:"environment",icon:Object(p.jsx)(Cn.a,{}),selected:"environment"===v,open:u,hideOnClosed:!0}),Object(p.jsx)(zn,{label:"Licenses",to:"licenses",chipData:null===c||void 0===c?void 0:c.licenses,icon:Object(p.jsx)(Cn.a,{}),selected:"licenses"===v,open:u,hideOnClosed:!0}),Object(p.jsx)(zn,{label:"Dependency Tree",to:"dependency-tree",icon:Object(p.jsx)(Cn.a,{}),selected:"dependency-tree"===v,open:u,hideOnClosed:!0}),Object(p.jsx)(zn,{label:"Stack Info",to:"stack-info",icon:Object(p.jsx)(Cn.a,{}),selected:"stack-info"===v,chipData:null===c||void 0===c?void 0:c["stack-info"],open:u,hideOnClosed:!0})]})]}),Object(p.jsx)(L.a,{sx:{width:"100%",overflowX:"hidden"},children:n})]})},Hn=function(e){var n=e.children,t=e.goHome,a=void 0!==t&&t,i=Object(E.g)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.a,{onClick:function(){i(a?"/":-1)},children:a?"go home":"go back"}),Object(p.jsx)("div",{children:n})]})},Kn=t(232),Un=t.n(Kn),Gn=["text","icon","link"],Yn=function(e){var n=e.text,t=e.icon,a=e.link,i=Object(D.a)(e,Gn);return Object(p.jsxs)(an.a,Object(y.a)(Object(y.a)({},i),{},{direction:"row",spacing:1,alignItems:"center",children:[t,a?Object(p.jsx)(rn.a,{underline:"none",href:a||void 0,target:"_blank",rel:"noopener noreferrer",variant:"body2",align:"center",children:n}):Object(p.jsx)(T.a,{variant:"body2",align:"center",children:n})]}))},Jn=t(430),Xn=["info"],Qn=function(e){var n=e.info,t=Object(D.a)(e,Xn);return Object(p.jsx)(Jn.a,Object(y.a)(Object(y.a)({action:n.link?Object(p.jsx)(d.a,{color:"inherit",size:"small",href:null===n||void 0===n?void 0:n.link,children:"DETAILS"}):void 0,severity:n.type},t),{},{children:null===n||void 0===n?void 0:n.message}))},Zn=function(e){var n,t,i=e.analysis_id,r=Ue(i),o=r.result,c=r.status,l=r.metadata,s=Ye(i).lastLog,d=Object(a.useMemo)((function(){var e,n;return o?null!==o&&void 0!==o&&null!==(e=o.report)&&void 0!==e&&e.ERROR||null!==o&&void 0!==o&&o.error?["ERROR","error"]:["COMPLETE","success"]:c?[null===(n=c.state)||void 0===n?void 0:n.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[o,c]),u=Object(g.a)(d,2),j=u[0],v=u[1],b=Object(a.useMemo)((function(){var e=null,n=null,t=null;return c&&(e=c.finished_at,n=c.started_at),l&&(t=l.datetime),Le(e,n,t)}),[c,l]),h=Object(a.useMemo)((function(){var e,n,t,a="";o&&(a=null!==(e=null!==(n=null===o||void 0===o||null===(t=o.report)||void 0===t?void 0:t.ERROR)&&void 0!==n?n:null===o||void 0===o?void 0:o.error_msg)&&void 0!==e?e:"");return a}),[o]);return Object(p.jsxs)("div",{children:[Object(p.jsxs)(K.a,{variant:"outlined",sx:{padding:2},children:[Object(p.jsx)(T.a,{variant:"h5",mb:1,children:Object(p.jsx)("b",{children:null!==i&&void 0!==i?i:"Unknown Adviser Run"})}),Object(p.jsxs)(an.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(p.jsx)(jn.a,{label:j,color:v}),Object(p.jsx)(Yn,{text:b,icon:Object(p.jsx)(Un.a,{})})]})]}),Object(p.jsx)(p.Fragment,{children:"ERROR"===j?Object(p.jsx)(Qn,{variant:"filled",sx:{margin:1,marginTop:2},info:{message:h,type:"error"}}):"COMPLETE"!==j?Object(p.jsx)(Qn,{variant:"outlined",sx:{margin:1,marginTop:2},info:{message:null!==(n=null===s||void 0===s?void 0:s.message)&&void 0!==n?n:"",type:null===s||void 0===s||null===(t=s.levelname)||void 0===t?void 0:t.toLowerCase()}}):void 0})]})},$n=t(475),et=t(464),nt=t(465),tt=t(466),at=t(467),it=t(415),rt=t(418),ot=t(48),ct=t.n(ot),lt=t(178),st=t.n(lt),dt=function(){var e=Object(H.a)(Object(V.a)().mark((function e(n){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,e.next=3,Promise.all(n.map(function(){var e=Object(H.a)(Object(V.a)().mark((function e(n){var a,i,r,o,c;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.message.includes("CVE")||n.message.startsWith("No known")){e.next=11;break}if(!(a=Array.from(n.message.matchAll(/'(.*?)'/g)))||4!==a.length){e.next=11;break}if(t.has(a[3][1])){e.next=10;break}return e.next=6,Ne("https://raw.githubusercontent.com/pypa/advisory-database/main/vulns/".concat(a[0][1],"/").concat(a[3][1],".yaml"));case 6:i=e.sent,t.set(a[3][1],{report:i,packages:[{name:a[0][1],version:a[1][1],index:a[2][1]}]}),e.next=11;break;case 10:t.set(a[3][1],Object(y.a)(Object(y.a)({},null!==(r=t.get(a[3][1]))&&void 0!==r?r:{}),{},{packages:[].concat(Object(Ve.a)(null!==(o=null===(c=t.get(a[3][1]))||void 0===c?void 0:c.packages)&&void 0!==o?o:[]),[{name:a[0][1],version:a[1][1],index:a[2][1]}])}));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",{data:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ut=function(e){var n,t,a=new Map;e.forEach((function(e){var n,t=e;"WARNING"===e.type&&null!==t&&void 0!==t&&t.package_name&&a.set(t.package_name,(null!==(n=a.get(t.package_name))&&void 0!==n?n:0)+1)}));var i=Array.from(a.entries()).sort((function(e,n){return Object(g.a)(e,2)[1]-Object(g.a)(n,2)[1]})),r=null!==(n=null===(t=i.at(-1))||void 0===t?void 0:t[1])&&void 0!==n?n:0;return{data:{values:i,top_packages:i.filter((function(e){return Object(g.a)(e,2)[1]===r})),avg:i.reduce((function(e,n){return e+Object(g.a)(n,2)[1]}),0)/i.length}}},jt=function(e){var n=new Map,t=new Set;return e.forEach((function(e){var a=e.package_name;if(a&&t.add(a),a&&e.message.includes("actively maintained")&&"WARNING"===e.type&&n.set(a,Object(y.a)(Object(y.a)({},n.get(a)),{},{not_maintained:!0})),a&&e.message.includes("has no recent release")){var i=e.message.split("dates back to ").at(-1);n.set(a,Object(y.a)(Object(y.a)({},n.get(a)),{},{last_release:i}))}a&&e.message.includes("low number of maintainers")&&n.set(a,Object(y.a)(Object(y.a)({},n.get(a)),{},{low_maintainers:!0}))})),{data:{total:t.size,packages:Array.from(n.entries()).map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return Object(y.a)(Object(y.a)({},a),{},{id:t})})).sort((function(e,n){var t,a;return new Date(null!==(t=n.last_release)&&void 0!==t?t:Date.now()).getTime()-new Date(null!==(a=e.last_release)&&void 0!==a?a:Date.now()).getTime()}))}}},vt=function(e){var n=Ue(e).justifications,t=Object(a.useState)(null),i=Object(g.a)(t,2),r=i[0],o=i[1],c=function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var t,a,i;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("Finding unmaintained packages"),t=jt(null!==n&&void 0!==n?n:[]),o("Finding package warnings"),a=ut(null!==n&&void 0!==n?n:[]),o("Finding cves"),e.next=7,dt(null!==n&&void 0!==n?n:[]);case 7:return i=e.sent,e.abrupt("return",{cvePackages:i.data,warningPackages:a.data,unmaintainedPackages:t.data});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Object(ie.a)({queryKey:["important_justifications",e],enabled:!!n,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:l.data,isLoading:l.isLoading,isError:l.isError,loadingProgress:null,loadingText:r}},bt=function(e){var n,t=e.analysis_id,r=Object(a.useState)(null),o=Object(g.a)(r,2),c=o[0],l=o[1],s=i.a.useRef(null),d=vt(t).data,u=(d=void 0===d?{}:d).cvePackages;return u?Object(p.jsxs)(nt.a,{variant:"outlined",ref:s,children:[Object(p.jsx)(tt.a,{title:"CVE Warnings",subheader:"Security advisories for packages published on PyPI",action:Object(p.jsx)(fe.a,{href:"https://thoth-station.ninja/j/cve",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})})}),Object(p.jsxs)(at.a,{children:[Object(p.jsx)(it.a,{direction:"right",in:null!==c,container:s.current,children:Object(p.jsx)("div",{children:null!==c?Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(an.a,{alignItems:"center",direction:"row",children:[Object(p.jsx)(fe.a,{size:"small",onClick:function(){return l(null)},children:Object(p.jsx)(st.a,{sx:{transform:"rotate(180deg)"}})}),Object(p.jsx)(T.a,{variant:"h5",fontWeight:"bold",children:null===c||void 0===c?void 0:c.id})]}),c.id?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(T.a,{sx:{marginLeft:4},variant:"subtitle2",fontStyle:"italic",color:"gray",children:["Published: ",new Date(null===c||void 0===c?void 0:c.published).toLocaleString()]}),Object(p.jsx)(T.a,{variant:"body2",sx:{marginTop:2},children:null===c||void 0===c?void 0:c.details}),Object(p.jsx)(T.a,{sx:{marginTop:2},variant:"h6",fontWeight:"bold",children:"Affected Packages"}),null===c||void 0===c||null===(n=c.affected)||void 0===n?void 0:n.map((function(e,n){var t,a,i,r,o;return Object(p.jsxs)(L.a,{sx:{marginBottom:1},children:[Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body1",color:"gray",children:"[".concat(null===e||void 0===e||null===(a=e.package)||void 0===a?void 0:a.ecosystem,"]")}),Object(p.jsxs)(T.a,{variant:"body1",children:[" ",Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+(null===e||void 0===e||null===(i=e.package)||void 0===i?void 0:i.name),children:null===e||void 0===e||null===(r=e.package)||void 0===r?void 0:r.name})]})]}),null===e||void 0===e||null===(o=e.ranges)||void 0===o?void 0:o.map((function(e,t){return Object(p.jsxs)(I.a,{container:!0,sx:{marginLeft:2,marginTop:.5},children:[Object(p.jsx)(I.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:"Type"})}),Object(p.jsx)(I.a,{item:!0,xs:10,children:Object(p.jsx)(T.a,{variant:"body2",children:e.type})}),Object(p.jsx)(I.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:"Events"})}),Object(p.jsx)(I.a,{item:!0,xs:10,sx:{marginBottom:2},children:e.events.map((function(e,a){var i;return Object(p.jsxs)(I.a,{container:!0,direction:"row",spacing:1,children:[Object(p.jsx)(I.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:e.fixed?"Fixed":"Introduced"})}),Object(p.jsx)(I.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null!==(i=e.introduced)&&void 0!==i?i:e.fixed})})]},"event"+n+t+a)}))})]},e.type+t+n)}))]},(null===e||void 0===e||null===(t=e.package)||void 0===t?void 0:t.name)+n)}))]}):Object(p.jsx)(T.a,{variant:"body2",color:"red",textAlign:"center",children:"Unable to fetch CVE details"})]}):void 0})}),Object(p.jsx)(it.a,{direction:"left",in:null===c,container:s.current,children:Object(p.jsx)("div",{children:null===c?Object(p.jsx)(bn.a,{disablePadding:!0,dense:!0,children:Array.from(u.entries()).map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return Object(p.jsx)(hn.a,{disablePadding:!0,dense:!0,children:Object(p.jsxs)(rt.a,{onClick:function(){var e;return l(null!==(e=a.report)&&void 0!==e?e:null)},children:[Object(p.jsx)(mn.a,{primary:t,secondary:a.packages.map((function(e){return"".concat(e.name," ").concat(e.version)})).join(", ")}),Object(p.jsx)(pn.a,{children:Object(p.jsx)(st.a,{})})]})},t)}))}):void 0})})]})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"rectangular",height:118}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"})]})},ht=t(38),pt=t(20),mt=t(21),Ot=function(){function e(){Object(pt.a)(this,e),this.nodes=void 0,this.visEdges=void 0,this.nodes=new Map,this.visEdges=[]}return Object(mt.a)(e,[{key:"addVertex",value:function(e,n,t){var a=this.nodes.get(e);return a||(a=new t(e,n),this.nodes.set(e,a),a)}},{key:"addEdge",value:function(e,n){var t=this.nodes.get(e),a=this.nodes.get(n);return t&&a&&t.addAdjacent(a),[t,a]}},{key:"graphSearch",value:Object(V.a)().mark((function e(n){var t,a,i,r,o=arguments;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Set,(i=[]).push(n);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===t?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.add(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=this.nodes.get(e),i=this.nodes.get(n),r=new Set(t);if(!i||!a)return[];if(r.add(a),e===n)return Array.from(r);var o,c=Object(ht.a)(a.getAdjacents());try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!r.has(l)){var s=this.findPath(l.key,n,r);if(s.length)return s}}}catch(d){c.e(d)}finally{c.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,n){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r&&r.key===n||r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(t.nodes.get(e))})))}return a}},{key:"findAllPaths",value:function(e,n){var t=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=this.nodes.get(e),r=this.nodes.get(n),o=new Set(a);if(!r||!i)return[];if(o.add(i),e===n)return[Array.from(o)];var c=[];return i.getAdjacents().forEach((function(e){o.has(e)||t.findAllPaths(e.key,n,o).forEach((function(e){c.push(e)}))})),c}}]),e}(),xt=function(){function e(n,t){Object(pt.a)(this,e),this.adjacents=void 0,this.key=void 0,this.value=void 0,this.parents=void 0,this.adjacents=new Set,this.key=n,this.value=t,this.parents=new Set}return Object(mt.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}();function gt(e){var n=Ue(e),t=n.package_list,a=n.product,i=function(){if(!t||!a)throw"missing input";var e=new Ot,n=new Map;null===t||void 0===t||t.forEach((function(e){n.set(e.name.toLowerCase(),e)})),null===a||void 0===a||a.dependency_graph.nodes.forEach((function(t){var a=n.get(t.toLowerCase());if(a){var i=a;e.addVertex(i.name,i,xt)}})),a.dependency_graph.edges.forEach((function(n){var t,i,r,o,c=e.nodes.get(null===(t=a.dependency_graph.nodes)||void 0===t||null===(i=t[n[0]])||void 0===i?void 0:i.toLowerCase()),l=e.nodes.get(null===(r=a.dependency_graph.nodes)||void 0===r||null===(o=r[n[1]])||void 0===o?void 0:o.toLowerCase());c&&l&&(e.addEdge(c.key,l.key),l.parents.add(c.key))}));var i=e.addVertex("*App",{name:"App",version:"",index:"",os_name:"",os_version:"",python_version:""},xt);return e.nodes.forEach((function(n){0===n.parents.size&&"*App"!==n.key&&(e.addEdge(i.key,n.key),n.parents.add(i.key))})),e},r=Object(ie.a)({queryKey:["graph",e],enabled:!!t&&!!a,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:r.data,isLoading:r.isLoading,isError:r.isError,loadingProgress:null,loadingText:"Constructing dependency graph"}}var ft=t(64),yt=function(e){var n=e.source,t=e.setHovered,a=e.hovered;return n?Object(p.jsx)(an.a,{alignItems:"center",justifyContent:"center",children:Object(p.jsx)(ft.e,{height:150,width:150,data:n.map((function(e){return a&&(null===a||void 0===a?void 0:a.label)===(null===e||void 0===e?void 0:e.label)?Object(y.a)(Object(y.a)({},e),{},{style:{stroke:"black",strokeWidth:"5px"}}):e})),onValueMouseOver:function(e){return t(e)},onSeriesMouseOut:function(){return t(void 0)}})}):Object(p.jsx)(Pe,{isLoading:!0})},kt=function(e){var n=function(e){var n=gt(e).data,t=function(){var e;if(!n||0===(null===n||void 0===n||null===(e=n.nodes)||void 0===e?void 0:e.size))throw"no packages found";var t={direct:0,indirect:0,roots:0},a=n.nodes.get("*App");if(a){var i=n.graphSearch(a),r=Array.from(i),o=new Set,c=new Set;r.forEach((function(e){c.has(e.key)||(e.parents.has("*App")?(t.roots+=1,o.add(e.key)):Object(Ve.a)(e.parents).some((function(e){return o.has(e)}))?t.direct+=1:t.indirect+=1,c.add(e.key))}))}return t},a=Object(ie.a)({queryKey:["dependency_metric",e],enabled:!!n,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:a.data,isLoading:a.isLoading,isError:a.isError,loadingProgress:null,loadingText:null}}(e.analysis_id),t=n.data,i=Object(a.useState)(),r=Object(g.a)(i,2),o=r[0],c=r[1];return t?Object(p.jsxs)(nt.a,{variant:"outlined",children:[Object(p.jsx)(tt.a,{title:"Project Dependencies",subheader:"Packages are categorized based on their depth in the dependency tree, with roots being the packages defined on the Pipfile"}),Object(p.jsx)(at.a,{children:Object(p.jsxs)(I.a,{container:!0,direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(I.a,{item:!0,md:12,lg:4,children:Object(p.jsx)(yt,{hovered:o,setHovered:c,source:[{label:"Roots",angle:t.roots},{label:"Direct",angle:t.direct},{label:"Indirect",angle:t.indirect}]})}),Object(p.jsx)(I.a,{item:!0,md:12,lg:8,children:Object(p.jsxs)(an.a,{justifyContent:"space-around",width:"100%",children:[Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(an.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Roots"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:"Root Packages"})})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Roots"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:t.roots})})]}),Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(an.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Direct"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:"Direct Packages"})})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Direct"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:t.direct})})]}),Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(an.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Indirect"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:"Indirect Packages"})})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Indirect"===(null===o||void 0===o?void 0:o.label)?"bold":void 0,variant:"h4",children:t.indirect})})]})]})})]})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"})]})},_t=t(57),wt=t.n(_t),St=function(e){var n=e.analysis_id,t=qn(n),i=t.data,r=t.isLoading,o=Object(a.useMemo)((function(){if(i){var e=0,n=0,t=0,a=0,r=0,o=0;return Object.entries(i).forEach((function(i){var c=Object(g.a)(i,2)[1];null===c.metadata.isOsiApproved?(n+=Object.keys(c.packages).length,e++):c.metadata.isOsiApproved?(o+=Object.keys(c.packages).length,r++):(a+=Object.keys(c.packages).length,t++)})),{warnings:e,totalPkgWarnings:n,totalPkgErrors:a,errors:t,approved:r,totalPkgApproved:o}}return{warnings:null,totalPkgWarnings:null,errors:null,totalPkgErrors:null,approved:null,totalPkgApproved:null}}),[i]),c=o.warnings,l=o.errors,s=o.approved,d=o.totalPkgErrors,u=o.totalPkgWarnings,j=o.totalPkgApproved;return i?Object(p.jsxs)(nt.a,{variant:"outlined",children:[Object(p.jsx)(tt.a,{title:"Unapproved Licenses",subheader:"Total number of licenses that are unknown or unapproved by OSI"}),Object(p.jsxs)(at.a,{children:[Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(wt.a,{color:"success"}),Object(p.jsx)(T.a,{variant:"h4",children:"Approved"})]})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:s})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(j," total packages")})})]}),Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(In.a,{color:"warning"}),Object(p.jsx)(T.a,{variant:"h4",children:"Unknown Approval"})]})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:c})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(u," total packages")})})]}),Object(p.jsxs)(I.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(Tn.a,{color:"error"}),Object(p.jsx)(T.a,{variant:"h4",children:"Unapproved"})]})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:l})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(d," total packages")})})]}),0===l&&0===c?Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(wt.a,{color:"success"}),Object(p.jsx)(T.a,{variant:"h4",children:"All licenses are OSI approved"})]}):void 0]})]}):r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"rectangular",height:118})]}):null},Ct=function(e){var n=e.source,t=e.selected,a=i.a.useMemo((function(){if(n)return n.map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return{x:(Date.now()-new Date(null!==a&&void 0!==a?a:Date.now()).getTime())/3154e7,y:0,opacity:.5,id:t}}))}),[n]);return Object(p.jsx)("div",{children:Object(p.jsxs)(ft.a,{margin:{left:8,right:8,bottom:16},height:70,children:[Object(p.jsx)(ft.f,{style:{ticks:{stroke:"#000000"},line:{stroke:"#000000",transform:"translateY(-44px)"},text:{stroke:"none",transform:"translateY(-20px)"}}}),Object(p.jsx)(ft.d,{colorType:"literal",data:a,getOpacity:function(e){return t===e.id?1:.5},getColor:function(e){if(t===e.id)return"#000000"}})]})})},At=t(119),Pt=t.n(At),Et=t(179),It=t.n(Et),Lt=t(234),Tt=t.n(Lt),Rt=t(235),Mt=t.n(Rt),Wt=function(e){var n,t=e.analysis_id,i=vt(t),r=i.data,o=(r=void 0===r?{}:r).unmaintainedPackages,c=i.isLoading,l=i.isError,s=Object(a.useState)(0),d=Object(g.a)(s,2),u=d[0],j=d[1];return c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"rectangular",width:210,height:118})]}):l||!o?null:Object(p.jsxs)(nt.a,{variant:"outlined",children:[Object(p.jsx)(tt.a,{title:"Package Maintenance",subheader:"Which packages are not well maintained or haven't released a new version recently"}),Object(p.jsx)(at.a,{children:Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(I.a,{item:!0,width:"100%",children:Object(p.jsx)(T.a,{textAlign:"center",sx:{marginBottom:1},variant:"body2",children:"Number of months a package last had a release"})}),Object(p.jsx)(I.a,{item:!0,style:{height:"100%",width:"100%"},children:Object(p.jsx)(Ct,{source:o.packages.filter((function(e){return void 0!==e.last_release})).map((function(e){return[e.id,e.last_release]})),selected:o.packages[u].id})}),Object(p.jsxs)(I.a,{item:!0,width:"100%",sx:{marginBottom:2},children:[Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",children:[Object(p.jsx)(fe.a,{onClick:function(){var e,n,t,a,i,r;j(((u-1)%(null!==(e=null===o||void 0===o||null===(n=o.packages)||void 0===n?void 0:n.length)&&void 0!==e?e:0)+(null!==(t=null===o||void 0===o||null===(a=o.packages)||void 0===a?void 0:a.length)&&void 0!==t?t:0))%(null!==(i=null===o||void 0===o||null===(r=o.packages)||void 0===r?void 0:r.length)&&void 0!==i?i:0))},children:Object(p.jsx)(Tt.a,{fontSize:"small"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"".concat(u+1,"/").concat(o.packages.length)}),Object(p.jsx)(fe.a,{onClick:function(){var e,n;j((u+1)%(null!==(e=null===o||void 0===o||null===(n=o.packages)||void 0===n?void 0:n.length)&&void 0!==e?e:0))},children:Object(p.jsx)(Mt.a,{fontSize:"small"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+o.packages[u].id,children:o.packages[u].id})})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[o.packages[u].not_maintained?Object(p.jsx)(It.a,{color:"error",fontSize:"small"}):Object(p.jsx)(Pt.a,{color:"success",fontSize:"small"}),Object(p.jsx)(T.a,{variant:"body2",children:"Package is ".concat(o.packages[u].not_maintained?"not":""," actively maintained according to Security Scorecards")})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[o.packages[u].low_maintainers?Object(p.jsx)(It.a,{color:"error",fontSize:"small"}):Object(p.jsx)(Pt.a,{color:"success",fontSize:"small"}),Object(p.jsx)(T.a,{variant:"body2",children:"Package has ".concat(o.packages[u].low_maintainers?"low number of maintainers on PyPI (less than 3)":"sufficient maintainers on PyPI (more than 3)")})]}),o.packages[u].last_release?Object(p.jsx)(T.a,{sx:{marginLeft:3.5},variant:"body2",children:"Package's last release was on ".concat(new Date(null!==(n=o.packages[u].last_release)&&void 0!==n?n:"").toDateString())}):void 0]}),Object(p.jsx)(I.a,{item:!0,xs:12,sx:{marginBottom:2},children:Object(p.jsx)(W.a,{})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",textAlign:"center",variant:"body1",children:"".concat(Array.from(o.packages.values()).filter((function(e){return e.low_maintainers})).length," out of ").concat(o.total)}),Object(p.jsx)(T.a,{textAlign:"center",variant:"body1",children:"packages have a low number of maintainers ( less than 3 )"})]})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",textAlign:"center",variant:"body1",children:"".concat(Array.from(o.packages.values()).filter((function(e){return e.not_maintained})).length," out of ").concat(o.total)}),Object(p.jsx)(T.a,{textAlign:"center",variant:"body1",children:"packages are not maintained according to Security Scorecards"})]})})]})})]})},Bt=t(123),qt=t.n(Bt);var Dt=function(e){var n,t=e.source,r=e.handleClick,o=Object(a.useState)(null),c=Object(g.a)(o,2),l=c[0],s=c[1],d=Object(a.useState)(null),u=Object(g.a)(d,2),j=u[0],v=u[1],b=function(e){var n,t,a=null!==(n=e&&e.left)&&void 0!==n?n:null,i=null!==(t=e&&e.right)&&void 0!==t?t:null;if(s(a),v(i),a&&i){var o=[];null===m||void 0===m||m.forEach((function(e){var n=e.x>=a&&e.x<=i,t=e.x0>=a&&e.x0<=i,r=a>=e.x0&&a<=e.x,c=i>=e.x0&&i<=e.x;(r||c||n||t)&&o.push.apply(o,Object(Ve.a)(e.pkgs))})),r(o)}else r([])},h=Object(a.useMemo)((function(){if(t)return Math.max.apply(Math,Object(Ve.a)(t.values.map((function(e){return Object(g.a)(e,2)[1]}))))}),[t]),m=i.a.useMemo((function(){if(t&&h)return function(e,n){var t,a=1/0,i=-1/0,r=Object(ht.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;o<a?a=o:o>i&&(i=o)}}catch(j){r.e(j)}finally{r.f()}var c,l=Math.ceil((i-a+1)/n),s=new Array(l).fill(0),d=Object(ht.a)(e);try{for(d.s();!(c=d.n()).done;){var u=c.value;s[Math.floor((u-a)/n)]++}}catch(j){d.e(j)}finally{d.f()}return s}(t.values.map((function(e){return Object(g.a)(e,2)[1]})),1).map((function(e,n){return{color:qt.a.rgb(46,125,50).mix(qt.a.rgb(237,108,2),(n+1)/h).lighten(.25).hex(),selectedColor:qt.a.rgb(46,125,50).mix(qt.a.rgb(237,108,2),(n+1)/h).darken(.25).hex(),x:n,y:0,x0:n+1,y0:e+1,index:n,pkgs:t.values.filter((function(e){return Object(g.a)(e,2)[1]===n+1}))}}))}),[t,h]);return Object(p.jsx)("div",{"data-testid":"plot",children:Object(p.jsxs)(ft.a,{margin:{left:8,right:8},height:150,children:[Object(p.jsx)(ft.f,{tickFormat:function(e){return e.toString()},tickTotal:(null!==(n=null===m||void 0===m?void 0:m.length)&&void 0!==n?n:0)/2,style:{ticks:{stroke:"#000000"},text:{stroke:"none"}}}),Object(p.jsx)(ft.g,{}),Object(p.jsx)(ft.c,{colorType:"literal",data:m,getOpacity:function(e){if(null===l||null===j)return 1;var n=e.x>=l&&e.x<=j,t=e.x0>=l&&e.x0<=j,a=l>=e.x0&&l<=e.x,i=j>=e.x0&&j<=e.x;return a||i||n||t?1:.6}}),Object(p.jsx)(ft.b,{color:"#829AE3",drag:!0,enableY:!1,onDrag:b,onDragEnd:b})]})})},Ft=function(e){var n,t,r=e.analysis_id,o=vt(r).data,c=(o=void 0===o?{}:o).warningPackages,l=Object(a.useState)([]),s=Object(g.a)(l,2),d=s[0],u=s[1];return null!==c&&void 0!==c&&c.values?c?Object(p.jsxs)(nt.a,{variant:"outlined",children:[Object(p.jsx)(tt.a,{title:"Package Warnings",subheader:"The distribution of all package warnings generated by Thoth"}),Object(p.jsx)(at.a,{children:Object(p.jsxs)(I.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(I.a,{item:!0,style:{height:"100%",width:"100%"},children:Object(p.jsx)(Dt,{source:c,handleClick:function(e){u(e)}})}),Object(p.jsxs)(I.a,{item:!0,width:"100%",children:[Object(p.jsx)(T.a,{textAlign:"center",sx:{marginBottom:.5},variant:"body1",fontStyle:"italic",children:d.length>0?"".concat(d.length," packages selected"):"Click and drag on the chart to select packages"}),d.length>0&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Average Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:(d.reduce((function(e,n){return e+Object(g.a)(n,2)[1]}),0)/d.length).toFixed(1)})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Max Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:null===(n=d.sort((function(e,n){return Object(g.a)(e,2)[1]-Object(g.a)(n,2)[1]})).at(-1))||void 0===n?void 0:n[1]})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,sx:{marginBottom:2},children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Min Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:null===(t=d.sort((function(e,n){return Object(g.a)(e,2)[1]-Object(g.a)(n,2)[1]})).at(0))||void 0===t?void 0:t[1]})]}),Array.from(new Set(d.map((function(e){return Object(g.a)(e,2)[1]}))).values()).sort((function(e,n){return n-e})).map((function(e){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(T.a,{color:"gray",variant:"subtitle2",fontStyle:"italic",children:"".concat(e," warnings")}),Object(p.jsx)(W.a,{}),Object(p.jsx)(I.a,{container:!0,spacing:1.5,sx:{marginBottom:1,marginLeft:1},children:d.filter((function(n){return Object(g.a)(n,2)[1]===e})).map((function(e){var n=Object(g.a)(e,1)[0];return Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+n,children:n})},n)}))})]},e)}))]})]})]})})]}):null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"text"}),Object(p.jsx)(et.a,{variant:"rectangular",width:210,height:118})]})},Nt=function(e){var n=e.analysis_id;return Object(p.jsxs)($n.a,{columns:{xs:1,md:2},spacing:3,sx:{mb:3,mt:1},children:[Object(p.jsx)(Zn,{analysis_id:n}),Object(p.jsx)(Ft,{analysis_id:n}),Object(p.jsx)(bt,{analysis_id:n}),Object(p.jsx)(St,{analysis_id:n}),Object(p.jsx)(kt,{analysis_id:n}),Object(p.jsx)(Wt,{analysis_id:n})]})},zt=t(463);var Vt=function(e){var n=e.analysis_id,t=e.selected_package,i=e.onPackageClick,r=Object(a.useState)(""),o=Object(g.a)(r,2),c=o[0],l=o[1],s=Ue(n),d=s.package_list,u=s.justifications,j=Object(a.useMemo)((function(){var e=new Map;return u&&u.forEach((function(n){var t,a,i,r,o=null===n||void 0===n?void 0:n.package_name;o&&e.set(o,{errors:("ERROR"===n.type?1:0)+(null!==(t=null===(a=e.get(o))||void 0===a?void 0:a.errors)&&void 0!==t?t:0),warnings:("WARNING"===n.type?1:0)+(null!==(i=null===(r=e.get(o))||void 0===r?void 0:r.warnings)&&void 0!==i?i:0)})})),e}),[u]);return d&&0!==d.length?Object(p.jsxs)(an.a,{spacing:2,sx:{maxHeight:"100%"},children:[Object(p.jsx)(Y,{onChange:function(e){l(e.target.value)},lefticon:Object(p.jsx)(X.a,{})}),Object(p.jsx)(bn.a,{sx:{overflow:"scroll"},dense:!0,children:d.filter((function(e){return e.name.startsWith(c)})).map((function(e){var n,a,r,o;return Object(p.jsxs)(rt.a,{onClick:function(){return i(e.name)},selected:t===e.name,sx:{borderRadius:1.5},children:[Object(p.jsx)(mn.a,{primary:Object(p.jsx)(T.a,{variant:"h5",children:e.name}),secondary:"v".concat(e.version)}),Object(p.jsx)(zt.a,{children:Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[null!==(n=j.get(e.name))&&void 0!==n&&n.warnings?Object(p.jsx)(jn.a,{variant:"outlined",size:"medium",icon:Object(p.jsx)(In.a,{}),label:null===(a=j.get(e.name))||void 0===a?void 0:a.warnings,color:"warning"}):void 0,null!==(r=j.get(e.name))&&void 0!==r&&r.errors?Object(p.jsx)(jn.a,{variant:"outlined",size:"medium",icon:Object(p.jsx)(Tn.a,{}),label:null===(o=j.get(e.name))||void 0===o?void 0:o.errors,color:"error"}):void 0]})})]},e.name+e.version)}))})]}):null},Ht=t(147),Kt=t.n(Ht),Ut=t(180),Gt=t.n(Ut),Yt=t(238),Jt=t.n(Yt),Xt={manipulation:{enabled:!1},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},Qt=t(153);var Zt=["analysis_id","root","graphHeight"],$t=function(e){var n=e.analysis_id,t=e.root,i=void 0===t?"*App":t,r=e.graphHeight,o=void 0===r?"50vh":r,c=Object(D.a)(e,Zt),l=Object(a.useRef)(null),s=function(e){var n=gt(e).data,t=function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return t=new Map,n.nodes.forEach((function(e){e.adjacents.forEach((function(n){t.set(e.key+n.key,{id:e.key+n.key,to:e.key,from:n.key})}))})),e.abrupt("return",Array.from(t.values()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=Object(ie.a)({queryKey:["vis_graph_edges",e],enabled:!!n,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:a.data,isLoading:a.isLoading,loadingProgress:null,loadingText:null}}(n),d=s.data,u=gt(n).data;return Object(a.useEffect)((function(){if(u&&d){var e=u.nodes.get(i);if(e){var n,t,a=u.findAllNodesOnAllPaths(e,"*App"),r=u.nodes.get("*App");r&&a.set("*App",r);var o=new Qt.a;a.forEach((function(n){var t=Xt.nodes.color.background,a=void 0;"*App"===n.key?(t="#4fc1ea",a={color:"#4fc1ea",strokeWidth:3,size:20}):n.key===(null===e||void 0===e?void 0:e.key)&&(t="#f39200"),o.add(Object(y.a)(Object(y.a)({},n.value),{},{label:n.value.name,id:n.key,color:t,font:a}))}));var c={nodes:o,edges:new Qt.a(null!==d&&void 0!==d?d:[])},s=l.current&&new Qt.b(l.current,c,Xt),j=null===(n=document)||void 0===n||null===(t=n.getElementById("mynetwork"))||void 0===t?void 0:t.getElementsByTagName("canvas")[0],v=function(e){j&&(j.style.cursor=e)};s&&(s.on("hoverNode",(function(){v("grab")})),s.on("blurNode",(function(){v("default")})),s.on("dragStart",(function(){v("grabbing")})),s.on("dragging",(function(){v("grabbing")})),s.on("dragEnd",(function(){v("grab")})))}}}),[i,u,l,d]),Object(p.jsx)("div",Object(y.a)(Object(y.a)({},c),{},{style:{display:"flex",flexFlow:"column nowrap"},children:Object(p.jsx)("div",{ref:l,id:"mynetwork",style:{flex:"1 1 auto",height:o}})}))},ea=t(69),na=t.n(ea),ta=t(419),aa=function(e){var n=e.title,t=e.icon,i=e.children,r=Object(a.useState)(!1),o=Object(g.a)(r,2),c=o[0],l=o[1];return Object(p.jsxs)(L.a,{children:[Object(p.jsxs)(I.a,{container:!0,alignItems:"center",sx:{backgroundColor:c?"action.selected":void 0,borderRadius:"16px"},children:[Object(p.jsx)(I.a,{item:!0,xs:11,children:Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(fe.a,{onClick:function(){return l(!c)},children:Object(p.jsx)(ta.a,{sx:{mr:-1,transform:c?"rotate(0deg)":"rotate(-90deg)",transition:"0.2s"}})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:n})]})}),Object(p.jsx)(I.a,{item:!0,xs:1,children:Object(p.jsx)(L.a,{display:"flex",justifyContent:"flex-end",sx:{marginRight:2},children:t})})]}),Object(p.jsx)(ce.a,{in:c,children:i})]})},ia=function(e){var n=e.tags,t=e.name,a=e.short,i=e.risk,r=e.passing,o=e.justification;return Object(p.jsx)(aa,{title:t,icon:r?Object(p.jsx)(wt.a,{color:"success"}):Object(p.jsx)(na.a,{color:"error"}),children:Object(p.jsxs)(I.a,{container:!0,sx:{marginLeft:5,marginBottom:1,paddingRight:1},children:[Object(p.jsx)(I.a,{item:!0,xs:12,sx:{marginBottom:2},children:Object(p.jsx)(T.a,{variant:"body2",children:a})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{fontWeight:"bolder",variant:"body2",children:"Reason"})}),Object(p.jsx)(I.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsx)(T.a,{variant:"body2",children:o})}),Object(p.jsx)(I.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsxs)(an.a,{alignItems:"center",direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body2",children:"risk: "}),Object(p.jsx)(jn.a,{size:"small",label:i,color:"High"===i?"error":"Medium"==i?"warning":"info"})]})}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsxs)(an.a,{alignItems:"center",direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body2",children:"tags: "}),n.split(", ").map((function(e){return Object(p.jsx)(jn.a,{size:"small",label:e},e)}))]})})]})})};function ra(e,n){var t={Maintained:"actively maintained","Dependency-Update-Tool":"automatic dependency updates","Binary-Artifacts":"binary artifacts","Branch-Protection":"branch protection","CI-Tests":"CI tests","CII-Best-Practices":"CII Best Practices","Code-Review":"code review",Contributors:"contributors",Fuzzing:"fuzzing",Packaging:"published as a package","Pinned-Dependencies":"pinned dependencies",SAST:"static source code analysis","Security-Policy":"security policy","Signed-Releases":"sign tags","Token-Permissions":"least privilege",Vulnerabilities:"vulnerabilities","Dangerous-Workflow":"dangerous",License:"license"}[e];return n.find((function(e){return e.message.includes(t)}))}var oa=function(e){var n=e.package_name,t=e.analysis_id,i=function(e,n){var t=Object(a.useState)([]),i=Object(g.a)(t,2),r=i[0],o=i[1],c=Object(ie.a)(["ossfDefs"],(function(){return Ne("https://raw.githubusercontent.com/ossf/scorecard/main/docs/checks/internal/checks.yaml")})),l=Object(a.useMemo)((function(){if(n&&e)return Array.from(n.values()).filter((function(n){var t=n;return"https://github.com/ossf/scorecard/blob/main/docs/checks.md"===t.link&&t.package_name===e}))}),[n,e]);return Object(a.useEffect)((function(){var e,n;c.data&&o(Object.entries(null!==(e=null===(n=c.data)||void 0===n?void 0:n.checks)&&void 0!==e?e:{}).filter((function(e){return ra(Object(g.a)(e,1)[0],null!==l&&void 0!==l?l:[])})).map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1],i=ra(t,null!==l&&void 0!==l?l:[]);return{tags:null===a||void 0===a?void 0:a.tags,name:t,short:null===a||void 0===a?void 0:a.short,risk:null===a||void 0===a?void 0:a.risk,justification:null===i||void 0===i?void 0:i.message,passing:"WARNING"!==(null===i||void 0===i?void 0:i.type)}})))}),[c.data,l]),r}(n,Ue(t).justifications);return Object(p.jsxs)(nt.a,{variant:"outlined",sx:{marginTop:2},children:[Object(p.jsx)(tt.a,{title:"Security Scorecards",subheader:"Scorecards give consumers of open-source projects an easy way to judge whether their dependencies are safe.",action:Object(p.jsx)(fe.a,{href:"https://github.com/ossf/scorecard/blob/main/docs/checks.md",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})})}),Object(p.jsx)(at.a,{children:Object(p.jsx)(an.a,{children:i.map((function(e){return Object(p.jsx)(ia,Object(y.a)({},e),e.name)}))})})]})},ca=t(236),la=t.n(ca),sa=t(237),da=t.n(sa),ua=["libraries.io","released on PyPI","hosted on GitHub","Release notes","StackOverflow tags","project documentation"],ja=function(e){var n=e.justifications,t=Object(a.useMemo)((function(){var e={"libraries.io":{label:"libraries.io",icon:Object(p.jsx)(ct.a,{}),link:""},"released on PyPI":{label:"PyPI",icon:Object(p.jsx)(ct.a,{}),link:""},"hosted on GitHub":{label:"GitHub",icon:Object(p.jsx)(la.a,{}),link:""},"Release notes":{label:"Release",icon:Object(p.jsx)(da.a,{}),link:""},"StackOverflow tags":{label:"StackOverflow",icon:Object(p.jsx)(ct.a,{}),link:""},"project documentation":{label:"Documentation",icon:Object(p.jsx)(fn.a,{}),link:""}};return n&&n.forEach((function(n){ua.forEach((function(t){var a;n.message.includes(t)&&(e=Object(y.a)(Object(y.a)({},e),{},Object(f.a)({},t,Object(y.a)(Object(y.a)({},e[t]),{},{link:null!==(a=null===n||void 0===n?void 0:n.link)&&void 0!==a?a:""}))))}))})),Object.entries(e).forEach((function(n){var t=Object(g.a)(n,2),a=t[0];""===t[1].link&&delete e[a]})),e}),[n]);return Object(p.jsx)(i.a.Fragment,{children:Object.values(t).map((function(e,n){var t,a;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(W.a,{orientation:"vertical"})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(Yn,{text:null!==(a=e.label)&&void 0!==a?a:"",icon:e.icon,link:null===e||void 0===e?void 0:e.link})},e.label)]},null!==(t=null===e||void 0===e?void 0:e.link)&&void 0!==t?t:""+n)}))})},va=function(e){var n=e.justification,t=e.avatar;return n?Object(p.jsx)(nt.a,{variant:"outlined",sx:{marginTop:2},children:Object(p.jsx)(tt.a,{title:n.message,action:Object(p.jsx)(fe.a,{href:n.link,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})}),avatar:t})}):null},ba=function(e,n,t,a){var i,r,o,c,l,s,d,u,j,v,b,h,p=null===t||void 0===t?void 0:t.filter((function(n){return(null===n||void 0===n?void 0:n.package_name)===(null===e||void 0===e?void 0:e.name)})),m=null===a||void 0===a?void 0:a.nodes.get(null===e||void 0===e?void 0:e.name);return Object(y.a)(Object(y.a)({adjacent:Array.from(null!==(i=null===m||void 0===m?void 0:m.adjacents.values())&&void 0!==i?i:[]).map((function(e){return e.key})),parents:Array.from(null!==(r=null===m||void 0===m?void 0:m.parents.values())&&void 0!==r?r:[])},e),{},{warningsCount:null===p||void 0===p?void 0:p.reduce((function(e,n){return e+n.type==="WARNING"?1:0}),0),errorCount:null===p||void 0===p?void 0:p.reduce((function(e,n){return e+n.type==="ERROR"?1:0}),0),infoCount:null===p||void 0===p?void 0:p.reduce((function(e,n){return e+n.type==="INFO"?1:0}),0),size:null===n||void 0===n||null===(o=n.metadata)||void 0===o||null===(c=o.importlib_metadata)||void 0===c?void 0:c.files.reduce((function(e,n){var t;return e+(null!==(t=null===n||void 0===n?void 0:n.size)&&void 0!==t?t:0)}),0),license:null===n||void 0===n||null===(l=n.metadata)||void 0===l||null===(s=l.importlib_metadata)||void 0===s||null===(d=s.metadata)||void 0===d?void 0:d.License,summary:null===n||void 0===n||null===(u=n.metadata)||void 0===u||null===(j=u.importlib_metadata)||void 0===j||null===(v=j.metadata)||void 0===v?void 0:v.Summary,dependencies:null===n||void 0===n||null===(b=n.metadata)||void 0===b?void 0:b.dependencies,packages:null===n||void 0===n||null===(h=n.metadata)||void 0===h?void 0:h.packages})},ha=function(e){var n,t,r,o,c,l=e.analysis_id,s=e.selectedPackage,d=e.setSelectedPackage,u=void 0===d?function(){}:d,j=function(e,n){var t=gt(n).data,i=Ue(n),r=i.justifications,o=i.package_list,c=Object(a.useMemo)((function(){return null===o||void 0===o?void 0:o.find((function(n){return n.name===e}))}),[o,e]),l=Me(null===c||void 0===c?void 0:c.name,null===c||void 0===c?void 0:c.version,null===c||void 0===c?void 0:c.index,null===c||void 0===c?void 0:c.os_name,null===c||void 0===c?void 0:c.os_version,null===c||void 0===c?void 0:c.python_version),s=Object(ie.a)({queryKey:["package_data",n,e,!!t,!!l],enabled:!!c,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var n;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(c,null===(n=l.data)||void 0===n?void 0:n.data,r,t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:s.data,isLoading:s.isLoading,isError:s.isError,loadingProgress:null,loadingText:"extracting details from package metadata"}}(s,l),v=j.data,b=j.isLoading,h=j.isError,m=j.loadingText,O=Ue(l).justifications,x=Object(E.g)(),g=Object(a.useMemo)((function(){return null===O||void 0===O?void 0:O.filter((function(e){return e.package_name===s}))}),[O,s]),f=Object(a.useMemo)((function(){if(g){var e=[Object(p.jsx)(oa,{analysis_id:l,package_name:s},"scorecard"),Object(p.jsx)(va,{avatar:Object(p.jsx)(Jt.a,{}),justification:g.find((function(e){return e.message.includes("popularity on GitHub")}))},"star")];return g.filter((function(e){return"https://github.com/ossf/scorecard/blob/main/docs/checks.md"!==e.link&&(!e.message.includes("Thoth Search UI")&&(n=e.message,!ua.some((function(e){return n.includes(e)}))));var n})).forEach((function(n,t){e.push(Object(p.jsx)(va,{avatar:"ERROR"===n.type?Object(p.jsx)(Gt.a,{color:"error"}):"WARNING"===n.type?Object(p.jsx)(In.a,{color:"warning"}):Object(p.jsx)(Pn.a,{color:"info"}),justification:n},n.message+t))})),e}}),[g]),y=Object(a.useMemo)((function(){var e=[];return v&&Object(Ve.a)(v.parents).filter((function(e){return"*App"!==e})).forEach((function(n){e.push(n)})),e}),[v]),k=Object(a.useMemo)((function(){if(g){var e=g.find((function(e){return e.message.includes("Thoth Search UI")}));return null===e||void 0===e?void 0:e.link}}),[g]);return b||h||!v?Object(p.jsx)(Pe,{isLoading:b,isError:h,loadingLabel:m}):Object(p.jsxs)(L.a,{sx:{overflow:"scroll"},children:[Object(p.jsxs)(nt.a,{variant:"outlined",sx:{padding:2},children:[Object(p.jsxs)(I.a,{container:!0,alignItems:"center",mb:1,children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h3",children:Object(p.jsx)(rn.a,{underline:"none",href:k,children:Object(p.jsx)("b",{children:null===v||void 0===v?void 0:v.name})})})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{ml:2,variant:"h6",children:v.version})})]}),Object(p.jsxs)(I.a,{container:!0,spacing:1,children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(Yn,{text:null!==(n=v.license)&&void 0!==n?n:"NaN",icon:Object(p.jsx)(Kt.a,{})})}),Object(p.jsx)(ja,{justifications:g})]}),Object(p.jsx)(T.a,{sx:{marginTop:2},variant:"body1",children:v.summary}),!v.summary&&Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",sx:{marginTop:2},children:[Object(p.jsx)(Gt.a,{color:"error",sx:{marginRight:".5rem"}}),Object(p.jsx)(T.a,{mb:0,color:"error",gutterBottom:!0,variant:"body2",children:"The package metadata could not be fetched."})]})]}),f,Object(p.jsxs)(nt.a,{variant:"outlined",sx:{marginTop:2},children:[Object(p.jsx)(tt.a,{title:"Dependency Graph",subheader:Object(p.jsxs)(T.a,{variant:"body1",mb:2,children:[0===(null===(t=Object(Ve.a)(null!==(r=null===v||void 0===v?void 0:v.parents)&&void 0!==r?r:[]).filter((function(e){return"*App"!==e})))||void 0===t?void 0:t.length)?v.name+" is not a dependent of any package in this Python environment":"There are "+(null===(o=Object(Ve.a)(null!==(c=null===v||void 0===v?void 0:v.parents)&&void 0!==c?c:[]).filter((function(e){return"*App"!==e})))||void 0===o?void 0:o.length)+" package(s) that have "+v.name+" as a direct dependency: ",y.map((function(e,n){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(rn.a,{underline:"hover",onClick:function(){u(e),x("../packages/"+e)},children:e})," "]},e+n)}))]})}),Object(p.jsx)(at.a,{children:Object(p.jsx)($t,{analysis_id:l,root:s})})]})]})},pa=function(e){var n=e.analysis_id,t=Object(E.h)(),i=Object(a.useState)(""),r=Object(g.a)(i,2),o=r[0],c=r[1],l=Object(E.g)();return Object(a.useEffect)((function(){t.pkg&&c(t.pkg)}),[t.pkg]),Object(p.jsx)(L.a,{flexDirection:"column",display:"flex",height:"100%",justifyContent:"center",alignItems:"flex-start",children:Object(p.jsxs)(L.a,{flexGrow:1,display:"flex",sx:{overflowY:"hidden",width:"100%"},children:[Object(p.jsx)(L.a,{overflow:"auto",sx:{marginRight:2,minWidth:"500px"},children:Object(p.jsx)(Vt,{selected_package:o,analysis_id:n,onPackageClick:function(e){c(e),l("../packages/"+e)}})}),Object(p.jsx)(L.a,{overflow:"auto",sx:{minWidth:"50%",width:"100%"},children:o?Object(p.jsx)(ha,{selectedPackage:o,analysis_id:n,setSelectedPackage:function(e){c(e),l("../packages/"+e)}}):Object(p.jsxs)(L.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Choose a package"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"Click on a package from the packages found in the Pipfile.lock"})]})})]})})},ma=t(469),Oa=t(422),xa=t(470),ga=t(471),fa=t(448),ya=t(431),ka=t(458),_a=t(472),wa=t(434),Sa=t(240),Ca=t.n(Sa),Aa=t(420),Pa=t(468),Ea=t(239),Ia=t.n(Ea),La=t(421);function Ta(e){var n=e.children,t=e.window,a=Object(Aa.a)({target:t?t():void 0,disableHysteresis:!0,threshold:100});return Object(p.jsx)(La.a,{in:a,children:Object(p.jsx)(L.a,{onClick:function(e){var n=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");n&&n.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:n})})}var Ra=function(e){return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("div",{id:"back-to-top-anchor"}),e.children,Object(p.jsx)(Ta,Object(y.a)(Object(y.a)({},e),{},{children:Object(p.jsx)(Pa.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(p.jsx)(Ia.a,{})})}))]})},Ma=function(e){var n,t,r,o,c,l=e.analysis_id,s=Object(E.h)(),u=Object(E.g)(),j=Ue(l).data;Object(a.useEffect)((function(){s.cmp&&m(s.cmp)}),[s.cmp]);var v=i.a.useState(null!==(n=null===j||void 0===j||null===(t=j.metadata)||void 0===t?void 0:t.document_id)&&void 0!==n?n:""),b=Object(g.a)(v,2),h=b[0],m=b[1],O=Ue(h).data,x=i.a.useState(!1),f=Object(g.a)(x,2),k=f[0],_=f[1],w=i.a.useState(!1),S=Object(g.a)(w,2),C=S[0],A=S[1],P=i.a.useState(""),R=Object(g.a)(P,2),M=R[0],W=R[1],B=Object(a.useState)([]),q=Object(g.a)(B,2),D=q[0],F=q[1];Object(a.useEffect)((function(){var e=!0;return function(){n.apply(this,arguments)}(),function(){e=!1};function n(){return(n=Object(H.a)(Object(V.a)().mark((function n(){var t;return Object(V.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return F([]),n.next=3,Promise.all(U.map((function(e){return He(e).then((function(n){var t,a,i,r,o,c,l,s,d,u,j,v,b=null===(t=n.data)||void 0===t||null===(a=t.result)||void 0===a||null===(i=a.parameters)||void 0===i||null===(r=i.project)||void 0===r?void 0:r.runtime_environment;return b?{id:e,timestamp:null!==(o=null===(c=n.data)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.timestamp)&&void 0!==o?o:0,readable:Object(p.jsxs)(T.a,{children:[Object(p.jsx)("i",{children:new Date(null===(s=n.data)||void 0===s||null===(d=s.metadata)||void 0===d?void 0:d.datetime).toLocaleString()})," : ",Object(p.jsx)("b",{children:null!==(u=null===b||void 0===b?void 0:b.name)&&void 0!==u?u:"N/A"}),","," ",null===b||void 0===b||null===(j=b.operating_system)||void 0===j?void 0:j.name,"-",null===b||void 0===b||null===(v=b.operating_system)||void 0===v?void 0:v.version," (Python ",null===b||void 0===b?void 0:b.python_version,")"]})}:null})).catch((function(){return null}))})));case 3:if(t=n.sent,e){n.next=6;break}return n.abrupt("return");case 6:F(t);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}),[]);var N=function(e,n){"backdropClick"!==n&&_(!1)},z=function(){var e=Object(H.a)(Object(V.a)().mark((function e(){return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=3;break}return e.next=3,He(M).then((function(){var e,n=(null!==(e=localStorage.getItem($))&&void 0!==e?e:"").split(",");n.includes(M)||(n.push(M),localStorage.setItem($,n.join(","))),W(""),_(!1),m(M),u("../compare/"+M)})).catch((function(){W(null)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(a.useMemo)((function(){var e=[],n=localStorage.getItem($);return n&&e.push.apply(e,Object(Ve.a)(n.split(",").filter((function(e){return""!==e})))),e}),[""===M]),G={old:{text:"#b31412",background:"#fad2cf"},new:{text:"#217f70",background:"#e3fbf7"},change:{text:"#b38012",background:"#fae7cf"},equal:{text:void 0,background:void 0}},Y=function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},r=e?a(e):null,o=n?a(n):null;return r&&o?r!==o?Object(p.jsxs)(i.a.Fragment,{children:[J(r,"change",t),J(o,"change",t)]},t):C?void 0:Object(p.jsxs)(i.a.Fragment,{children:[J(r,"equal",t),J(o,"equal",t)]},t):r?Object(p.jsxs)(i.a.Fragment,{children:[J(r,"old",t),J(o,"",t)]},t):o?Object(p.jsxs)(i.a.Fragment,{children:[J(r,"",t),J(o,"new",t)]},t):void 0},J=function(e,n,t){var a={height:"100%",paddingBottom:.25,paddingTop:.25,borderRadius:0,borderStyle:"hidden solid hidden solid",overflow:"hidden"};return n?Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(K.a,{variant:"outlined",sx:Object(y.a)({backgroundColor:G[n].background},a),children:Object(p.jsxs)(an.a,{direction:"row",children:["equal"!==n?Object(p.jsx)(T.a,{fontWeight:"bold",sx:{textAlign:"center",minWidth:"2rem",color:G[n].text},variant:"body2",children:"old"===n?"-":"new"===n?"+":"~"}):Object(p.jsx)(L.a,{sx:{minWidth:"2rem"}}),t?Object(p.jsx)(T.a,{sx:{marginRight:1,color:G[n].text},variant:"body2",fontWeight:"bold",children:t+":"}):void 0,Object(p.jsx)(T.a,{sx:{color:G[n].text},display:"inline",variant:"body2",children:e.toString()})]})})}):Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(K.a,{variant:"outlined",sx:Object(y.a)({backgroundColor:G.equal.background},a),children:Object(p.jsx)(L.a,{})})})},X=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(y.a)({paddingLeft:4,paddingBottom:1,paddingTop:4,borderRadius:0,borderStyle:"hidden solid hidden solid"},t);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(K.a,{variant:"outlined",sx:Object(y.a)({},a),children:Object(p.jsx)(T.a,{variant:e,children:n})})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(K.a,{variant:"outlined",sx:Object(y.a)({},a),children:Object(p.jsx)(T.a,{variant:e,children:n})})})]})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=e.map((function(e){return JSON.stringify(e)})),i=n.map((function(e){return JSON.stringify(e)})),r=new Set(a),o=new Set(i),c=Object(Ve.a)(new Set([].concat(Object(Ve.a)(a),Object(Ve.a)(i))));return c.sort().map((function(e){var n=JSON.parse(e);return Y(r.has(e)?n:void 0,o.has(e)?n:void 0,void 0,t)}))},Z=function(e,n){var t,a,r,o,c,l,s,d,u,j,v,b,h,m,O,x,g,f,y,k,_=Object(Ve.a)(new Set([].concat(Object(Ve.a)(Object.keys(null!==(t=null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"])&&void 0!==t?t:{})),Object(Ve.a)(Object.keys(null!==(r=null===n||void 0===n||null===(o=n.requirements)||void 0===o?void 0:o["dev-packages"])&&void 0!==r?r:{}))))),w=Object(Ve.a)(new Set([].concat(Object(Ve.a)(Object.keys(null!==(c=null===e||void 0===e||null===(l=e.requirements)||void 0===l?void 0:l.packages)&&void 0!==c?c:{})),Object(Ve.a)(Object.keys(null!==(s=null===n||void 0===n||null===(d=n.requirements)||void 0===d?void 0:d.packages)&&void 0!==s?s:{}))))),S=Object(Ve.a)(new Set([].concat(Object(Ve.a)(Object.keys(null!==(u=null===e||void 0===e||null===(j=e.requirements_locked)||void 0===j?void 0:j.default)&&void 0!==u?u:{})),Object(Ve.a)(Object.keys(null!==(v=null===n||void 0===n||null===(b=n.requirements_locked)||void 0===b?void 0:b.default)&&void 0!==v?v:{})))));return Object(p.jsxs)(i.a.Fragment,{children:[_.length>0?X("h6","Pipfile Dev Packages",{paddingTop:.5,paddingBottom:.5}):void 0,_.map((function(t){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"][t],null===n||void 0===n||null===(i=n.requirements)||void 0===i?void 0:i["dev-packages"][t],t)})),w.length>0?X("h6","Pipfile Packages",{paddingTop:.5,paddingBottom:.5}):void 0,w.map((function(t){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a.packages[t],null===n||void 0===n||null===(i=n.requirements)||void 0===i?void 0:i.packages[t],t)})),X("h6","Pipfile.lock Sources"),Q(null===e||void 0===e||null===(h=e.requirements_locked)||void 0===h||null===(m=h._meta)||void 0===m?void 0:m.sources,null===n||void 0===n||null===(O=n.requirements_locked)||void 0===O||null===(x=O._meta)||void 0===x?void 0:x.sources,(function(e){return"".concat(e.name," (").concat(e.url,")")})),X("h6","Pipfile.lock Packages"),S.map((function(t){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements_locked)||void 0===a?void 0:a.default[t],null===n||void 0===n||null===(i=n.requirements_locked)||void 0===i?void 0:i.default[t],t,(function(e){return null===e||void 0===e?void 0:e.version}))})),X("h6","Runtime Environment"),["name","python_version","cuda_version","openblas_version","openmpi_version","cudnn_version","mkl_version","platform","base_image"].map((function(t){var a,i;return Y(null===e||void 0===e||null===(a=e.runtime_environment)||void 0===a?void 0:a[t],null===n||void 0===n||null===(i=n.runtime_environment)||void 0===i?void 0:i[t],t)})),Y(null===e||void 0===e||null===(g=e.runtime_environment)||void 0===g?void 0:g.operating_system,null===e||void 0===e||null===(f=e.runtime_environment)||void 0===f?void 0:f.operating_system,"operating_system",(function(e){return e.name+" "+e.version})),Y(null===e||void 0===e||null===(y=e.runtime_environment)||void 0===y?void 0:y.hardware,null===e||void 0===e||null===(k=e.runtime_environment)||void 0===k?void 0:k.hardware,"hardware",(function(e){var n,t,a,i="";if(i+=null!==(n=e.cpu_model)&&void 0!==n?n:" ",i+=null!==(t=e.cpu_family)&&void 0!==t?t:" ",(i+=null!==(a=e.gpu_model)&&void 0!==a?a:" ").trim())return i}))]})},ee=function(e,n){var t,a,i,r,o,c,l,s,d,u,j,v,b,h,m,O,x,g,f,y,k,_,w,S,C,A,P,E,I,L,T,R,M,W,B,q,D,F,N,z,V,H,K,U,G,J,$,ee,ne,te,ae,ie,re,oe;return Object(p.jsxs)(p.Fragment,{children:[X("h5","Result",{paddingTop:0}),Y(null===e||void 0===e||null===(t=e.result)||void 0===t||null===(a=t.report)||void 0===a?void 0:a.accepted_final_states_count,null===n||void 0===n||null===(i=n.result)||void 0===i||null===(r=i.report)||void 0===r?void 0:r.accepted_final_states_count,"accepted_final_states_count"),Y(null===e||void 0===e||null===(o=e.result)||void 0===o||null===(c=o.report)||void 0===c?void 0:c.discarded_final_states_count,null===n||void 0===n||null===(l=n.result)||void 0===l||null===(s=l.report)||void 0===s?void 0:s.discarded_final_states_count,"discarded_final_states_count"),Y(null===e||void 0===e||null===(d=e.result)||void 0===d||null===(u=d.report)||void 0===u?void 0:u.resolver_iterations,null===n||void 0===n||null===(j=n.result)||void 0===j||null===(v=j.report)||void 0===v?void 0:v.resolver_iterations,"resolver_iterations"),Y(null===e||void 0===e||null===(b=e.result)||void 0===b||null===(h=b.report)||void 0===h?void 0:h.pipeline,null===n||void 0===n||null===(m=n.result)||void 0===m||null===(O=m.report)||void 0===O?void 0:O.pipeline,"pipeline"),Z(null===e||void 0===e||null===(x=e.result)||void 0===x||null===(g=x.report)||void 0===g||null===(f=g.products)||void 0===f||null===(y=f[0])||void 0===y?void 0:y.project,null===n||void 0===n||null===(k=n.result)||void 0===k||null===(_=k.report)||void 0===_||null===(w=_.products)||void 0===w||null===(S=w[0])||void 0===S?void 0:S.project),X("h6","Advised Manifest Changes"),Q(null!==(C=null===e||void 0===e||null===(A=e.result)||void 0===A||null===(P=A.report)||void 0===P||null===(E=P.products)||void 0===E||null===(I=E[0])||void 0===I?void 0:I.advised_manifest_changes)&&void 0!==C?C:[],null!==(L=null===n||void 0===n||null===(T=n.result)||void 0===T||null===(R=T.report)||void 0===R||null===(M=R.products)||void 0===M||null===(W=M[0])||void 0===W?void 0:W.advised_manifest_changes)&&void 0!==L?L:[],(function(e){var n="";return e.forEach((function(e){var t,a,i,r,o,c;n+="[ ".concat(null===e||void 0===e||null===(t=e.patch)||void 0===t?void 0:t.path,"; ").concat(null===e||void 0===e||null===(a=e.patch)||void 0===a?void 0:a.op,"; ").concat(null===e||void 0===e||null===(i=e.patch)||void 0===i||null===(r=i.value)||void 0===r?void 0:r.name,": ").concat(null===e||void 0===e||null===(o=e.patch)||void 0===o||null===(c=o.value)||void 0===c?void 0:c.value," ]")})),n})),X("h6","Stack Info"),Q(null===e||void 0===e||null===(B=e.result)||void 0===B||null===(q=B.report)||void 0===q?void 0:q.stack_info,null===n||void 0===n||null===(D=n.result)||void 0===D||null===(F=D.report)||void 0===F?void 0:F.stack_info,(function(e){return e.message})),X("h5","Metadata"),["document_id","analyzer","analyzer_version","datetime","thoth_deployment_name"].map((function(t){var a,i;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a[t],null===(i=n.metadata)||void 0===i?void 0:i[t],t)})),Y(null===e||void 0===e||null===(N=e.result)||void 0===N?void 0:N.error_msg,null===n||void 0===n||null===(z=n.result)||void 0===z?void 0:z.error_msg,"error_msg"),X("h6","Arguments"),["beam_width","constraints","count","dev","labels","library_usage","limit","limit_latest_versions","no_pretty","output","pipeline","plot","predictor","recommendation_type","requirements","requirements_format","requirements_locked","runtime_environment","seed","user_stack_scoring"].map((function(t){var a,i,r,o,c,l;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.arguments)||void 0===i||null===(r=i.advise)||void 0===r?void 0:r[t],null===n||void 0===n||null===(o=n.metadata)||void 0===o||null===(c=o.arguments)||void 0===c||null===(l=c.advise)||void 0===l?void 0:l[t],t)})),X("h6","Distribution"),["codename","id","like","version"].map((function(t){var a,i,r,o;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.distribution)||void 0===i?void 0:i[t],null===n||void 0===n||null===(r=n.metadata)||void 0===r||null===(o=r.distribution)||void 0===o?void 0:o[t],t)})),X("h6","OS Release"),["id","name","platform_id","version"].map((function(t){var a,i,r,o;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.os_release)||void 0===i?void 0:i[t],null===n||void 0===n||null===(r=n.metadata)||void 0===r||null===(o=r.os_release)||void 0===o?void 0:o[t],t)})),X("h6","Python"),Y(null===e||void 0===e||null===(V=e.metadata)||void 0===V?void 0:V.python,null===n||void 0===n||null===(H=n.metadata)||void 0===H?void 0:H.python,"version",(function(e){return"".concat(e.major,".").concat(e.minor,".").concat(e.micro)})),Y(null===e||void 0===e||null===(K=e.metadata)||void 0===K||null===(U=K.python)||void 0===U?void 0:U.api_version,null===n||void 0===n||null===(G=n.metadata)||void 0===G||null===(J=G.python)||void 0===J?void 0:J.api_version,"api_version"),Y(null===e||void 0===e||null===($=e.metadata)||void 0===$||null===(ee=$.python)||void 0===ee?void 0:ee.implementation_name,null===n||void 0===n||null===(ne=n.metadata)||void 0===ne||null===(te=ne.python)||void 0===te?void 0:te.implementation_name,"implementation_name"),Y(null===e||void 0===e||null===(ae=e.metadata)||void 0===ae||null===(ie=ae.python)||void 0===ie?void 0:ie.releaselevel,null===n||void 0===n||null===(re=n.metadata)||void 0===re||null===(oe=re.python)||void 0===oe?void 0:oe.releaselevel,"release level")]})},ne=Object(a.useMemo)((function(){var e,n,t,a,r,o;return j&&O?Object(p.jsxs)(p.Fragment,{children:[ee(j,O),X("body1"," ",{borderBottomStyle:"solid",borderRadius:void 0,borderTopLeftRadius:0,borderTopRightRadius:0})]}):"Original Lockfile"===h?Object(p.jsxs)(i.a.Fragment,{children:[Z(null===j||void 0===j||null===(e=j.result)||void 0===e||null===(n=e.report)||void 0===n||null===(t=n.products)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.project,null===j||void 0===j||null===(r=j.result)||void 0===r||null===(o=r.parameters)||void 0===o?void 0:o.project),X("body1"," ",{borderBottomStyle:"solid",borderRadius:void 0,borderTopLeftRadius:0,borderTopRightRadius:0})]}):void 0}),[j,O,C]);return j?Object(p.jsx)(Ra,{children:Object(p.jsxs)(L.a,{children:[Object(p.jsxs)(ma.a,{disableEscapeKeyDown:!0,open:k,onClose:N,children:[Object(p.jsx)(Oa.a,{children:"Import another Advise document"}),Object(p.jsx)(xa.a,{children:Object(p.jsx)(L.a,{component:"form",sx:{display:"flex",flexWrap:"wrap"},children:Object(p.jsx)(le.a,{error:null===M,onChange:function(e){return W(e.target.value)},label:"Document ID",variant:"outlined",size:"small"})})}),Object(p.jsxs)(ga.a,{children:[Object(p.jsx)(d.a,{onClick:function(){return N()},children:"Cancel"}),Object(p.jsx)(d.a,{onClick:function(){return z()},children:"Import"})]})]}),Object(p.jsxs)(I.a,{container:!0,mb:1,columnSpacing:10,children:[Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(K.a,{variant:"outlined",sx:{height:"100%",borderTopStyle:"solid",borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingBottom:4,paddingTop:4,borderStyle:"solid solid hidden solid"},children:Object(p.jsx)(T.a,{sx:{textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},fontWeight:"bold",variant:"h6",children:"Current Advise Document"})})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsxs)(K.a,{variant:"outlined",sx:{height:"100%",borderTopStyle:"solid",borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingBottom:4,paddingTop:4,borderStyle:"solid solid hidden solid"},children:[Object(p.jsxs)(an.a,{direction:"row",spacing:1,sx:{marginX:"10%"},children:[Object(p.jsx)(fa.a,{fullWidth:!0,children:Object(p.jsxs)(ya.a,{value:h,displayEmpty:!0,onChange:function(e){m(e.target.value),u("../compare/"+e.target.value)},size:"small",children:[Object(p.jsx)(ka.a,{disabled:!0,value:"",children:Object(p.jsx)("em",{children:"Select a comparison"})}),(null===j||void 0===j||null===(r=j.result)||void 0===r||null===(o=r.parameters)||void 0===o||null===(c=o.project)||void 0===c?void 0:c.requirements_locked)&&Object(p.jsx)(ka.a,{value:"Original Lockfile",children:"Original Lockfile"}),D.sort((function(e,n){return(n?n.timestamp:0)-(e?e.timestamp:0)})).map((function(e){if(e)return Object(p.jsx)(ka.a,{value:e.id,children:e.readable},e.id)}))]})}),Object(p.jsx)(fe.a,{onClick:function(){_(!0)},children:Object(p.jsx)(Ca.a,{})})]}),Object(p.jsx)(_a.a,{sx:{marginX:"10%",marginTop:.5},control:Object(p.jsx)(wa.a,{defaultChecked:!0,checked:C,onChange:function(e){return A(e.target.checked)}}),label:"Differences only"})]})}),ne]})]})}):Object(p.jsxs)(L.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Compare not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The adviser has not finished resolving packages"})]})},Wa=function(e){var n=e.analysis_id,t=Ye(n).log,i=Object(a.useMemo)((function(){return null===t||void 0===t?void 0:t.split("\n").slice(0,20).map((function(e){var n;try{n=JSON.parse(e)}catch(t){return{}}return n?{name:n.name,levelname:n.levelname,module:n.module,lineno:n.lineno,funcname:n.funcname,created:n.created,asctime:n.asctime,msecs:n.msecs,relative_created:n.relative_created,process:n.process,message:n.message}:{}}))}),[t]);return Object(p.jsx)(Ra,{children:Object(p.jsx)(pe.a,{component:K.a,variant:"outlined",children:Object(p.jsxs)(me.a,{size:"small","aria-label":"a dense table",stickyHeader:!0,children:[Object(p.jsx)(ke.a,{children:Object(p.jsxs)(xe.a,{children:[Object(p.jsx)(ge.a,{children:"Level"}),Object(p.jsx)(ge.a,{align:"left",children:"Name"}),Object(p.jsx)(ge.a,{align:"left",children:"Function"}),Object(p.jsx)(ge.a,{align:"right",children:"Line Number"}),Object(p.jsx)(ge.a,{align:"right",children:"Process"}),Object(p.jsx)(ge.a,{align:"left",children:"Message"}),Object(p.jsx)(ge.a,{align:"right",children:"Time"})]})}),Object(p.jsx)(Oe.a,{children:null===i||void 0===i?void 0:i.map((function(e){var n,t;return Object(p.jsxs)(xe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(p.jsx)(ge.a,{component:"th",scope:"row",children:e.levelname?Object(p.jsx)(jn.a,{color:null!==(n=null===e||void 0===e||null===(t=e.levelname)||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"default",label:e.levelname}):void 0}),Object(p.jsx)(ge.a,{align:"left",children:e.name}),Object(p.jsx)(ge.a,{align:"left",children:e.funcname}),Object(p.jsx)(ge.a,{align:"right",children:e.lineno}),Object(p.jsx)(ge.a,{align:"right",children:e.process}),Object(p.jsx)(ge.a,{align:"left",children:e.message}),Object(p.jsx)(ge.a,{align:"right",children:e.asctime})]},e.created)}))})]})})})},Ba=function(e){var n=e.url,t=e.title,a=e.avatar,r=e.subheader,o=e.children,c=Object(B.a)(),l=Object(q.a)(c.breakpoints.down("md"));return Object(p.jsx)(i.a.Fragment,{children:l?Object(p.jsx)(nt.a,{variant:"outlined",children:Object(p.jsx)(tt.a,{title:t,titleTypographyProps:{variant:"h6"},action:n?Object(p.jsx)(fe.a,{href:null!==n&&void 0!==n?n:"",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})}):void 0,avatar:a})}):Object(p.jsxs)(nt.a,{variant:"outlined",children:[Object(p.jsx)(tt.a,{title:t,subheader:r,action:n?Object(p.jsx)(fe.a,{href:null!==n&&void 0!==n?n:"",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})}):void 0}),Object(p.jsx)(at.a,{children:o})]})},n)},qa=["children"],Da=function(e){var n=e.items,t=e.primaryTypographyProps,r=e.secondaryTypographyProps,o=e.isButton,c=void 0!==o&&o,l=Object(a.useState)(),s=Object(g.a)(l,2),d=s[0],u=s[1];function j(e){var n=e.children,t=Object(D.a)(e,qa);return c?Object(p.jsx)(rt.a,Object(y.a)(Object(y.a)({},t),{},{children:n})):Object(p.jsx)(hn.a,Object(y.a)(Object(y.a)({disableGutters:!0},t),{},{children:n}))}return Object(p.jsx)(bn.a,{dense:!0,children:n.map((function(e,n){var a;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(j,{selected:c&&d===n,secondaryAction:null!==(a=e.action)&&void 0!==a?a:e.expandedContent?Object(p.jsx)(ta.a,{sx:{mr:-1,transform:d===n?"rotate(0deg)":"rotate(-90deg)",transition:"0.2s"}}):void 0,sx:{borderRadius:"16px"},onClick:function(){return u(d===n?void 0:n)},children:[e.icon&&Object(p.jsx)(pn.a,{children:e.icon}),Object(p.jsx)(mn.a,{primaryTypographyProps:t,secondaryTypographyProps:r,primary:e.title,secondary:e.subtitle})]},n),e.expandedContent&&Object(p.jsx)(ce.a,{in:d===n,children:e.expandedContent})]},n)}))})},Fa=function(e){var n=e.analysis_id,t=Ue(n).stack_info,i=Object(a.useMemo)((function(){if(t){var e=0;return[t.filter((function(e){return"https://thoth-station.ninja/j/env"===e.link})).map((function(n){return e+=n.message.startsWith("No")?0:1,{icon:n.message.startsWith("No")?Object(p.jsx)(na.a,{color:"error"}):Object(p.jsx)(wt.a,{color:"success"}),title:n.message}})),e]}return[[],0]}),[t]),r=Object(g.a)(i,2),o=r[0],c=r[1];return Object(p.jsx)(Ba,{title:"Environment Parameters",subheader:"The advisor input was provided with ".concat(c," environment parameters"),avatar:Object(p.jsx)(jn.a,{icon:Object(p.jsx)(Pn.a,{}),label:c,color:"info"}),url:"https://thoth-station.ninja/j/env",children:Object(p.jsx)(Da,{items:o})})},Na=function(e){var n=e.analysis_id,t=Ue(n).stack_info,i=Object(a.useMemo)((function(){return t?t.filter((function(e){return"https://thoth-station.ninja/j/install_error"===e.link})).map((function(e){var n,t=e.message.match(/(?<=').*?(?=')/g),a=e.message.match(/(?<=environment: ).*/);return{title:null!==(n=null===t||void 0===t?void 0:t[0])&&void 0!==n?n:"_unknown",subtitle:null===t||void 0===t?void 0:t[2],expandedContent:Object(p.jsx)(hn.a,{children:Object(p.jsx)(mn.a,{inset:!0,secondary:null===a||void 0===a?void 0:a[0]})}),icon:Object(p.jsx)(jn.a,{label:null===a||void 0===a?void 0:a[0].split(", ").length,color:"error"})}})).filter((function(e){return"_unknown"!==e.title})):[]}),[]);return Object(p.jsx)(Ba,{title:"Installation Errors",subheader:"The given package & version combinations were removed from the resolution process as they produced errors during installation in the given environment",avatar:Object(p.jsx)(jn.a,{icon:Object(p.jsx)(Tn.a,{}),label:i.length,color:"error"}),url:"https://thoth-station.ninja/j/install_error",children:Object(p.jsx)(Da,{isButton:!0,items:i})})},za=function(e){var n=e.analysis_id,t=e.ignoreLinks,i=void 0===t?["https://thoth-station.ninja/j/install_error","https://thoth-station.ninja/j/env","https://thoth-station.ninja/j/rules"]:t,r=Ue(n).stack_info,o=Object(a.useMemo)((function(){if(r){var e=new Set;r.forEach((function(n){return e.add(n.link)}));var n=new Map;r.filter((function(n){return!i.includes(n.link)&&e.has(n.link)})).forEach((function(e){var t;n.set(e.link,(null!==(t=n.get(e.link))&&void 0!==t?t:[]).concat(e))}));var t=function(e){var n=Object(g.a)(e,2)[1];return{title:n.map((function(e){return Object(p.jsx)(T.a,{variant:"body2",children:e.message},e.message)})),icon:Object(p.jsx)(L.a,{display:"flex",alignContent:"center",children:"ERROR"===n[0].type?Object(p.jsx)(Tn.a,{color:"error"}):"WARNING"===n[0].type?Object(p.jsx)(In.a,{color:"warning"}):Object(p.jsx)(Pn.a,{color:"info"})}),action:Object(p.jsx)(fe.a,{href:n[0].link,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(ct.a,{})})}};return[Array.from(n.entries()).filter((function(e){return Object(g.a)(e,2)[1].some((function(e){return e.message.includes("use")||e.message.includes("Use")}))})).map(t),Array.from(n.entries()).filter((function(e){return Object(g.a)(e,2)[1].some((function(e){return!e.message.includes("use")||e.message.includes("Use")}))})).map(t),{info:Array.from(n.values()).reduce((function(e,n){return e+("INFO"===n[0].type?1:0)}),0),warning:Array.from(n.values()).reduce((function(e,n){return e+("WARNING"===n[0].type?1:0)}),0),error:Array.from(n.values()).reduce((function(e,n){return e+("ERROR"===n[0].type?1:0)}),0)}]}return[null,null,null]}),[r]),c=Object(g.a)(o,3),l=c[0],s=c[1],d=c[2];return Object(p.jsxs)(Ba,{title:"Other Stack Info",avatar:Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[null!==d&&void 0!==d&&d.info?Object(p.jsx)(jn.a,{icon:Object(p.jsx)(Pn.a,{}),label:d.info,color:"info"}):void 0,null!==d&&void 0!==d&&d.warning?Object(p.jsx)(jn.a,{icon:Object(p.jsx)(In.a,{}),label:d.warning,color:"warning"}):void 0,null!==d&&void 0!==d&&d.error?Object(p.jsx)(jn.a,{icon:Object(p.jsx)(Tn.a,{}),label:d.error,color:"error"}):void 0]}),children:[Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:"Recommended Actions"}),Object(p.jsx)(Da,{items:null!==l&&void 0!==l?l:[]}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:"Other Information"}),Object(p.jsx)(Da,{items:null!==s&&void 0!==s?s:[]})]})},Va=function(e){var n=e.analysis_id,t=Ue(n).stack_info,r=Object(a.useMemo)((function(){if(t){var e=new Map;return t.filter((function(e){return"https://thoth-station.ninja/j/rules"===e.link})).forEach((function(n){var t,a=n.message.match(/(?<=').*?(?=')/g),i=n.message.match(/(?<=rule: ).*/);a&&i&&e.set(i[0],(null!==(t=e.get(i[0]))&&void 0!==t?t:[]).concat({package:null===a||void 0===a?void 0:a[0],constraint:null===a||void 0===a?void 0:a[2],index:null===a||void 0===a?void 0:a[4]}))})),Array.from(e.entries()).map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return{title:t,expandedContent:Object(p.jsxs)(I.a,{container:!0,sx:{marginLeft:1,paddingRight:1},children:[Object(p.jsx)(I.a,{item:!0,xs:5,children:Object(p.jsx)(T.a,{variant:"body2",children:"Package"})}),Object(p.jsx)(I.a,{item:!0,xs:2,textAlign:"center",children:Object(p.jsx)(T.a,{variant:"body2",children:"Constraint"})}),Object(p.jsx)(I.a,{item:!0,xs:5,textAlign:"right",children:Object(p.jsx)(T.a,{variant:"body2",children:"Index"})}),Object(p.jsx)(I.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsx)(W.a,{flexItem:!0})}),a.map((function(e){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(I.a,{item:!0,xs:5,children:e.package}),Object(p.jsx)(I.a,{item:!0,xs:2,textAlign:"center",children:e.constraint}),Object(p.jsx)(I.a,{item:!0,xs:5,textAlign:"right",children:e.index})]},e.package+e.index)}))]})}}))}return[]}),[]);return Object(p.jsx)(Ba,{title:"Solver Rules",subheader:"One or multiple packages were removed based on Python solver rules configured",avatar:Object(p.jsx)(jn.a,{icon:Object(p.jsx)(Tn.a,{}),label:r.length,color:"error"}),url:"https://thoth-station.ninja/j/install_error",children:Object(p.jsx)(Da,{primaryTypographyProps:{variant:"button",fontWeight:"bold"},isButton:!0,items:r})})},Ha=function(e){var n=e.analysis_id;return Object(a.useContext)(_).loading.graph?Object(p.jsxs)(L.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Stack info not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The adviser has not finished resolving packages"})]}):Object(p.jsxs)($n.a,{columns:{sm:1,lg:2,xl:4},children:[Object(p.jsx)(Fa,{analysis_id:n}),Object(p.jsx)(Na,{analysis_id:n}),Object(p.jsx)(Va,{analysis_id:n}),Object(p.jsx)(za,{analysis_id:n})]})},Ka=t(473),Ua=t(242),Ga=t.n(Ua),Ya=t(181),Ja=t.n(Ya),Xa=t(241),Qa=function(e){var n=e.itemKey,t=e.itemSubKey,a=e.value,i=e.handleSubmit,r=e.label,o=e.editMode;return Object(p.jsx)(p.Fragment,{children:o?Object(p.jsx)(le.a,{value:a,label:r,onChange:function(e){return i(n,e.target.value,t)},size:"small",variant:"outlined"}):Object(p.jsxs)(an.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:[t?Object(p.jsx)(T.a,{sx:{marginRight:1},variant:"body1",fontStyle:a?void 0:"italic",fontWeight:a?"bold":void 0,children:r}):void 0,Object(p.jsx)(T.a,{variant:"body1",fontWeight:t?void 0:"bold",children:a})]})})},Za=function(e){var n=e.analysis_id,t=Ue(n).project,r=Object(a.useState)(null===t||void 0===t?void 0:t.runtime_environment),o=Object(g.a)(r,2),c=o[0],l=o[1],s=Object(a.useState)(),u=Object(g.a)(s,2),j=u[0],v=u[1],b=Object(a.useState)(!1),h=Object(g.a)(b,2),m=h[0],O=h[1],x=Object(a.useState)(!1),k=Object(g.a)(x,2),_=k[0],w=k[1],S=Object(E.g)();if(null===t||void 0===t||!t.runtime_environment)return Object(p.jsxs)(L.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Environment data not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise document did not contain information regarding the runtime environment"})]});var C=function(e,n,t){v(void 0),c&&l(t?Object(y.a)(Object(y.a)({},c),{},Object(f.a)({},e,Object(y.a)(Object(y.a)({},c[e]),{},Object(f.a)({},t,""===n?null:n)))):Object(y.a)(Object(y.a)({},c),{},Object(f.a)({},e,""===n?null:n)))},A=Object(a.useMemo)((function(){var e,n,a,i,r,o,l,s,d,u,j,v,b,h,p,m,O,x,g,f,y,k,_,w;return[{label:"Name",key:"name",original:null===t||void 0===t||null===(e=t.runtime_environment)||void 0===e?void 0:e.name,value:null===c||void 0===c?void 0:c.name,detail:"User defined name of the runtime environment"},{label:"CUDA Version",original:null===t||void 0===t||null===(n=t.runtime_environment)||void 0===n?void 0:n.cuda_version,value:null===c||void 0===c?void 0:c.cuda_version,key:"cuda_version",detail:"Nvidia CUDA version which the application uses"},{label:"cuDNN Version",original:null===t||void 0===t||null===(a=t.runtime_environment)||void 0===a?void 0:a.cudnn_version,value:null===c||void 0===c?void 0:c.cudnn_version,key:"cudnn_version",detail:"NVIDIA cuDNN version used, if any"},{label:"Hardware",key:"hardware",group:[{label:"CPU Family",original:null===t||void 0===t||null===(i=t.runtime_environment)||void 0===i||null===(r=i.hardware)||void 0===r?void 0:r.cpu_family,value:null===c||void 0===c||null===(o=c.hardware)||void 0===o?void 0:o.cpu_family,key:"cpu_family"},{label:"CPU Model",original:null===t||void 0===t||null===(l=t.runtime_environment)||void 0===l||null===(s=l.hardware)||void 0===s?void 0:s.cpu_model,value:null===c||void 0===c||null===(d=c.hardware)||void 0===d?void 0:d.cpu_model,key:"cpu_model"},{label:"GPU Model",original:null===t||void 0===t||null===(u=t.runtime_environment)||void 0===u||null===(j=u.hardware)||void 0===j?void 0:j.gpu_model,value:null===c||void 0===c||null===(v=c.hardware)||void 0===v?void 0:v.gpu_model,key:"gpu_model"}],detail:"Hardware configuration used"},{label:"Math Kernel Library",original:null===t||void 0===t||null===(b=t.runtime_environment)||void 0===b?void 0:b.mkl_version,value:null===c||void 0===c?void 0:c.mkl_version,key:"mkl_version",detail:"Intel\xae Math Kernel Library version used, if any"},{label:"Base Image",original:null===t||void 0===t||null===(h=t.runtime_environment)||void 0===h?void 0:h.base_image,value:null===c||void 0===c?void 0:c.base_image,key:"base_image",detail:"A base container image used to run the application"},{label:"Open BLAS Version",original:null===t||void 0===t||null===(p=t.runtime_environment)||void 0===p?void 0:p.openblas_version,value:null===c||void 0===c?void 0:c.openblas_version,key:"openblas_version",detail:"Open BLAS version used, if any"},{label:"Open MPI Version",original:null===t||void 0===t||null===(m=t.runtime_environment)||void 0===m?void 0:m.openmpi_version,value:null===c||void 0===c?void 0:c.openmpi_version,key:"openmpi_version",detail:"Open MPI version used, if any"},{label:"Operating System",key:"operating_system",group:[{label:"OS Name",original:null===t||void 0===t||null===(O=t.runtime_environment)||void 0===O||null===(x=O.operating_system)||void 0===x?void 0:x.name,value:null===c||void 0===c||null===(g=c.operating_system)||void 0===g?void 0:g.name,key:"name"},{label:"OS Version",original:null===t||void 0===t||null===(f=t.runtime_environment)||void 0===f||null===(y=f.operating_system)||void 0===y?void 0:y.version,value:null===c||void 0===c||null===(k=c.operating_system)||void 0===k?void 0:k.version,key:"version"}],detail:"Operating system used"},{label:"Platform",original:null===t||void 0===t||null===(_=t.runtime_environment)||void 0===_?void 0:_.platform,value:null===c||void 0===c?void 0:c.platform,key:"platform",detail:"Platform used - corresponds to sysconfig.get_platform() call"},{label:"Python Version",original:null===t||void 0===t||null===(w=t.runtime_environment)||void 0===w?void 0:w.python_version,value:null===c||void 0===c?void 0:c.python_version,key:"python_version",detail:"Python version on which the application runs on"}]}),[null===t||void 0===t?void 0:t.runtime_environment,c]),P=Object(a.useMemo)((function(){var e={};return Object.entries(null!==c&&void 0!==c?c:{}).forEach((function(n){var t=Object(g.a)(n,2),a=t[0],i=t[1];if(i)if("object"===typeof i){var r={};c&&Object.entries(i).forEach((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];a&&(r[t]=a)})),Object.keys(r).length>0&&(e[a]=r)}else e[a]=i})),Xa.a.dump(e).toString()}),[c]),R=function(e){switch(e.group?e.group.some((function(e){return e.original!==e.value}))?"warning":e.group.every((function(e){return!e.original}))?"error":"success":e.original!==e.value?"warning":e.original?"success":"error"){case"warning":return Object(p.jsx)(Ja.a,{color:"warning"});case"error":return Object(p.jsx)(na.a,{color:"error"});case"success":return Object(p.jsx)(wt.a,{color:"success"})}};return Object(p.jsxs)(L.a,{children:[Object(p.jsx)(T.a,{variant:"h4",children:"Project Runtime Environment"}),Object(p.jsx)(T.a,{variant:"body1",children:"Thoth performs recommendations based on your hardware and software environment."}),Object(p.jsxs)(I.a,{container:!0,alignItems:"center",sx:{marginLeft:2,marginTop:1,marginBottom:2},children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(wt.a,{color:"success",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value provided"})})}),Object(p.jsx)(I.a,{item:!0,xs:12}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(na.a,{color:"error",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value not provided"})})}),Object(p.jsx)(I.a,{item:!0,xs:12}),Object(p.jsxs)(I.a,{item:!0,children:[" ",Object(p.jsx)(Ja.a,{color:"warning",sx:{marginRight:2,verticalAlign:"middle"}})]}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value edited"})})})]}),Object(p.jsx)(W.a,{}),A.some((function(e){return e.group?e.group.some((function(e){return e.original!==e.value})):e.original!==e.value}))?Object(p.jsx)(Jn.a,{action:Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(d.a,{disabled:m,size:"small",variant:"outlined",onClick:function(){l(null===t||void 0===t?void 0:t.runtime_environment),v(void 0)},children:"RESET PARAMETERS"}),Object(p.jsx)(se.a,{loading:m,size:"small",variant:"contained",onClick:function(){return v(void 0),O(!0),void ne(JSON.stringify(t.requirements),JSON.stringify(t.requirements_locked),c).then((function(e){O(!1),S("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var n,t,a;O(!1),v(null!==(n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)&&void 0!==n?n:"An error occurred.")}))},children:"NEW ADVISE"})]}),sx:{marginTop:2},variant:"outlined",severity:"warning",children:"The environment parameters are edited and are not equal to the parameters set in the adviser report. You can use the new environment parameters to run a new adviser report, or you can reset them back to the original values."}):void 0,j?Object(p.jsx)(Jn.a,{sx:{marginTop:2},variant:"outlined",severity:"error",children:j}):void 0,Object(p.jsxs)(I.a,{container:!0,spacing:4,children:[Object(p.jsx)(I.a,{item:!0,xs:8,children:Object(p.jsxs)(bn.a,{dense:!0,children:[Object(p.jsxs)(hn.a,{children:[Object(p.jsx)(Ka.a,{}),Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Environment Parameters"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Value"}),_?Object(p.jsx)(fe.a,{sx:{marginLeft:1},onClick:function(){return w(!1)},children:Object(p.jsx)(wt.a,{fontSize:"small"})}):Object(p.jsx)(fe.a,{sx:{marginLeft:1},onClick:function(){return w(!0)},children:Object(p.jsx)(Ga.a,{fontSize:"small"})})]}),A.map((function(e,n){var t;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(hn.a,{children:[Object(p.jsx)(Ka.a,{children:R(e)}),Object(p.jsx)(mn.a,{primary:e.label,secondary:e.detail}),e.group?Object(p.jsx)(an.a,{spacing:1,children:e.group.map((function(n){var t,a;return Object(p.jsx)(Qa,{itemKey:e.key,itemSubKey:n.key,label:n.label,value:null!==(t=null===c||void 0===c||null===(a=c[e.key])||void 0===a?void 0:a[n.key])&&void 0!==t?t:"",handleSubmit:C,editMode:_},e.key+n.key)}))}):Object(p.jsx)(Qa,{label:e.label,itemKey:e.key,value:null!==(t=null===c||void 0===c?void 0:c[e.key])&&void 0!==t?t:"",handleSubmit:C,editMode:_})]}),Object(p.jsx)(W.a,{variant:"inset"})]},e.key+n)}))]})}),Object(p.jsx)(I.a,{item:!0,xs:4,children:Object(p.jsxs)(nt.a,{sx:{marginTop:2},variant:"outlined",children:[Object(p.jsx)(tt.a,{title:null===c||void 0===c?void 0:c.name,action:Object(p.jsx)(d.a,{size:"small",variant:"outlined",onClick:function(){return navigator.clipboard.writeText(P)},children:"COPY"})}),Object(p.jsx)(at.a,{children:Object(p.jsx)("pre",{children:P})})]})})]})]})},$a=function(e){var n=e.analysis_id,t=qn(n),r=t.data,o=t.isError,c=t.isLoading,l=t.loadingText,s=Object(a.useState)(),d=Object(g.a)(s,2),u=d[0],j=d[1];return!r||c||o?Object(p.jsx)(Pe,{loadingLabel:l,errorTitle:"License data not available.",errorSubtitle:"The advise run encountered an error."}):Object(p.jsxs)(I.a,{container:!0,children:[Object(p.jsxs)(I.a,{item:!0,xs:12,children:[Object(p.jsx)(T.a,{variant:"h4",children:"Package Licenses"}),Object(p.jsx)(T.a,{variant:"body1",children:"The Open Source Initiative (OSI) approves open source licenses that allow software to be freely used, modified, and shared."})]}),Object(p.jsxs)(I.a,{container:!0,item:!0,xs:12,alignItems:"center",sx:{marginLeft:2,marginTop:2,marginBottom:2},children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(wt.a,{color:"success",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"OSI Approved"})})}),Object(p.jsx)(I.a,{item:!0,xs:12}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(na.a,{color:"error",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Not OSI Approved"})})}),Object(p.jsx)(I.a,{item:!0,xs:12}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(In.a,{color:"warning",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Unknown Approval"})})})]}),Object(p.jsx)(I.a,{item:!0,xs:12,children:Object(p.jsx)(W.a,{})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsxs)(bn.a,{children:[Object(p.jsxs)(hn.a,{children:[Object(p.jsx)(Ka.a,{children:Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"OSI"})}),Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"License"})}),Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Count"})]}),Object.entries(r).map((function(e){var n,t,a=Object(g.a)(e,2),i=a[0],r=a[1];return Object(p.jsx)(hn.a,{selected:u===i,disablePadding:!0,sx:{borderRadius:100},children:Object(p.jsxs)(rt.a,{onClick:function(){return j(i)},sx:{borderRadius:100},children:[Object(p.jsx)(Ka.a,{children:null===(null===(n=r.metadata)||void 0===n?void 0:n.isOsiApproved)?Object(p.jsx)(In.a,{color:"warning"}):null!==(t=r.metadata)&&void 0!==t&&t.isOsiApproved?Object(p.jsx)(Pt.a,{color:"success"}):Object(p.jsx)(na.a,{color:"error"})}),Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{variant:"body1",children:i})}),Object(p.jsx)(jn.a,{label:Object.keys(r.packages).length})]})},i)}))]})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:u?Object(p.jsxs)(nt.a,{sx:{marginTop:2},variant:"outlined",children:[Object(p.jsx)(tt.a,{title:u,subheader:"Packages that use the ".concat(u)}),Object(p.jsx)(at.a,{children:Object(p.jsxs)(I.a,{container:!0,children:[Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Package"})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"PyPI License"})}),Object.entries(r[u].packages).map((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",children:t})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",children:a.specific})})]},t)}))]})})]}):Object(p.jsxs)(L.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Choose a license"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"Click on a license from the list of licenses to view which packages use that license"})]})})]})},ei=t(182),ni=t.n(ei),ti=t(243),ai=t.n(ti),ii=function(e){if(!e)return"0 B";var n=e/1e3;if(n<1)return"".concat(e," B");var t=e/1e6;if(t<1)return"".concat(n.toFixed(2)," KB");var a=e/1e9;if(a<1)return"".concat(t.toFixed(2)," MB");var i=e/1e12;return i<1?"".concat(a.toFixed(2)," GB"):"".concat(i.toFixed(2)," TB")},ri=t(423),oi=t(424),ci=t(425);function li(e){var n,t,i,r,o,c,l,s=e.analysis_id,d=Object(a.useState)(),u=Object(g.a)(d,2),j=u[0],v=u[1],b=Object(a.useState)([]),h=Object(g.a)(b,2),m=h[0],O=h[1],x=Object(a.useState)([]),f=Object(g.a)(x,2),y=f[0],k=f[1],_=gt(s).data,w=function(e){var n=Ue(e),t=n.package_list,i=n.justifications,r=gt(e).data,o=We(t),c=Object(Te.a)({queries:(null!==t&&void 0!==t?t:[]).map((function(n){var t,a=o.find((function(e){var t,a,i;return(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a||null===(i=a.parameters)||void 0===i?void 0:i.name)===n.name}));return{queryKey:["package_data",e,n.name,!!r,!(null===a||void 0===a||null===(t=a.data)||void 0===t||!t.data)],enabled:!!n,queryFn:function(){var e=Object(H.a)(Object(V.a)().mark((function e(){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(n,null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data,i,r));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))}),l=Object(a.useMemo)((function(){var e=c.map((function(e){return e.data})),n=new Map;return e.forEach((function(e){return(null===e||void 0===e?void 0:e.name)&&n.set(e.name,e)})),{packagesDataList:e,packagesDataMap:n}}),[c]),s=Object(a.useMemo)((function(){return c.reduce((function(e,n){return{isLoading:e.isLoading||n.isLoading,isError:e.isError||n.isError,progress:e.progress+(n.isFetched?1:0)}}),{isLoading:!1,isError:!1,progress:0})}),[c]);return{data:l,isLoading:s.isLoading,isError:s.isError,loadingProgress:s.progress/c.length,loadingText:"extracting details from package metadata"}}(s),S=w.data.packagesDataMap;Object(a.useEffect)((function(){if(_){var e=_.nodes.get("*App");e&&v(e)}}),[_]),Object(a.useEffect)((function(){var e,n;_&&j&&(O(Array.from(null!==(e=null===j||void 0===j?void 0:j.parents.values())&&void 0!==e?e:[]).map((function(e){return _.nodes.get(e)}))),k(Array.from(null!==(n=null===j||void 0===j?void 0:j.adjacents.values())&&void 0!==n?n:[])))}),[j,_]);var C=Object(a.useMemo)((function(){if(_&&j){var e=0,n={},t=0,a=0,i=0,r=_.graphSearch(j);return Array.from(r).forEach((function(r){var o=null===S||void 0===S?void 0:S.get(r.key);if(o){var c,l,s,d,u;if(e+=null!==(c=o.size)&&void 0!==c?c:0,t+=null!==(l=o.warningsCount)&&void 0!==l?l:0,n[null!==(s=null===o||void 0===o?void 0:o.license)&&void 0!==s?s:"Not found"])n[null!==(d=null===o||void 0===o?void 0:o.license)&&void 0!==d?d:"Not found"]+=1;else n[null!==(u=null===o||void 0===o?void 0:o.license)&&void 0!==u?u:"Not found"]=1;null!==y&&void 0!==y&&y.some((function(e){return e.key===r.key}))?a+=1:r.key!==j.key&&(i+=1)}})),[e,n,t,a,i]}return[0,[],0,0,0]}),[j]),A=Object(g.a)(C,5),P=A[0],E=A[1],L=A[2],R=A[3],M=A[4];return Object(p.jsxs)(I.a,{container:!0,columnSpacing:4,rowSpacing:2,children:[Object(p.jsxs)(I.a,{item:!0,xs:12,children:[Object(p.jsx)(T.a,{variant:"h4",children:"Dependency Tree"}),Object(p.jsx)(T.a,{variant:"body1",children:"A Python environment's packages can be organized as a one directional graph with root packages generally being the dependencies defined in the Pipfile."})]}),Object(p.jsx)(I.a,{item:!0,xs:6,sx:{marginTop:1},children:Object(p.jsxs)(bn.a,{children:[(null===m||void 0===m?void 0:m.length)>0&&"*App"!==(null===(n=m.at(0))||void 0===n?void 0:n.key)&&Object(p.jsx)(hn.a,{sx:{paddingBottom:0},children:Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependents"})})}),m.map((function(e){return Object(p.jsxs)(rt.a,{onClick:function(){return v(e)},sx:{borderRadius:100},children:[Object(p.jsx)(Ka.a,{children:Object(p.jsx)(ai.a,{})}),Object(p.jsx)(mn.a,{children:"*App"===(null===j||void 0===j?void 0:j.key)&&"*App"===e.key?Object(p.jsx)(T.a,{variant:"body1",sx:{color:"gray"},fontStyle:"italic",children:"Pipfile"}):"*App"===e.key?Object(p.jsx)(T.a,{variant:"body1",sx:{color:"gray"},fontStyle:"italic",children:"Back to roots"}):Object(p.jsx)(T.a,{variant:"body1",children:null===e||void 0===e?void 0:e.key})})]},e.key)})),Object(p.jsxs)(rt.a,{selected:!0,sx:{borderRadius:100},children:[Object(p.jsx)(mn.a,{children:"*App"===(null===j||void 0===j?void 0:j.key)?Object(p.jsx)(T.a,{variant:"body1",sx:{color:"gray"},fontStyle:"italic",children:"Pipfile"}):Object(p.jsx)(T.a,{variant:"body1",children:null===j||void 0===j?void 0:j.key})}),Object(p.jsx)(jn.a,{sx:{fontStyle:"italic"},label:"Selected"})]}),y.length>0&&Object(p.jsxs)(hn.a,{sx:{paddingBottom:0},children:[Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependencies"})}),Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependency count"})]}),y.map((function(e){return Object(p.jsxs)(rt.a,{onClick:function(){return v(e)},sx:{borderRadius:100},children:[Object(p.jsx)(mn.a,{children:Object(p.jsx)(T.a,{variant:"body1",children:null===e||void 0===e?void 0:e.key})}),Object(p.jsx)(jn.a,{label:e.adjacents.size})]},e.key)}))]})}),Object(p.jsx)(I.a,{item:!0,xs:6,children:Object(p.jsxs)(nt.a,{children:["*App"===(null===j||void 0===j?void 0:j.key)?Object(p.jsx)(tt.a,{title:"Pipfile",subheader:"The supplied Pipfile has ".concat(null===j||void 0===j?void 0:j.adjacents.size," dependencies")}):Object(p.jsx)(tt.a,{title:null===j||void 0===j?void 0:j.key,subheader:"".concat(null===j||void 0===j?void 0:j.key," depends on ").concat(null===j||void 0===j?void 0:j.adjacents.size," packages and is a dependency for ").concat(null===j||void 0===j?void 0:j.parents.size)}),Object(p.jsxs)(at.a,{children:["*App"!==(null===j||void 0===j?void 0:j.key)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)($t,{analysis_id:s,graphHeight:"25vh",root:null===j||void 0===j?void 0:j.key}),Object(p.jsx)(T.a,{variant:"h5",sx:{marginBottom:2},children:"Package Stats"}),Object(p.jsxs)(an.a,{sx:{marginLeft:1},spacing:1.5,children:[Object(p.jsxs)(an.a,{direction:"row",spacing:1,children:[Object(p.jsx)(ni.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Package size:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:ii(null!==(t=null===S||void 0===S||null===(i=S.get(null!==(r=null===j||void 0===j?void 0:j.key)&&void 0!==r?r:""))||void 0===i?void 0:i.size)&&void 0!==t?t:0)})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(In.a,{color:"warning"}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Package warnings count:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:null!==(o=null===S||void 0===S||null===(c=S.get(null!==(l=null===j||void 0===j?void 0:j.key)&&void 0!==l?l:""))||void 0===c?void 0:c.warningsCount)&&void 0!==o?o:0})]})]}),Object(p.jsx)(W.a,{sx:{marginY:2},variant:"fullWidth"})]}),Object(p.jsx)(T.a,{variant:"h5",sx:{marginBottom:2},children:"Dependency Stats"}),Object(p.jsxs)(an.a,{sx:{marginLeft:1},spacing:1.5,children:[Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(ni.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Total size:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:ii(P)})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(In.a,{color:"warning"}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Total warnings count:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:L})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(ri.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Direct dependencies:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:R})]}),Object(p.jsxs)(an.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(oi.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Indirect dependencies:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:M})]}),Object(p.jsxs)(an.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(p.jsx)(ci.a,{}),Object(p.jsx)(T.a,{variant:"h6",children:"Licenses"})]}),Object.entries(E).sort((function(e,n){return n[1]-e[1]})).map((function(e,n){var t=Object(g.a)(e,2),a=t[0],i=t[1];return Object(p.jsxs)(an.a,{justifyContent:"space-between",direction:"row",sx:{borderRadius:100,paddingX:2,backgroundColor:n%2!==0?"#84848414":void 0},children:[Object(p.jsx)(T.a,{variant:"body1",children:a}),Object(p.jsx)(T.a,{variant:"body1",children:i})]},a)}))]})]})]})})]})}var si=function(e){var n=e.analysis_id;return Object(p.jsxs)("div",{children:['`"',n,'"` not found']})},di=function(){var e=Object(E.h)().analysis_id,n=Ue(e).query;return Object(a.useEffect)((function(){if(n.isSuccess&&e){var t,a=(null!==(t=localStorage.getItem($))&&void 0!==t?t:"").split(",");a.includes(e)||(a.push(e),localStorage.setItem($,a.join(",")))}}),[n.status]),n.isError||!e?Object(p.jsx)(Hn,{children:Object(p.jsx)(si,{analysis_id:null!==e&&void 0!==e?e:"no id"})}):Object(p.jsx)(Vn,{analysis_id:e,children:Object(p.jsx)(dn,{children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"summary",element:Object(p.jsx)(Nt,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"packages",element:Object(p.jsx)(pa,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"packages/:pkg",element:Object(p.jsx)(pa,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"logs",element:Object(p.jsx)(Wa,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"compare",element:Object(p.jsx)(Ma,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"compare/:cmp",element:Object(p.jsx)(Ma,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"stack-info",element:Object(p.jsx)(Ha,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"environment",element:Object(p.jsx)(Za,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"licenses",element:Object(p.jsx)($a,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"dependency-tree",element:Object(p.jsx)(li,{analysis_id:e})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(E.a,{to:"summary"})})]})})})},ui=t(244),ji=t.n(ui),vi=t(245),bi=t.n(vi),hi=["options","type","label","disabled"],pi=function(e){var n,t=e.options,i=e.type,r=e.label,o=e.disabled,c=Object(D.a)(e,hi),l=Object(E.g)(),s=Object(a.useContext)(Ai),d=s.specs,u=s.defaultSpecs;return Object(p.jsxs)(L.a,Object(y.a)(Object(y.a)({},c),{},{children:[Object(p.jsx)(T.a,{variant:"body2",children:r}),Object(p.jsxs)(ya.a,{displayEmpty:!0,fullWidth:!0,value:null!==(n=d[i])&&void 0!==n?n:"",onChange:function(e){var n,t,a,r,o,c,s,j,v,b,h,p,m;switch(i){case"package_version":l("/package/".concat(d.package_name,"/").concat(e.target.value));break;case"index_url":l("/package/".concat(d.package_name,"/").concat(null!==(n=d.package_version)&&void 0!==n?n:u.package_version,"/").concat(encodeURIComponent(e.target.value)));break;case"os_name":l("/package/".concat(d.package_name,"/").concat(null!==(t=d.package_version)&&void 0!==t?t:u.package_version,"/").concat(encodeURIComponent(null!==(a=null!==(r=d.index_url)&&void 0!==r?r:u.index_url)&&void 0!==a?a:""),"/").concat(e.target.value));break;case"os_version":l("/package/".concat(d.package_name,"/").concat(null!==(o=d.package_version)&&void 0!==o?o:u.package_version,"/").concat(encodeURIComponent(null!==(c=null!==(s=d.index_url)&&void 0!==s?s:u.index_url)&&void 0!==c?c:""),"/").concat(null!==(j=d.os_name)&&void 0!==j?j:u.os_name,"/").concat(e.target.value));break;case"python_version":l("/package/".concat(d.package_name,"/").concat(null!==(v=d.package_version)&&void 0!==v?v:u.package_version,"/").concat(encodeURIComponent(null!==(b=null!==(h=d.index_url)&&void 0!==h?h:u.index_url)&&void 0!==b?b:""),"/").concat(null!==(p=d.os_name)&&void 0!==p?p:u.os_name,"/").concat(null!==(m=d.os_version)&&void 0!==m?m:u.os_version,"/").concat(e.target.value))}},size:"small",variant:"outlined",disabled:o,renderValue:function(e){return e||Object(p.jsx)("em",{style:{color:"grey"},children:null!==(n=null===u||void 0===u?void 0:u[i])&&void 0!==n?n:r});var n},children:[Object(p.jsx)(ka.a,{disabled:!0,value:"",children:Object(p.jsx)("em",{children:r})}),t.map((function(e){return Object(p.jsx)(ka.a,{value:e.value,children:e.value},e.value)}))]})]}))},mi=function(e){var n,t,r=e.metadata,o=e.allVersions,c=void 0===o?[]:o,l=e.allEnvironments,s=void 0===l?[]:l,d=Object(a.useContext)(Ai),u=d.defaultSpecs,j=d.specs,v=Object(a.useState)(!1),b=Object(g.a)(v,2),h=b[0],m=b[1],O=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(n){return!e.has(n.package_version)&&(e.add(n.package_version),!0)})).map((function(e){return{value:e.package_version}})).sort((function(e,n){return e.value.split(".")>n.value.split(".")?1:-1}))}),[c]),x=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(e){return j.package_version?j.package_version===e.package_version:u.package_version===e.package_version})).filter((function(n){return!e.has(n.index_url)&&(e.add(n.index_url),!0)})).map((function(e){return{value:e.index_url}}))}),[c]),f=Object(a.useMemo)((function(){return[s.map((function(e){return{value:e.os_name}})),s.filter((function(e){return!j.os_name||j.os_name===e.os_name})).map((function(e){return{value:e.os_version}})),s.filter((function(e){return(!j.os_name||j.os_name===e.os_name)&&(!j.os_version||j.os_version===e.os_version)})).map((function(e){return{value:e.python_version}}))]}),[s,j]),y=Object(g.a)(f,3),k=y[0],_=y[1],w=y[2];return r?Object(p.jsxs)("div",{children:[Object(p.jsxs)(I.a,{container:!0,alignItems:"flex-end",spacing:1,children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",mr:2,children:Object(p.jsx)("b",{children:null===r||void 0===r?void 0:r.Name})})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(pi,{options:null!==O&&void 0!==O?O:[],type:"package_version",label:"Version"})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(pi,{options:null!==x&&void 0!==x?x:[],type:"index_url",label:"Index URL",disabled:void 0===j.package_version})}),h?Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(pi,{options:null!==k&&void 0!==k?k:[],type:"os_name",label:"OS Name",disabled:void 0===j.index_url})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(pi,{options:null!==_&&void 0!==_?_:[],type:"os_version",label:"OS Version",disabled:void 0===j.os_name})}),Object(p.jsx)(I.a,{item:!0,children:Object(p.jsx)(pi,{options:null!==w&&void 0!==w?w:[],type:"python_version",label:"Python Version",disabled:void 0===j.os_version})})]}):null,Object(p.jsx)(I.a,{item:!0,xs:1,children:Object(p.jsx)(fe.a,{onClick:function(){return m(!h)},"data-testid":"package-header-expand-button",children:h?Object(p.jsx)(ji.a,{fontSize:"large"}):Object(p.jsx)(bi.a,{fontSize:"large"})})})]}),Object(p.jsx)(T.a,{gutterBottom:!0,variant:"body1",mt:2,children:null!==(n=null===r||void 0===r?void 0:r.Summary)&&void 0!==n?n:"NaN"}),Object(p.jsx)("div",{children:Object(p.jsx)(Yn,{text:null!==(t=null===r||void 0===r?void 0:r.License)&&void 0!==t?t:"NaN",icon:Object(p.jsx)(Kt.a,{})})})]}):Object(p.jsxs)(L.a,{"data-testid":"package-header-not-loaded",children:[Object(p.jsx)(et.a,{}),Object(p.jsx)(et.a,{}),Object(p.jsx)(et.a,{width:"60%"})]})},Oi=function(e){var n=e.cardMeta,t=e.cardBody,a=e.cardAction;return Object(p.jsxs)(nt.a,{variant:"outlined",sx:{margin:0},children:[Object(p.jsx)(tt.a,{action:a,title:Object(p.jsx)(T.a,{variant:"h5",children:n.title}),subheader:n.subTitle}),Object(p.jsx)(at.a,{children:t})]})},xi=t(248),gi=t(246),fi=t.n(gi),yi=function(e){var n,t=e.node,r=i.a.useState(null),o=Object(g.a)(r,2),c=o[0],l=o[1],s=i.a.useState(null),u=Object(g.a)(s,2),j=u[0],v=u[1],b=Object(E.g)(),h=Object(a.useMemo)((function(){var e={},n=[0,0],a=new Set;if(t.versions.forEach((function(t){var i,r=t.split("."),o=r[0]+"."+(null!==(i=r[1])&&void 0!==i?i:"");void 0===e[o]&&(e[o]=[],n[0]+=1),a.has(t)||(e[o].push(t),n[1]+=1,a.add(t))})),n[0]/n[1]>.25){var i,r=Math.ceil(.25*n[0]),o={};return Object.keys(e).forEach((function(n,t,a){var c,l;t%r===0&&(i="".concat(n," - ").concat(null!==(l=a[t+r-1])&&void 0!==l?l:a.at(-1)),o[i]=[]);(c=o[i]).push.apply(c,Object(Ve.a)(e[a[t]]))})),o}return e}),[t]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(d.a,{onClick:function(e){l(t.name),v(e.currentTarget)},variant:"outlined",endIcon:Object(p.jsx)(fi.a,{}),children:null!==(n=t.specifier)&&void 0!==n?n:"ANY"}),Object(p.jsxs)(xi.a,{open:c===t.name,anchorEl:j,onClose:function(){l(void 0),v(null)},PaperProps:{style:{maxHeight:"40%",maxWidth:"50%"}},children:[Object(p.jsx)(ka.a,{disabled:!0,children:"Select a version to navigate to:"}),Object(p.jsx)(I.a,{container:!0,alignContent:"flex-start",children:Object.entries(h).map((function(e){var n=Object(g.a)(e,2),a=n[0],i=n[1];return Object(p.jsxs)(I.a,{item:!0,xs:!0,children:[Object(p.jsx)(ka.a,{sx:{mt:2},disabled:!0,divider:!0,children:a}),i.map((function(e){return Object(p.jsx)(ka.a,{onClick:function(){return b("/package/".concat(t.name,"/").concat(e))},children:Object(p.jsx)(T.a,{variant:"body2",children:e})},e)}))]},a)}))})]})]})},ki=function(e){var n=e.graph,t=Object(a.useMemo)((function(){if(null!==n&&void 0!==n&&n.nodes){var e=n.nodes.get("*App");if(e){var t=n.graphSearch(e),a=Array.from(t),i=[];return a.forEach((function(e){var n,t,a,r;"*App"===e.key||e.value.metadata||i.push({name:null!==(n=e.value.label)&&void 0!==n?n:e.key,versions:null!==(t=e.value.versions)&&void 0!==t?t:[],specifier:null!==(a=e.value.specifier)&&void 0!==a?a:"*",extra:null!==(r=e.value.extra)&&void 0!==r?r:[]})})),i}}}),[n]);return t?Object(p.jsx)(Oi,{cardMeta:{title:"Dependencies"},cardBody:Object(p.jsxs)("div",{"data-testid":"package-dependencies-loaded",children:[Object(p.jsxs)(I.a,{container:!0,children:[Object(p.jsx)(I.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Package"})}),Object(p.jsx)(I.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Versions"})}),Object(p.jsx)(I.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Extra"})})]}),Object(p.jsx)(W.a,{}),Object(p.jsx)(I.a,{container:!0,rowSpacing:2,mt:1,children:t.map((function(e){var n;return Object(p.jsxs)(I.a,{container:!0,item:!0,xs:12,children:[Object(p.jsx)(I.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:e.name})}),Object(p.jsx)(I.a,{item:!0,xs:!0,children:Object(p.jsx)(yi,{node:e})}),Object(p.jsx)(I.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:null===(n=e.extra)||void 0===n?void 0:n.join(", ")})})]},e.name)}))})]})}):Object(p.jsxs)(L.a,{"data-testid":"package-dependencies-not-loaded",children:[Object(p.jsx)(et.a,{}),Object(p.jsx)(et.a,{}),Object(p.jsx)(et.a,{width:"60%"})]})},_i=function(e){var n=e.package_name,t=e.package_version;return Object(p.jsxs)("div",{children:['`"',n,t?" "+t:"",'"` not found']})};var wi=function(){var e=Object(H.a)(Object(V.a)().mark((function e(n){var t;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={params:{name:n},headers:{accept:"application/json"}},e.abrupt("return",Z.a.get(ee+"/python/package/versions",t));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Si=function(){var e=Object(H.a)(Object(V.a)().mark((function e(n,t,a){var i;return Object(V.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={params:{name:n,version:t,index:a},headers:{accept:"application/json"}},e.abrupt("return",Z.a.get(ee+"/python/package/version/environments",i));case 2:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),Ci=function(e){var n=e.message,t=e.type,a=e.reason;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:[t,": ",n]}),Object(p.jsx)("p",{children:a})]})},Ai=i.a.createContext({specs:{package_name:""},defaultSpecs:{package_name:""}}),Pi=function(){var e,n,t,i,r,o,c,l,s,d,u,j,v,b,h,m,O,x=Object(E.h)(),f=Object(a.useState)({package_name:null!==(e=x.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0}),k=Object(g.a)(f,2),_=k[0],w=k[1],S=Object(a.useMemo)((function(){var e;return{package_name:null!==(e=x.package_name)&&void 0!==e?e:"",package_version:null===x||void 0===x?void 0:x.package_version,index_url:null!==x&&void 0!==x&&x.index_url?decodeURIComponent(x.index_url):void 0,os_name:null===x||void 0===x?void 0:x.os_name,os_version:null===x||void 0===x?void 0:x.os_version,python_version:null===x||void 0===x?void 0:x.python_version}}),[x]),C=(m=S.package_name,Object(ie.a)(Object(y.a)(Object(y.a)({},O),{},{enabled:!!m,queryKey:["packageVersions",m],queryFn:function(){return wi(m)}}))),A=function(e,n,t,a){return Object(ie.a)(Object(y.a)(Object(y.a)({},a),{},{enabled:!!e&&!!n&&!!t,queryKey:["packageEnvironments",e,n,t],queryFn:function(){return Si(null!==e&&void 0!==e?e:"",null!==n&&void 0!==n?n:"",null!==t&&void 0!==t?t:"")}}))}(S.package_name,null!==(n=S.package_version)&&void 0!==n?n:_.package_version,null!==(t=S.index_url)&&void 0!==t?t:_.index_url,{useErrorBoundary:!1});Object(a.useEffect)((function(){var e,n,t,a,i={package_name:null!==(e=x.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0};S.package_name&&(null!==(n=C.data)&&void 0!==n&&n.data&&C.data.data.versions.length>0&&(i.package_version=null===(t=C.data.data.versions.at(-1))||void 0===t?void 0:t.package_version,i.index_url=null===(a=C.data.data.versions.at(-1))||void 0===a?void 0:a.index_url));if(A.data&&A.data.data.environments.length>0){var r,o,c,l=A.data.data.environments.filter((function(e){return(!S.os_name||S.os_name===e.os_name)&&(!S.os_version||S.os_version===e.os_version)}));if(l.length>0)i.os_name=null===(r=l.at(0))||void 0===r?void 0:r.os_name,i.os_version=null===(o=l.at(0))||void 0===o?void 0:o.os_version,i.python_version=null===(c=l.at(0))||void 0===c?void 0:c.python_version}Object.entries(_).some((function(e){var n=Object(g.a)(e,2),t=n[0],a=n[1];return i[t]!==a}))&&w(i)}),[C.data,A,S]);var P,L,T,R,M,W,B,q,D,F=Me(S.package_name,null!==(i=S.package_version)&&void 0!==i?i:_.package_version,null!==(r=S.index_url)&&void 0!==r?r:_.index_url,null!==(o=S.os_name)&&void 0!==o?o:_.os_name,null!==(c=S.os_version)&&void 0!==c?c:_.os_version,null!==(l=S.python_version)&&void 0!==l?l:_.python_version,{useErrorBoundary:!1}),N=function(e){var n=Object(a.useState)(),t=Object(g.a)(n,2),i=t[0],r=t[1];return Object(a.useEffect)((function(){if("success"===e.status){var n=new Ot,t=n.addVertex("*App",{id:"*App",label:"App",depth:-1},xt),a=n.addVertex(e.data.data.metadata.package_name.toLowerCase(),{id:e.data.data.metadata.package_name.toLowerCase(),label:e.data.data.metadata.package_name,metadata:e.data.data.metadata.importlib_metadata.metadata,depth:0},xt);a.parents=new Set,a.parents.add("*App"),n.addEdge(t.key,a.key),Object.entries(e.data.data.metadata.dependencies).forEach((function(e){var t=Object(g.a)(e,2),i=t[0],r=t[1],o=n.addVertex(i.toLowerCase(),{id:i.toLowerCase(),label:i,metadata:null,versions:r.versions,specifier:r.specifier,extra:r.extra,depth:1},xt);o.parents=new Set,n.addEdge(a.key,o.key),o.parents.add(a.key)})),r(n)}}),[e.data]),i}(F);return F.isLoading||0===(null===C||void 0===C||null===(s=C.data)||void 0===s||null===(d=s.data)||void 0===d||null===(u=d.versions)||void 0===u?void 0:u.length)?Object(p.jsx)("div",{className:"w-full h-48 flex justify-center items-center","data-testid":"loading",children:Object(p.jsx)(Ae.a,{})}):F.data?Object(p.jsx)(Ai.Provider,{value:{specs:S,defaultSpecs:_},children:Object(p.jsxs)(I.a,{container:!0,children:[Object(p.jsx)(I.a,{item:!0,xs:12,mb:3,children:Object(p.jsx)(mi,{metadata:F.data.data.metadata.importlib_metadata.metadata,allVersions:null===C||void 0===C||null===(j=C.data)||void 0===j||null===(v=j.data)||void 0===v?void 0:v.versions,allEnvironments:null===A||void 0===A||null===(b=A.data)||void 0===b||null===(h=b.data)||void 0===h?void 0:h.environments})}),Object(p.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(ki,{graph:N})})]})}):null!==F&&void 0!==F&&null!==(P=F.error)&&void 0!==P&&null!==(L=P.response)&&void 0!==L&&null!==(T=L.data)&&void 0!==T&&T.error?Object(p.jsx)(Ci,{message:F.error.response.data.error,type:F.error.response.status,reason:"".concat(null===F||void 0===F||null===(W=F.error)||void 0===W||null===(B=W.config)||void 0===B?void 0:B.url," failed with params ").concat(JSON.stringify(null===F||void 0===F||null===(q=F.error)||void 0===q||null===(D=q.config)||void 0===D?void 0:D.params))}):Object(p.jsx)(_i,{package_name:null!==(R=x.package_name)&&void 0!==R?R:"",package_version:null!==(M=x.package_version)&&void 0!==M?M:""})},Ei=function(){return Object(p.jsx)(Hn,{children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name/:os_version/:python_version",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name/:os_version",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"/:package_version",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"/",element:Object(p.jsx)(Pi,{})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(sn,{})})]})})},Ii=function(){return Object(p.jsx)(P.a,{basename:"/search-stage",children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"/",element:Object(p.jsx)(ln,{})}),Object(p.jsx)(E.b,{path:"advise/:analysis_id/*",element:Object(p.jsx)(di,{})}),Object(p.jsx)(E.b,{path:"package/:package_name/*",element:Object(p.jsx)(Ei,{})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(sn,{})})]})})};var Li=function(){return Object(p.jsx)(A,{children:Object(p.jsx)(Ii,{})})};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(Li,{})}),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.bc456597.chunk.js.map