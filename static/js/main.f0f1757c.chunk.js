(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],{406:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(77),o=n.n(r),c=n(262),l=n(36),s=new l.QueryClient({defaultOptions:{queries:{useErrorBoundary:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}}}),d=n(427),u=n(501),j=n(473),v=n(292),b=n(472),h=n(115),p=n(0),x=Object(v.a)();x=Object(v.a)(x,{palette:{primary:{main:"#f39200"},secondary:{main:"#4fc1ea"},background:{default:"rgb(249, 249, 249)",paper:"#fff"},text:{primary:"#363636",secondary:"#999999"}},shape:{borderRadius:12}});var O=Object(h.b)(0,{value:Object(h.a)(x.palette.primary.main),name:"active",blend:!1});x=Object(b.a)(x),x=Object(v.a)(x,{components:{MuiPopover:{defaultProps:{elevation:2},styleOverrides:{paper:{paddingLeft:0,paddingRight:0,borderRadius:"4px"}}},MuiDialog:{defaultProps:{PaperProps:{elevation:3}}},MuiDrawer:{styleOverrides:{paper:{borderStyle:"hidden",backgroundColor:x.palette.background.default}}},MuiLink:{styleOverrides:{root:{color:x.palette.text.primary,"&:hover":{color:x.palette.primary.main}}}}}});var m=function(e){var t=e.children;return Object(p.jsxs)(u.a,{theme:x,children:[Object(p.jsx)(j.a,{}),t]})},g=n(6),f=n(5),y=n(11),k=a.createContext(void 0);function _(e,t){if("loading"===t.type){var n=t.payload;return Object(y.a)(Object(y.a)({},e),{},{loading:Object(y.a)(Object(y.a)({},e.loading),{},Object(f.a)({},n.name,{isLoading:n.isLoading,total:n.total,value:n.value,text:n.text}))})}return e}var w=a.createContext({updateLoading:function(){}}),S={};function C(e){var t=e.children,n=a.useReducer(_,S),i=Object(g.a)(n,2),r=i[0],o=i[1],c={updateLoading:function(e,t,n,a){var i,c;(null===(i=r.loading)||void 0===i||null===(c=i[e])||void 0===c?void 0:c.value)!==n&&o(n&&a?{type:"loading",payload:{name:e,isLoading:!0,value:null!==n&&void 0!==n?n:0,total:a||1,text:t}}:{type:"loading",payload:{name:e,isLoading:!1,value:0,total:1,text:t}})}};return Object(p.jsx)(k.Provider,{value:r,children:Object(p.jsx)(w.Provider,{value:c,children:t})})}var A=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(p.jsx)(d.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},I=function(e){var t=e.children;return Object(p.jsx)(m,{children:Object(p.jsx)(C,{children:Object(p.jsx)(c.ErrorBoundary,{FallbackComponent:A,children:Object(p.jsx)(l.QueryClientProvider,{client:s,children:t})})})})},P=n(37),E=n(30),L=n(497),R=n(428),T=n(145),D=n(500),M=n(512),N=n(483),B=n(44),W=n(482),F=n(60),q=["children","value","index"],z=function(e){var t=e.children,n=e.value,a=e.index,i=Object(F.a)(e,q);return Object(p.jsx)("div",Object(y.a)(Object(y.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),{},{children:n===a&&t}))},V=n.p+"static/media/thoth-logo.1a28a729.png",H=n(31),U=n(18),K=n.n(U),G=n(302),Y=n(49),Q=["onEnter","label","helpertext","boxprops","error","lefticon","righticon"],J=function(e){var t=e.onEnter,n=e.label,a=e.helpertext,i=e.boxprops,r=e.error,o=void 0!==r&&r,c=e.lefticon,l=e.righticon,s=Object(F.a)(e,Q);return Object(p.jsxs)(R.a,{children:[Object(p.jsx)(T.a,{variant:"body1",sx:{color:o?"error.main":"text.secondary"},children:n}),Object(p.jsxs)(G.a,{variant:"outlined",sx:Object(y.a)({p:"8px 4px",display:"flex",alignItems:"center",borderColor:o?"red":void 0,paddingLeft:2,paddingRight:2},i),children:[c,Object(p.jsx)(Y.c,Object(y.a)({sx:{ml:1,flex:1},placeholder:a,error:o,onChange:s.onChange,onKeyPress:function(e){t&&"Enter"===e.key&&(t(),e.preventDefault())}},s)),l]})]})},X=n(102),Z=n.n(X),$=n(38),ee=n.n($),te="THOTH_SEARCH_ADVISE_HISTORY",ne="https://khemenu.thoth-station.ninja/api/v1",ae={manipulation:{enabled:!1},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},ie=function(e,t,n){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:t},runtime_environment:n};return ee.a.post(ne+"/advise/python",a,{params:{recommendation_type:"stable"},headers:{accept:"application/json","Content-Type":"application/json"}})},re=function(){var e=Object(H.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{name:t},headers:{accept:"application/json"}},e.abrupt("return",ee.a.get(ne+"/python/package/versions",n).then((function(e){return e.data.versions.length>0})).catch((function(){return!1})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t={params:{image:e},headers:{accept:"application/json","Content-Type":"application/json"}};return ee.a.post(ne+"/analyze",{},t)},ce=function(){var e=Object(H.a)(K.a.mark((function e(){var t,n,a,i=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,n=i.length>1&&void 0!==i[1]?i[1]:100,a={params:{page:t,per_page:n},headers:{accept:"application/json"}},e.abrupt("return",ee.a.get(ne+"/container-images",a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(E.g)(),t=Object(a.useState)(""),n=Object(g.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),c=Object(g.a)(o,2),l=c[0],s=c[1],u=function(){var t=Object(H.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==i){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,re(i);case 4:t.sent?e("/package/"+i):s("Thoth does not know about that package");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(L.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==l&&void 0!==l?l:""})}),Object(p.jsxs)(L.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(p.jsx)(L.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(J,{error:""!==l,onChange:function(e){return function(e){r(e.target.value),""!==l&&s("")}(e)},helpertext:"Search for a Python package",type:"search",lefticon:Object(p.jsx)(Z.a,{}),onEnter:u})}),Object(p.jsx)(L.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return u()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]})},se=n(510),de=n(214),ue=n(527),je=n(417),ve=n(300),be=Object(je.a)();function he(e){var t=e.suggestions,n=e.label,i=e.help,r=e.required,o=e.error,c=e.value,l=e.setValue,s=Object(a.useMemo)((function(){return t.map((function(e){return{title:e}}))}),[t]);return Object(p.jsx)(ve.a,{value:c,onChange:function(e,t){"string"===typeof t?l({title:t}):t&&t.inputValue?l({title:t.inputValue}):l(t)},filterOptions:function(e,t){var n=be(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,title:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==s&&void 0!==s?s:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,t){return Object(p.jsx)("li",Object(y.a)(Object(y.a)({},e),{},{children:t.title}))},freeSolo:!0,renderInput:function(e){return Object(p.jsx)(de.a,Object(y.a)(Object(y.a)({},e),{},{fullWidth:!0,label:n,required:r,error:o,helperText:i}))}})}var pe=n(508),xe=n(509),Oe=n(506),me=n(507),ge=n(504),fe=n(422),ye=n(505),ke=n(499),_e=n(263),we=n.n(_e),Se=n(96),Ce=n(430);function Ae(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ie(e,t){return"desc"===e?function(e,n){return Ae(e,n,t)}:function(e,n){return-Ae(e,n,t)}}function Pe(e){var t=e.order,n=e.orderBy,a=e.onRequestSort,i=e.headers;return Object(p.jsx)(ge.a,{children:Object(p.jsxs)(ye.a,{children:[i.map((function(e){return Object(p.jsx)(Oe.a,{sortDirection:n===e.id&&t,children:Object(p.jsx)(ke.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:function(){return t=e.id,void a(t);var t},children:Object(p.jsx)("b",{children:e.label})})},e.id)})),Object(p.jsx)(Oe.a,{})]})})}function Ee(e){var t=e.headers,n=e.rows,i=e.action,r=a.useState("asc"),o=Object(g.a)(r,2),c=o[0],l=o[1],s=a.useState(t[0].id),d=Object(g.a)(s,2),u=d[0],j=d[1],v=a.useState(0),b=Object(g.a)(v,2),h=b[0],x=b[1],O=a.useState(10),m=Object(g.a)(O,2),f=m[0],y=m[1],k=h>0?Math.max(0,(1+h)*f-n.length):0;return n?Object(p.jsx)(R.a,{sx:{width:"100%"},children:Object(p.jsxs)(G.a,{sx:{width:"100%",mb:2},variant:"outlined",children:[Object(p.jsx)(me.a,{children:Object(p.jsxs)(pe.a,{sx:{minWidth:750},size:"medium",children:[Object(p.jsx)(Pe,{order:c,orderBy:u,onRequestSort:function(e){l(u===e&&"asc"===c?"desc":"asc"),j(e)},rowCount:n.length,headers:t}),Object(p.jsxs)(xe.a,{children:[n.slice().sort(Ie(c,u)).slice(h*f,h*f+f).map((function(e,n){var a="enhanced-table-checkbox-".concat(n);return Object(p.jsxs)(ye.a,{hover:!0,tabIndex:-1,children:[t.map((function(t,n){return 0===n?Object(p.jsx)(Oe.a,{component:"th",id:a,scope:"row",children:e[t.id]},t.id+n):Object(p.jsx)(Oe.a,{align:"left",children:e[t.id]},t.id+n)})),i?Object(p.jsx)(Oe.a,{align:"right",children:Object(p.jsx)(Se.a,{onClick:function(){return i(e)},children:Object(p.jsx)(we.a,{})})}):void 0]},a)})),k>0&&Object(p.jsx)(ye.a,{style:{height:53*k},children:Object(p.jsx)(Oe.a,{colSpan:6})})]})]})}),Object(p.jsx)(fe.a,{rowsPerPageOptions:[10,25,50],component:"div",count:n.length,rowsPerPage:f,page:h,onPageChange:function(e,t){x(t)},onRowsPerPageChange:function(e){y(parseInt(e.target.value,10)),x(0)}})]})}):Object(p.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(p.jsx)(Ce.a,{})})}var Le=function(e){return ee.a.get(ne+"/advise/python/"+e,{headers:{accept:"application/json"}})},Re=function(e,t){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},t),{},{enabled:!!e&&e.startsWith("adviser"),queryKey:["adviseDocument",e],queryFn:function(){return Le(e)}}))},Te=function(){var e=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.a.get(ne+"/advise/python/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function De(e){var t=new Date,n=Math.floor((t.valueOf()-e.valueOf())/1e3),a=n/3154e4;if(a>1){var i=Math.floor(a);return i+" year"+(1!==i?"s":"")}if((a=n/2628e3)>1){var r=Math.floor(a);return r+" month"+(1!==r?"s":"")}if((a=n/86400)>1){var o=Math.floor(a);return o+" day"+(1!==o?"s":"")}if((a=n/3600)>1){var c=Math.floor(a);return c+" hour"+(1!==c?"s":"")}if((a=n/60)>1){var l=Math.floor(a);return l+" minute"+(1!==l?"s":"")}var s=Math.floor(n);return s+" second"+(1!==s?"s":"")}var Me=function(e,t,n){return e?"Advise finished "+De(new Date(e))+" ago.":t?"Advise started "+De(new Date(t))+" ago.":n?"Advise finished "+De(new Date(n+"Z"))+" ago.":"Time started/finished not available"};function Ne(e,t){var n;switch(t.type){case"loading":return Object(y.a)(Object(y.a)({},e),{},{loading:t.payload});case"error":return Object(y.a)(Object(y.a)({},e),{},{error:Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(y.a)(Object(y.a)({},e),{},(n={},Object(f.a)(n,t.param,t.payload),Object(f.a)(n,"error",Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},t.param,void 0))),n));default:throw new Error("Advise state dispatch error")}}var Be=[{id:"document_id",label:"Document ID"},{id:"status",label:"Status"},{id:"name",label:"Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Run"}],We={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},Fe=function(){var e,t,n,i,r,o,c,s,u,j,v,b,h,x,O,m,f,k,_,w,S=Object(E.g)(),C=Object(a.useReducer)(Ne,We),A=Object(g.a)(C,2),I=A[0],P=A[1],R=Object(a.useMemo)((function(){var e=localStorage.getItem(te);return e?e.split(",").filter((function(e){return""!==e})):[]}),[]),D=(_=R,Object(l.useQueries)(_.map((function(e){return Object(y.a)(Object(y.a)({},w),{},{queryKey:["adviseDocument",e],queryFn:function(){return Le(e)}})})))),M=Object(a.useMemo)((function(){return D?D.map((function(e){var t,n,a,i,r,o,c,l,s,d,u,j,v,b,h,p,x,O,m,g,f,y,k,_,w,S,C,A,I,P,E,L,R,T,D,M,N,B;return{document_id:null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.metadata)||void 0===a?void 0:a.document_id,name:null===(i=e.data)||void 0===i||null===(r=i.data)||void 0===r||null===(o=r.result)||void 0===o||null===(c=o.report)||void 0===c||null===(l=c.products)||void 0===l||null===(s=l[0].project.runtime_environment)||void 0===s?void 0:s.name,os_name:null===(d=e.data)||void 0===d||null===(u=d.data)||void 0===u||null===(j=u.result)||void 0===j||null===(v=j.report)||void 0===v||null===(b=v.products)||void 0===b||null===(h=b[0].project.runtime_environment)||void 0===h||null===(p=h.operating_system)||void 0===p?void 0:p.name,os_version:null===(x=e.data)||void 0===x||null===(O=x.data)||void 0===O||null===(m=O.result)||void 0===m||null===(g=m.report)||void 0===g||null===(f=g.products)||void 0===f||null===(y=f[0].project.runtime_environment)||void 0===y||null===(k=y.operating_system)||void 0===k?void 0:k.version,python_version:null===(_=e.data)||void 0===_||null===(w=_.data)||void 0===w||null===(S=w.result)||void 0===S||null===(C=S.report)||void 0===C||null===(A=C.products)||void 0===A||null===(I=A[0].project.runtime_environment)||void 0===I?void 0:I.python_version,status:function(){var t,n,a,i,r,o;return null!==(t=e.data)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.status?null===(r=e.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.status.state:null!==(a=e.data)&&void 0!==a&&null!==(i=a.data.result.report)&&void 0!==i&&i.products?"success":"error"}(),date:Me(null===(P=e.data)||void 0===P||null===(E=P.data)||void 0===E||null===(L=E.status)||void 0===L?void 0:L.finished_at,null===(R=e.data)||void 0===R||null===(T=R.data)||void 0===T||null===(D=T.status)||void 0===D?void 0:D.started_at,null===(M=e.data)||void 0===M||null===(N=M.data)||void 0===N||null===(B=N.metadata)||void 0===B?void 0:B.datetime)}})):[]}),[D]),N=function(){if("id"!==I.lookupType){var e=!0;return I.pipfile||(e=!1,P({type:"error",param:"pipfile",payload:"Field cant be empty"})),I.pipfileLock||(e=!1,P({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),I.name||(e=!1,P({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!I.id||""===I.id)||(P({type:"error",param:"id",payload:"Field cant be empty"}),!1)},B=function(){var e=Object(H.a)(K.a.mark((function e(){var t,n,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.loading&&N()){e.next=2;break}return e.abrupt("return");case 2:"id"===I.lookupType?S("/advise/"+I.id):(P({type:"loading",payload:!0}),a={operating_system:{name:I.operating_system_name,version:I.operating_system_version},python_version:I.python_version,base_image:I.base_image,cuda_version:I.cuda_version,cudnn_version:I.cudnn_version,mkl_version:I.mkl_version,name:I.name,openblas_version:I.openblas_version,openmpi_version:I.openmpi_version},Object.keys(a).forEach((function(e){""===a[e]&&delete a[e]})),""!==(null===a||void 0===a||null===(t=a.operating_system)||void 0===t?void 0:t.name)&&""!==(null===a||void 0===a||null===(n=a.operating_system)||void 0===n?void 0:n.version)||delete a.operating_system,I.pipfile?I.pipfileLock?ie(I.pipfile,I.pipfileLock,a).then((function(e){P({type:"loading",payload:!1}),S("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var t,n,a,i,r,o,c,l,s;if(P({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))if(null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.includes("Pipfile.lock"))P({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(l=e.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.error});else if(null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&null!==(c=o.error)&&void 0!==c&&c.includes("Pipfile")){var d,u;P({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(d=e.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error})}})):P({type:"error",param:"pipfileLock",payload:"Pipfile.lock is required"}):P({type:"error",param:"pipfile",payload:"Pipfile is required"}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(se.a,{in:"id"===I.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=I.error)||void 0===e?void 0:e.id})}),Object(p.jsxs)(L.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(J,{error:void 0!==(null===(t=I.error)||void 0===t?void 0:t.id),onChange:function(e){return P({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{marginRight:2},lefticon:Object(p.jsx)(Z.a,{}),onEnter:B})}),Object(p.jsx)(L.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return B()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]}),Object(p.jsx)(d.a,{onClick:function(){return P({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"}),Object(p.jsx)(d.a,{onClick:function(){return P({type:"input",param:"lookupType",payload:"history"})},children:"History"})]})}),Object(p.jsx)(se.a,{in:"history"===I.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Local Thoth Advise History"}),Object(p.jsx)(Ee,{headers:Be,rows:M,action:function(e){S("/advise/"+e.document_id)}})]})}),Object(p.jsx)(se.a,{in:"manual"===I.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Advise Parameters"}),Object(p.jsxs)(G.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(p.jsxs)(L.a,{container:!0,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(J,{label:null!==(n=I.error)&&void 0!==n&&n.pipfile?null===(i=I.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return P({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=I.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(p.jsx)(L.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(J,{label:null!==(o=I.error)&&void 0!==o&&o.pipfileLock?null===(c=I.error)||void 0===c?void 0:c.pipfileLock:"Pipfile.lock contents",onChange:function(e){return P({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(s=I.error)||void 0===s?void 0:s.pipfileLock),multiline:!0,rows:8})})]}),Object(p.jsxs)(L.a,{container:!0,mt:4,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(de.a,{onChange:function(e){return P({type:"input",param:"base_image",payload:e.target.value})},value:I.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:void 0!==(null===(u=I.error)||void 0===u?void 0:u.base_image)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"cuda_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:void 0!==(null===(j=I.error)||void 0===j?void 0:j.cuda_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"cudnn_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:void 0!==(null===(v=I.error)||void 0===v?void 0:v.cudnn_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"mkl_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:void 0!==(null===(b=I.error)||void 0===b?void 0:b.mkl_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"name",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:void 0!==(null===(h=I.error)||void 0===h?void 0:h.name)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"openblas_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:void 0!==(null===(x=I.error)||void 0===x?void 0:x.openblas_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"openmpi_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:void 0!==(null===(O=I.error)||void 0===O?void 0:O.openmpi_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(de.a,{onChange:function(e){return P({type:"input",param:"operating_system_name",payload:e.target.value})},value:I.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:void 0!==(null===(m=I.error)||void 0===m?void 0:m.operating_system_name)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(de.a,{onChange:function(e){return P({type:"input",param:"operating_system_version",payload:e.target.value})},value:I.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:void 0!==(null===(f=I.error)||void 0===f?void 0:f.operating_system_version)})}),Object(p.jsx)(L.a,{item:!0,xs:12,sm:6,md:4,children:Object(p.jsx)(he,{setValue:function(e){var t;return P({type:"input",param:"python_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:I.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:void 0!==(null===(k=I.error)||void 0===k?void 0:k.python_version)})}),Object(p.jsxs)(L.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:6,md:6,children:Object(p.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){return P({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Cancel"})})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(ue.a,{variant:"contained",color:"primary",onClick:function(){return B()},loading:I.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})};function qe(e,t){var n;switch(t.type){case"loading":return Object(y.a)(Object(y.a)({},e),{},{loading:t.payload});case"error":return Object(y.a)(Object(y.a)({},e),{},{error:Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(y.a)(Object(y.a)({},e),{},(n={},Object(f.a)(n,t.param,t.payload),Object(f.a)(n,"error",Object(y.a)(Object(y.a)({},e.error),{},Object(f.a)({},t.param,void 0))),n));default:throw new Error("Image state dispatch error")}}var ze=[{id:"environment_name",label:"Image Name"},{id:"os_name",label:"OS Name"},{id:"os_version",label:"OS Version"},{id:"python_version",label:"Python Version"},{id:"date",label:"Last Updated"}],Ve={error:{},loading:!1,lookupType:"id",id:""},He=function(){var e,t,n,i=Object(E.g)(),r=Object(a.useReducer)(qe,Ve),o=Object(g.a)(r,2),c=o[0],s=o[1],u=(n={useErrorBoundary:!1},Object(l.useQuery)(Object(y.a)(Object(y.a)({},n),{},{queryKey:["container-images"],queryFn:function(){return ce()}}))),j=Object(a.useMemo)((function(){var e,t,n,a;return null!==u&&void 0!==u&&null!==(e=u.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.container_images?null===u||void 0===u||null===(n=u.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.container_images.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{date:De(new Date(e.datetime))+" ago"})})):[]}),[null===u||void 0===u?void 0:u.data]),v=function(){var e=Object(H.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.loading){e.next=2;break}return e.abrupt("return");case 2:if(!c.id.includes("package-extract")){e.next=5;break}return i("/image/"+c.id),e.abrupt("return");case 5:s({type:"loading",payload:!0}),oe(c.id).then((function(e){s({type:"loading",payload:!1}),i("/image/"+e.data.analysis_id,{state:{image_name:c.id}})})).catch((function(e){var t,n,a,i;(s({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))&&s({type:"error",param:"id",payload:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)&&void 0!==n?n:"An unknown error occurred"})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(se.a,{in:"id"===c.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=c.error)||void 0===e?void 0:e.id})}),Object(p.jsxs)(L.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:12,md:10,children:Object(p.jsx)(J,{error:void 0!=(null===(t=c.error)||void 0===t?void 0:t.id),onChange:function(e){return s({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID or image name",type:"search",boxprops:{mr:2},lefticon:Object(p.jsx)(Z.a,{}),onEnter:v})}),Object(p.jsx)(L.a,{item:!0,xs:12,md:2,children:Object(p.jsx)(d.a,{variant:"contained",color:"primary",onClick:v,sx:{minHeight:"100%",minWidth:"100%"},children:Object(p.jsx)("b",{children:"Analyze"})})})]})]}),Object(p.jsx)(d.a,{onClick:function(){return s({type:"input",param:"lookupType",payload:"lookup"})},children:"Lookup Thoth Images"})]})}),Object(p.jsx)(se.a,{in:"lookup"===c.lookupType,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",mt:3,mb:1,ml:2,children:"Available Thoth Container Images"}),Object(p.jsx)(Ee,{headers:ze,rows:j,action:function(e){i("/image/"+e.package_extract_document_id,{state:{image_name:e.environment_name}})}})]})})]})},Ue=n(481),Ke=n(511),Ge=n.p+"static/media/footer-logo.7d0f9037.png",Ye=function(){return Object(p.jsx)(G.a,{variant:"outlined",sx:{padding:4,marginTop:10,marginBottom:5},children:Object(p.jsxs)(R.a,{display:"flex",justifyContent:"center",alignItems:"flex-start",children:[Object(p.jsx)("img",{style:{paddingLeft:2,paddingRight:2,height:"40px"},alt:"Red Hat Sponsor Logo",src:Ge}),Object(p.jsxs)(Ue.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Useful links"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/orgs/thoth-station/projects/",children:"GitHub project board"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"http://bit.ly/thoth-on-youtube",children:"YouTube channel"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://twitter.com/ThothStation",children:"Twitter"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/thoth-station",children:"GitHub organization"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://www.kaggle.com/thothstation",children:"Kaggle datasets"})]}),Object(p.jsxs)(Ue.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Info"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://thoth-station.ninja/docs/developers/adviser/landing_page.html#landing-page",children:"Thoth's landing page"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://thoth-station.ninja/docs/developers/adviser/",children:"Main documentation page"})]}),Object(p.jsxs)(Ue.a,{sx:{paddingX:2},children:[Object(p.jsx)(T.a,{sx:{textTransform:" uppercase",paddingBottom:"20px"},variant:"h6",children:"Friends"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://github.com/AICoE/aicoe-ci",children:"AICoE-CI"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"https://www.operate-first.cloud/",children:"Operate First"}),Object(p.jsx)(Ke.a,{underline:"hover",sx:{paddingBottom:1},href:"http://opendatahub.io/",children:"Open Data Hub"})]})]})})},Qe=function(){var e=Object(a.useState)("package"),t=Object(g.a)(e,2),n=t[0],i=t[1],r=Object(B.a)(),o=Object(W.a)(r.breakpoints.up("sm"));return Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",sx:{paddingX:2,maxWidth:"1000px",margin:"auto"},children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(R.a,{sx:{marginTop:10},children:Object(p.jsx)("img",{alt:"Thoth Logo",src:V,height:o?300:"auto",width:"100%"})})}),Object(p.jsxs)(L.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(p.jsx)(L.a,{item:!0,xs:12,alignItems:"left",mb:3,children:Object(p.jsx)(T.a,{variant:"h4",children:Object(p.jsx)("b",{children:"Thoth Search"})})}),Object(p.jsx)(L.a,{item:!0,xs:12,alignItems:"left",children:Object(p.jsx)(T.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyse and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyse a single Python package to see what Thoth knows about the package."})}),Object(p.jsx)(L.a,{item:!0,textAlign:"center",xs:12,mt:3,mb:4,children:Object(p.jsxs)(D.a,{value:n,exclusive:!0,onChange:function(e,t){t&&i(t)},size:o?"large":"small",children:[Object(p.jsx)(M.a,{value:"package",children:Object(p.jsx)("b",{children:"package"})}),Object(p.jsx)(M.a,{value:"environment",children:Object(p.jsx)("b",{children:"environment"})}),Object(p.jsx)(M.a,{value:"image",children:Object(p.jsx)("b",{children:"image"})})]})}),Object(p.jsxs)(L.a,{item:!0,xs:12,sx:{marginBottom:3},children:[Object(p.jsx)(N.a,{}),Object(p.jsx)(z,{value:n,index:"package",children:Object(p.jsx)(le,{})}),Object(p.jsx)(z,{value:n,index:"environment",children:Object(p.jsx)(Fe,{})}),Object(p.jsx)(z,{value:n,index:"image",children:Object(p.jsx)(He,{})})]})]}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(Ye,{})})]})},Je=function(){return Object(p.jsx)("div",{children:"404"})},Xe=n(301),Ze=n(164),$e=n.n(Ze),et=["text","icon","link"],tt=function(e){var t=e.text,n=e.icon,a=e.link,i=Object(F.a)(e,et);return Object(p.jsxs)(Ue.a,Object(y.a)(Object(y.a)({},i),{},{direction:"row",spacing:1,alignItems:"center",children:[n,a?Object(p.jsx)(Ke.a,{underline:"none",href:a||void 0,target:"_blank",rel:"noopener noreferrer",variant:"body2",align:"center",children:t}):Object(p.jsx)(T.a,{variant:"body2",align:"center",children:t})]}))},nt=n(495),at=["info"],it=function(e){var t=e.info,n=Object(F.a)(e,at);return Object(p.jsx)(nt.a,Object(y.a)(Object(y.a)({action:t.link?Object(p.jsx)(d.a,{color:"inherit",size:"small",href:null===t||void 0===t?void 0:t.link,children:"DETAILS"}):void 0,severity:t.type},n),{},{children:null===t||void 0===t?void 0:t.message}))},rt=function(e){var t,n,i,r,o,c,l,s,d,u,j,v,b,h=e.adviseDocument,x=e.lastLog,O=Object(a.useMemo)((function(){var e,t,n;return null!==h&&void 0!==h&&null!==(e=h.result)&&void 0!==e&&e.report?h.result.report.ERROR?["ERROR","error"]:["COMPLETE","success"]:null!==h&&void 0!==h&&null!==(t=h.result)&&void 0!==t&&t.error?["ERROR","error"]:null!==h&&void 0!==h&&null!==(n=h.status)&&void 0!==n&&n.state?[h.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[h]),m=Object(g.a)(O,2),f=m[0],y=m[1];return Object(p.jsxs)("div",{children:[Object(p.jsxs)(G.a,{variant:"outlined",sx:{padding:2},children:[Object(p.jsx)(T.a,{variant:"h5",mb:1,children:Object(p.jsx)("b",{children:null!==(t=null===h||void 0===h||null===(n=h.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:null===h||void 0===h||null===(i=h.parameters)||void 0===i?void 0:i.analysis_id})}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(p.jsx)(Xe.a,{label:f,color:y}),Object(p.jsx)(tt,{text:Me(null===h||void 0===h||null===(r=h.status)||void 0===r?void 0:r.finished_at,null===h||void 0===h||null===(o=h.status)||void 0===o?void 0:o.started_at,null===h||void 0===h||null===(c=h.metadata)||void 0===c?void 0:c.datetime),icon:Object(p.jsx)($e.a,{})})]})]}),Object(p.jsx)(p.Fragment,{children:"ERROR"===f?Object(p.jsx)(it,{variant:"filled",sx:{margin:1,marginTop:2},info:{message:null!==(l=null!==(s=null===h||void 0===h||null===(d=h.result)||void 0===d||null===(u=d.report)||void 0===u?void 0:u.ERROR)&&void 0!==s?s:null===h||void 0===h||null===(j=h.result)||void 0===j?void 0:j.error_msg)&&void 0!==l?l:"",type:"error"}}):"COMPLETE"!==f?Object(p.jsx)(it,{variant:"outlined",sx:{margin:1,marginTop:2},info:{message:null!==(v=null===x||void 0===x?void 0:x.message)&&void 0!==v?v:"",type:null===x||void 0===x||null===(b=x.levelname)||void 0===b?void 0:b.toLowerCase()}}):void 0})]})};n(484);var ot=n(503),ct=n(513),lt=n(485),st=n(514),dt=n(68),ut=n.n(dt),jt=n(55),vt=n.n(jt);function bt(e){var t,n=e.graph,i=Object(E.g)(),r=null!==(t=Object(a.useContext)(xt))&&void 0!==t?t:{setSelected:function(){return console.log("missing callback")}},o=r.selected,c=r.setSelected,l=Object(a.useState)(""),s=Object(g.a)(l,2),d=s[0],u=s[1],j=Object(a.useMemo)((function(){if(!n)return[];var e=[];return n.nodes.forEach((function(t){var n,a,i,r,o,c,l,s,d,u;-1!==t.value.depth&&e.push({name:null!==(n=t.value.name)&&void 0!==n?n:t.key,key:t.key,summary:null!==(a=null===t||void 0===t||null===(i=t.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.Summary)&&void 0!==a?a:"",version:null===t||void 0===t?void 0:t.value.version,warnings:null!==(o=null===(c=t.value.justifications)||void 0===c||null===(l=c.filter((function(e){return"WARNING"===e.type})))||void 0===l?void 0:l.length)&&void 0!==o?o:0,errors:null!==(s=null===(d=t.value.justifications)||void 0===d||null===(u=d.filter((function(e){return"ERROR"===e.type})))||void 0===u?void 0:u.length)&&void 0!==s?s:0})})),e}),[n]);return n?Object(p.jsxs)(Ue.a,{spacing:2,sx:{maxHeight:"100%"},children:[Object(p.jsx)(J,{onChange:function(e){u(e.target.value)},lefticon:Object(p.jsx)(Z.a,{})}),Object(p.jsx)(ot.a,{sx:{overflow:"scroll"},dense:!0,children:j.filter((function(e){return e.name.startsWith(d)})).map((function(e){return Object(p.jsxs)(ct.a,{button:!0,onClick:function(){c(e.key),i("../packages/"+e.key)},selected:o===e.key,sx:{borderRadius:1.5},children:[Object(p.jsx)(lt.a,{primary:Object(p.jsx)(T.a,{variant:"h5",children:e.name}),secondary:"v".concat(e.version)}),Object(p.jsx)(st.a,{children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[e.warnings?Object(p.jsx)(Xe.a,{variant:"outlined",size:"medium",icon:Object(p.jsx)(vt.a,{}),label:e.warnings,color:"warning"}):void 0,e.errors?Object(p.jsx)(Xe.a,{variant:"outlined",size:"medium",icon:Object(p.jsx)(ut.a,{}),label:e.errors,color:"error"}):void 0]})})]},e.key)}))})]}):null}var ht=n(515),pt=function(e){var t=e.type,n=e.label,i=e.progress;return Object(a.useMemo)((function(){return"bar"===t?Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(ht.a,{variant:i?"determinate":void 0,value:i}),Object(p.jsx)(T.a,{variant:"body2",children:n})]}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(Ce.a,{variant:i?"determinate":void 0,value:i}),Object(p.jsx)(T.a,{variant:"body2",children:n})]})}),[t,n,i])},xt=i.a.createContext({}),Ot=function(e){var t,n,i,r,o,c,l=e.graph,s=Object(E.h)(),d=Object(a.useState)(""),u=Object(g.a)(d,2),j=u[0],v=u[1],b=Object(a.useContext)(k);return Object(a.useEffect)((function(){s.pkg&&v(s.pkg)}),[s.pkg]),l?1===l.nodes.size?Object(p.jsxs)(R.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"No packages found"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise document encountered an error resulting in no Pipfile.lock"})]}):Object(p.jsx)(xt.Provider,{value:{selected:j,setSelected:v},children:Object(p.jsx)(R.a,{flexDirection:"column",display:"flex",height:"100%",justifyContent:"center",alignItems:"flex-start",children:Object(p.jsxs)(R.a,{flexGrow:1,display:"flex",sx:{overflowY:"hidden",width:"100%"},children:[Object(p.jsx)(R.a,{overflow:"auto",sx:{marginRight:2,minWidth:"500px"},children:Object(p.jsx)(bt,{graph:l})}),Object(p.jsx)(R.a,{overflow:"auto",sx:{minWidth:"50%",width:"100%"},children:j&&l?Object(p.jsx)(ln,{graph:l}):Object(p.jsxs)(R.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Choose a package"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"Click on a package from the packages found in the Pipfile.lock"})]})})]})})}):null!==b&&void 0!==b&&null!==(t=b.loading)&&void 0!==t&&t.graph?Object(p.jsx)(pt,{type:"circular",label:null===b||void 0===b||null===(n=b.loading)||void 0===n?void 0:n.graph.text,progress:(null!==(i=null===b||void 0===b||null===(r=b.loading)||void 0===r?void 0:r.graph.value)&&void 0!==i?i:0)/(null!==(o=null===b||void 0===b||null===(c=b.loading)||void 0===c?void 0:c.graph.total)&&void 0!==o?o:1)*100}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Package data not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise run encountered an error."})]})};var mt=n(126),gt=n.n(mt),ft=n(266),yt=n.n(ft),kt=function(e){var t,n,a,i,r,o,c,l,s=e.node;return Object(p.jsxs)("div",{children:[Object(p.jsxs)(L.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"h6",children:Object(p.jsx)("b",{children:s.value.id})})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsxs)(T.a,{ml:2,variant:"body1",children:["v",null!==(t=s.value.version)&&void 0!==t?t:"NaN"]})})]}),Object(p.jsx)(T.a,{gutterBottom:!0,variant:"body2",children:null!==(n=null===(a=s.value)||void 0===a||null===(i=a.metadata)||void 0===i?void 0:i.Summary)&&void 0!==n?n:"NaN"}),Object(p.jsxs)(L.a,{container:!0,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(tt,{text:null!==(r=null===(o=s.value)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.License)&&void 0!==r?r:"NaN",icon:Object(p.jsx)(gt.a,{})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(tt,{ml:2,text:null!==(l=s.value)&&void 0!==l&&l.latestVersion?"Latest version is installed":"Installed version is NOT the latest.",icon:Object(p.jsx)(yt.a,{})})})]})]})},_t=n(172),wt=["graph","graphHeight","root"],St=function(e){var t=e.graph,n=e.graphHeight,i=e.root,r=Object(F.a)(e,wt),c=Object(a.useRef)(null),l=Object(a.useContext)(xt).selected;return Object(a.useEffect)((function(){if((l||i)&&t){var e=null!==i&&void 0!==i?i:t.nodes.get(l);if(e){var n,a,r=t.findAllNodesOnAllPaths(e,"*App"),s=t.nodes.get("*App");s&&r.set("*App",s);var d=new _t.a;r.forEach((function(t){var n,a=document.createElement("div");o.a.render(Object(p.jsx)(kt,{node:t}),a);var i=null!==(n=t.value.color)&&void 0!==n?n:ae.nodes.color.background,r=void 0;"*App"===t.key?(i="#4fc1ea",r={color:"#4fc1ea",strokeWidth:3,size:20}):t.key===e.key&&(i="#f39200"),d.add(Object(y.a)(Object(y.a)({},t.value),{},{color:i,title:t.key===e.key||"*App"===t.key?void 0:a,font:r}))}));var u={nodes:d,edges:new _t.a(t.visEdges)},j=c.current&&new _t.b(c.current,u,ae),v=null===(n=document)||void 0===n||null===(a=n.getElementById("mynetwork"))||void 0===a?void 0:a.getElementsByTagName("canvas")[0],b=function(e){v&&(v.style.cursor=e)};j&&(j.on("hoverNode",(function(){b("grab")})),j.on("blurNode",(function(){b("default")})),j.on("dragStart",(function(){b("grabbing")})),j.on("dragging",(function(){b("grabbing")})),j.on("dragEnd",(function(){b("grab")})))}}}),[l,i,t,c]),Object(p.jsx)("div",Object(y.a)(Object(y.a)({},r),{},{style:{display:"flex",flexFlow:"column nowrap"},children:Object(p.jsx)("div",{ref:c,id:"mynetwork",style:{flex:"1 1 auto",height:null!==n&&void 0!==n?n:"50vh"}})}))},Ct=n(16),At=n(516),It=n(517),Pt=n(518),Et=n(206),Lt=n.n(Et),Rt=n(40),Tt=n.n(Rt),Dt=n(69),Mt=n.n(Dt),Nt=n(84),Bt=n.n(Nt),Wt=n(486),Ft=function(e){var t=e.tags,n=e.name,i=e.short,r=e.risk,o=e.passing,c=e.justification,l=Object(a.useState)(!1),s=Object(g.a)(l,2),d=s[0],u=s[1];return Object(p.jsxs)(R.a,{children:[Object(p.jsxs)(L.a,{container:!0,alignItems:"center",sx:{backgroundColor:d?"action.selected":void 0,borderRadius:"16px"},children:[Object(p.jsx)(L.a,{item:!0,xs:11,children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(Se.a,{onClick:function(){return u(!d)},children:Object(p.jsx)(Wt.a,{sx:{mr:-1,transform:d?"rotate(0deg)":"rotate(-90deg)",transition:"0.2s"}})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:n})]})}),Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)(R.a,{display:"flex",justifyContent:"flex-end",sx:{marginRight:2},children:o?Object(p.jsx)(Mt.a,{color:"success"}):Object(p.jsx)(Bt.a,{color:"error"})})})]}),Object(p.jsx)(se.a,{in:d,children:Object(p.jsxs)(L.a,{container:!0,sx:{marginLeft:5,marginBottom:1,paddingRight:1},children:[Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginBottom:2},children:Object(p.jsx)(T.a,{variant:"body2",children:i})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{fontWeight:"bolder",variant:"body2",children:"Reason"})}),Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsx)(T.a,{variant:"body2",children:c})}),Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsxs)(Ue.a,{alignItems:"center",direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body2",children:"risk: "}),Object(p.jsx)(Xe.a,{size:"small",label:r,color:"High"===r?"error":"Medium"==r?"warning":"info"})]})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsxs)(Ue.a,{alignItems:"center",direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body2",children:"tags: "}),t.split(", ").map((function(e){return Object(p.jsx)(Xe.a,{size:"small",label:e},e)}))]})})]})})]})},qt=function(e){var t=e.metric;return Object(p.jsxs)(At.a,{variant:"outlined",sx:{marginTop:2},children:[Object(p.jsx)(It.a,{title:"Security Scorecards",subheader:"Scorecards give consumers of open-source projects an easy way to judge whether their dependencies are safe.",action:Object(p.jsx)(Se.a,{href:"https://github.com/ossf/scorecard/blob/main/docs/checks.md",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(Ue.a,{children:Object.values(t).map((function(e){return Object(p.jsx)(Ft,Object(y.a)({},e),e.name)}))})})]})},zt=function(e,t,n,a,i,r){var o={params:{name:e,version:t,index:n,os_name:a,os_version:i,python_version:r},headers:{accept:"application/json"}};return ee.a.get(ne+"/python/package/version/metadata",o)},Vt=function(e,t){return Object(l.useQueries)(e.map((function(e){return Object(y.a)(Object(y.a)({},t),{},{enabled:!!e.name&&!!e.version&&!!e.index&&!!e.os_name&&!!e.os_version&&!!e.python_version,queryKey:["packageMetadata",e.name,e.version,e.index,e.os_name,e.os_version,e.python_version],queryFn:function(){return zt(e.name,e.version,e.index,e.os_name,e.os_version,e.python_version)}})})))},Ht=n(267),Ut=n.n(Ht);function Kt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(H.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(H.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(t);case 2:return n=e.sent,e.abrupt("return",Ut.a.parse(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t){var n={Maintained:"actively maintained","Dependency-Update-Tool":"automatic dependency updates","Binary-Artifacts":"binary artifacts","Branch-Protection":"branch protection","CI-Tests":"CI tests","CII-Best-Practices":"CII Best Practices","Code-Review":"code review",Contributors:"contributors",Fuzzing:"fuzzing",Packaging:"published as a package","Pinned-Dependencies":"pinned dependencies",SAST:"static source code analysis","Security-Policy":"security policy","Signed-Releases":"sign tags","Token-Permissions":"least privilege",Vulnerabilities:"vulnerabilities","Dangerous-Workflow":"dangerous",License:"license"}[e];return t.find((function(e){return e.message.includes(n)}))}var Xt=n(268),Zt=n.n(Xt),$t=n(165),en=n.n($t),tn=n(269),nn=n.n(tn),an=n(92),rn=n.n(an),on=n(270),cn=n.n(on),ln=function(e){var t,n,r,o,c,l,s,d,u,j,v,b,h,x,O=e.graph,m=Object(a.useContext)(xt),k=m.selected,_=m.setSelected,w=Object(E.g)(),S=Object(a.useMemo)((function(){return O.nodes.get(k)}),[k]),C=Object(a.useMemo)((function(){var e=[];return S&&Object(Ct.a)(S.parents).filter((function(e){return"*App"!==e})).forEach((function(t){O.nodes.get(t)&&e.push(t)})),e}),[S]),A=Object(a.useMemo)((function(){var e,t,n=new Map;S&&(null===S||void 0===S||null===(e=S.value)||void 0===e||null===(t=e.justifications)||void 0===t||t.forEach((function(e){n.set(e.message,e)})));return n}),[S]),I=function(e){var t=Object(a.useState)([]),n=Object(g.a)(t,2),i=n[0],r=n[1],o=Object(a.useMemo)((function(){if(e)return Array.from(e.values()).filter((function(t){return"https://github.com/ossf/scorecard/blob/main/docs/checks.md"===t.link&&(e.delete(t.message),!0)}))}),[e]);return Object(a.useEffect)((function(){if(e){var t=!0;return function(){n.apply(this,arguments)}(),function(){t=!1}}function n(){return(n=Object(H.a)(K.a.mark((function e(){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt("https://raw.githubusercontent.com/ossf/scorecard/main/docs/checks/internal/checks.yaml").then((function(e){var t;return Object.entries(null!==(t=null===e||void 0===e?void 0:e.checks)&&void 0!==t?t:{}).filter((function(e){return Jt(Object(g.a)(e,1)[0],null!==o&&void 0!==o?o:[])})).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1],i=Jt(n,null!==o&&void 0!==o?o:[]);return{tags:null===a||void 0===a?void 0:a.tags,name:n,short:null===a||void 0===a?void 0:a.short,risk:null===a||void 0===a?void 0:a.risk,justification:null===i||void 0===i?void 0:i.message,passing:"WARNING"!==(null===i||void 0===i?void 0:i.type)}}))}));case 2:if(n=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:r(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[e]),i}(A),P=function(e){var t=Object(a.useState)({"libraries.io":{label:"libraries.io",icon:Object(p.jsx)(Tt.a,{})},"released on PyPI":{label:"PyPI",icon:Object(p.jsx)(Tt.a,{})},"hosted on GitHub":{label:"GitHub",icon:Object(p.jsx)(Zt.a,{})},"Release notes":{label:"Release",icon:Object(p.jsx)(nn.a,{})},"StackOverflow tags":{label:"StackOverflow",icon:Object(p.jsx)(Tt.a,{})},"project documentation":{label:"Documentation",icon:Object(p.jsx)(en.a,{})}}),n=Object(g.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){var t=Object.keys(i),n=i;e&&Array.from(e.values()).forEach((function(a){t.forEach((function(t){var i;a.message.includes(t)&&(e.delete(a.message),n=Object(y.a)(Object(y.a)({},n),{},Object(f.a)({},t,Object(y.a)(Object(y.a)({},n[t]),{},{link:null!==(i=null===a||void 0===a?void 0:a.link)&&void 0!==i?i:""}))))}))})),Object.entries(n).forEach((function(e){var t=Object(g.a)(e,2),a=t[0];t[1].link||delete n[a]})),r(n)}),[e]),i}(A),D=Object(a.useMemo)((function(){if(A)return Array.from(A.values()).find((function(e){return!!e.message.includes("popularity on GitHub")&&(A.delete(e.message),!0)}))}),[A]),M=Object(a.useMemo)((function(){if(A){var e=Array.from(A.values()).find((function(e){return!!e.message.includes("Thoth Search UI")&&(A.delete(e.message),!0)}));return null===e||void 0===e?void 0:e.link}}),[A]),B=Object(a.useMemo)((function(){return Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",sx:{marginTop:2},children:[Object(p.jsx)(Lt.a,{color:"error",sx:{marginRight:".5rem"}}),Object(p.jsx)(T.a,{mb:0,color:"error",gutterBottom:!0,variant:"body2",children:"The package metadata could not be fetched."})]})}),[]);return Object(p.jsxs)(R.a,{sx:{overflow:"scroll"},children:[Object(p.jsxs)(At.a,{variant:"outlined",sx:{padding:2},children:[Object(p.jsxs)(L.a,{container:!0,alignItems:"center",mb:1,children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h3",children:Object(p.jsx)(Ke.a,{underline:"none",href:M,children:Object(p.jsx)("b",{children:null===S||void 0===S||null===(t=S.value)||void 0===t?void 0:t.name})})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{ml:2,variant:"h6",children:null===S||void 0===S||null===(n=S.value)||void 0===n?void 0:n.version})})]}),Object(p.jsxs)(L.a,{container:!0,spacing:1,children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(tt,{text:null!==(r=null===S||void 0===S||null===(o=S.value)||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.License)&&void 0!==r?r:"NaN",icon:Object(p.jsx)(gt.a,{})})}),Object.values(P).map((function(e,t){var n,a;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(N.a,{orientation:"vertical"})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(tt,{text:null!==(a=e.label)&&void 0!==a?a:"",icon:e.icon,link:e.link})},e.label)]},null!==(n=e.link)&&void 0!==n?n:""+t)}))]}),Object(p.jsx)(T.a,{sx:{marginTop:2},variant:"body1",children:null===S||void 0===S||null===(l=S.value)||void 0===l||null===(s=l.metadata)||void 0===s?void 0:s.Summary}),!(null!==S&&void 0!==S&&null!==(d=S.value)&&void 0!==d&&d.metadata)&&B]}),I.length>0?Object(p.jsx)(qt,{metric:I}):void 0,D?Object(p.jsx)(At.a,{variant:"outlined",sx:{marginTop:2},children:Object(p.jsx)(It.a,{title:D.message,action:Object(p.jsx)(Se.a,{href:D.link,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})}),avatar:Object(p.jsx)(cn.a,{})})}):void 0,M?Array.from(A.values()).map((function(e,t){return Object(p.jsx)(At.a,{variant:"outlined",sx:{marginTop:2},children:Object(p.jsx)(It.a,{title:e.message,action:Object(p.jsx)(Se.a,{href:e.link,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})}),avatar:"ERROR"===e.type?Object(p.jsx)(Lt.a,{color:"error"}):"WARNING"===e.type?Object(p.jsx)(vt.a,{color:"warning"}):Object(p.jsx)(rn.a,{color:"info"})})},e.message+t)})):void 0,Object(p.jsxs)(At.a,{variant:"outlined",sx:{marginTop:2},children:[Object(p.jsx)(It.a,{title:"Dependency Graph",subheader:Object(p.jsxs)(T.a,{variant:"body1",mb:2,children:[0===(null===(u=Object(Ct.a)(null!==(j=null===S||void 0===S?void 0:S.parents)&&void 0!==j?j:[]).filter((function(e){return"*App"!==e})))||void 0===u?void 0:u.length)?(null===S||void 0===S||null===(v=S.value)||void 0===v?void 0:v.label)+" is not a dependent of any package in this Python environment":"There are "+(null===(b=Object(Ct.a)(null!==(h=null===S||void 0===S?void 0:S.parents)&&void 0!==h?h:[]).filter((function(e){return"*App"!==e})))||void 0===b?void 0:b.length)+" package(s) that have "+(null===S||void 0===S||null===(x=S.value)||void 0===x?void 0:x.label)+" as a direct dependency: ",C.map((function(e,t){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(Ke.a,{underline:"hover",onClick:function(){_(e),w("../packages/"+e)},children:e})," "]},e+t)}))]})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(St,{graph:O})})]})]})},sn=function(){var e=Object(H.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,Promise.all(t.map(function(){var e=Object(H.a)(K.a.mark((function e(t){var a,i,r,o,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message.includes("CVE")||t.message.startsWith("No known")){e.next=11;break}if(!(a=Array.from(t.message.matchAll(/'(.*?)'/g)))||4!==a.length){e.next=11;break}if(n.has(a[3][1])){e.next=10;break}return e.next=6,Yt("https://raw.githubusercontent.com/pypa/advisory-database/main/vulns/".concat(a[0][1],"/").concat(a[3][1],".yaml"));case 6:i=e.sent,n.set(a[3][1],{report:i,packages:[{name:a[0][1],version:a[1][1],index:a[2][1]}]}),e.next=11;break;case 10:n.set(a[3][1],Object(y.a)(Object(y.a)({},null!==(r=n.get(a[3][1]))&&void 0!==r?r:{}),{},{packages:[].concat(Object(Ct.a)(null!==(o=null===(c=n.get(a[3][1]))||void 0===c?void 0:c.packages)&&void 0!==o?o:[]),[{name:a[0][1],version:a[1][1],index:a[2][1]}])}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",{data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dn=function(e){var t,n,a=new Map;e.forEach((function(e){var t,n=e;"WARNING"===e.type&&null!==n&&void 0!==n&&n.package_name&&a.set(n.package_name,(null!==(t=a.get(n.package_name))&&void 0!==t?t:0)+1)}));var i=Array.from(a.entries()).sort((function(e,t){return Object(g.a)(e,2)[1]-Object(g.a)(t,2)[1]})),r=null!==(t=null===(n=i.at(-1))||void 0===n?void 0:n[1])&&void 0!==t?t:0;return{data:{values:i,top_packages:i.filter((function(e){return Object(g.a)(e,2)[1]===r})),avg:i.reduce((function(e,t){return e+Object(g.a)(t,2)[1]}),0)/i.length}}},un=function(e){var t=new Map,n=new Set;return e.forEach((function(e){var a=e.package_name;if(a&&n.add(a),a&&e.message.includes("actively maintained")&&"WARNING"===e.type&&t.set(a,Object(y.a)(Object(y.a)({},t.get(a)),{},{not_maintained:!0})),a&&e.message.includes("has no recent release")){var i=e.message.split("dates back to ").at(-1);t.set(a,Object(y.a)(Object(y.a)({},t.get(a)),{},{last_release:i}))}a&&e.message.includes("low number of maintainers")&&t.set(a,Object(y.a)(Object(y.a)({},t.get(a)),{},{low_maintainers:!0}))})),{data:{total:n.size,packages:Array.from(t.entries()).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(y.a)(Object(y.a)({},a),{},{id:n})})).sort((function(e,t){var n,a;return new Date(null!==(n=t.last_release)&&void 0!==n?n:Date.now()).getTime()-new Date(null!==(a=e.last_release)&&void 0!==a?a:Date.now()).getTime()}))}}},jn=n(50),vn=n(78),bn=n(143),hn=n.n(bn);var pn=function(e){var t,n=e.source,r=e.handleClick,o=Object(a.useState)(null),c=Object(g.a)(o,2),l=c[0],s=c[1],d=Object(a.useState)(null),u=Object(g.a)(d,2),j=u[0],v=u[1],b=function(e){var t,n,a=null!==(t=e&&e.left)&&void 0!==t?t:null,i=null!==(n=e&&e.right)&&void 0!==n?n:null;if(s(a),v(i),a&&i){var o=[];null===x||void 0===x||x.forEach((function(e){var t=e.x>=a&&e.x<=i,n=e.x0>=a&&e.x0<=i,r=a>=e.x0&&a<=e.x,c=i>=e.x0&&i<=e.x;(r||c||t||n)&&o.push.apply(o,Object(Ct.a)(e.pkgs))})),r(o)}else r([])},h=Object(a.useMemo)((function(){if(n)return Math.max.apply(Math,Object(Ct.a)(n.values.map((function(e){return Object(g.a)(e,2)[1]}))))}),[n]),x=i.a.useMemo((function(){if(n&&h)return function(e,t){var n,a=1/0,i=-1/0,r=Object(jn.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o<a?a=o:o>i&&(i=o)}}catch(j){r.e(j)}finally{r.f()}var c,l=Math.ceil((i-a+1)/t),s=new Array(l).fill(0),d=Object(jn.a)(e);try{for(d.s();!(c=d.n()).done;){var u=c.value;s[Math.floor((u-a)/t)]++}}catch(j){d.e(j)}finally{d.f()}return s}(n.values.map((function(e){return Object(g.a)(e,2)[1]})),1).map((function(e,t){return{color:hn.a.rgb(46,125,50).mix(hn.a.rgb(237,108,2),(t+1)/h).lighten(.25).hex(),selectedColor:hn.a.rgb(46,125,50).mix(hn.a.rgb(237,108,2),(t+1)/h).darken(.25).hex(),x:t,y:0,x0:t+1,y0:e+1,index:t,pkgs:n.values.filter((function(e){return Object(g.a)(e,2)[1]===t+1}))}}))}),[n,h]);return Object(p.jsx)("div",{children:Object(p.jsxs)(vn.a,{margin:{left:8,right:8},height:150,children:[Object(p.jsx)(vn.f,{tickFormat:function(e){return e.toString()},tickTotal:(null!==(t=null===x||void 0===x?void 0:x.length)&&void 0!==t?t:0)/2,style:{ticks:{stroke:"#000000"},text:{stroke:"none"}}}),Object(p.jsx)(vn.g,{}),Object(p.jsx)(vn.c,{colorType:"literal",data:x,getOpacity:function(e){if(null===l||null===j)return 1;var t=e.x>=l&&e.x<=j,n=e.x0>=l&&e.x0<=j,a=l>=e.x0&&l<=e.x,i=j>=e.x0&&j<=e.x;return a||i||t||n?1:.6}}),Object(p.jsx)(vn.b,{color:"#829AE3",drag:!0,enableY:!1,onDrag:b,onDragEnd:b})]})})},xn=n(519),On=function(e){var t,n,r=e.warningPackages,o=Object(a.useState)([]),c=Object(g.a)(o,2),l=c[0],s=c[1];return r?r.data?Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Package Warnings",subheader:"The distribution of all package warnings generated by Thoth"}),Object(p.jsx)(Pt.a,{children:Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(L.a,{item:!0,style:{height:"100%",width:"100%"},children:Object(p.jsx)(pn,{source:r.data,handleClick:function(e){s(e)}})}),Object(p.jsxs)(L.a,{item:!0,width:"100%",children:[Object(p.jsx)(T.a,{textAlign:"center",sx:{marginBottom:.5},variant:"body1",fontStyle:"italic",children:l.length>0?"".concat(l.length," packages selected"):"Click and drag on the chart to select packages"}),l.length>0&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Average Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:(l.reduce((function(e,t){return e+Object(g.a)(t,2)[1]}),0)/l.length).toFixed(1)})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Max Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:null===(t=l.sort((function(e,t){return Object(g.a)(e,2)[1]-Object(g.a)(t,2)[1]})).at(-1))||void 0===t?void 0:t[1]})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,sx:{marginBottom:2},children:[Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Min Warnings:"}),Object(p.jsx)(T.a,{variant:"body1",children:null===(n=l.sort((function(e,t){return Object(g.a)(e,2)[1]-Object(g.a)(t,2)[1]})).at(0))||void 0===n?void 0:n[1]})]}),Array.from(new Set(l.map((function(e){return Object(g.a)(e,2)[1]}))).values()).sort((function(e,t){return t-e})).map((function(e){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(T.a,{color:"gray",variant:"subtitle2",fontStyle:"italic",children:"".concat(e," warnings")}),Object(p.jsx)(N.a,{}),Object(p.jsx)(L.a,{container:!0,spacing:1.5,sx:{marginBottom:1,marginLeft:1},children:l.filter((function(t){return Object(g.a)(t,2)[1]===e})).map((function(e){var t=Object(g.a)(e,1)[0];return Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+t,children:t})},t)}))})]},e)}))]})]})]})})]}):null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"rectangular",width:210,height:118})]})},mn=n(487),gn=n(488),fn=n(298),yn=n(207),kn=n.n(yn),_n=function(e){var t,n=e.cvePackages,r=Object(a.useState)(null),o=Object(g.a)(r,2),c=o[0],l=o[1],s=i.a.useRef(null);return n?n.data?Object(p.jsxs)(At.a,{variant:"outlined",ref:s,children:[Object(p.jsx)(It.a,{title:"CVE Warnings",subheader:"Security advisories for packages published on PyPI",action:Object(p.jsx)(Se.a,{href:"https://thoth-station.ninja/j/cve",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})}),Object(p.jsxs)(Pt.a,{children:[Object(p.jsx)(mn.a,{direction:"right",in:null!==c,container:s.current,children:Object(p.jsx)("div",{children:null!==c?Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(Ue.a,{alignItems:"center",direction:"row",children:[Object(p.jsx)(Se.a,{size:"small",onClick:function(){return l(null)},children:Object(p.jsx)(kn.a,{sx:{transform:"rotate(180deg)"}})}),Object(p.jsx)(T.a,{variant:"h5",fontWeight:"bold",children:null===c||void 0===c?void 0:c.id})]}),c.id?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(T.a,{sx:{marginLeft:4},variant:"subtitle2",fontStyle:"italic",color:"gray",children:["Published: ",new Date(null===c||void 0===c?void 0:c.published).toLocaleString()]}),Object(p.jsx)(T.a,{variant:"body2",sx:{marginTop:2},children:null===c||void 0===c?void 0:c.details}),Object(p.jsx)(T.a,{sx:{marginTop:2},variant:"h6",fontWeight:"bold",children:"Affected Packages"}),null===c||void 0===c||null===(t=c.affected)||void 0===t?void 0:t.map((function(e,t){var n,a,i,r,o;return Object(p.jsxs)(R.a,{sx:{marginBottom:1},children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{variant:"body1",color:"gray",children:"[".concat(null===e||void 0===e||null===(a=e.package)||void 0===a?void 0:a.ecosystem,"]")}),Object(p.jsxs)(T.a,{variant:"body1",children:[" ",Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+(null===e||void 0===e||null===(i=e.package)||void 0===i?void 0:i.name),children:null===e||void 0===e||null===(r=e.package)||void 0===r?void 0:r.name})]})]}),null===e||void 0===e||null===(o=e.ranges)||void 0===o?void 0:o.map((function(e,n){return Object(p.jsxs)(L.a,{container:!0,sx:{marginLeft:2,marginTop:.5},children:[Object(p.jsx)(L.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:"Type"})}),Object(p.jsx)(L.a,{item:!0,xs:10,children:Object(p.jsx)(T.a,{variant:"body2",children:e.type})}),Object(p.jsx)(L.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:"Events"})}),Object(p.jsx)(L.a,{item:!0,xs:10,sx:{marginBottom:2},children:e.events.map((function(e,a){var i;return Object(p.jsxs)(L.a,{container:!0,direction:"row",spacing:1,children:[Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",children:e.fixed?"Fixed":"Introduced"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null!==(i=e.introduced)&&void 0!==i?i:e.fixed})})]},"event"+t+n+a)}))})]},e.type+n+t)}))]},(null===e||void 0===e||null===(n=e.package)||void 0===n?void 0:n.name)+t)}))]}):Object(p.jsx)(T.a,{variant:"body2",color:"red",textAlign:"center",children:"Unable to fetch CVE details"})]}):void 0})}),Object(p.jsx)(mn.a,{direction:"left",in:null===c,container:s.current,children:Object(p.jsx)("div",{children:null===c?Object(p.jsx)(ot.a,{disablePadding:!0,dense:!0,children:Array.from(n.data.entries()).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)(ct.a,{disablePadding:!0,dense:!0,children:Object(p.jsxs)(gn.a,{onClick:function(){var e;return l(null!==(e=a.report)&&void 0!==e?e:null)},children:[Object(p.jsx)(lt.a,{primary:n,secondary:a.packages.map((function(e){return"".concat(e.name," ").concat(e.version)})).join(", ")}),Object(p.jsx)(fn.a,{children:Object(p.jsx)(kn.a,{})})]})},n)}))}):void 0})})]})]}):null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"rectangular",height:118}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"})]})},wn=function(e){var t=e.source,n=e.selected,a=i.a.useMemo((function(){if(t)return t.map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return{x:(Date.now()-new Date(null!==a&&void 0!==a?a:Date.now()).getTime())/3154e7,y:0,opacity:.5,id:n}}))}),[t]);return Object(p.jsx)("div",{children:Object(p.jsxs)(vn.a,{margin:{left:8,right:8,bottom:16},height:70,children:[Object(p.jsx)(vn.f,{style:{ticks:{stroke:"#000000"},line:{stroke:"#000000",transform:"translateY(-44px)"},text:{stroke:"none",transform:"translateY(-20px)"}}}),Object(p.jsx)(vn.d,{colorType:"literal",data:a,getOpacity:function(e){return n===e.id?1:.5},getColor:function(e){if(n===e.id)return"#000000"}})]})})},Sn=n(113),Cn=n.n(Sn),An=n(208),In=n.n(An),Pn=n(272),En=n.n(Pn),Ln=n(273),Rn=n.n(Ln),Tn=function(e){var t,n,i,r=e.unmaintainedPackages,o=Object(a.useState)(0),c=Object(g.a)(o,2),l=c[0],s=c[1];return r?r.data&&0!==(null===(t=r.data)||void 0===t||null===(n=t.packages)||void 0===n?void 0:n.length)?Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Package Maintenance",subheader:"Which packages are not well maintained or haven't released a new version recently"}),Object(p.jsx)(Pt.a,{children:Object(p.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(p.jsx)(L.a,{item:!0,width:"100%",children:Object(p.jsx)(T.a,{textAlign:"center",sx:{marginBottom:1},variant:"body2",children:"Number of months a package last had a release"})}),Object(p.jsx)(L.a,{item:!0,style:{height:"100%",width:"100%"},children:Object(p.jsx)(wn,{source:r.data.packages.filter((function(e){return void 0!==e.last_release})).map((function(e){return[e.id,e.last_release]})),selected:r.data.packages[l].id})}),Object(p.jsxs)(L.a,{item:!0,width:"100%",sx:{marginBottom:2},children:[Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",children:[Object(p.jsx)(Se.a,{onClick:function(){var e,t,n,a,i,o,c,d,u;s(((l-1)%(null!==(e=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(n=t.packages)||void 0===n?void 0:n.length)&&void 0!==e?e:0)+(null!==(a=null===r||void 0===r||null===(i=r.data)||void 0===i||null===(o=i.packages)||void 0===o?void 0:o.length)&&void 0!==a?a:0))%(null!==(c=null===r||void 0===r||null===(d=r.data)||void 0===d||null===(u=d.packages)||void 0===u?void 0:u.length)&&void 0!==c?c:0))},children:Object(p.jsx)(En.a,{fontSize:"small"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"".concat(l+1,"/").concat(r.data.packages.length)}),Object(p.jsx)(Se.a,{onClick:function(){var e,t,n;s((l+1)%(null!==(e=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(n=t.packages)||void 0===n?void 0:n.length)&&void 0!==e?e:0))},children:Object(p.jsx)(Rn.a,{fontSize:"small"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:Object(p.jsx)(P.b,{replace:!0,to:"../packages/"+r.data.packages[l].id,children:r.data.packages[l].id})})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[r.data.packages[l].not_maintained?Object(p.jsx)(In.a,{color:"error",fontSize:"small"}):Object(p.jsx)(Cn.a,{color:"success",fontSize:"small"}),Object(p.jsx)(T.a,{variant:"body2",children:"Package is ".concat(r.data.packages[l].not_maintained?"not":""," actively maintained according to Security Scorecards")})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[r.data.packages[l].low_maintainers?Object(p.jsx)(In.a,{color:"error",fontSize:"small"}):Object(p.jsx)(Cn.a,{color:"success",fontSize:"small"}),Object(p.jsx)(T.a,{variant:"body2",children:"Package has ".concat(r.data.packages[l].low_maintainers?"low number of maintainers on PyPI (less than 3)":"sufficient maintainers on PyPI (more than 3)")})]}),r.data.packages[l].last_release?Object(p.jsx)(T.a,{sx:{marginLeft:3.5},variant:"body2",children:"Package's last release was on ".concat(new Date(null!==(i=r.data.packages[l].last_release)&&void 0!==i?i:"").toDateString())}):void 0]}),Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginBottom:2},children:Object(p.jsx)(N.a,{})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",textAlign:"center",variant:"body1",children:"".concat(Array.from(r.data.packages.values()).filter((function(e){return e.low_maintainers})).length," out of ").concat(r.data.total)}),Object(p.jsx)(T.a,{textAlign:"center",variant:"body1",children:"packages have a low number of maintainers ( less than 3 )"})]})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(T.a,{fontWeight:"bold",textAlign:"center",variant:"body1",children:"".concat(Array.from(r.data.packages.values()).filter((function(e){return e.not_maintained})).length," out of ").concat(r.data.total)}),Object(p.jsx)(T.a,{textAlign:"center",variant:"body1",children:"packages are not maintained according to Security Scorecards"})]})})]})})]}):null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"rectangular",width:210,height:118})]})},Dn=function(e){var t=Object(a.useState)(),n=Object(g.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={all:{},roots:{}},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.nodes.get(n);if(i){var r=e.graphSearch(i);Array.from(r).forEach((function(e){var i;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var r,o,c,l=0===e.value.depth?"roots":1===e.value.depth?"direct":"indirect";if(t.all[l]=(null!==(i=t.all[l])&&void 0!==i?i:0)+1,"roots"!==l)t.roots[n]||(t.roots[n]={}),t.roots[n][l]=(null!==(r=null===(o=t.roots)||void 0===o||null===(c=o[n])||void 0===c?void 0:c[l])&&void 0!==r?r:0)+1}}))}})),r(t)}}),[e]),i},Mn=function(e){var t=Object(a.useState)(),n=Object(g.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.nodes.get(n);if(i){var r=e.graphSearch(i);Array.from(r).forEach((function(e){var n,i,r;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var o,c,l,s,d,u,j=[];if(null===e||void 0===e||null===(n=e.value)||void 0===n||null===(i=n.metadata)||void 0===i||null===(r=i.Classifier)||void 0===r||r.forEach((function(t){var n,a,i,r,o,c,l=t.split(" :: ");"License"===l[0]&&("OSI Approved"===l[1]?j.push({generalLicense:null!==(n=null===l||void 0===l?void 0:l[2])&&void 0!==n?n:null===(a=e.value.metadata)||void 0===a?void 0:a.License,specificLicense:null===(i=e.value.metadata)||void 0===i?void 0:i.License,isOsiApproved:!0}):j.push({generalLicense:null!==(r=null===l||void 0===l?void 0:l[1])&&void 0!==r?r:null===(o=e.value.metadata)||void 0===o?void 0:o.License,specificLicense:null===(c=e.value.metadata)||void 0===c?void 0:c.License,isOsiApproved:!1}))})),0===j.length)j.push({generalLicense:null!==(o=null===e||void 0===e||null===(c=e.value)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.License)&&void 0!==o?o:"N/A",specificLicense:null!==(s=null===e||void 0===e||null===(d=e.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.License)&&void 0!==s?s:"N/A",isOsiApproved:null});j.forEach((function(n){var a,i,r;t[n.generalLicense]||(t[n.generalLicense]={packages:{},metadata:{isOsiApproved:n.isOsiApproved}}),t=Object(y.a)(Object(y.a)({},t),{},Object(f.a)({},n.generalLicense,Object(y.a)(Object(y.a)({},t[n.generalLicense]),{},{packages:Object(y.a)(Object(y.a)({},null!==(a=t[n.generalLicense].packages)&&void 0!==a?a:null),{},Object(f.a)({},e.value.id,{depth:null!==(i=null===(r=e.value)||void 0===r?void 0:r.depth)&&void 0!==i?i:0,specific:n.specificLicense}))})))}))}}))}})),r(t)}}),[e]),i};function Nn(e,t){var n=function(e,t){var n=Object(a.useState)(),i=Object(g.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var n,a,i,r;if(e&&null!==t&&void 0!==t&&t.metadata){var c={justification:{},build:""};c.build="We have analysed an application stack running on ".concat(t.metadata.os_release.name," ").concat(t.metadata.os_release.version,", running Python (").concat(t.metadata.python.implementation_name,") ").concat(t.metadata.python.major,".").concat(t.metadata.python.minor,".").concat(t.metadata.python.micro,". It was Adviser Job ID ").concat(t.metadata.document_id,", by ").concat(t.metadata.analyzer," v").concat(t.metadata.analyzer_version,"."),null===t||void 0===t||null===(n=t.result)||void 0===n||null===(a=n.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r||r.justification.forEach((function(e){c.justification[e.type]?c.justification[e.type]=c.justification[e.type]+1:c.justification[e.type]=1})),o(c)}}),[e,t]),r}(e,t),i=Dn(e),r=Mn(e);return Object(a.useMemo)((function(){var e={advise:null,dependencies:null,licenses:null};return n&&(e.advise=n),i&&(e.dependencies=i),r&&(e.licenses=r),e}),[n,i,r])}var Bn=function(e){var t=e.licenses,n=Object(a.useMemo)((function(){if(t){var e=0,n=0,a=0,i=0,r=0,o=0;return Object.entries(t).forEach((function(t){var c=Object(g.a)(t,2)[1];null===c.metadata.isOsiApproved?(n+=Object.keys(c.packages).length,e++):c.metadata.isOsiApproved?(o+=Object.keys(c.packages).length,r++):(i+=Object.keys(c.packages).length,a++)})),{warnings:e,totalPkgWarnings:n,totalPkgErrors:i,errors:a,approved:r,totalPkgApproved:o}}return{warnings:null,totalPkgWarnings:null,errors:null,totalPkgErrors:null,approved:null,totalPkgApproved:null}}),[t]),i=n.warnings,r=n.errors,o=n.approved,c=n.totalPkgErrors,l=n.totalPkgWarnings,s=n.totalPkgApproved;return t?null===i||null===r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"text"}),Object(p.jsx)(xn.a,{variant:"rectangular",height:118})]}):Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Unapproved Licenses",subheader:"Total number of licenses that are unknown or unapproved by OSI"}),Object(p.jsxs)(Pt.a,{children:[Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(Mt.a,{color:"success"}),Object(p.jsx)(T.a,{variant:"h4",children:"Approved"})]})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:o})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(s," total packages")})})]}),Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(vt.a,{color:"warning"}),Object(p.jsx)(T.a,{variant:"h4",children:"Unknown Approval"})]})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:i})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(l," total packages")})})]}),Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(ut.a,{color:"error"}),Object(p.jsx)(T.a,{variant:"h4",children:"Unapproved"})]})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",children:r})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{sx:{marginLeft:4.5},variant:"body1",color:"gray",children:"".concat(c," total packages")})})]}),0===r&&0===i?Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(Mt.a,{color:"success"}),Object(p.jsx)(T.a,{variant:"h4",children:"All licenses are OSI approved"})]}):void 0]})]}):null},Wn=function(e){var t=e.source,n=e.setHovered,a=e.hovered;return t?Object(p.jsx)(Ue.a,{alignItems:"center",justifyContent:"center",children:Object(p.jsx)(vn.e,{height:150,width:150,data:t.map((function(e){return a&&(null===a||void 0===a?void 0:a.label)===(null===e||void 0===e?void 0:e.label)?Object(y.a)(Object(y.a)({},e),{},{style:{stroke:"black",strokeWidth:"5px"}}):e})),onValueMouseOver:function(e){return n(e)},onSeriesMouseOut:function(){return n(void 0)}})}):Object(p.jsx)(pt,{type:"circular"})},Fn=function(e){var t=e.dependencies,n=Object(a.useState)(),i=Object(g.a)(n,2),r=i[0],o=i[1];return t?Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Project Dependencies",subheader:"Packages are categorized based on their depth in the dependency tree, with roots being the packages defined on the Pipfile"}),Object(p.jsx)(Pt.a,{children:Object(p.jsxs)(L.a,{container:!0,direction:"row",alignItems:"center",spacing:1,children:[Object(p.jsx)(L.a,{item:!0,md:12,lg:4,children:Object(p.jsx)(Wn,{hovered:r,setHovered:o,source:[{label:"Roots",angle:t.all.roots},{label:"Direct",angle:t.all.direct},{label:"Indirect",angle:t.all.indirect}]})}),Object(p.jsx)(L.a,{item:!0,md:12,lg:8,children:Object(p.jsxs)(Ue.a,{justifyContent:"space-around",width:"100%",children:[Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Roots"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:"Root Packages"})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Roots"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:t.all.roots})})]}),Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Direct"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:"Direct Packages"})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Direct"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:t.all.direct})})]}),Object(p.jsxs)(L.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Ue.a,{direction:"row",alignItems:"center",spacing:1,children:Object(p.jsx)(T.a,{fontWeight:"Indirect"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:"Indirect Packages"})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{fontWeight:"Indirect"===(null===r||void 0===r?void 0:r.label)?"bold":void 0,variant:"h4",children:t.all.indirect})})]})]})})]})})]}):null},qn=n(528),zn=function(e){var t=e.adviseDocument,n=e.graph,i=e.lastLog,r=function(e){var t,n,i=Object(a.useState)(),r=Object(g.a)(i,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){return function(){t.apply(this,arguments)}(),function(){};function t(){return(t=Object(H.a)(K.a.mark((function t(){var n,a,i,r,o,l;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}if(i=null===e||void 0===e||null===(n=e.result.report)||void 0===n||null===(a=n.products)||void 0===a?void 0:a[0].justification){t.next=5;break}return c({cvePackages:{},warningPackages:{},unmaintainedPackages:{}}),t.abrupt("return");case 5:return t.next=7,sn(i);case 7:r=t.sent,o=dn(i),l=un(i),c({cvePackages:r,warningPackages:o,unmaintainedPackages:l});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[null===e||void 0===e||null===(t=e.result.report)||void 0===t||null===(n=t.products)||void 0===n?void 0:n[0].justification]),o}(t),o=Nn(n,t);return Object(p.jsxs)(qn.a,{columns:{xs:1,md:2},spacing:3,sx:{mb:3,mt:1},children:[Object(p.jsx)(rt,{adviseDocument:t,lastLog:i}),Object(p.jsx)(On,{warningPackages:null===r||void 0===r?void 0:r.warningPackages}),Object(p.jsx)(_n,{cvePackages:null===r||void 0===r?void 0:r.cvePackages}),Object(p.jsx)(Bn,{licenses:null===o||void 0===o?void 0:o.licenses}),Object(p.jsx)(Fn,{dependencies:null===o||void 0===o?void 0:o.dependencies}),Object(p.jsx)(Tn,{unmaintainedPackages:null===r||void 0===r?void 0:r.unmaintainedPackages})]})},Vn=n(521),Hn=n(491),Un=n(522),Kn=n(523),Gn=n(429),Yn=n(424),Qn=n(59),Jn=n(431),Xn=n(420),Zn=n(275),$n=n.n(Zn),ea=n(489),ta=n(520),na=n(274),aa=n.n(na),ia=n(490);function ra(e){var t=e.children,n=e.window,a=Object(ea.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(p.jsx)(ia.a,{in:a,children:Object(p.jsx)(R.a,{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function oa(e){return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("div",{id:"back-to-top-anchor"}),e.children,Object(p.jsx)(ra,Object(y.a)(Object(y.a)({},e),{},{children:Object(p.jsx)(ta.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(p.jsx)(aa.a,{})})}))]})}var ca=function(e){var t,n,r,o,c,l,s=e.adviseDocument,u=Object(E.h)(),j=Object(E.g)();Object(a.useEffect)((function(){u.cmp&&x(u.cmp)}),[u.cmp]);var v=i.a.useState(null!==(t=null===s||void 0===s||null===(n=s.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:""),b=Object(g.a)(v,2),h=b[0],x=b[1],O=Re(h),m=i.a.useState(!1),f=Object(g.a)(m,2),k=f[0],_=f[1],w=i.a.useState(!1),S=Object(g.a)(w,2),C=S[0],A=S[1],I=i.a.useState(""),P=Object(g.a)(I,2),D=P[0],M=P[1],N=Object(a.useState)([]),B=Object(g.a)(N,2),W=B[0],F=B[1];Object(a.useEffect)((function(){var e=!0;return function(){t.apply(this,arguments)}(),function(){e=!1};function t(){return(t=Object(H.a)(K.a.mark((function t(){var n;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F([]),t.next=3,Promise.all(V.map((function(e){return Le(e).then((function(t){var n,a,i,r,o,c,l,s,d,u,j,v,b=null===(n=t.data)||void 0===n||null===(a=n.result)||void 0===a||null===(i=a.parameters)||void 0===i||null===(r=i.project)||void 0===r?void 0:r.runtime_environment;return b?{id:e,timestamp:null!==(o=null===(c=t.data)||void 0===c||null===(l=c.metadata)||void 0===l?void 0:l.timestamp)&&void 0!==o?o:0,readable:Object(p.jsxs)(T.a,{children:[Object(p.jsx)("i",{children:new Date(null===(s=t.data)||void 0===s||null===(d=s.metadata)||void 0===d?void 0:d.datetime).toLocaleString()})," : ",Object(p.jsx)("b",{children:null!==(u=null===b||void 0===b?void 0:b.name)&&void 0!==u?u:"N/A"}),","," ",null===b||void 0===b||null===(j=b.operating_system)||void 0===j?void 0:j.name,"-",null===b||void 0===b||null===(v=b.operating_system)||void 0===v?void 0:v.version," (Python ",null===b||void 0===b?void 0:b.python_version,")"]})}:null})).catch((function(){return null}))})));case 3:if(n=t.sent,e){t.next=6;break}return t.abrupt("return");case 6:F(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[]);var q=function(e,t){"backdropClick"!==t&&_(!1)},z=function(){var e=Object(H.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=3;break}return e.next=3,Le(D).then((function(){var e,t=(null!==(e=localStorage.getItem(te))&&void 0!==e?e:"").split(",");t.includes(D)||(t.push(D),localStorage.setItem(te,t.join(","))),M(""),_(!1),x(D),j("../compare/"+D)})).catch((function(){M(null)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=Object(a.useMemo)((function(){var e=[],t=localStorage.getItem(te);return t&&e.push.apply(e,Object(Ct.a)(t.split(",").filter((function(e){return""!==e})))),e}),[""===D]),U={old:{text:"#b31412",background:"#fad2cf"},new:{text:"#217f70",background:"#e3fbf7"},change:{text:"#b38012",background:"#fae7cf"},equal:{text:void 0,background:void 0}},Y=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},r=e?a(e):null,o=t?a(t):null;return r&&o?r!==o?Object(p.jsxs)(i.a.Fragment,{children:[Q(r,"change",n),Q(o,"change",n)]},n):C?void 0:Object(p.jsxs)(i.a.Fragment,{children:[Q(r,"equal",n),Q(o,"equal",n)]},n):r?Object(p.jsxs)(i.a.Fragment,{children:[Q(r,"old",n),Q(o,"",n)]},n):o?Object(p.jsxs)(i.a.Fragment,{children:[Q(r,"",n),Q(o,"new",n)]},n):void 0},Q=function(e,t,n){var a={height:"100%",paddingBottom:.25,paddingTop:.25,borderRadius:0,borderStyle:"hidden solid hidden solid",overflow:"hidden"};return t?Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(G.a,{variant:"outlined",sx:Object(y.a)({backgroundColor:U[t].background},a),children:Object(p.jsxs)(Ue.a,{direction:"row",children:["equal"!==t?Object(p.jsx)(T.a,{fontWeight:"bold",sx:{textAlign:"center",minWidth:"2rem",color:U[t].text},variant:"body2",children:"old"===t?"-":"new"===t?"+":"~"}):Object(p.jsx)(R.a,{sx:{minWidth:"2rem"}}),n?Object(p.jsx)(T.a,{sx:{marginRight:1,color:U[t].text},variant:"body2",fontWeight:"bold",children:n+":"}):void 0,Object(p.jsx)(T.a,{sx:{color:U[t].text},display:"inline",variant:"body2",children:e.toString()})]})})}):Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(G.a,{variant:"outlined",sx:Object(y.a)({backgroundColor:U.equal.background},a),children:Object(p.jsx)(R.a,{})})})},J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(y.a)({paddingLeft:4,paddingBottom:1,paddingTop:4,borderRadius:0,borderStyle:"hidden solid hidden solid"},n);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(G.a,{variant:"outlined",sx:Object(y.a)({},a),children:Object(p.jsx)(T.a,{variant:e,children:t})})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(G.a,{variant:"outlined",sx:Object(y.a)({},a),children:Object(p.jsx)(T.a,{variant:e,children:t})})})]})},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=e.map((function(e){return JSON.stringify(e)})),i=t.map((function(e){return JSON.stringify(e)})),r=new Set(a),o=new Set(i),c=Object(Ct.a)(new Set([].concat(Object(Ct.a)(a),Object(Ct.a)(i))));return c.sort().map((function(e){var t=JSON.parse(e);return Y(r.has(e)?t:void 0,o.has(e)?t:void 0,void 0,n)}))},Z=function(e,t){var n,a,r,o,c,l,s,d,u,j,v,b,h,x,O,m,g,f,y,k,_=Object(Ct.a)(new Set([].concat(Object(Ct.a)(Object.keys(null!==(n=null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"])&&void 0!==n?n:{})),Object(Ct.a)(Object.keys(null!==(r=null===t||void 0===t||null===(o=t.requirements)||void 0===o?void 0:o["dev-packages"])&&void 0!==r?r:{}))))),w=Object(Ct.a)(new Set([].concat(Object(Ct.a)(Object.keys(null!==(c=null===e||void 0===e||null===(l=e.requirements)||void 0===l?void 0:l.packages)&&void 0!==c?c:{})),Object(Ct.a)(Object.keys(null!==(s=null===t||void 0===t||null===(d=t.requirements)||void 0===d?void 0:d.packages)&&void 0!==s?s:{}))))),S=Object(Ct.a)(new Set([].concat(Object(Ct.a)(Object.keys(null!==(u=null===e||void 0===e||null===(j=e.requirements_locked)||void 0===j?void 0:j.default)&&void 0!==u?u:{})),Object(Ct.a)(Object.keys(null!==(v=null===t||void 0===t||null===(b=t.requirements_locked)||void 0===b?void 0:b.default)&&void 0!==v?v:{})))));return Object(p.jsxs)(i.a.Fragment,{children:[_.length>0?J("h6","Pipfile Dev Packages",{paddingTop:.5,paddingBottom:.5}):void 0,_.map((function(n){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a["dev-packages"][n],null===t||void 0===t||null===(i=t.requirements)||void 0===i?void 0:i["dev-packages"][n],n)})),w.length>0?J("h6","Pipfile Packages",{paddingTop:.5,paddingBottom:.5}):void 0,w.map((function(n){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements)||void 0===a?void 0:a.packages[n],null===t||void 0===t||null===(i=t.requirements)||void 0===i?void 0:i.packages[n],n)})),J("h6","Pipfile.lock Sources"),X(null===e||void 0===e||null===(h=e.requirements_locked)||void 0===h||null===(x=h._meta)||void 0===x?void 0:x.sources,null===t||void 0===t||null===(O=t.requirements_locked)||void 0===O||null===(m=O._meta)||void 0===m?void 0:m.sources,(function(e){return"".concat(e.name," (").concat(e.url,")")})),J("h6","Pipfile.lock Packages"),S.map((function(n){var a,i;return Y(null===e||void 0===e||null===(a=e.requirements_locked)||void 0===a?void 0:a.default[n],null===t||void 0===t||null===(i=t.requirements_locked)||void 0===i?void 0:i.default[n],n,(function(e){return null===e||void 0===e?void 0:e.version}))})),J("h6","Runtime Environment"),["name","python_version","cuda_version","openblas_version","openmpi_version","cudnn_version","mkl_version","platform","base_image"].map((function(n){var a,i;return Y(null===e||void 0===e||null===(a=e.runtime_environment)||void 0===a?void 0:a[n],null===t||void 0===t||null===(i=t.runtime_environment)||void 0===i?void 0:i[n],n)})),Y(null===e||void 0===e||null===(g=e.runtime_environment)||void 0===g?void 0:g.operating_system,null===e||void 0===e||null===(f=e.runtime_environment)||void 0===f?void 0:f.operating_system,"operating_system",(function(e){return e.name+" "+e.version})),Y(null===e||void 0===e||null===(y=e.runtime_environment)||void 0===y?void 0:y.hardware,null===e||void 0===e||null===(k=e.runtime_environment)||void 0===k?void 0:k.hardware,"hardware",(function(e){var t,n,a,i="";if(i+=null!==(t=e.cpu_model)&&void 0!==t?t:" ",i+=null!==(n=e.cpu_family)&&void 0!==n?n:" ",(i+=null!==(a=e.gpu_model)&&void 0!==a?a:" ").trim())return i}))]})},$=function(e,t){var n,a,i,r,o,c,l,s,d,u,j,v,b,h,x,O,m,g,f,y,k,_,w,S,C,A,I,P,E,L,R,T,D,M,N,B,W,F,q,z,V,H,U,K,G,Q,$,ee,te,ne,ae,ie,re,oe;return Object(p.jsxs)(p.Fragment,{children:[J("h5","Result",{paddingTop:0}),Y(null===e||void 0===e||null===(n=e.result)||void 0===n||null===(a=n.report)||void 0===a?void 0:a.accepted_final_states_count,null===t||void 0===t||null===(i=t.result)||void 0===i||null===(r=i.report)||void 0===r?void 0:r.accepted_final_states_count,"accepted_final_states_count"),Y(null===e||void 0===e||null===(o=e.result)||void 0===o||null===(c=o.report)||void 0===c?void 0:c.discarded_final_states_count,null===t||void 0===t||null===(l=t.result)||void 0===l||null===(s=l.report)||void 0===s?void 0:s.discarded_final_states_count,"discarded_final_states_count"),Y(null===e||void 0===e||null===(d=e.result)||void 0===d||null===(u=d.report)||void 0===u?void 0:u.resolver_iterations,null===t||void 0===t||null===(j=t.result)||void 0===j||null===(v=j.report)||void 0===v?void 0:v.resolver_iterations,"resolver_iterations"),Y(null===e||void 0===e||null===(b=e.result)||void 0===b||null===(h=b.report)||void 0===h?void 0:h.pipeline,null===t||void 0===t||null===(x=t.result)||void 0===x||null===(O=x.report)||void 0===O?void 0:O.pipeline,"pipeline"),Z(null===e||void 0===e||null===(m=e.result)||void 0===m||null===(g=m.report)||void 0===g||null===(f=g.products)||void 0===f||null===(y=f[0])||void 0===y?void 0:y.project,null===t||void 0===t||null===(k=t.result)||void 0===k||null===(_=k.report)||void 0===_||null===(w=_.products)||void 0===w||null===(S=w[0])||void 0===S?void 0:S.project),J("h6","Advised Manifest Changes"),X(null!==(C=null===e||void 0===e||null===(A=e.result)||void 0===A||null===(I=A.report)||void 0===I||null===(P=I.products)||void 0===P||null===(E=P[0])||void 0===E?void 0:E.advised_manifest_changes)&&void 0!==C?C:[],null!==(L=null===t||void 0===t||null===(R=t.result)||void 0===R||null===(T=R.report)||void 0===T||null===(D=T.products)||void 0===D||null===(M=D[0])||void 0===M?void 0:M.advised_manifest_changes)&&void 0!==L?L:[],(function(e){var t="";return e.forEach((function(e){var n,a,i,r,o,c;t+="[ ".concat(null===e||void 0===e||null===(n=e.patch)||void 0===n?void 0:n.path,"; ").concat(null===e||void 0===e||null===(a=e.patch)||void 0===a?void 0:a.op,"; ").concat(null===e||void 0===e||null===(i=e.patch)||void 0===i||null===(r=i.value)||void 0===r?void 0:r.name,": ").concat(null===e||void 0===e||null===(o=e.patch)||void 0===o||null===(c=o.value)||void 0===c?void 0:c.value," ]")})),t})),J("h6","Stack Info"),X(null===e||void 0===e||null===(N=e.result)||void 0===N||null===(B=N.report)||void 0===B?void 0:B.stack_info,null===t||void 0===t||null===(W=t.result)||void 0===W||null===(F=W.report)||void 0===F?void 0:F.stack_info,(function(e){return e.message})),J("h5","Metadata"),["document_id","analyzer","analyzer_version","datetime","thoth_deployment_name"].map((function(n){var a,i;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a[n],null===(i=t.metadata)||void 0===i?void 0:i[n],n)})),Y(null===e||void 0===e||null===(q=e.result)||void 0===q?void 0:q.error_msg,null===t||void 0===t||null===(z=t.result)||void 0===z?void 0:z.error_msg,"error_msg"),J("h6","Arguments"),["beam_width","constraints","count","dev","labels","library_usage","limit","limit_latest_versions","no_pretty","output","pipeline","plot","predictor","recommendation_type","requirements","requirements_format","requirements_locked","runtime_environment","seed","user_stack_scoring"].map((function(n){var a,i,r,o,c,l;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.arguments)||void 0===i||null===(r=i.advise)||void 0===r?void 0:r[n],null===t||void 0===t||null===(o=t.metadata)||void 0===o||null===(c=o.arguments)||void 0===c||null===(l=c.advise)||void 0===l?void 0:l[n],n)})),J("h6","Distribution"),["codename","id","like","version"].map((function(n){var a,i,r,o;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.distribution)||void 0===i?void 0:i[n],null===t||void 0===t||null===(r=t.metadata)||void 0===r||null===(o=r.distribution)||void 0===o?void 0:o[n],n)})),J("h6","OS Release"),["id","name","platform_id","version"].map((function(n){var a,i,r,o;return Y(null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(i=a.os_release)||void 0===i?void 0:i[n],null===t||void 0===t||null===(r=t.metadata)||void 0===r||null===(o=r.os_release)||void 0===o?void 0:o[n],n)})),J("h6","Python"),Y(null===e||void 0===e||null===(V=e.metadata)||void 0===V?void 0:V.python,null===t||void 0===t||null===(H=t.metadata)||void 0===H?void 0:H.python,"version",(function(e){return"".concat(e.major,".").concat(e.minor,".").concat(e.micro)})),Y(null===e||void 0===e||null===(U=e.metadata)||void 0===U||null===(K=U.python)||void 0===K?void 0:K.api_version,null===t||void 0===t||null===(G=t.metadata)||void 0===G||null===(Q=G.python)||void 0===Q?void 0:Q.api_version,"api_version"),Y(null===e||void 0===e||null===($=e.metadata)||void 0===$||null===(ee=$.python)||void 0===ee?void 0:ee.implementation_name,null===t||void 0===t||null===(te=t.metadata)||void 0===te||null===(ne=te.python)||void 0===ne?void 0:ne.implementation_name,"implementation_name"),Y(null===e||void 0===e||null===(ae=e.metadata)||void 0===ae||null===(ie=ae.python)||void 0===ie?void 0:ie.releaselevel,null===t||void 0===t||null===(re=t.metadata)||void 0===re||null===(oe=re.python)||void 0===oe?void 0:oe.releaselevel,"release level")]})},ee=Object(a.useMemo)((function(){var e,t,n,a,r,o,c,l;return s&&null!==(e=O.data)&&void 0!==e&&e.data?Object(p.jsxs)(p.Fragment,{children:[$(s,null===(t=O.data)||void 0===t?void 0:t.data),J("body1"," ",{borderBottomStyle:"solid",borderRadius:void 0,borderTopLeftRadius:0,borderTopRightRadius:0})]}):"Original Lockfile"===h?Object(p.jsxs)(i.a.Fragment,{children:[Z(null===s||void 0===s||null===(n=s.result)||void 0===n||null===(a=n.report)||void 0===a||null===(r=a.products)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.project,null===s||void 0===s||null===(c=s.result)||void 0===c||null===(l=c.parameters)||void 0===l?void 0:l.project),J("body1"," ",{borderBottomStyle:"solid",borderRadius:void 0,borderTopLeftRadius:0,borderTopRightRadius:0})]}):void 0}),[s,null===(r=O.data)||void 0===r?void 0:r.data,C]);return s?Object(p.jsx)(oa,{children:Object(p.jsxs)(R.a,{children:[Object(p.jsxs)(Vn.a,{disableEscapeKeyDown:!0,open:k,onClose:q,children:[Object(p.jsx)(Hn.a,{children:"Import another Advise document"}),Object(p.jsx)(Un.a,{children:Object(p.jsx)(R.a,{component:"form",sx:{display:"flex",flexWrap:"wrap"},children:Object(p.jsx)(de.a,{error:null===D,onChange:function(e){return M(e.target.value)},label:"Document ID",variant:"outlined",size:"small"})})}),Object(p.jsxs)(Kn.a,{children:[Object(p.jsx)(d.a,{onClick:function(){return q()},children:"Cancel"}),Object(p.jsx)(d.a,{onClick:function(){return z()},children:"Import"})]})]}),Object(p.jsxs)(L.a,{container:!0,mb:1,columnSpacing:10,children:[Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(G.a,{variant:"outlined",sx:{height:"100%",borderTopStyle:"solid",borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingBottom:4,paddingTop:4,borderStyle:"solid solid hidden solid"},children:Object(p.jsx)(T.a,{sx:{textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},fontWeight:"bold",variant:"h6",children:"Current Advise Document"})})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsxs)(G.a,{variant:"outlined",sx:{height:"100%",borderTopStyle:"solid",borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingBottom:4,paddingTop:4,borderStyle:"solid solid hidden solid"},children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,sx:{marginX:"10%"},children:[Object(p.jsx)(Gn.a,{fullWidth:!0,children:Object(p.jsxs)(Yn.a,{value:h,displayEmpty:!0,onChange:function(e){x(e.target.value),j("../compare/"+e.target.value)},size:"small",children:[Object(p.jsx)(Qn.a,{disabled:!0,value:"",children:Object(p.jsx)("em",{children:"Select a comparison"})}),(null===s||void 0===s||null===(o=s.result)||void 0===o||null===(c=o.parameters)||void 0===c||null===(l=c.project)||void 0===l?void 0:l.requirements_locked)&&Object(p.jsx)(Qn.a,{value:"Original Lockfile",children:"Original Lockfile"}),W.sort((function(e,t){return(t?t.timestamp:0)-(e?e.timestamp:0)})).map((function(e){if(e)return Object(p.jsx)(Qn.a,{value:e.id,children:e.readable},e.id)}))]})}),Object(p.jsx)(Se.a,{onClick:function(){_(!0)},children:Object(p.jsx)($n.a,{})})]}),Object(p.jsx)(Jn.a,{sx:{marginX:"10%",marginTop:.5},control:Object(p.jsx)(Xn.a,{defaultChecked:!0,checked:C,onChange:function(e){return A(e.target.checked)}}),label:"Differences only"})]})}),ee]})]})}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Compare not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The adviser has not finished resolving packages"})]})};var la=n(26),sa=n(27),da=function(){function e(){Object(la.a)(this,e),this.nodes=void 0,this.visEdges=void 0,this.nodes=new Map,this.visEdges=[]}return Object(sa.a)(e,[{key:"addVertex",value:function(e,t,n){var a=this.nodes.get(e);return a||(a=new n(e,t),this.nodes.set(e,a),a)}},{key:"addEdge",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return n&&a&&n.addAdjacent(a),[n,a]}},{key:"graphSearch",value:K.a.mark((function e(t){var n,a,i,r,o=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Set,(i=[]).push(t);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===n?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.add(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=this.nodes.get(e),i=this.nodes.get(t),r=new Set(n);if(!i||!a)return[];if(r.add(a),e===t)return Array.from(r);var o,c=Object(jn.a)(a.getAdjacents());try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!r.has(l)){var s=this.findPath(l.key,t,r);if(s.length)return s}}}catch(d){c.e(d)}finally{c.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r&&r.key===t||r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(n.nodes.get(e))})))}return a}},{key:"findAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=this.nodes.get(e),r=this.nodes.get(t),o=new Set(a);if(!r||!i)return[];if(o.add(i),e===t)return[Array.from(o)];var c=[];return i.getAdjacents().forEach((function(e){o.has(e)||n.findAllPaths(e.key,t,o).forEach((function(e){c.push(e)}))})),c}}]),e}(),ua=function(){function e(t,n){Object(la.a)(this,e),this.adjacents=void 0,this.key=void 0,this.value=void 0,this.parents=void 0,this.adjacents=new Set,this.key=t,this.value=n,this.parents=new Set}return Object(sa.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}();function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=Object(a.useContext)(w),o=r.updateLoading,c=Vt(e),l=Object(a.useState)(!0),s=Object(g.a)(l,2),d=s[0],u=s[1],j=Object(a.useState)(),v=Object(g.a)(j,2),b=v[0],h=v[1];return Object(a.useEffect)((function(){c&&0!==c.length&&(o("graph","Loading package metadata",c.filter((function(e){return!e.isLoading})).length,c.length),c.every((function(e){return!e.isLoading}))&&u(!1))}),[c]),Object(a.useEffect)((function(){var e,a,r,l;if(!d){o("graph");var s=new da,u=[];c.forEach((function(e){if(e.error){var t,n,a,i,r,o=e.error,c=null!==(t=null===(n=o.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.parameters)&&void 0!==t?t:null===(i=o.response)||void 0===i||null===(r=i.config)||void 0===r?void 0:r.params,l={id:c.name.toLowerCase(),label:c.name+" "+c.version,name:c.name,version:c.version,metadata:null,depth:0};s.addVertex(l.id,l,ua)}else if(e.isSuccess){var d=e.data.data.metadata,u={id:d.package_name.toLowerCase(),label:d.package_name+" "+d.package_version,name:d.package_name,version:d.package_version,metadata:d.importlib_metadata.metadata,install_size:d.importlib_metadata.files.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.size)}),0)};s.addVertex(u.id,u,ua)}}));var j=null===i||void 0===i||null===(e=i.result)||void 0===e||null===(a=e.report)||void 0===a||null===(r=a.products)||void 0===r||null===(l=r[0])||void 0===l?void 0:l.dependency_graph;j&&j.edges.forEach((function(e){var t,n,a=Object(g.a)(e,2),i=a[0],r=a[1],o=null===(t=j.nodes[i])||void 0===t?void 0:t.toLowerCase().replace(".","-"),c=null===(n=j.nodes[r])||void 0===n?void 0:n.toLowerCase().replace(".","-"),l=s.nodes.get(o),d=s.nodes.get(c);l&&d&&(s.addEdge(l.value.id,d.value.id),d.parents.add(l.value.id),u.push(d.value.id))}));var v=s.addVertex("*App",{id:"*App",label:"App",depth:-1},ua);u.push("*App");var b=new Set,p=[];s.nodes.forEach((function(e,n){u.includes(n)&&!Object.keys(null!==t&&void 0!==t?t:{}).includes(n)||(e.value.depth=0,e.parents.add("*App"),p.push(e),s.addEdge(v.key,e.key))}));var x=new Map;for(n&&n.forEach((function(e){var t,n=null!==(t=e.package_name)&&void 0!==t?t:"*App";x.has(n)?x.set(n,[].concat(Object(Ct.a)(x.get(n)),[e])):x.set(n,[e])}));0!==p.length;){var O=p.pop();if(O&&!b.has(O)){b.add(O),x.has(O.key)&&(O.value.justifications=x.get(O.key));for(var m=O.getAdjacents(),f=0;f<m.length;f++){var y,k,_,w,S;m[f].value.depth=Math.min((null!==(y=null===(k=O.value)||void 0===k?void 0:k.depth)&&void 0!==y?y:0)+1,null!==(_=m[f].value.depth)&&void 0!==_?_:(null!==(w=null===(S=O.value)||void 0===S?void 0:S.depth)&&void 0!==w?w:0)+2),p.push(m[f])}}}var C=new Map;s.nodes.forEach((function(e){e.adjacents.forEach((function(t){C.set(e.value.id+t.value.id,{id:e.value.id+t.value.id,to:e.value.id,from:t.value.id})}))})),s.visEdges=Array.from(C.values()),h(s)}}),[d,t]),b}var va=function(e){var t=e.analysis_id;return Object(p.jsxs)("div",{children:['`"',t,'"` not found']})},ba=function(e){var t=e.children;return Object(p.jsx)(R.a,{sx:{marginY:2,marginRight:2,height:"calc(100vh - 32px)"},children:t})},ha=n(7),pa=n(524),xa=n(278),Oa=n.n(xa),ma=n(279),ga=n.n(ma),fa=n(280),ya=n.n(fa),ka=n(144),_a=n.n(ka),wa=n(277),Sa=n.n(wa),Ca=n(276),Aa=n.n(Ca),Ia=function(e){return{width:360,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Pa=function(e){return{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"80px"}},Ea=Object(ha.a)(pa.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(y.a)(Object(y.a)({width:360,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object(y.a)(Object(y.a)({},Ia(t)),{},{"& .MuiDrawer-paper":Ia(t)})),!n&&Object(y.a)(Object(y.a)({},Pa(t)),{},{"& .MuiDrawer-paper":Pa(t)}))})),La=function(e){var t=e.label,n=e.to,a=e.selected,i=void 0!==a&&a,r=e.icon,o=e.chipData,c=e.disabled,l=e.open,s=e.hideOnClosed;return!l&&s?null:Object(p.jsxs)(ct.a,{sx:{borderRadius:100,height:48,paddingLeft:3,paddingRight:3,marginRight:1.5,marginY:.5,justifyContent:l?void 0:"center",backgroundColor:i?Object(h.c)(O.light.colorContainer):void 0,color:i?Object(h.c)(O.light.onColorContainer):void 0},button:!0,disabled:c,component:P.b,to:n,secondaryAction:o&&l?Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[o.info?Object(p.jsx)(Xe.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(rn.a,{}),label:o.info,color:"info"}):void 0,o.warning?Object(p.jsx)(Xe.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(vt.a,{}),label:o.warning,color:"warning"}):void 0,o.error?Object(p.jsx)(Xe.a,{variant:"outlined",size:"small",icon:Object(p.jsx)(ut.a,{}),label:o.error,color:"error"}):void 0]}):void 0,children:[r?Object(p.jsx)(fn.a,{sx:{minWidth:3,marginRight:l?1.5:0,color:i?Object(h.c)(O.light.onColorContainer):void 0},children:r}):void 0,l?Object(p.jsx)(lt.a,{disableTypography:!0,sx:{marginLeft:r?void 0:4.5},children:Object(p.jsx)(T.a,{fontWeight:"600",variant:"body2",children:t})}):void 0]})},Ra=function(e){var t=e.children,n=e.chipData,i=Object(E.f)(),r=Object(E.g)(),o=a.useState(!1),c=Object(g.a)(o,2),l=c[0],s=c[1],u=Object(a.useMemo)((function(){return i.pathname.split("/").at(3)}),[i.pathname]);return Object(p.jsxs)(R.a,{sx:{display:"flex"},children:[Object(p.jsxs)(Ea,{open:l,variant:"permanent",children:[l?Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{marginBottom:1,marginTop:3,paddingRight:1.5},children:[Object(p.jsx)(T.a,{component:d.a,onClick:function(){return r("/")},variant:"h5",sx:{textAlign:"center",color:"primary.main",marginLeft:3,width:"fit-content"},children:"SEARCH UI"}),Object(p.jsx)(Se.a,{onClick:function(){return s(!1)},children:Object(p.jsx)(Aa.a,{})})]}):Object(p.jsx)(R.a,{sx:{marginBottom:1,marginTop:3,textAlign:"center"},children:Object(p.jsx)(Se.a,{onClick:function(){return s(!0)},children:Object(p.jsx)(Sa.a,{})})}),Object(p.jsxs)(ot.a,{sx:{paddingLeft:1.5,paddingRight:1.5},children:[Object(p.jsx)(La,{selected:"summary"===u,label:"Summary",to:"summary",icon:Object(p.jsx)(Oa.a,{}),open:l}),Object(p.jsx)(La,{label:"Packages",to:"packages",selected:"packages"===u,icon:Object(p.jsx)(en.a,{}),open:l}),Object(p.jsx)(La,{label:"Compare",to:"compare",selected:"compare"===u,icon:Object(p.jsx)(ga.a,{}),open:l}),Object(p.jsx)(La,{label:"Logs",to:"logs",selected:"logs"===u,icon:Object(p.jsx)(ya.a,{}),open:l})]}),l?Object(p.jsx)(N.a,{}):void 0,Object(p.jsxs)(ot.a,{sx:{paddingLeft:1,paddingRight:1.5},children:[Object(p.jsx)(La,{label:"Environment",to:"environment",icon:Object(p.jsx)(_a.a,{}),selected:"environment"===u,open:l,hideOnClosed:!0}),Object(p.jsx)(La,{label:"Licenses",to:"licenses",chipData:n.licenses,icon:Object(p.jsx)(_a.a,{}),selected:"licenses"===u,open:l,hideOnClosed:!0}),Object(p.jsx)(La,{label:"Dependency Tree",to:"dependency-tree",icon:Object(p.jsx)(_a.a,{}),selected:"dependency-tree"===u,open:l,hideOnClosed:!0}),Object(p.jsx)(La,{label:"Stack Info",to:"stack-info",icon:Object(p.jsx)(_a.a,{}),selected:"stack-info"===u,chipData:n["stack-info"],open:l,hideOnClosed:!0})]})]}),Object(p.jsx)(R.a,{sx:{width:"100%",overflowX:"hidden"},children:t})]})},Ta=function(e){var t=e.children,n=e.goHome,a=void 0!==n&&n,i=Object(E.g)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.a,{onClick:function(){i(a?"/":-1)},children:a?"go home":"go back"}),Object(p.jsx)("div",{children:t})]})};function Da(e){var t=e.logs,n=Object(a.useMemo)((function(){return null===t||void 0===t?void 0:t.split("\n").slice(0,20).map((function(e){var t;try{t=JSON.parse(e)}catch(n){return{}}return t?{name:t.name,levelname:t.levelname,module:t.module,lineno:t.lineno,funcname:t.funcname,created:t.created,asctime:t.asctime,msecs:t.msecs,relative_created:t.relative_created,process:t.process,message:t.message}:{}}))}),[t]);return Object(p.jsx)(oa,{children:Object(p.jsx)(me.a,{component:G.a,variant:"outlined",children:Object(p.jsxs)(pe.a,{size:"small","aria-label":"a dense table",stickyHeader:!0,children:[Object(p.jsx)(ge.a,{children:Object(p.jsxs)(ye.a,{children:[Object(p.jsx)(Oe.a,{children:"Level"}),Object(p.jsx)(Oe.a,{align:"left",children:"Name"}),Object(p.jsx)(Oe.a,{align:"left",children:"Function"}),Object(p.jsx)(Oe.a,{align:"right",children:"Line Number"}),Object(p.jsx)(Oe.a,{align:"right",children:"Process"}),Object(p.jsx)(Oe.a,{align:"left",children:"Message"}),Object(p.jsx)(Oe.a,{align:"right",children:"Time"})]})}),Object(p.jsx)(xe.a,{children:null===n||void 0===n?void 0:n.map((function(e){var t,n;return Object(p.jsxs)(ye.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(p.jsx)(Oe.a,{component:"th",scope:"row",children:e.levelname?Object(p.jsx)(Xe.a,{color:null!==(t=null===e||void 0===e||null===(n=e.levelname)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:"default",label:e.levelname}):void 0}),Object(p.jsx)(Oe.a,{align:"left",children:e.name}),Object(p.jsx)(Oe.a,{align:"left",children:e.funcname}),Object(p.jsx)(Oe.a,{align:"right",children:e.lineno}),Object(p.jsx)(Oe.a,{align:"right",children:e.process}),Object(p.jsx)(Oe.a,{align:"left",children:e.message}),Object(p.jsx)(Oe.a,{align:"right",children:e.asctime})]},e.created)}))})]})})})}var Ma=function(e){var t=e.url,n=e.metric,r=Object(a.useState)(),o=Object(g.a)(r,2),c=o[0],l=o[1],s=Object(B.a)(),d=Object(W.a)(s.breakpoints.down("md"));return Object(p.jsx)(p.Fragment,{children:d?Object(p.jsx)(At.a,{variant:"outlined",children:Object(p.jsx)(It.a,{title:"Installation Errors",titleTypographyProps:{variant:"h6"},action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})}),avatar:Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(ut.a,{}),label:n.reduce((function(e,t){var n,a;return e+(null!==(n=null===t||void 0===t||null===(a=t.versions)||void 0===a?void 0:a.length)&&void 0!==n?n:0)}),0),color:"error"})})}):Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Installation Errors",subheader:"The given package & version combinations were removed from the resolution process as they produced errors during installation in the given environment",action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(ot.a,{dense:!0,children:n.map((function(e,t){var a,r,o,s,d;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(ct.a,{selected:c===t,secondaryAction:Object(p.jsx)(Wt.a,{sx:{mr:-1,transform:c===t?"rotate(0deg)":"rotate(-90deg)",transition:"0.2s"}}),button:!0,sx:{borderRadius:"16px"},onClick:function(){return l(c===t?void 0:t)},children:[Object(p.jsx)(fn.a,{children:Object(p.jsx)(Xe.a,{label:null===e||void 0===e?void 0:e.versions.length,color:"error"})}),Object(p.jsx)(lt.a,{primary:null===e||void 0===e?void 0:e.package,secondary:null===e||void 0===e?void 0:e.index})]},(null!==(o=null===e||void 0===e?void 0:e.package)&&void 0!==o?o:"")+(null!==(s=null===e||void 0===e?void 0:e.index)&&void 0!==s?s:"")),Object(p.jsx)(se.a,{in:c===t,children:Object(p.jsx)(ct.a,{children:Object(p.jsx)(lt.a,{inset:!0,secondary:null===(d=n[t])||void 0===d?void 0:d.versions.join(", ")})})})]},(null!==(a=null===e||void 0===e?void 0:e.package)&&void 0!==a?a:"")+(null!==(r=null===e||void 0===e?void 0:e.index)&&void 0!==r?r:"")+t)}))})})]})})},Na=function(e){var t=e.url,n=e.metric,r=Object(a.useState)(0),o=Object(g.a)(r,2),c=o[0],l=o[1],s=Object(B.a)(),u=Object(W.a)(s.breakpoints.down("md"));return Object(p.jsx)(p.Fragment,{children:u?Object(p.jsx)(At.a,{variant:"outlined",children:Object(p.jsx)(It.a,{title:"Solver Rules",titleTypographyProps:{variant:"h6"},action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})}),avatar:Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(ut.a,{}),label:Object.keys(n).length,color:"error"})})}):Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Solver Rules",subheader:"One or multiple packages were removed based on Python solver rules configured",action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(Ue.a,{spacing:2,children:Object.entries(n).map((function(e,t){var n=Object(g.a)(e,2),a=n[0],r=n[1];return Object(p.jsxs)(R.a,{children:[Object(p.jsx)(d.a,{sx:{marginBottom:1},onClick:function(){return l(c===t?void 0:t)},children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:2,children:[Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:a}),Object(p.jsx)(Wt.a,{sx:{mr:-1,transform:c===t?"rotate(0deg)":"rotate(-90deg)",transition:"0.2s"}})]})}),Object(p.jsx)(se.a,{in:c===t,children:Object(p.jsxs)(L.a,{container:!0,sx:{marginLeft:1,paddingRight:1},children:[Object(p.jsx)(L.a,{item:!0,xs:5,children:Object(p.jsx)(T.a,{variant:"body2",children:"Package"})}),Object(p.jsx)(L.a,{item:!0,xs:2,textAlign:"center",children:Object(p.jsx)(T.a,{variant:"body2",children:"Constraint"})}),Object(p.jsx)(L.a,{item:!0,xs:5,textAlign:"right",children:Object(p.jsx)(T.a,{variant:"body2",children:"Index"})}),Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginBottom:1},children:Object(p.jsx)(N.a,{flexItem:!0})}),r.map((function(e){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,xs:5,children:e.package}),Object(p.jsx)(L.a,{item:!0,xs:2,textAlign:"center",children:e.constraint}),Object(p.jsx)(L.a,{item:!0,xs:5,textAlign:"right",children:e.index})]},e.package+e.index)}))]})})]},a)}))})})]})})},Ba=function(e){var t=e.url,n=e.metric,a=Object(B.a)(),r=Object(W.a)(a.breakpoints.down("md"));return Object(p.jsx)(i.a.Fragment,{children:r?Object(p.jsx)(At.a,{variant:"outlined",children:Object(p.jsx)(It.a,{title:"Environment Parameters",titleTypographyProps:{variant:"h6"},action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})}),avatar:Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(rn.a,{}),label:n.filter((function(e){return e.provided})).length,color:"info"})})}):Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Environment Parameters",subheader:"The advisor input was provided with ".concat(n.filter((function(e){return e.provided})).length," environment parameters"),action:Object(p.jsx)(Se.a,{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(L.a,{container:!0,children:n.map((function(e,t){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,xs:1,children:e.provided?Object(p.jsx)(Bt.a,{color:"error"}):Object(p.jsx)(Mt.a,{color:"success"})}),Object(p.jsx)(L.a,{item:!0,xs:11,children:Object(p.jsx)(T.a,{variant:"body2",children:e.message})})]},e.message+t)}))})})]})},t)},Wa=function(e){var t=e.metrics,n=Object(B.a)(),r=Object(W.a)(n.breakpoints.down("md")),o=Object(a.useMemo)((function(){return{info:Array.from(t.values()).reduce((function(e,t){return e+("INFO"===t[0].type?1:0)}),0),warning:Array.from(t.values()).reduce((function(e,t){return e+("WARNING"===t[0].type?1:0)}),0),error:Array.from(t.values()).reduce((function(e,t){return e+("ERROR"===t[0].type?1:0)}),0)}}),[t]),c=function(e,t){return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginY:1},children:Object(p.jsx)(N.a,{flexItem:!0})}),Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)(R.a,{display:"flex",alignContent:"center",children:"ERROR"===t[0].type?Object(p.jsx)(ut.a,{color:"error"}):"WARNING"===t[0].type?Object(p.jsx)(vt.a,{color:"warning"}):Object(p.jsx)(rn.a,{color:"info"})})}),Object(p.jsx)(L.a,{item:!0,xs:10,children:Object(p.jsx)(Ue.a,{spacing:1,children:t.map((function(e){return Object(p.jsx)(T.a,{variant:"body2",children:e.message},e.message)}))})}),Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)(Se.a,{href:t[0].link,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(Tt.a,{})})})]},e)};return Object(p.jsx)(p.Fragment,{children:r?Object(p.jsx)(At.a,{variant:"outlined",children:Object(p.jsx)(It.a,{title:"Other Stack Info",titleTypographyProps:{variant:"h6"},avatar:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[o.info?Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(rn.a,{}),label:o.info,color:"info"}):void 0,o.warning?Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(vt.a,{}),label:o.warning,color:"warning"}):void 0,o.error?Object(p.jsx)(Xe.a,{icon:Object(p.jsx)(ut.a,{}),label:o.error,color:"error"}):void 0]})})}):Object(p.jsxs)(At.a,{variant:"outlined",children:[Object(p.jsx)(It.a,{title:"Other Stack Info"}),Object(p.jsx)(Pt.a,{children:Object(p.jsxs)(L.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:"Recommended Actions"})}),Array.from(t.entries()).filter((function(e){return Object(g.a)(e,2)[1].some((function(e){return e.message.includes("use")||e.message.includes("Use")}))})).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return c(n,a)})),Object(p.jsx)(L.a,{item:!0,xs:12,sx:{marginTop:2},children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bolder",children:"Other Information"})}),Array.from(t.entries()).filter((function(e){return Object(g.a)(e,2)[1].some((function(e){return!e.message.includes("use")||e.message.includes("Use")}))})).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return c(n,a)}))]})})]})})},Fa=function(e){var t=e.stack_info,n=void 0===t?[]:t,i=Object(a.useMemo)((function(){if(!n)return Object(p.jsx)(p.Fragment,{});var e=new Set;n.forEach((function(t){return e.add(t.link)}));var t=[];Array.from(e.values()).forEach((function(a){var i=function(e,t){switch(t){case"https://thoth-station.ninja/j/install_error":var n=e.filter((function(e){return e.link===t})).map((function(e){var t=e.message.match(/(?<=').*?(?=')/g),n=e.message.match(/(?<=environment: ).*/);if(t&&n)return{package:null===t||void 0===t?void 0:t[0],index:null===t||void 0===t?void 0:t[2],versions:null===n||void 0===n?void 0:n[0].split(", ")}}));return Object(p.jsx)(Ma,{url:t,metric:n});case"https://thoth-station.ninja/j/env":var a=e.filter((function(e){return e.link===t})).map((function(e){return{provided:e.message.startsWith("No"),message:e.message}}));return Object(p.jsx)(Ba,{metric:a,url:t});case"https://thoth-station.ninja/j/rules":var i=new Map;return e.filter((function(e){return e.link===t})).forEach((function(e){var t,n=e.message.match(/(?<=').*?(?=')/g),a=e.message.match(/(?<=rule: ).*/);n&&a&&i.set(a[0],(null!==(t=i.get(a[0]))&&void 0!==t?t:[]).concat({package:null===n||void 0===n?void 0:n[0],constraint:null===n||void 0===n?void 0:n[2],index:null===n||void 0===n?void 0:n[4]}))})),Object(p.jsx)(Na,{metric:Object.fromEntries(i),url:t})}}(n,a);i&&(t.push(i),e.delete(a))}));var a=new Map;return n.filter((function(t){return e.has(t.link)})).forEach((function(e){var t;a.set(e.link,(null!==(t=a.get(e.link))&&void 0!==t?t:[]).concat(e))})),t.push(Object(p.jsx)(Wa,{metrics:a})),t}),[n]);return i?Object(p.jsx)(qn.a,{columns:{sm:1,lg:2,xl:4},children:i}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Stack info not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The adviser has not finished resolving packages"})]})},qa=n(525),za=n(282),Va=n.n(za),Ha=n(209),Ua=n.n(Ha),Ka=n(281),Ga=function(e){var t=e.itemKey,n=e.itemSubKey,a=e.value,i=e.handleSubmit,r=e.label,o=e.editMode;return Object(p.jsx)(p.Fragment,{children:o?Object(p.jsx)(de.a,{value:a,label:r,onChange:function(e){return i(t,e.target.value,n)},size:"small",variant:"outlined"}):Object(p.jsxs)(Ue.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:[n?Object(p.jsx)(T.a,{sx:{marginRight:1},variant:"body1",fontStyle:a?void 0:"italic",fontWeight:a?"bold":void 0,children:r}):void 0,Object(p.jsx)(T.a,{variant:"body1",fontWeight:n?void 0:"bold",children:a})]})})},Ya=function(e){var t=e.runtime_environment,n=e.pipfile,r=e.pipfileLock,o=Object(a.useState)(t),c=Object(g.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(),j=Object(g.a)(u,2),v=j[0],b=j[1],h=Object(a.useState)(!1),x=Object(g.a)(h,2),O=x[0],m=x[1],k=Object(a.useState)(!1),_=Object(g.a)(k,2),w=_[0],S=_[1],C=Object(E.g)();if(!t)return Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Environment data not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise document did not contain information regarding the runtime environment"})]});var A=function(e,t,n){b(void 0),l&&s(n?Object(y.a)(Object(y.a)({},l),{},Object(f.a)({},e,Object(y.a)(Object(y.a)({},l[e]),{},Object(f.a)({},n,""===t?null:t)))):Object(y.a)(Object(y.a)({},l),{},Object(f.a)({},e,""===t?null:t)))},I=Object(a.useMemo)((function(){var e,n,a,i,r,o,c,s,d,u;return[{label:"Name",key:"name",original:t.name,value:null===l||void 0===l?void 0:l.name,detail:"User defined name of the runtime environment"},{label:"CUDA Version",original:t.cuda_version,value:null===l||void 0===l?void 0:l.cuda_version,key:"cuda_version",detail:"Nvidia CUDA version which the application uses"},{label:"cuDNN Version",original:t.cudnn_version,value:null===l||void 0===l?void 0:l.cudnn_version,key:"cudnn_version",detail:"NVIDIA cuDNN version used, if any"},{label:"Hardware",key:"hardware",group:[{label:"CPU Family",original:null===(e=t.hardware)||void 0===e?void 0:e.cpu_family,value:null===l||void 0===l||null===(n=l.hardware)||void 0===n?void 0:n.cpu_family,key:"cpu_family"},{label:"CPU Model",original:null===(a=t.hardware)||void 0===a?void 0:a.cpu_model,value:null===l||void 0===l||null===(i=l.hardware)||void 0===i?void 0:i.cpu_model,key:"cpu_model"},{label:"GPU Model",original:null===(r=t.hardware)||void 0===r?void 0:r.gpu_model,value:null===l||void 0===l||null===(o=l.hardware)||void 0===o?void 0:o.gpu_model,key:"gpu_model"}],detail:"Hardware configuration used"},{label:"Math Kernel Library",original:t.mkl_version,value:null===l||void 0===l?void 0:l.mkl_version,key:"mkl_version",detail:"Intel\xae Math Kernel Library version used, if any"},{label:"Base Image",original:t.base_image,value:null===l||void 0===l?void 0:l.base_image,key:"base_image",detail:"A base container image used to run the application"},{label:"Open BLAS Version",original:t.openblas_version,value:null===l||void 0===l?void 0:l.openblas_version,key:"openblas_version",detail:"Open BLAS version used, if any"},{label:"Open MPI Version",original:t.openmpi_version,value:null===l||void 0===l?void 0:l.openmpi_version,key:"openmpi_version",detail:"Open MPI version used, if any"},{label:"Operating System",key:"operating_system",group:[{label:"OS Name",original:null===(c=t.operating_system)||void 0===c?void 0:c.name,value:null===l||void 0===l||null===(s=l.operating_system)||void 0===s?void 0:s.name,key:"name"},{label:"OS Version",original:null===(d=t.operating_system)||void 0===d?void 0:d.version,value:null===l||void 0===l||null===(u=l.operating_system)||void 0===u?void 0:u.version,key:"version"}],detail:"Operating system used"},{label:"Platform",original:t.platform,value:null===l||void 0===l?void 0:l.platform,key:"platform",detail:"Platform used - corresponds to sysconfig.get_platform() call"},{label:"Python Version",original:t.python_version,value:null===l||void 0===l?void 0:l.python_version,key:"python_version",detail:"Python version on which the application runs on"}]}),[t,l]),P=Object(a.useMemo)((function(){var e={};return Object.entries(null!==l&&void 0!==l?l:{}).forEach((function(t){var n=Object(g.a)(t,2),a=n[0],i=n[1];if(i)if("object"===typeof i){var r={};l&&Object.entries(i).forEach((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];a&&(r[n]=a)})),Object.keys(r).length>0&&(e[a]=r)}else e[a]=i})),Ka.a.dump(e).toString()}),[l]),D=function(e){switch(e.group?e.group.some((function(e){return e.original!==e.value}))?"warning":e.group.every((function(e){return!e.original}))?"error":"success":e.original!==e.value?"warning":e.original?"success":"error"){case"warning":return Object(p.jsx)(Ua.a,{color:"warning"});case"error":return Object(p.jsx)(Bt.a,{color:"error"});case"success":return Object(p.jsx)(Mt.a,{color:"success"})}};return Object(p.jsxs)(R.a,{children:[Object(p.jsx)(T.a,{variant:"h4",children:"Project Runtime Environment"}),Object(p.jsx)(T.a,{variant:"body1",children:"Thoth performs recommendations based on your hardware and software environment."}),Object(p.jsxs)(L.a,{container:!0,alignItems:"center",sx:{marginLeft:2,marginTop:1,marginBottom:2},children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Mt.a,{color:"success",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value provided"})})}),Object(p.jsx)(L.a,{item:!0,xs:12}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Bt.a,{color:"error",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value not provided"})})}),Object(p.jsx)(L.a,{item:!0,xs:12}),Object(p.jsxs)(L.a,{item:!0,children:[" ",Object(p.jsx)(Ua.a,{color:"warning",sx:{marginRight:2,verticalAlign:"middle"}})]}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Value edited"})})})]}),Object(p.jsx)(N.a,{}),I.some((function(e){return e.group?e.group.some((function(e){return e.original!==e.value})):e.original!==e.value}))?Object(p.jsx)(nt.a,{action:Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(d.a,{disabled:O,size:"small",variant:"outlined",onClick:function(){s(t),b(void 0)},children:"RESET PARAMETERS"}),Object(p.jsx)(ue.a,{loading:O,size:"small",variant:"contained",onClick:function(){return b(void 0),m(!0),void ie(n,r,l).then((function(e){m(!1),C("/advise/"+e.data.analysis_id+"/summary")})).catch((function(e){var t,n,a;m(!1),b(null!==(t=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)&&void 0!==t?t:"An error occurred.")}))},children:"NEW ADVISE"})]}),sx:{marginTop:2},variant:"outlined",severity:"warning",children:"The environment parameters are edited and are not equal to the parameters set in the adviser report. You can use the new environment parameters to run a new adviser report, or you can reset them back to the original values."}):void 0,v?Object(p.jsx)(nt.a,{sx:{marginTop:2},variant:"outlined",severity:"error",children:v}):void 0,Object(p.jsxs)(L.a,{container:!0,spacing:4,children:[Object(p.jsx)(L.a,{item:!0,xs:8,children:Object(p.jsxs)(ot.a,{dense:!0,children:[Object(p.jsxs)(ct.a,{children:[Object(p.jsx)(qa.a,{}),Object(p.jsx)(lt.a,{children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Environment Parameters"})}),Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Value"}),w?Object(p.jsx)(Se.a,{sx:{marginLeft:1},onClick:function(){return S(!1)},children:Object(p.jsx)(Mt.a,{fontSize:"small"})}):Object(p.jsx)(Se.a,{sx:{marginLeft:1},onClick:function(){return S(!0)},children:Object(p.jsx)(Va.a,{fontSize:"small"})})]}),I.map((function(e,t){var n;return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsxs)(ct.a,{children:[Object(p.jsx)(qa.a,{children:D(e)}),Object(p.jsx)(lt.a,{primary:e.label,secondary:e.detail}),e.group?Object(p.jsx)(Ue.a,{spacing:1,children:e.group.map((function(t){var n,a;return Object(p.jsx)(Ga,{itemKey:e.key,itemSubKey:t.key,label:t.label,value:null!==(n=null===l||void 0===l||null===(a=l[e.key])||void 0===a?void 0:a[t.key])&&void 0!==n?n:"",handleSubmit:A,editMode:w},e.key+t.key)}))}):Object(p.jsx)(Ga,{label:e.label,itemKey:e.key,value:null!==(n=null===l||void 0===l?void 0:l[e.key])&&void 0!==n?n:"",handleSubmit:A,editMode:w})]}),Object(p.jsx)(N.a,{variant:"inset"})]},e.key+t)}))]})}),Object(p.jsx)(L.a,{item:!0,xs:4,children:Object(p.jsxs)(At.a,{sx:{marginTop:2},variant:"outlined",children:[Object(p.jsx)(It.a,{title:null===l||void 0===l?void 0:l.name,action:Object(p.jsx)(d.a,{size:"small",variant:"outlined",onClick:function(){return navigator.clipboard.writeText(P)},children:"COPY"})}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)("pre",{children:P})})]})})]})]})};function Qa(e){var t,n,r,o,c,l,s=e.metric,d=Object(a.useContext)(k),u=Object(a.useState)(),j=Object(g.a)(u,2),v=j[0],b=j[1];return null===s||0===Object.keys(s).length?null!==d&&void 0!==d&&null!==(t=d.loading)&&void 0!==t&&t.graph?Object(p.jsx)(pt,{type:"circular",label:null===d||void 0===d||null===(n=d.loading)||void 0===n?void 0:n.graph.text,progress:(null!==(r=null===d||void 0===d||null===(o=d.loading)||void 0===o?void 0:o.graph.value)&&void 0!==r?r:0)/(null!==(c=null===d||void 0===d||null===(l=d.loading)||void 0===l?void 0:l.graph.total)&&void 0!==c?c:1)*100}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"License data not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise run encountered an error."})]}):Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsxs)(L.a,{item:!0,xs:12,children:[Object(p.jsx)(T.a,{variant:"h4",children:"Package Licenses"}),Object(p.jsx)(T.a,{variant:"body1",children:"The Open Source Initiative (OSI) approves open source licenses that allow software to be freely used, modified, and shared."})]}),Object(p.jsxs)(L.a,{container:!0,item:!0,xs:12,alignItems:"center",sx:{marginLeft:2,marginTop:2,marginBottom:2},children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Mt.a,{color:"success",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"OSI Approved"})})}),Object(p.jsx)(L.a,{item:!0,xs:12}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(Bt.a,{color:"error",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Not OSI Approved"})})}),Object(p.jsx)(L.a,{item:!0,xs:12}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(vt.a,{color:"warning",sx:{marginRight:2,verticalAlign:"middle"}})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("i",{children:"Unknown Approval"})})})]}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(N.a,{})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsxs)(ot.a,{children:[Object(p.jsxs)(ct.a,{children:[Object(p.jsx)(qa.a,{children:Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"OSI"})}),Object(p.jsx)(lt.a,{children:Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"License"})}),Object(p.jsx)(T.a,{fontWeight:"bold",variant:"body1",children:"Count"})]}),Object.entries(s).map((function(e){var t,n,a=Object(g.a)(e,2),i=a[0],r=a[1];return Object(p.jsx)(ct.a,{selected:v===i,disablePadding:!0,sx:{borderRadius:100},children:Object(p.jsxs)(gn.a,{onClick:function(){return b(i)},sx:{borderRadius:100},children:[Object(p.jsx)(qa.a,{children:null===(null===(t=r.metadata)||void 0===t?void 0:t.isOsiApproved)?Object(p.jsx)(vt.a,{color:"warning"}):null!==(n=r.metadata)&&void 0!==n&&n.isOsiApproved?Object(p.jsx)(Cn.a,{color:"success"}):Object(p.jsx)(Bt.a,{color:"error"})}),Object(p.jsx)(lt.a,{children:Object(p.jsx)(T.a,{variant:"body1",children:i})}),Object(p.jsx)(Xe.a,{label:Object.keys(r.packages).length})]})},i)}))]})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:v?Object(p.jsxs)(At.a,{sx:{marginTop:2},variant:"outlined",children:[Object(p.jsx)(It.a,{title:v,subheader:"Packages that use the ".concat(v)}),Object(p.jsx)(Pt.a,{children:Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"Package"})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",fontWeight:"bold",children:"PyPI License"})}),Object.entries(s[v].packages).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",children:n})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsx)(T.a,{variant:"body1",children:a.specific})})]},n)}))]})})]}):Object(p.jsxs)(R.a,{height:"100%",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Choose a license"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"Click on a license from the list of licenses to view which packages use that license"})]})})]})}var Ja=n(210),Xa=n.n(Ja),Za=n(283),$a=n.n(Za),ei=n(526),ti=function(e){if(!e)return"0 B";var t=e/1e3;if(t<1)return"".concat(e," B");var n=e/1e6;if(n<1)return"".concat(t.toFixed(2)," KB");var a=e/1e9;if(a<1)return"".concat(n.toFixed(2)," MB");var i=e/1e12;return i<1?"".concat(a.toFixed(2)," GB"):"".concat(i.toFixed(2)," TB")},ni=n(492),ai=n(493),ii=n(494);function ri(e){var t,n,i=e.metric,r=e.graph,o=Object(a.useContext)(k),c=Object(a.useState)(),l=Object(g.a)(c,2),s=l[0],d=l[1];Object(a.useEffect)((function(){if(r){var e=r.nodes.get("*App");e&&d(e)}}),[r]);var u,j,v,b,h,x,O=Object(a.useMemo)((function(){if(r&&s){var e,t,n=[].concat(Object(Ct.a)(Object(Ct.a)(null!==(e=null===s||void 0===s?void 0:s.parents.values())&&void 0!==e?e:[]).map((function(e){return r.nodes.get(e)})).filter((function(e){return void 0!==e}))),[s],Object(Ct.a)(null!==(t=null===s||void 0===s?void 0:s.adjacents.values())&&void 0!==t?t:[])),a=n.findIndex((function(e){return e.key===s.key}));return[n,a]}return[[],0]}),[s,r]),m=Object(g.a)(O,2),f=m[0],y=m[1],_=Object(a.useMemo)((function(){if(r&&s){var e,t=0,n={},a=0,i=0,o=0,c=r.graphSearch(s),l=Object(Ct.a)(null!==(e=s.adjacents.values())&&void 0!==e?e:[]).map((function(e){return e.key}));return Array.from(c).forEach((function(e){var r,c,d,u,j,v,b,h,p,x;(t+=null!==(r=e.value.install_size)&&void 0!==r?r:0,a+=null!==(c=null===e||void 0===e||null===(d=e.value)||void 0===d||null===(u=d.justifications)||void 0===u?void 0:u.reduce((function(e,t){return"WARNING"===t.type?e+1:e}),0))&&void 0!==c?c:0,n[null!==(j=null===(v=e.value.metadata)||void 0===v?void 0:v.License)&&void 0!==j?j:"Not found"])?n[null!==(b=null===(h=e.value.metadata)||void 0===h?void 0:h.License)&&void 0!==b?b:"Not found"]+=1:n[null!==(p=null===(x=e.value.metadata)||void 0===x?void 0:x.License)&&void 0!==p?p:"Not found"]=1;l.includes(e.key)?i+=1:e.key!==s.key&&(o+=1)})),[t,n,a,i,o]}return[0,[],0,0,0]}),[s,r]),w=Object(g.a)(_,5),S=w[0],C=w[1],A=w[2],I=w[3],P=w[4];return i&&r?Object(p.jsxs)(L.a,{container:!0,columnSpacing:4,rowSpacing:2,children:[Object(p.jsxs)(L.a,{item:!0,xs:12,children:[Object(p.jsx)(T.a,{variant:"h4",children:"Dependency Tree"}),Object(p.jsx)(T.a,{variant:"body1",children:"A Python environment's packages can be organized as a one directional graph with root packages generally being the dependncies defined in the Pipfile."})]}),Object(p.jsx)(L.a,{item:!0,xs:6,sx:{marginTop:1},children:Object(p.jsxs)(ot.a,{children:[y>0&&"*App"!==(null===(t=f.at(0))||void 0===t?void 0:t.key)?Object(p.jsx)(ct.a,{sx:{paddingBottom:0},children:Object(p.jsx)(lt.a,{children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependents"})})}):void 0,Object(p.jsx)(ei.a,{children:f.map((function(e,t){return Object(p.jsxs)(se.a,{children:[t===y+1?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(ct.a,{sx:{paddingBottom:0},children:[Object(p.jsx)(lt.a,{children:Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependencies"})}),Object(p.jsx)(T.a,{variant:"body2",fontWeight:"bold",sx:{color:"gray"},children:"Dependency count"})]}),t===y&&0!==y?Object(p.jsx)(N.a,{sx:{marginY:1}}):void 0]}):void 0,Object(p.jsx)(ct.a,{selected:e.key===(null===s||void 0===s?void 0:s.key),disablePadding:!0,sx:{borderRadius:100},children:Object(p.jsxs)(gn.a,{onClick:function(){return d(e)},sx:{borderRadius:100},children:[t<y&&"*App"!==e.key&&Object(p.jsx)(qa.a,{children:Object(p.jsx)($a.a,{})}),Object(p.jsx)(lt.a,{children:"*App"===(null===s||void 0===s?void 0:s.key)&&"*App"===e.key?Object(p.jsx)(T.a,{variant:"body1",sx:{color:"gray"},fontStyle:"italic",children:"Pipfile"}):"*App"===e.key?Object(p.jsx)(T.a,{variant:"body1",sx:{color:"gray"},fontStyle:"italic",children:"Back to roots"}):Object(p.jsx)(T.a,{variant:"body1",children:null===e||void 0===e?void 0:e.key})}),e.key===(null===s||void 0===s?void 0:s.key)?Object(p.jsx)(Xe.a,{sx:{fontStyle:"italic"},label:"Selected"}):e.adjacents.size>0&&"*App"!==e.key&&Object(p.jsx)(Xe.a,{label:e.adjacents.size})]})},e.key)]},e.key)}))})]})}),Object(p.jsx)(L.a,{item:!0,xs:6,children:Object(p.jsxs)(At.a,{children:["*App"===(null===s||void 0===s?void 0:s.key)?Object(p.jsx)(It.a,{title:"Pipfile",subheader:"The supplied Pipfile has ".concat(null===s||void 0===s?void 0:s.adjacents.size," dependencies")}):Object(p.jsx)(It.a,{title:null===s||void 0===s?void 0:s.key,subheader:"".concat(null===s||void 0===s?void 0:s.key," depends on ").concat(null===s||void 0===s?void 0:s.adjacents.size," packages and is a dependency for ").concat(null===s||void 0===s?void 0:s.parents.size)}),Object(p.jsxs)(Pt.a,{children:["*App"!==(null===s||void 0===s?void 0:s.key)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(St,{graph:r,graphHeight:"25vh",root:s}),Object(p.jsx)(T.a,{variant:"h5",sx:{marginBottom:2},children:"Package Stats"}),Object(p.jsxs)(Ue.a,{sx:{marginLeft:1},spacing:1.5,children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(p.jsx)(Xa.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Package size:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:ti(null===s||void 0===s?void 0:s.value.install_size)})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(vt.a,{color:"warning"}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Package warnings count:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:null===s||void 0===s||null===(n=s.value.justifications)||void 0===n?void 0:n.filter((function(e){return"WARNING"===e.type})).length})]})]}),Object(p.jsx)(N.a,{sx:{marginY:2},variant:"fullWidth"})]}),Object(p.jsx)(T.a,{variant:"h5",sx:{marginBottom:2},children:"Dependency Stats"}),Object(p.jsxs)(Ue.a,{sx:{marginLeft:1},spacing:1.5,children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(Xa.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Total size:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:ti(S)})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(vt.a,{color:"warning"}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Total warnings count:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:A})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(ni.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Direct dependencies:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:I})]}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(ai.a,{}),Object(p.jsxs)(T.a,{variant:"body1",fontWeight:"bold",children:["Indirect dependencies:"," "]}),Object(p.jsx)(T.a,{variant:"body1",children:P})]}),Object(p.jsxs)(Ue.a,{spacing:1,direction:"row",alignItems:"center",children:[Object(p.jsx)(ii.a,{}),Object(p.jsx)(T.a,{variant:"h6",children:"Licenses"})]}),Object.entries(C).sort((function(e,t){return t[1]-e[1]})).map((function(e,t){var n=Object(g.a)(e,2),a=n[0],i=n[1];return Object(p.jsxs)(Ue.a,{justifyContent:"space-between",direction:"row",sx:{borderRadius:100,paddingX:2,backgroundColor:t%2!==0?"#84848414":void 0},children:[Object(p.jsx)(T.a,{variant:"body1",children:a}),Object(p.jsx)(T.a,{variant:"body1",children:i})]},a)}))]})]})]})})]}):null!==o&&void 0!==o&&null!==(u=o.loading)&&void 0!==u&&u.graph?Object(p.jsx)(pt,{type:"circular",label:null===o||void 0===o||null===(j=o.loading)||void 0===j?void 0:j.graph.text,progress:(null!==(v=null===o||void 0===o||null===(b=o.loading)||void 0===b?void 0:b.graph.value)&&void 0!==v?v:0)/(null!==(h=null===o||void 0===o||null===(x=o.loading)||void 0===x?void 0:x.graph.total)&&void 0!==h?h:1)*100}):Object(p.jsxs)(R.a,{height:"100vh",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h5",align:"center",children:"Dependency data not available"}),Object(p.jsx)(T.a,{variant:"body2",align:"center",children:"The advise run encountered an error."})]})}var oi=function(){var e,t,n,i,r,o,c,s,d,u,j,v,b,h,x,O,m,f,k,_,w,S,C,A,I,P,L,R,T,D,M,N,B,W,F,q=Object(E.h)().analysis_id,z=Re(q,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}});Object(a.useEffect)((function(){if(z.isSuccess&&q){var e,t=(null!==(e=localStorage.getItem(te))&&void 0!==e?e:"").split(",");t.includes(q)||(t.push(q),localStorage.setItem(te,t.join(",")))}}),[z.status]);var V=function(e,t){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},t),{},{queryKey:["adviseLogs",e],queryFn:function(){return Te(e)}}))}(q,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=z.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),H=ja(Object(a.useMemo)((function(){var e,t,n,a,i,r,o,c,l,s;if(z.isSuccess&&null!==(e=z.data.data)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&null!==(n=t.report)&&void 0!==n&&null!==(a=n.products)&&void 0!==a&&null!==(i=a[0])&&void 0!==i&&i.project)return function(e){return Object.entries(e.requirements_locked.default).map((function(t){var n,a,i,r,o,c,l,s,d=Object(g.a)(t,2);return{name:d[0],version:d[1].version.replace("==",""),index:"https://pypi.org/simple",os_name:null!==(n=null===e||void 0===e||null===(a=e.runtime_environment)||void 0===a||null===(i=a.operating_system)||void 0===i?void 0:i.name)&&void 0!==n?n:"",os_version:null!==(r=null===e||void 0===e||null===(o=e.runtime_environment)||void 0===o||null===(c=o.operating_system)||void 0===c?void 0:c.version)&&void 0!==r?r:"",python_version:null!==(l=null===e||void 0===e||null===(s=e.runtime_environment)||void 0===s?void 0:s.python_version)&&void 0!==l?l:""}}))}(null===(r=z.data.data)||void 0===r||null===(o=r.result)||void 0===o||null===(c=o.report)||void 0===c||null===(l=c.products)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.project)}),[z]),void 0,null===z||void 0===z||null===(e=z.data)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.result)||void 0===n||null===(i=n.report)||void 0===i||null===(r=i.products)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.justification,null===z||void 0===z||null===(c=z.data)||void 0===c?void 0:c.data),U=Nn(H,null===(s=z.data)||void 0===s?void 0:s.data),K=Object(a.useMemo)((function(){return z.isLoading?Object(p.jsx)(pt,{type:"circular",label:"Fetching Advise Document"}):z.data?void 0:Object(p.jsx)(Ta,{children:Object(p.jsx)(va,{analysis_id:null!==q&&void 0!==q?q:"no id"})})}),[z.data,z.status]),G=Object(a.useMemo)((function(){try{var e,t,n,a,i;return JSON.parse(null!==(e=null===(t=V.data)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.log)||void 0===a||null===(i=a.split("\n"))||void 0===i?void 0:i.at(-2))&&void 0!==e?e:"{}")}catch(r){return{}}}),[V.data]),Y=Object(a.useMemo)((function(){var e,t,n,a,i,r,o,c,l,s,d,u,j;return null!==(e=z.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(n=t.result)&&void 0!==n&&null!==(a=n.report)&&void 0!==a&&a.stack_info?{info:null!==(i=null===(r=z.data)||void 0===r||null===(o=r.data.result.report)||void 0===o?void 0:o.stack_info.filter((function(e){return"INFO"===e.type})).length)&&void 0!==i?i:0,warning:null!==(c=null===(l=z.data)||void 0===l||null===(s=l.data.result.report)||void 0===s?void 0:s.stack_info.filter((function(e){return"WARNING"===e.type})).length)&&void 0!==c?c:0,error:null!==(d=null===(u=z.data)||void 0===u||null===(j=u.data.result.report)||void 0===j?void 0:j.stack_info.filter((function(e){return"ERROR"===e.type})).length)&&void 0!==d?d:0}:{info:0,warning:0,error:0}}),[null===(d=z.data)||void 0===d?void 0:d.data]),Q=Object(a.useMemo)((function(){var e={info:0,warning:0,error:0};return U.licenses?(Object.values(U.licenses).forEach((function(t){switch(t.metadata.isOsiApproved){case null:e.warning+=Object.keys(t.packages).length;break;case!1:e.error+=Object.keys(t.packages).length}})),e):e}),[U.licenses]);return Object(p.jsx)(Ra,{chipData:{"stack-info":Y,licenses:Q},children:Object(p.jsx)(ba,{children:null!==K&&void 0!==K?K:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"summary",element:Object(p.jsx)(zn,{adviseDocument:null===z||void 0===z||null===(u=z.data)||void 0===u?void 0:u.data,graph:H,lastLog:G})}),Object(p.jsx)(E.b,{path:"packages",element:Object(p.jsx)(Ot,{graph:H})}),Object(p.jsx)(E.b,{path:"packages/:pkg",element:Object(p.jsx)(Ot,{graph:H})}),Object(p.jsx)(E.b,{path:"logs",element:Object(p.jsx)(Da,{logs:null===(j=V.data)||void 0===j||null===(v=j.data)||void 0===v?void 0:v.log})}),Object(p.jsx)(E.b,{path:"compare",element:Object(p.jsx)(ca,{adviseDocument:null===z||void 0===z||null===(b=z.data)||void 0===b?void 0:b.data})}),Object(p.jsx)(E.b,{path:"compare/:cmp",element:Object(p.jsx)(ca,{adviseDocument:null===z||void 0===z||null===(h=z.data)||void 0===h?void 0:h.data})}),Object(p.jsx)(E.b,{path:"stack-info",element:Object(p.jsx)(Fa,{stack_info:null===(x=z.data)||void 0===x||null===(O=x.data)||void 0===O||null===(m=O.result)||void 0===m||null===(f=m.report)||void 0===f?void 0:f.stack_info})}),Object(p.jsx)(E.b,{path:"environment",element:Object(p.jsx)(Ya,{runtime_environment:null===(k=z.data)||void 0===k||null===(_=k.data)||void 0===_||null===(w=_.result)||void 0===w||null===(S=w.report)||void 0===S||null===(C=S.products)||void 0===C||null===(A=C[0])||void 0===A||null===(I=A.project)||void 0===I?void 0:I.runtime_environment,pipfileLock:JSON.stringify(null!==(P=null===(L=z.data)||void 0===L||null===(R=L.data)||void 0===R||null===(T=R.result)||void 0===T||null===(D=T.parameters)||void 0===D?void 0:D.project.requirements_locked)&&void 0!==P?P:{}),pipfile:JSON.stringify(null!==(M=null===(N=z.data)||void 0===N||null===(B=N.data)||void 0===B||null===(W=B.result)||void 0===W||null===(F=W.parameters)||void 0===F?void 0:F.project.requirements)&&void 0!==M?M:{})})}),Object(p.jsx)(E.b,{path:"licenses",element:Object(p.jsx)(Qa,{metric:U.licenses})}),Object(p.jsx)(E.b,{path:"dependency-tree",element:Object(p.jsx)(ri,{metric:U.dependencies,graph:H})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(E.a,{to:"summary"})})]})})})},ci=n(284),li=n.n(ci),si=n(285),di=n.n(si),ui=["options","type","label","disabled"],ji=function(e){var t,n=e.options,i=e.type,r=e.label,o=e.disabled,c=Object(F.a)(e,ui),l=Object(E.g)(),s=Object(a.useContext)(_i),d=s.specs,u=s.defaultSpecs;return Object(p.jsxs)(R.a,Object(y.a)(Object(y.a)({},c),{},{children:[Object(p.jsx)(T.a,{variant:"body2",children:r}),Object(p.jsxs)(Yn.a,{displayEmpty:!0,fullWidth:!0,value:null!==(t=d[i])&&void 0!==t?t:"",onChange:function(e){var t,n,a,r,o,c,s,j,v,b,h,p,x;switch(i){case"package_version":l("/package/".concat(d.package_name,"/").concat(e.target.value));break;case"index_url":l("/package/".concat(d.package_name,"/").concat(null!==(t=d.package_version)&&void 0!==t?t:u.package_version,"/").concat(encodeURIComponent(e.target.value)));break;case"os_name":l("/package/".concat(d.package_name,"/").concat(null!==(n=d.package_version)&&void 0!==n?n:u.package_version,"/").concat(encodeURIComponent(null!==(a=null!==(r=d.index_url)&&void 0!==r?r:u.index_url)&&void 0!==a?a:""),"/").concat(e.target.value));break;case"os_version":l("/package/".concat(d.package_name,"/").concat(null!==(o=d.package_version)&&void 0!==o?o:u.package_version,"/").concat(encodeURIComponent(null!==(c=null!==(s=d.index_url)&&void 0!==s?s:u.index_url)&&void 0!==c?c:""),"/").concat(null!==(j=d.os_name)&&void 0!==j?j:u.os_name,"/").concat(e.target.value));break;case"python_version":l("/package/".concat(d.package_name,"/").concat(null!==(v=d.package_version)&&void 0!==v?v:u.package_version,"/").concat(encodeURIComponent(null!==(b=null!==(h=d.index_url)&&void 0!==h?h:u.index_url)&&void 0!==b?b:""),"/").concat(null!==(p=d.os_name)&&void 0!==p?p:u.os_name,"/").concat(null!==(x=d.os_version)&&void 0!==x?x:u.os_version,"/").concat(e.target.value))}},size:"small",variant:"outlined",disabled:o,renderValue:function(e){return e||Object(p.jsx)("em",{style:{color:"grey"},children:null!==(t=null===u||void 0===u?void 0:u[i])&&void 0!==t?t:r});var t},children:[Object(p.jsx)(Qn.a,{disabled:!0,value:"",children:Object(p.jsx)("em",{children:r})}),n.map((function(e){return Object(p.jsx)(Qn.a,{value:e.value,children:e.value},e.value)}))]})]}))},vi=function(e){var t,n,r=e.metadata,o=e.allVersions,c=void 0===o?[]:o,l=e.allEnvironments,s=void 0===l?[]:l,d=Object(a.useContext)(_i),u=d.defaultSpecs,j=d.specs,v=Object(a.useState)(!1),b=Object(g.a)(v,2),h=b[0],x=b[1],O=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(t){return!e.has(t.package_version)&&(e.add(t.package_version),!0)})).map((function(e){return{value:e.package_version}})).sort((function(e,t){return e.value.split(".")>t.value.split(".")?1:-1}))}),[c]),m=Object(a.useMemo)((function(){var e=new Set;return c.filter((function(e){return j.package_version?j.package_version===e.package_version:u.package_version===e.package_version})).filter((function(t){return!e.has(t.index_url)&&(e.add(t.index_url),!0)})).map((function(e){return{value:e.index_url}}))}),[c]),f=Object(a.useMemo)((function(){return[s.map((function(e){return{value:e.os_name}})),s.filter((function(e){return!j.os_name||j.os_name===e.os_name})).map((function(e){return{value:e.os_version}})),s.filter((function(e){return(!j.os_name||j.os_name===e.os_name)&&(!j.os_version||j.os_version===e.os_version)})).map((function(e){return{value:e.python_version}}))]}),[s,j]),y=Object(g.a)(f,3),k=y[0],_=y[1],w=y[2];return r?Object(p.jsxs)("div",{children:[Object(p.jsxs)(L.a,{container:!0,alignItems:"flex-end",spacing:1,children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(T.a,{variant:"h4",mr:2,children:Object(p.jsx)("b",{children:null===r||void 0===r?void 0:r.Name})})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(ji,{options:null!==O&&void 0!==O?O:[],type:"package_version",label:"Version"})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(ji,{options:null!==m&&void 0!==m?m:[],type:"index_url",label:"Index URL",disabled:void 0===j.package_version})}),h?Object(p.jsxs)(i.a.Fragment,{children:[Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(ji,{options:null!==k&&void 0!==k?k:[],type:"os_name",label:"OS Name",disabled:void 0===j.index_url})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(ji,{options:null!==_&&void 0!==_?_:[],type:"os_version",label:"OS Version",disabled:void 0===j.os_name})}),Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(ji,{options:null!==w&&void 0!==w?w:[],type:"python_version",label:"Python Version",disabled:void 0===j.os_version})})]}):null,Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)(Se.a,{onClick:function(){return x(!h)},"data-testid":"package-header-expand-button",children:h?Object(p.jsx)(li.a,{fontSize:"large"}):Object(p.jsx)(di.a,{fontSize:"large"})})})]}),Object(p.jsx)(T.a,{gutterBottom:!0,variant:"body1",mt:2,children:null!==(t=null===r||void 0===r?void 0:r.Summary)&&void 0!==t?t:"NaN"}),Object(p.jsx)("div",{children:Object(p.jsx)(tt,{text:null!==(n=null===r||void 0===r?void 0:r.License)&&void 0!==n?n:"NaN",icon:Object(p.jsx)(gt.a,{})})})]}):Object(p.jsxs)(R.a,{"data-testid":"package-header-not-loaded",children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},bi=function(e){var t=e.cardMeta,n=e.cardBody,a=e.cardAction;return Object(p.jsxs)(At.a,{variant:"outlined",sx:{margin:0},children:[Object(p.jsx)(It.a,{action:a,title:Object(p.jsx)(T.a,{variant:"h5",children:t.title}),subheader:t.subTitle}),Object(p.jsx)(Pt.a,{children:n})]})},hi=n(294),pi=n(286),xi=n.n(pi),Oi=function(e){var t,n=e.node,r=i.a.useState(null),o=Object(g.a)(r,2),c=o[0],l=o[1],s=i.a.useState(null),u=Object(g.a)(s,2),j=u[0],v=u[1],b=Object(E.g)(),h=Object(a.useMemo)((function(){var e={},t=[0,0],a=new Set;if(n.versions.forEach((function(n){var i,r=n.split("."),o=r[0]+"."+(null!==(i=r[1])&&void 0!==i?i:"");void 0===e[o]&&(e[o]=[],t[0]+=1),a.has(n)||(e[o].push(n),t[1]+=1,a.add(n))})),t[0]/t[1]>.25){var i,r=Math.ceil(.25*t[0]),o={};return Object.keys(e).forEach((function(t,n,a){var c,l;n%r===0&&(i="".concat(t," - ").concat(null!==(l=a[n+r-1])&&void 0!==l?l:a.at(-1)),o[i]=[]);(c=o[i]).push.apply(c,Object(Ct.a)(e[a[n]]))})),o}return e}),[n]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(d.a,{onClick:function(e){l(n.name),v(e.currentTarget)},variant:"outlined",endIcon:Object(p.jsx)(xi.a,{}),children:null!==(t=n.specifier)&&void 0!==t?t:"ANY"}),Object(p.jsxs)(hi.a,{open:c===n.name,anchorEl:j,onClose:function(){l(void 0),v(null)},PaperProps:{style:{maxHeight:"40%",maxWidth:"50%"}},children:[Object(p.jsx)(Qn.a,{disabled:!0,children:"Select a version to navigate to:"}),Object(p.jsx)(L.a,{container:!0,alignContent:"flex-start",children:Object.entries(h).map((function(e){var t=Object(g.a)(e,2),a=t[0],i=t[1];return Object(p.jsxs)(L.a,{item:!0,xs:!0,children:[Object(p.jsx)(Qn.a,{sx:{mt:2},disabled:!0,divider:!0,children:a}),i.map((function(e){return Object(p.jsx)(Qn.a,{onClick:function(){return b("/package/".concat(n.name,"/").concat(e))},children:Object(p.jsx)(T.a,{variant:"body2",children:e})},e)}))]},a)}))})]})]})},mi=function(e){var t=e.graph,n=Object(a.useMemo)((function(){if(null!==t&&void 0!==t&&t.nodes){var e=t.nodes.get("*App");if(e){var n=t.graphSearch(e),a=Array.from(n),i=[];return a.forEach((function(e){var t,n,a,r;"*App"===e.key||e.value.metadata||i.push({name:null!==(t=e.value.label)&&void 0!==t?t:e.key,versions:null!==(n=e.value.versions)&&void 0!==n?n:[],specifier:null!==(a=e.value.specifier)&&void 0!==a?a:"*",extra:null!==(r=e.value.extra)&&void 0!==r?r:[]})})),i}}}),[t]);return n?Object(p.jsx)(bi,{cardMeta:{title:"Dependencies"},cardBody:Object(p.jsxs)("div",{"data-testid":"package-dependencies-loaded",children:[Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Package"})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Versions"})}),Object(p.jsx)(L.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Extra"})})]}),Object(p.jsx)(N.a,{}),Object(p.jsx)(L.a,{container:!0,rowSpacing:2,mt:1,children:n.map((function(e){var t;return Object(p.jsxs)(L.a,{container:!0,item:!0,xs:12,children:[Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:e.name})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(Oi,{node:e})}),Object(p.jsx)(L.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:null===(t=e.extra)||void 0===t?void 0:t.join(", ")})})]},e.name)}))})]})}):Object(p.jsxs)(R.a,{"data-testid":"package-dependencies-not-loaded",children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},gi=function(e){var t=e.package_name,n=e.package_version;return Object(p.jsxs)("div",{children:['`"',t,n?" "+n:"",'"` not found']})};var fi=function(){var e=Object(H.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{name:t},headers:{accept:"application/json"}},e.abrupt("return",ee.a.get(ne+"/python/package/versions",n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yi=function(){var e=Object(H.a)(K.a.mark((function e(t,n,a){var i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={params:{name:t,version:n,index:a},headers:{accept:"application/json"}},e.abrupt("return",ee.a.get(ne+"/python/package/version/environments",i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ki=function(e){var t=e.message,n=e.type,a=e.reason;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:[n,": ",t]}),Object(p.jsx)("p",{children:a})]})},_i=i.a.createContext({specs:{package_name:""},defaultSpecs:{package_name:""}}),wi=function(){var e,t,n,i,r,o,c,s,d,u,j,v,b,h,x,O,m,f=Object(E.h)(),k=Object(a.useState)({package_name:null!==(e=f.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0}),_=Object(g.a)(k,2),w=_[0],S=_[1],C=Object(a.useMemo)((function(){var e;return{package_name:null!==(e=f.package_name)&&void 0!==e?e:"",package_version:null===f||void 0===f?void 0:f.package_version,index_url:null!==f&&void 0!==f&&f.index_url?decodeURIComponent(f.index_url):void 0,os_name:null===f||void 0===f?void 0:f.os_name,os_version:null===f||void 0===f?void 0:f.os_version,python_version:null===f||void 0===f?void 0:f.python_version}}),[f]),A=(O=C.package_name,Object(l.useQuery)(Object(y.a)(Object(y.a)({},m),{},{enabled:!!O,queryKey:["packageVersions",O],queryFn:function(){return fi(O)}}))),I=function(e,t,n,a){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},a),{},{enabled:!!e&&!!t&&!!n,queryKey:["packageEnvironments",e,t,n],queryFn:function(){return yi(null!==e&&void 0!==e?e:"",null!==t&&void 0!==t?t:"",null!==n&&void 0!==n?n:"")}}))}(C.package_name,null!==(t=C.package_version)&&void 0!==t?t:w.package_version,null!==(n=C.index_url)&&void 0!==n?n:w.index_url,{useErrorBoundary:!1});Object(a.useEffect)((function(){var e,t,n,a,i={package_name:null!==(e=f.package_name)&&void 0!==e?e:"",package_version:void 0,index_url:void 0,os_name:void 0,os_version:void 0,python_version:void 0};C.package_name&&(null!==(t=A.data)&&void 0!==t&&t.data&&A.data.data.versions.length>0&&(i.package_version=null===(n=A.data.data.versions.at(-1))||void 0===n?void 0:n.package_version,i.index_url=null===(a=A.data.data.versions.at(-1))||void 0===a?void 0:a.index_url));if(I.data&&I.data.data.environments.length>0){var r,o,c,l=I.data.data.environments.filter((function(e){return(!C.os_name||C.os_name===e.os_name)&&(!C.os_version||C.os_version===e.os_version)}));if(l.length>0)i.os_name=null===(r=l.at(0))||void 0===r?void 0:r.os_name,i.os_version=null===(o=l.at(0))||void 0===o?void 0:o.os_version,i.python_version=null===(c=l.at(0))||void 0===c?void 0:c.python_version}Object.entries(w).some((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return i[n]!==a}))&&S(i)}),[A.data,I,C]);var P,R,T,D,M,N,B,W,F,q=function(e,t,n,a,i,r,o){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},o),{},{enabled:!!e&&!!t&&!!n&&!!a&&!!i&&!!r,queryKey:["packageMetadata",e,t,n,a,i,r],queryFn:function(){return zt(null!==e&&void 0!==e?e:"",null!==t&&void 0!==t?t:"",null!==n&&void 0!==n?n:"",null!==a&&void 0!==a?a:"",null!==i&&void 0!==i?i:"",null!==r&&void 0!==r?r:"")}}))}(C.package_name,null!==(i=C.package_version)&&void 0!==i?i:w.package_version,null!==(r=C.index_url)&&void 0!==r?r:w.index_url,null!==(o=C.os_name)&&void 0!==o?o:w.os_name,null!==(c=C.os_version)&&void 0!==c?c:w.os_version,null!==(s=C.python_version)&&void 0!==s?s:w.python_version,{useErrorBoundary:!1}),z=function(e){var t=Object(a.useState)(),n=Object(g.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if("success"===e.status){var t=new da,n=t.addVertex("*App",{id:"*App",label:"App",depth:-1},ua),a=t.addVertex(e.data.data.metadata.package_name.toLowerCase(),{id:e.data.data.metadata.package_name.toLowerCase(),label:e.data.data.metadata.package_name,metadata:e.data.data.metadata.importlib_metadata.metadata,depth:0},ua);a.parents=new Set,a.parents.add("*App"),t.addEdge(n.key,a.key),Object.entries(e.data.data.metadata.dependencies).forEach((function(e){var n=Object(g.a)(e,2),i=n[0],r=n[1],o=t.addVertex(i.toLowerCase(),{id:i.toLowerCase(),label:i,metadata:null,versions:r.versions,specifier:r.specifier,extra:r.extra,depth:1},ua);o.parents=new Set,t.addEdge(a.key,o.key),o.parents.add(a.key)})),r(t)}}),[e.data]),i}(q);return q.isLoading||0===(null===A||void 0===A||null===(d=A.data)||void 0===d||null===(u=d.data)||void 0===u||null===(j=u.versions)||void 0===j?void 0:j.length)?Object(p.jsx)("div",{className:"w-full h-48 flex justify-center items-center","data-testid":"loading",children:Object(p.jsx)(Ce.a,{})}):q.data?Object(p.jsx)(_i.Provider,{value:{specs:C,defaultSpecs:w},children:Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsx)(L.a,{item:!0,xs:12,mb:3,children:Object(p.jsx)(vi,{metadata:q.data.data.metadata.importlib_metadata.metadata,allVersions:null===A||void 0===A||null===(v=A.data)||void 0===v||null===(b=v.data)||void 0===b?void 0:b.versions,allEnvironments:null===I||void 0===I||null===(h=I.data)||void 0===h||null===(x=h.data)||void 0===x?void 0:x.environments})}),Object(p.jsx)(L.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(mi,{graph:z})})]})}):null!==q&&void 0!==q&&null!==(P=q.error)&&void 0!==P&&null!==(R=P.response)&&void 0!==R&&null!==(T=R.data)&&void 0!==T&&T.error?Object(p.jsx)(ki,{message:q.error.response.data.error,type:q.error.response.status,reason:"".concat(null===q||void 0===q||null===(N=q.error)||void 0===N||null===(B=N.config)||void 0===B?void 0:B.url," failed with params ").concat(JSON.stringify(null===q||void 0===q||null===(W=q.error)||void 0===W||null===(F=W.config)||void 0===F?void 0:F.params))}):Object(p.jsx)(gi,{package_name:null!==(D=f.package_name)&&void 0!==D?D:"",package_version:null!==(M=f.package_version)&&void 0!==M?M:""})},Si=function(){return Object(p.jsx)(Ta,{children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name/:os_version/:python_version",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url/:os_name/:os_version",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"/:package_version/:index_url",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"/:package_version",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"/",element:Object(p.jsx)(wi,{})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(Je,{})})]})})},Ci=["value","total","label","action"],Ai=function(e){var t=e.value,n=e.total,a=e.label,i=e.action,r=Object(F.a)(e,Ci);return Object(p.jsxs)(L.a,Object(y.a)(Object(y.a)({container:!0,spacing:1,alignItems:"center"},r),{},{children:[Object(p.jsx)(L.a,{item:!0,xs:5,children:Object(p.jsx)(T.a,{variant:"body2",children:a})}),Object(p.jsx)(L.a,{item:!0,xs:2,children:Object(p.jsx)(T.a,{variant:"body2",children:t})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(ht.a,{variant:"determinate",value:n>0?t/n*100:0,sx:{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"theme.palette.grey[200]"},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}})}),Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)("div",{children:null!==i&&void 0!==i?i:null})})]}))},Ii=function(e){var t,n,a,i,r,o,c,l,s,d,u,j,v,b,h=e.metric,x=(null!==(t=null===h||void 0===h||null===(n=h.all)||void 0===n?void 0:n.direct)&&void 0!==t?t:0)+(null!==(a=null===h||void 0===h||null===(i=h.all)||void 0===i?void 0:i.indirect)&&void 0!==a?a:0)+(null!==(r=null===h||void 0===h||null===(o=h.all)||void 0===o?void 0:o.roots)&&void 0!==r?r:0);return null!==h&&void 0!==h&&h.all&&null!==h&&void 0!==h&&h.roots?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"All Packages"}),Object(p.jsx)(N.a,{sx:{mb:1}}),Object(p.jsx)(Ai,{value:null!==(c=null===h||void 0===h||null===(l=h.all)||void 0===l?void 0:l.roots)&&void 0!==c?c:0,total:x,label:"Root",mb:1}),Object(p.jsx)(Ai,{value:null!==(s=null===h||void 0===h||null===(d=h.all)||void 0===d?void 0:d.direct)&&void 0!==s?s:0,total:x,label:"Direct",mb:1}),Object(p.jsx)(Ai,{value:null!==(u=null===h||void 0===h||null===(j=h.all)||void 0===j?void 0:j.indirect)&&void 0!==u?u:0,total:x,label:"Indirect"}),Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,mt:2,children:"Root Packages"}),Object(p.jsx)(N.a,{sx:{mb:1}}),Object(p.jsx)(ot.a,{component:"nav",children:Object(p.jsx)(ei.a,{children:null===(v=Object.entries(null!==(b=null===h||void 0===h?void 0:h.roots)&&void 0!==b?b:{}))||void 0===v?void 0:v.map((function(e){var t,n,a,i,r,o,c,l,s=Object(g.a)(e,1)[0],d=(null!==(t=null===h||void 0===h?void 0:h.roots[s].direct)&&void 0!==t?t:0)+(null!==(n=null===h||void 0===h?void 0:h.roots[s].indirect)&&void 0!==n?n:0);return Object(p.jsx)(se.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(ct.a,{children:Object(p.jsxs)(L.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(lt.a,{primary:s})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsxs)(L.a,{container:!0,direction:"column",children:[Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(Ai,{value:null!==(a=null===h||void 0===h||null===(i=h.roots)||void 0===i||null===(r=i[s])||void 0===r?void 0:r.direct)&&void 0!==a?a:0,total:d,label:"Direct"})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(Ai,{value:null!==(o=null===h||void 0===h||null===(c=h.roots)||void 0===c||null===(l=c[s])||void 0===l?void 0:l.indirect)&&void 0!==o?o:0,total:d,label:"Indirect"})})]})})]})}),Object(p.jsx)(N.a,{variant:"middle",sx:{mb:1}})]})},s)}))})})]}):Object(p.jsxs)(R.a,{children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},Pi=n(288),Ei=n.n(Pi),Li=n(289),Ri=n.n(Li),Ti=n(287),Di=n.n(Ti),Mi=function(e){var t,n=e.name,a=e.metadata,r=e.packages,o=e.totalLicenses,c=i.a.useState(!1),l=Object(g.a)(c,2),s=l[0],d=l[1];return Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsx)(L.a,{item:!0,xs:1,children:null===(null===a||void 0===a?void 0:a.isOsiApproved)?Object(p.jsx)(Di.a,{}):null!==a&&void 0!==a&&a.isOsiApproved?Object(p.jsx)(Cn.a,{}):null}),Object(p.jsxs)(L.a,{item:!0,xs:!0,children:[Object(p.jsx)(R.a,{onClick:function(){return d(!s)},children:Object(p.jsx)(Ai,{value:null!==(t=Object.keys(r).length)&&void 0!==t?t:0,total:o,label:n,action:s?Object(p.jsx)(Ei.a,{}):Object(p.jsx)(Ri.a,{})},n)}),Object(p.jsxs)(se.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(p.jsx)(R.a,{my:1,children:Object.entries(r).sort((function(e,t){return e[1].depth-t[1].depth})).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)(Xe.a,{sx:{margin:.5},color:0===a.depth?"primary":1===a.depth?"secondary":"default",label:n},n)}))}),Object(p.jsx)(N.a,{})]})]})]})},Ni=function(e){var t=e.metric,n=i.a.useState(!1),r=Object(g.a)(n,2),o=r[0],c=r[1],l=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).sort((function(e,t){return Object.keys(t[1]).length-Object.keys(e[1]).length}))}),[t]),s=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).reduce((function(e,t){var n=Object(g.a)(t,2)[1];return e+Object.keys(n.packages).length}),0)}),[t]);return t?Object(p.jsxs)("div",{children:[Object(p.jsxs)(L.a,{container:!0,children:[Object(p.jsx)(L.a,{item:!0,xs:1,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"OSI"})}),Object(p.jsx)(L.a,{item:!0,xs:!0,children:Object(p.jsx)(T.a,{variant:"h6",gutterBottom:!0,children:"Dependency Licenses"})})]}),Object(p.jsx)(N.a,{}),Object(p.jsx)(ei.a,{children:null===l||void 0===l?void 0:l.slice(0,10).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)(se.a,{children:Object(p.jsx)(Mi,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))}),Object(p.jsx)(se.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(p.jsx)(ei.a,{children:l.slice(10).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(p.jsx)(se.a,{children:Object(p.jsx)(Mi,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))})}),Object(p.jsx)(R.a,{textAlign:"center",children:Object(p.jsx)(d.a,{onClick:function(){return c(!o)},color:"primary",children:o?"Less":"More"})})]}):Object(p.jsxs)(R.a,{children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},Bi=n(290),Wi=n.n(Bi),Fi=function(e){var t,n,r,o,c,l,s=e.imageDocument,u=e.logs,j=i.a.useState(!1),v=Object(g.a)(j,2),b=v[0],h=v[1],x=i.a.useState(),O=Object(g.a)(x,2),m=O[0],f=O[1],y=Object(a.useMemo)((function(){var e;return null!==s&&void 0!==s&&s.result?["COMPLETE","success"]:null!==s&&void 0!==s&&null!==(e=s.status)&&void 0!==e&&e.state?[s.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[s]),k=Object(g.a)(y,2),_=k[0],w=k[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)(T.a,{variant:"h4",mb:2,children:Object(p.jsx)("b",{children:null!==(t=null===s||void 0===s||null===(n=s.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:s.parameters.analysis_id})}),Object(p.jsxs)(Ue.a,{direction:"row",spacing:2,children:[Object(p.jsx)(Xe.a,{label:_,color:w}),Object(p.jsx)(tt,{text:Me(null===s||void 0===s||null===(r=s.status)||void 0===r?void 0:r.finished_at,null===s||void 0===s||null===(o=s.status)||void 0===o?void 0:o.started_at,null===s||void 0===s||null===(c=s.metadata)||void 0===c?void 0:c.datetime),icon:Object(p.jsx)($e.a,{})}),Object(p.jsx)(d.a,{sx:{marginLeft:2},onClick:function(){return h(!b)},children:Object(p.jsx)(tt,{text:"Logs",icon:Object(p.jsx)(Wi.a,{})})})]}),Object(p.jsx)(se.a,{in:b,children:null!==(l=null===u||void 0===u?void 0:u.split("\n").map((function(e,t){return Object(p.jsx)(T.a,{noWrap:m!==t,onClick:function(){return f(m===t?void 0:t)},variant:"body2",sx:{backgroundColor:m===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==l?l:"Image log is not available."})]})},qi=n(168),zi=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],Vi=function(e){var t,n=e.imageDocument;return n?Object(p.jsx)("div",{style:{height:400,width:"100%"},children:Object(p.jsx)(qi.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t.deb,columns:zi,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(p.jsxs)(R.a,{children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},Hi=function(e){var t=e.imageDocument;if(!t)return Object(p.jsxs)(R.a,{"data-testid":"python-info-not-loaded",children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]});var n=Object(a.useMemo)((function(){var e;if(null===t||void 0===t||null===(e=t.result)||void 0===e||!e["python-files"])return[];var n=new Map;return t.result["python-files"].forEach((function(e){var t=e.filepath.split("/",4),a=t[1]+"/"+t[2]+"/"+t[3];n.has(a)?n.set(a,n.get(a)+1):n.set(a,1)})),Array.from(n.entries()).map((function(e){var t=Object(g.a)(e,2);return{path:t[0],count:t[1]}}))}),[t]),i=Object(a.useMemo)((function(){return t.result["python-interpreters"].filter((function(e){return!!e.version}))}),[t]);return Object(p.jsxs)(Ue.a,{direction:"column",spacing:3,children:[(null===i||void 0===i?void 0:i.length)>0?Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h6",children:"Python interpreters: "}),i.map((function(e,t){var n;return Object(p.jsx)(Xe.a,{"data-testid":"python-info-chip",label:e.version},(null!==(n=null===e||void 0===e?void 0:e.version)&&void 0!==n?n:"")+t)}))]}):void 0,Object(p.jsxs)("div",{"data-testid":"python-info-loaded",children:[Object(p.jsxs)(Ue.a,{direction:"row",spacing:1,mb:1,alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"h6",children:"Total number of Python files: "}),Object(p.jsx)(T.a,{variant:"body1",children:n.reduce((function(e,t){return e+t.count}),0)})]}),Object(p.jsx)(L.a,{container:!0,children:n.sort((function(e,t){return t.count-e.count})).map((function(e){return Object(p.jsx)(L.a,{item:!0,xs:12,lg:6,xl:4,children:Object(p.jsxs)(Ue.a,{ml:3,direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[Object(p.jsxs)(T.a,{variant:"body2",children:[e.path,":"]}),Object(p.jsx)(T.a,{variant:"body2",children:Object(p.jsx)("b",{children:e.count})})]})},e.path)}))})]})]})},Ui=function(e){var t,n,a,i,r,o,c,l,s,d,u=e.imageDocument;return u?Object(p.jsxs)(L.a,{container:!0,spacing:2,children:[Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsxs)(Ue.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(p.jsx)(T.a,{variant:"body1",children:Object(p.jsx)("b",{children:null===(t=u.result["skopeo-inspect"].Labels)||void 0===t?void 0:t["io.k8s.display-name"]})}),Object(p.jsx)(Xe.a,{label:null===(n=u.result["skopeo-inspect"].Labels)||void 0===n?void 0:n.name.split(":").at(-1)})]})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{variant:"h6",mb:1,children:"General information"})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Summary"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(a=u.result["skopeo-inspect"].Labels)||void 0===a?void 0:a.summary})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Description"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(i=u.result["skopeo-inspect"].Labels)||void 0===i?void 0:i.description})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Provider"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(r=u.result["skopeo-inspect"].Labels)||void 0===r?void 0:r.vendor})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Maintainer"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(o=u.result["skopeo-inspect"].Labels)||void 0===o?void 0:o.maintainer})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Build date"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:new Date(null===(c=u.result["skopeo-inspect"].Labels)||void 0===c?void 0:c["build-date"]).toLocaleDateString()})}),Object(p.jsx)(L.a,{item:!0,xs:12,children:Object(p.jsx)(T.a,{variant:"h6",mb:1,children:"Technical information"})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image name"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(l=u.result["skopeo-inspect"].Labels)||void 0===l?void 0:l.name})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Image version"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(s=u.result["skopeo-inspect"].Labels)||void 0===s?void 0:s.version})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Architecture"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:u.result["skopeo-inspect"].Architecture})}),Object(p.jsx)(L.a,{item:!0,xs:3,children:Object(p.jsx)(T.a,{variant:"body2",mr:3,ml:2,mb:1,children:"Exposed Ports"})}),Object(p.jsx)(L.a,{item:!0,xs:9,children:Object(p.jsx)(T.a,{variant:"body2",children:null===(d=u.result["skopeo-inspect"].Labels)||void 0===d?void 0:d["io.openshift.expose-services"]})})]}):Object(p.jsxs)(R.a,{"data-testid":"image-info-not-loaded",children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},Ki=[{field:"name",headerName:"Package Name",flex:1},{field:"version",headerName:"Version",flex:.5},{field:"release",headerName:"Release",flex:.25},{field:"dependencies",headerName:"Dependencies",flex:.5,valueGetter:function(e){var t,n,a;return null!==(t=null===(n=e.row)||void 0===n||null===(a=n.dependencies)||void 0===a?void 0:a.length)&&void 0!==t?t:0},sortable:!1},{field:"epoch",headerName:"Epoch",flex:.5},{field:"arch",headerName:"Architecture",flex:.5}],Gi=function(e){var t,n=e.imageDocument;return n?Object(p.jsx)("div",{style:{height:400,width:"100%"},"data-testid":"rpm-info-loaded",children:Object(p.jsx)(qi.a,{disableSelectionOnClick:!0,disableColumnSelector:!0,hideFooterSelectedRowCount:!0,getRowId:function(e){return e.package_identifier},density:"compact",rows:null===n||void 0===n||null===(t=n.result)||void 0===t?void 0:t["rpm-dependencies"],columns:Ki,pageSize:50,rowsPerPageOptions:[25,50,100]})}):Object(p.jsxs)(R.a,{"data-testid":"rpm-info-not-loaded",children:[Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{}),Object(p.jsx)(xn.a,{width:"60%"})]})},Yi=function(e){var t,n,a,i,r,o,c,l,s,d=e.metrics,u=e.imageDocument;return Object(p.jsxs)(qn.a,{columns:{xs:1,md:2},spacing:3,sx:{mb:3,mt:1},children:[u?Object(p.jsx)("div",{children:Object(p.jsx)(bi,{cardMeta:{title:"Image Details"},cardBody:Object(p.jsx)(Ui,{imageDocument:u})})}):void 0,(null===u||void 0===u||null===(t=u.result)||void 0===t||null===(n=t["python-interpreters"])||void 0===n?void 0:n.length)>0?Object(p.jsx)("div",{children:Object(p.jsx)(bi,{cardMeta:{title:"Python Details"},cardBody:Object(p.jsx)(Hi,{imageDocument:u})})}):void 0,(null===u||void 0===u||null===(a=u.result)||void 0===a||null===(i=a["rpm-dependencies"])||void 0===i?void 0:i.length)>0?Object(p.jsx)("div",{children:Object(p.jsx)(bi,{cardMeta:{title:"RPM Details"},cardBody:Object(p.jsx)(Gi,{imageDocument:u})})}):void 0,(null===(r=u.result)||void 0===r||null===(o=r.deb)||void 0===o?void 0:o.length)>0?Object(p.jsxs)("div",{children:[Object(p.jsx)(bi,{cardMeta:{title:"Debian Details"},cardBody:Object(p.jsx)(Vi,{imageDocument:u})})," "]}):void 0,0!==Object.keys(null!==(c=null===d||void 0===d||null===(l=d.dependencies)||void 0===l?void 0:l.all)&&void 0!==c?c:{}).length?Object(p.jsx)("div",{children:Object(p.jsx)(bi,{cardMeta:{title:"Python Packages Dependencies"},cardBody:Object(p.jsx)(Ii,{metric:null===d||void 0===d?void 0:d.dependencies})})}):void 0,0!==Object.keys(null!==(s=null===d||void 0===d?void 0:d.licenses)&&void 0!==s?s:{}).length?Object(p.jsxs)("div",{children:[Object(p.jsx)(bi,{cardMeta:{title:"Python Packages Licenses"},cardBody:Object(p.jsx)(Ni,{metric:null===d||void 0===d?void 0:d.licenses})})," "]}):void 0]})},Qi=function(){var e=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.a.get(ne+"/analyze/"+t,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ji=function(){var e=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.a.get(ne+"/analyze/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xi=function(e){var t=e.analysis_id;return Object(p.jsxs)("div",{children:[' "',t,'" not found']})};var Zi=function(){var e,t,n,i,r=Object(E.h)().analysis_id,o=Object(E.f)().state,c=Object(E.g)(),s=function(e,t){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},t),{},{enabled:!!e,queryKey:["ImageDocument",e],queryFn:function(){return Qi(e)}}))}(r,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),d=function(e,t){return Object(l.useQuery)(Object(y.a)(Object(y.a)({},t),{},{enabled:!!e,queryKey:["ImageLogs",e],queryFn:function(){return Ji(e)}}))}(r,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!(null===(e=s.data)||void 0===e||null===(t=e.data)||void 0===t||!t.status)&&1e4}}),u=function(e){var t=Dn(e),n=Mn(e);return Object(a.useMemo)((function(){var e={dependencies:null,licenses:null};return t&&(e.dependencies=t),n&&(e.licenses=n),e}),[t,n])}(ja(Object(a.useMemo)((function(){var e,t;if(null!==(e=s.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.metadata){var n,a,i,r,o,c,l,d={name:null!==(n=null===(a=s.data.data.result)||void 0===a||null===(i=a["operating-system"])||void 0===i?void 0:i.id)&&void 0!==n?n:"rhel",version:null!==(r=null===(o=s.data.data.result)||void 0===o||null===(c=o["operating-system"])||void 0===c||null===(l=c.version_id)||void 0===l?void 0:l.split(".")[0])&&void 0!==r?r:"8",python_version:s.data.data.metadata.python.major+"."+s.data.data.metadata.python.minor};return function(e,t){return e.map((function(e){return{name:e.package_name,version:e.package_version,index:"https://pypi.org/simple",os_name:t.name,os_version:t.version,python_version:t.python_version}}))}(s.data.data.result["python-packages"],d)}}),[s.data])));if(null!==s&&void 0!==s&&s.isLoading)return Object(p.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(p.jsx)(Ce.a,{})});if(null===s||void 0===s||!s.data){var j=null===o||void 0===o?void 0:o.image_name;return j?(oe(j).then((function(e){c("/image/"+e.data.analysis_id,{state:{image_name:j}})})),Object(p.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(p.jsx)(Ce.a,{})})):Object(p.jsx)("div",{"data-testid":"image-not-loaded",children:Object(p.jsx)(Ta,{children:Object(p.jsx)(Xi,{analysis_id:r})})})}return Object(p.jsx)("div",{"data-testid":"image-loaded",children:Object(p.jsxs)(Ta,{goHome:!0,children:[Object(p.jsx)(Fi,{imageDocument:null===(e=s.data)||void 0===e?void 0:e.data,logs:null===(t=d.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.log}),Object(p.jsx)(Yi,{metrics:u,imageDocument:null===(i=s.data)||void 0===i?void 0:i.data})]})})},$i=function(){return Object(p.jsx)(P.a,{basename:"/search-stage",children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{path:"/",element:Object(p.jsx)(Qe,{})}),Object(p.jsx)(E.b,{path:"advise/:analysis_id/*",element:Object(p.jsx)(oi,{})}),Object(p.jsx)(E.b,{path:"package/:package_name/*",element:Object(p.jsx)(Si,{})}),Object(p.jsx)(E.b,{path:"image/:analysis_id/*",element:Object(p.jsx)(Zi,{})}),Object(p.jsx)(E.b,{path:"*",element:Object(p.jsx)(Je,{})})]})})};var er=function(){return Object(p.jsx)(I,{children:Object(p.jsx)($i,{})})};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(er,{})}),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.f0f1757c.chunk.js.map